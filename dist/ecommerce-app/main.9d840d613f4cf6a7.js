"use strict";(self.webpackChunkecommerce_app=self.webpackChunkecommerce_app||[]).push([[179],{2011:(lt,be,k)=>{k.d(be,{Dh:()=>de,GT:()=>ue,cc:()=>Se,hO:()=>Ue,on:()=>z,pX:()=>ae,xv:()=>pe});var p=k(4650),B=k(9260),N=k(2122);lt=k.hmd(lt);const ne=["ngOnDestroy"],ae=(Ee,we,Re,Pe={})=>new Proxy(Ee,{get:(Ne,De)=>Re.runOutsideAngular(()=>{var He;if(Ee[De])return!(null===(He=Pe?.spy)||void 0===He)&&He.get&&Pe.spy.get(De,Ee[De]),Ee[De];if(ne.indexOf(De)>-1)return()=>{};const X=we.toPromise().then(ce=>{const _e=ce&&ce[De];return"function"==typeof _e?_e.bind(ce):_e&&_e.then?_e.then(K=>Re.run(()=>K)):Re.run(()=>_e)});return new Proxy(()=>{},{get:(ce,_e)=>X[_e],apply:(ce,_e,K)=>X.then(Y=>{var he;const re=Y&&Y(...K);return!(null===(he=Pe?.spy)||void 0===he)&&he.apply&&Pe.spy.apply(De,K,re),re})})})}),ue=(Ee,we)=>{we.forEach(Re=>{Object.getOwnPropertyNames(Re.prototype||Re).forEach(Pe=>{Object.defineProperty(Ee.prototype,Pe,Object.getOwnPropertyDescriptor(Re.prototype||Re,Pe))})})};class me{constructor(we){return we}}const de=new p.OlP("angularfire2.app.options"),pe=new p.OlP("angularfire2.app.name");function z(Ee,we,Re){const Ne="object"==typeof Re&&Re||{};Ne.name=Ne.name||"string"==typeof Re&&Re||"[DEFAULT]";const He=B.Z.apps.filter(X=>X&&X.name===Ne.name)[0]||we.runOutsideAngular(()=>B.Z.initializeApp(Ee,Ne));try{JSON.stringify(Ee)!==JSON.stringify(He.options)&&H("error",`${He.name} Firebase App already initialized with different options${lt.hot?", you may need to reload as Firebase is not HMR aware.":"."}`)}catch{}return new me(He)}const H=(Ee,...we)=>{(0,p.X6Q)()&&typeof console<"u"&&console[Ee](...we)},Q={provide:me,useFactory:z,deps:[de,p.R0b,[new p.FiY,pe]]};let Ue=(()=>{class Ee{constructor(Re){B.Z.registerVersion("angularfire",N.q4.full,"core"),B.Z.registerVersion("angularfire",N.q4.full,"app-compat"),B.Z.registerVersion("angular",p.q4F.full,Re.toString())}static initializeApp(Re,Pe){return{ngModule:Ee,providers:[{provide:de,useValue:Re},{provide:pe,useValue:Pe}]}}}return Ee.\u0275fac=function(Re){return new(Re||Ee)(p.LFG(p.Lbi))},Ee.\u0275mod=p.oAB({type:Ee}),Ee.\u0275inj=p.cJS({providers:[Q]}),Ee})();function Se(Ee,we,Re,Pe,Ne){const[,De,He]=globalThis.\u0275AngularfireInstanceCache.find(X=>X[0]===Ee)||[];if(De)return function ze(Ee,we){try{return Ee.toString()===we.toString()}catch{return Ee===we}}(Ne,He)||(ge("error",`${we} was already initialized on the ${Re} Firebase App with different settings.${nt?" You may need to reload as Firebase is not HMR aware.":""}`),ge("warn",{is:Ne,was:He})),De;{const X=Pe();return globalThis.\u0275AngularfireInstanceCache.push([Ee,X,Ne]),X}}const nt=!!lt.hot,ge=(Ee,...we)=>{(0,p.X6Q)()&&typeof console<"u"&&console[Ee](...we)};globalThis.\u0275AngularfireInstanceCache||(globalThis.\u0275AngularfireInstanceCache=[])},2122:(lt,be,k)=>{k.d(be,{q4:()=>pp,iC:()=>aa,HU:()=>Ro,vb:()=>Qe,JM:()=>no,u3:()=>_t});var p=k(4650),B=k(259),N=k(5861),ne=k(9681),ae=k(2090),ue=k(4859),me=k(1877),de=k(8766);const pe="@firebase/installations",z="0.6.0",Q=`w:${z}`,Ue="FIS_v2",we=new ae.LL("installations","Installations",{"missing-app-config-values":'Missing App configuration value: "{$valueName}"',"not-registered":"Firebase Installation is not registered.","installation-not-found":"Firebase Installation not found.","request-failed":'{$requestName} request failed with error "{$serverCode} {$serverStatus}: {$serverMessage}"',"app-offline":"Could not process request. Application offline.","delete-pending-registration":"Can't delete installation while there is a pending registration request."});function Re(D){return D instanceof ae.ZR&&D.code.includes("request-failed")}function Pe({projectId:D}){return`https://firebaseinstallations.googleapis.com/v1/projects/${D}/installations`}function Ne(D){return{token:D.token,requestStatus:2,expiresIn:Y(D.expiresIn),creationTime:Date.now()}}function De(D,C){return He.apply(this,arguments)}function He(){return(He=(0,N.Z)(function*(D,C){const V=(yield C.json()).error;return we.create("request-failed",{requestName:D,serverCode:V.code,serverMessage:V.message,serverStatus:V.status})})).apply(this,arguments)}function X({apiKey:D}){return new Headers({"Content-Type":"application/json",Accept:"application/json","x-goog-api-key":D})}function ce(D,{refreshToken:C}){const x=X(D);return x.append("Authorization",function he(D){return`${Ue} ${D}`}(C)),x}function _e(D){return K.apply(this,arguments)}function K(){return(K=(0,N.Z)(function*(D){const C=yield D();return C.status>=500&&C.status<600?D():C})).apply(this,arguments)}function Y(D){return Number(D.replace("s","000"))}function re(D,C){return Le.apply(this,arguments)}function Le(){return(Le=(0,N.Z)(function*({appConfig:D,heartbeatServiceProvider:C},{fid:x}){const V=Pe(D),G=X(D),ie=C.getImmediate({optional:!0});if(ie){const ot=yield ie.getHeartbeatsHeader();ot&&G.append("x-firebase-client",ot)}const et={method:"POST",headers:G,body:JSON.stringify({fid:x,authVersion:Ue,appId:D.appId,sdkVersion:Q})},rt=yield _e(()=>fetch(V,et));if(rt.ok){const ot=yield rt.json();return{fid:ot.fid||x,registrationStatus:2,refreshToken:ot.refreshToken,authToken:Ne(ot.authToken)}}throw yield De("Create Installation",rt)})).apply(this,arguments)}function Fe(D){return new Promise(C=>{setTimeout(C,D)})}const Jt=/^[cdef][\w-]{21}$/;function It(){try{const D=new Uint8Array(17);(self.crypto||self.msCrypto).getRandomValues(D),D[0]=112+D[0]%16;const x=function Vt(D){return function dt(D){return btoa(String.fromCharCode(...D)).replace(/\+/g,"-").replace(/\//g,"_")}(D).substr(0,22)}(D);return Jt.test(x)?x:""}catch{return""}}function pt(D){return`${D.appName}!${D.appId}`}const Xt=new Map;function ir(D,C){const x=pt(D);Ei(x,C),function Yr(D,C){const x=function En(){return!gr&&"BroadcastChannel"in self&&(gr=new BroadcastChannel("[Firebase] FID Change"),gr.onmessage=D=>{Ei(D.data.key,D.data.fid)}),gr}();x&&x.postMessage({key:D,fid:C}),function Ui(){0===Xt.size&&gr&&(gr.close(),gr=null)}()}(x,C)}function Ei(D,C){const x=Xt.get(D);if(x)for(const V of x)V(C)}let gr=null;const Fn="firebase-installations-store";let Qr=null;function bi(){return Qr||(Qr=(0,de.X3)("firebase-installations-database",1,{upgrade:(D,C)=>{0===C&&D.createObjectStore(Fn)}})),Qr}function ln(D,C){return sr.apply(this,arguments)}function sr(){return(sr=(0,N.Z)(function*(D,C){const x=pt(D),G=(yield bi()).transaction(Fn,"readwrite"),ie=G.objectStore(Fn),Me=yield ie.get(x);return yield ie.put(C,x),yield G.done,(!Me||Me.fid!==C.fid)&&ir(D,C.fid),C})).apply(this,arguments)}function Je(D){return or.apply(this,arguments)}function or(){return(or=(0,N.Z)(function*(D){const C=pt(D),V=(yield bi()).transaction(Fn,"readwrite");yield V.objectStore(Fn).delete(C),yield V.done})).apply(this,arguments)}function mr(D,C){return Ln.apply(this,arguments)}function Ln(){return(Ln=(0,N.Z)(function*(D,C){const x=pt(D),G=(yield bi()).transaction(Fn,"readwrite"),ie=G.objectStore(Fn),Me=yield ie.get(x),et=C(Me);return void 0===et?yield ie.delete(x):yield ie.put(et,x),yield G.done,et&&(!Me||Me.fid!==et.fid)&&ir(D,et.fid),et})).apply(this,arguments)}function Un(D){return Lr.apply(this,arguments)}function Lr(){return(Lr=(0,N.Z)(function*(D){let C;const x=yield mr(D.appConfig,V=>{const G=bt(V),ie=ht(D,G);return C=ie.registrationPromise,ie.installationEntry});return""===x.fid?{installationEntry:yield C}:{installationEntry:x,registrationPromise:C}})).apply(this,arguments)}function bt(D){return Yn(D||{fid:It(),registrationStatus:0})}function ht(D,C){if(0===C.registrationStatus){if(!navigator.onLine)return{installationEntry:C,registrationPromise:Promise.reject(we.create("app-offline"))};const x={fid:C.fid,registrationStatus:1,registrationTime:Date.now()},V=function Et(D,C){return hn.apply(this,arguments)}(D,x);return{installationEntry:x,registrationPromise:V}}return 1===C.registrationStatus?{installationEntry:C,registrationPromise:Kn(D)}:{installationEntry:C}}function hn(){return(hn=(0,N.Z)(function*(D,C){try{const x=yield re(D,C);return ln(D.appConfig,x)}catch(x){throw Re(x)&&409===x.customData.serverCode?yield Je(D.appConfig):yield ln(D.appConfig,{fid:C.fid,registrationStatus:0}),x}})).apply(this,arguments)}function Kn(D){return Dn.apply(this,arguments)}function Dn(){return(Dn=(0,N.Z)(function*(D){let C=yield Xr(D.appConfig);for(;1===C.registrationStatus;)yield Fe(100),C=yield Xr(D.appConfig);if(0===C.registrationStatus){const{installationEntry:x,registrationPromise:V}=yield Un(D);return V||x}return C})).apply(this,arguments)}function Xr(D){return mr(D,C=>{if(!C)throw we.create("installation-not-found");return Yn(C)})}function Yn(D){return function Ci(D){return 1===D.registrationStatus&&D.registrationTime+1e4<Date.now()}(D)?{fid:D.fid,registrationStatus:0}:D}function Pt(D,C){return Ti.apply(this,arguments)}function Ti(){return(Ti=(0,N.Z)(function*({appConfig:D,heartbeatServiceProvider:C},x){const V=jt(D,x),G=ce(D,x),ie=C.getImmediate({optional:!0});if(ie){const ot=yield ie.getHeartbeatsHeader();ot&&G.append("x-firebase-client",ot)}const et={method:"POST",headers:G,body:JSON.stringify({installation:{sdkVersion:Q,appId:D.appId}})},rt=yield _e(()=>fetch(V,et));if(rt.ok)return Ne(yield rt.json());throw yield De("Generate Auth Token",rt)})).apply(this,arguments)}function jt(D,{fid:C}){return`${Pe(D)}/${C}/authTokens:generate`}function br(D){return Mn.apply(this,arguments)}function Mn(){return(Mn=(0,N.Z)(function*(D,C=!1){let x;const V=yield mr(D.appConfig,ie=>{if(!Kt(ie))throw we.create("not-registered");const Me=ie.authToken;if(!C&&j(Me))return ie;if(1===Me.requestStatus)return x=$e(D,C),ie;{if(!navigator.onLine)throw we.create("app-offline");const et=Z(ie);return x=yt(D,et),et}});return x?yield x:V.authToken})).apply(this,arguments)}function $e(D,C){return Ie.apply(this,arguments)}function Ie(){return(Ie=(0,N.Z)(function*(D,C){let x=yield Ke(D.appConfig);for(;1===x.authToken.requestStatus;)yield Fe(100),x=yield Ke(D.appConfig);const V=x.authToken;return 0===V.requestStatus?br(D,C):V})).apply(this,arguments)}function Ke(D){return mr(D,C=>{if(!Kt(C))throw we.create("not-registered");return function U(D){return 1===D.requestStatus&&D.requestTime+1e4<Date.now()}(C.authToken)?Object.assign(Object.assign({},C),{authToken:{requestStatus:0}}):C})}function yt(D,C){return wt.apply(this,arguments)}function wt(){return(wt=(0,N.Z)(function*(D,C){try{const x=yield Pt(D,C),V=Object.assign(Object.assign({},C),{authToken:x});return yield ln(D.appConfig,V),x}catch(x){if(!Re(x)||401!==x.customData.serverCode&&404!==x.customData.serverCode){const V=Object.assign(Object.assign({},C),{authToken:{requestStatus:0}});yield ln(D.appConfig,V)}else yield Je(D.appConfig);throw x}})).apply(this,arguments)}function Kt(D){return void 0!==D&&2===D.registrationStatus}function j(D){return 2===D.requestStatus&&!function $(D){const C=Date.now();return C<D.creationTime||D.creationTime+D.expiresIn<C+36e5}(D)}function Z(D){const C={requestStatus:1,requestTime:Date.now()};return Object.assign(Object.assign({},D),{authToken:C})}function L(){return(L=(0,N.Z)(function*(D){const C=D,{installationEntry:x,registrationPromise:V}=yield Un(C);return V?V.catch(console.error):br(C).catch(console.error),x.fid})).apply(this,arguments)}function Ae(){return(Ae=(0,N.Z)(function*(D,C=!1){const x=D;return yield it(x),(yield br(x,C)).token})).apply(this,arguments)}function it(D){return We.apply(this,arguments)}function We(){return(We=(0,N.Z)(function*(D){const{registrationPromise:C}=yield Un(D);C&&(yield C)})).apply(this,arguments)}function $u(D){return we.create("missing-app-config-values",{valueName:D})}const ju="installations",fo=D=>{const C=D.getProvider("app").getImmediate(),x=function ho(D){if(!D||!D.options)throw $u("App Configuration");if(!D.name)throw $u("App Name");const C=["projectId","apiKey","appId"];for(const x of C)if(!D.options[x])throw $u(x);return{appName:D.name,projectId:D.options.projectId,apiKey:D.options.apiKey,appId:D.options.appId}}(C);return{app:C,appConfig:x,heartbeatServiceProvider:(0,ne._getProvider)(C,"heartbeat"),_delete:()=>Promise.resolve()}},ll=D=>{const C=D.getProvider("app").getImmediate(),x=(0,ne._getProvider)(C,ju).getImmediate();return{getId:()=>function R(D){return L.apply(this,arguments)}(x),getToken:G=>function se(D){return Ae.apply(this,arguments)}(x,G)}};(function Hu(){(0,ne._registerComponent)(new ue.wA(ju,fo,"PUBLIC")),(0,ne._registerComponent)(new ue.wA("installations-internal",ll,"PRIVATE"))})(),(0,ne.registerVersion)(pe,z),(0,ne.registerVersion)(pe,z,"esm2017");const Ta="@firebase/remote-config",Rn=new ae.LL("remoteconfig","Remote Config",{"registration-window":"Undefined window object. This SDK only supports usage in a browser environment.","registration-project-id":"Undefined project identifier. Check Firebase app initialization.","registration-api-key":"Undefined API key. Check Firebase app initialization.","registration-app-id":"Undefined app identifier. Check Firebase app initialization.","storage-open":"Error thrown when opening storage. Original error: {$originalErrorMessage}.","storage-get":"Error thrown when reading from storage. Original error: {$originalErrorMessage}.","storage-set":"Error thrown when writing to storage. Original error: {$originalErrorMessage}.","storage-delete":"Error thrown when deleting from storage. Original error: {$originalErrorMessage}.","fetch-client-network":"Fetch client failed to connect to a network. Check Internet connection. Original error: {$originalErrorMessage}.","fetch-timeout":'The config fetch request timed out.  Configure timeout using "fetchTimeoutMillis" SDK setting.',"fetch-throttle":'The config fetch request timed out while in an exponential backoff state. Configure timeout using "fetchTimeoutMillis" SDK setting. Unix timestamp in milliseconds when fetch request throttling ends: {$throttleEndTimeMillis}.',"fetch-client-parse":"Fetch client could not parse response. Original error: {$originalErrorMessage}.","fetch-status":"Fetch server returned an HTTP error status. HTTP status: {$httpStatus}.","indexed-db-unavailable":"Indexed DB is not supported by current browser"});class Is{constructor(C,x,V,G){this.client=C,this.storage=x,this.storageCache=V,this.logger=G}isCachedDataFresh(C,x){if(!x)return this.logger.debug("Config fetch cache check. Cache unpopulated."),!1;const V=Date.now()-x,G=V<=C;return this.logger.debug(`Config fetch cache check. Cache age millis: ${V}. Cache max age millis (minimumFetchIntervalMillis setting): ${C}. Is cache hit: ${G}.`),G}fetch(C){var x=this;return(0,N.Z)(function*(){const[V,G]=yield Promise.all([x.storage.getLastSuccessfulFetchTimestampMillis(),x.storage.getLastSuccessfulFetchResponse()]);if(G&&x.isCachedDataFresh(C.cacheMaxAgeMillis,V))return G;C.eTag=G&&G.eTag;const ie=yield x.client.fetch(C),Me=[x.storageCache.setLastSuccessfulFetchTimestampMillis(Date.now())];return 200===ie.status&&Me.push(x.storage.setLastSuccessfulFetchResponse(ie)),yield Promise.all(Me),ie})()}}function Ur(D=navigator){return D.languages&&D.languages[0]||D.language}class ci{constructor(C,x,V,G,ie,Me){this.firebaseInstallations=C,this.sdkVersion=x,this.namespace=V,this.projectId=G,this.apiKey=ie,this.appId=Me}fetch(C){var x=this;return(0,N.Z)(function*(){const[V,G]=yield Promise.all([x.firebaseInstallations.getId(),x.firebaseInstallations.getToken()]),Me=`${window.FIREBASE_REMOTE_CONFIG_URL_BASE||"https://firebaseremoteconfig.googleapis.com"}/v1/projects/${x.projectId}/namespaces/${x.namespace}:fetch?key=${x.apiKey}`,et={"Content-Type":"application/json","Content-Encoding":"gzip","If-None-Match":C.eTag||"*"},rt={sdk_version:x.sdkVersion,app_instance_id:V,app_instance_id_token:G,app_id:x.appId,language_code:Ur()},ot={method:"POST",headers:et,body:JSON.stringify(rt)},Gt=fetch(Me,ot),St=new Promise(($n,pi)=>{C.signal.addEventListener(()=>{const hr=new Error("The operation was aborted.");hr.name="AbortError",pi(hr)})});let _r;try{yield Promise.race([Gt,St]),_r=yield Gt}catch($n){let pi="fetch-client-network";throw"AbortError"===$n?.name&&(pi="fetch-timeout"),Rn.create(pi,{originalErrorMessage:$n?.message})}let Bn=_r.status;const nu=_r.headers.get("ETag")||void 0;let ua,zi;if(200===_r.status){let $n;try{$n=yield _r.json()}catch(pi){throw Rn.create("fetch-client-parse",{originalErrorMessage:pi?.message})}ua=$n.entries,zi=$n.state}if("INSTANCE_STATE_UNSPECIFIED"===zi?Bn=500:"NO_CHANGE"===zi?Bn=304:("NO_TEMPLATE"===zi||"EMPTY_CONFIG"===zi)&&(ua={}),304!==Bn&&200!==Bn)throw Rn.create("fetch-status",{httpStatus:Bn});return{status:Bn,eTag:nu,config:ua}})()}}class Xi{constructor(C,x){this.client=C,this.storage=x}fetch(C){var x=this;return(0,N.Z)(function*(){const V=(yield x.storage.getThrottleMetadata())||{backoffCount:0,throttleEndTimeMillis:Date.now()};return x.attemptFetch(C,V)})()}attemptFetch(C,{throttleEndTimeMillis:x,backoffCount:V}){var G=this;return(0,N.Z)(function*(){yield function Vr(D,C){return new Promise((x,V)=>{const G=Math.max(C-Date.now(),0),ie=setTimeout(x,G);D.addEventListener(()=>{clearTimeout(ie),V(Rn.create("fetch-throttle",{throttleEndTimeMillis:C}))})})}(C.signal,x);try{const ie=yield G.client.fetch(C);return yield G.storage.deleteThrottleMetadata(),ie}catch(ie){if(!function mn(D){if(!(D instanceof ae.ZR&&D.customData))return!1;const C=Number(D.customData.httpStatus);return 429===C||500===C||503===C||504===C}(ie))throw ie;const Me={throttleEndTimeMillis:Date.now()+(0,ae.$s)(V),backoffCount:V+1};return yield G.storage.setThrottleMetadata(Me),G.attemptFetch(C,Me)}})()}}class Go{constructor(C,x,V,G,ie){this.app=C,this._client=x,this._storageCache=V,this._storage=G,this._logger=ie,this._isInitializationComplete=!1,this.settings={fetchTimeoutMillis:6e4,minimumFetchIntervalMillis:432e5},this.defaultConfig={}}get fetchTimeMillis(){return this._storageCache.getLastSuccessfulFetchTimestampMillis()||-1}get lastFetchStatus(){return this._storageCache.getLastFetchStatus()||"no-fetch-yet"}}function Ji(D,C){const x=D.target.error||void 0;return Rn.create(C,{originalErrorMessage:x&&x?.message})}const li="app_namespace_store";class ei{constructor(C,x,V,G=function Jr(){return new Promise((D,C)=>{try{const x=indexedDB.open("firebase_remote_config",1);x.onerror=V=>{C(Ji(V,"storage-open"))},x.onsuccess=V=>{D(V.target.result)},x.onupgradeneeded=V=>{0===V.oldVersion&&V.target.result.createObjectStore(li,{keyPath:"compositeKey"})}}catch(x){C(Rn.create("storage-open",{originalErrorMessage:x?.message}))}})}()){this.appId=C,this.appName=x,this.namespace=V,this.openDbPromise=G}getLastFetchStatus(){return this.get("last_fetch_status")}setLastFetchStatus(C){return this.set("last_fetch_status",C)}getLastSuccessfulFetchTimestampMillis(){return this.get("last_successful_fetch_timestamp_millis")}setLastSuccessfulFetchTimestampMillis(C){return this.set("last_successful_fetch_timestamp_millis",C)}getLastSuccessfulFetchResponse(){return this.get("last_successful_fetch_response")}setLastSuccessfulFetchResponse(C){return this.set("last_successful_fetch_response",C)}getActiveConfig(){return this.get("active_config")}setActiveConfig(C){return this.set("active_config",C)}getActiveConfigEtag(){return this.get("active_config_etag")}setActiveConfigEtag(C){return this.set("active_config_etag",C)}getThrottleMetadata(){return this.get("throttle_metadata")}setThrottleMetadata(C){return this.set("throttle_metadata",C)}deleteThrottleMetadata(){return this.delete("throttle_metadata")}get(C){var x=this;return(0,N.Z)(function*(){const V=yield x.openDbPromise;return new Promise((G,ie)=>{const et=V.transaction([li],"readonly").objectStore(li),rt=x.createCompositeKey(C);try{const ot=et.get(rt);ot.onerror=Gt=>{ie(Ji(Gt,"storage-get"))},ot.onsuccess=Gt=>{const St=Gt.target.result;G(St?St.value:void 0)}}catch(ot){ie(Rn.create("storage-get",{originalErrorMessage:ot?.message}))}})})()}set(C,x){var V=this;return(0,N.Z)(function*(){const G=yield V.openDbPromise;return new Promise((ie,Me)=>{const rt=G.transaction([li],"readwrite").objectStore(li),ot=V.createCompositeKey(C);try{const Gt=rt.put({compositeKey:ot,value:x});Gt.onerror=St=>{Me(Ji(St,"storage-set"))},Gt.onsuccess=()=>{ie()}}catch(Gt){Me(Rn.create("storage-set",{originalErrorMessage:Gt?.message}))}})})()}delete(C){var x=this;return(0,N.Z)(function*(){const V=yield x.openDbPromise;return new Promise((G,ie)=>{const et=V.transaction([li],"readwrite").objectStore(li),rt=x.createCompositeKey(C);try{const ot=et.delete(rt);ot.onerror=Gt=>{ie(Ji(Gt,"storage-delete"))},ot.onsuccess=()=>{G()}}catch(ot){ie(Rn.create("storage-delete",{originalErrorMessage:ot?.message}))}})})()}createCompositeKey(C){return[this.appId,this.appName,this.namespace,C].join()}}class es{constructor(C){this.storage=C}getLastFetchStatus(){return this.lastFetchStatus}getLastSuccessfulFetchTimestampMillis(){return this.lastSuccessfulFetchTimestampMillis}getActiveConfig(){return this.activeConfig}loadFromStorage(){var C=this;return(0,N.Z)(function*(){const x=C.storage.getLastFetchStatus(),V=C.storage.getLastSuccessfulFetchTimestampMillis(),G=C.storage.getActiveConfig(),ie=yield x;ie&&(C.lastFetchStatus=ie);const Me=yield V;Me&&(C.lastSuccessfulFetchTimestampMillis=Me);const et=yield G;et&&(C.activeConfig=et)})()}setLastFetchStatus(C){return this.lastFetchStatus=C,this.storage.setLastFetchStatus(C)}setLastSuccessfulFetchTimestampMillis(C){return this.lastSuccessfulFetchTimestampMillis=C,this.storage.setLastSuccessfulFetchTimestampMillis(C)}setActiveConfig(C){return this.activeConfig=C,this.storage.setActiveConfig(C)}}function tp(){return Ma.apply(this,arguments)}function Ma(){return(Ma=(0,N.Z)(function*(){if(!(0,ae.hl)())return!1;try{return yield(0,ae.eu)()}catch{return!1}})).apply(this,arguments)}!function qo(){(0,ne._registerComponent)(new ue.wA("remote-config",function D(C,{instanceIdentifier:x}){const V=C.getProvider("app").getImmediate(),G=C.getProvider("installations-internal").getImmediate();if(typeof window>"u")throw Rn.create("registration-window");if(!(0,ae.hl)())throw Rn.create("indexed-db-unavailable");const{projectId:ie,apiKey:Me,appId:et}=V.options;if(!ie)throw Rn.create("registration-project-id");if(!Me)throw Rn.create("registration-api-key");if(!et)throw Rn.create("registration-app-id");const rt=new ei(et,V.name,x=x||"firebase"),ot=new es(rt),Gt=new me.Yd(Ta);Gt.logLevel=me.in.ERROR;const St=new ci(G,ne.SDK_VERSION,x,ie,Me,et),_r=new Xi(St,rt),Bn=new Is(_r,rt,ot,Gt),nu=new Go(V,Bn,ot,rt,Gt);return function vn(D){const C=(0,ae.m9)(D);C._initializePromise||(C._initializePromise=C._storageCache.loadFromStorage().then(()=>{C._isInitializationComplete=!0}))}(nu),nu},"PUBLIC").setMultipleInstances(!0)),(0,ne.registerVersion)(Ta,"0.4.0"),(0,ne.registerVersion)(Ta,"0.4.0","esm2017")}();const ts="/firebase-messaging-sw.js",mo="/firebase-cloud-messaging-push-scope",yo="BDOU99-h67HcA6JeFXHbSNMu7e2yNNu3RzoMj8TM4W88jITfq7ZmPvIM1Iv-4_l2LxQcYwhqby2xGpWwzjfAnG4",eh="google.c.a.c_id",rp="google.c.a.c_l",dl="google.c.a.ts",js="google.c.a.e";var Hs=(()=>{return(D=Hs||(Hs={})).PUSH_RECEIVED="push-received",D.NOTIFICATION_CLICKED="notification-clicked",Hs;var D})();function ns(D){const C=new Uint8Array(D);return btoa(String.fromCharCode(...C)).replace(/=/g,"").replace(/\+/g,"-").replace(/\//g,"_")}function hl(D){const x=(D+"=".repeat((4-D.length%4)%4)).replace(/\-/g,"+").replace(/_/g,"/"),V=atob(x),G=new Uint8Array(V.length);for(let ie=0;ie<V.length;++ie)G[ie]=V.charCodeAt(ie);return G}const Ra="fcm_token_details_db",Na="fcm_token_object_Store";function th(D){return Zo.apply(this,arguments)}function Zo(){return Zo=(0,N.Z)(function*(D){if("databases"in indexedDB&&!(yield indexedDB.databases()).map(ie=>ie.name).includes(Ra))return null;let C=null;return(yield(0,de.X3)(Ra,5,{upgrade:(V=(0,N.Z)(function*(G,ie,Me,et){var rt;if(ie<2||!G.objectStoreNames.contains(Na))return;const ot=et.objectStore(Na),Gt=yield ot.index("fcmSenderId").get(D);if(yield ot.clear(),Gt)if(2===ie){const St=Gt;if(!St.auth||!St.p256dh||!St.endpoint)return;C={token:St.fcmToken,createTime:null!==(rt=St.createTime)&&void 0!==rt?rt:Date.now(),subscriptionOptions:{auth:St.auth,p256dh:St.p256dh,endpoint:St.endpoint,swScope:St.swScope,vapidKey:"string"==typeof St.vapidKey?St.vapidKey:ns(St.vapidKey)}}}else if(3===ie){const St=Gt;C={token:St.fcmToken,createTime:St.createTime,subscriptionOptions:{auth:ns(St.auth),p256dh:ns(St.p256dh),endpoint:St.endpoint,swScope:St.swScope,vapidKey:ns(St.vapidKey)}}}else if(4===ie){const St=Gt;C={token:St.fcmToken,createTime:St.createTime,subscriptionOptions:{auth:ns(St.auth),p256dh:ns(St.p256dh),endpoint:St.endpoint,swScope:St.swScope,vapidKey:ns(St.vapidKey)}}}}),function(ie,Me,et,rt){return V.apply(this,arguments)})})).close(),yield(0,de.Lj)(Ra),yield(0,de.Lj)("fcm_vapid_details_db"),yield(0,de.Lj)("undefined"),fl(C)?C:null;var V}),Zo.apply(this,arguments)}function fl(D){if(!D||!D.subscriptionOptions)return!1;const{subscriptionOptions:C}=D;return"number"==typeof D.createTime&&D.createTime>0&&"string"==typeof D.token&&D.token.length>0&&"string"==typeof C.auth&&C.auth.length>0&&"string"==typeof C.p256dh&&C.p256dh.length>0&&"string"==typeof C.endpoint&&C.endpoint.length>0&&"string"==typeof C.swScope&&C.swScope.length>0&&"string"==typeof C.vapidKey&&C.vapidKey.length>0}const Ws="firebase-messaging-store";let Gs=null;function qs(){return Gs||(Gs=(0,de.X3)("firebase-messaging-database",1,{upgrade:(D,C)=>{0===C&&D.createObjectStore(Ws)}})),Gs}function Pa(D){return Ko.apply(this,arguments)}function Ko(){return(Ko=(0,N.Z)(function*(D){const C=Xo(D),V=yield(yield qs()).transaction(Ws).objectStore(Ws).get(C);if(V)return V;{const G=yield th(D.appConfig.senderId);if(G)return yield Zs(D,G),G}})).apply(this,arguments)}function Zs(D,C){return Oa.apply(this,arguments)}function Oa(){return(Oa=(0,N.Z)(function*(D,C){const x=Xo(D),G=(yield qs()).transaction(Ws,"readwrite");return yield G.objectStore(Ws).put(C,x),yield G.done,C})).apply(this,arguments)}function Yo(D){return Qo.apply(this,arguments)}function Qo(){return(Qo=(0,N.Z)(function*(D){const C=Xo(D),V=(yield qs()).transaction(Ws,"readwrite");yield V.objectStore(Ws).delete(C),yield V.done})).apply(this,arguments)}function Xo({appConfig:D}){return D.appId}const Nn=new ae.LL("messaging","Messaging",{"missing-app-config-values":'Missing App configuration value: "{$valueName}"',"only-available-in-window":"This method is available in a Window context.","only-available-in-sw":"This method is available in a service worker context.","permission-default":"The notification permission was not granted and dismissed instead.","permission-blocked":"The notification permission was not granted and blocked instead.","unsupported-browser":"This browser doesn't support the API's required to use the Firebase SDK.","indexed-db-unsupported":"This browser doesn't support indexedDb.open() (ex. Safari iFrame, Firefox Private Browsing, etc)","failed-service-worker-registration":"We are unable to register the default service worker. {$browserErrorMessage}","token-subscribe-failed":"A problem occurred while subscribing the user to FCM: {$errorInfo}","token-subscribe-no-token":"FCM returned no token when subscribing the user to push.","token-unsubscribe-failed":"A problem occurred while unsubscribing the user from FCM: {$errorInfo}","token-update-failed":"A problem occurred while updating the user from FCM: {$errorInfo}","token-update-no-token":"FCM returned no token when updating the user to push.","use-sw-after-get-token":"The useServiceWorker() method may only be called once and must be called before calling getToken() to ensure your service worker is used.","invalid-sw-registration":"The input to useServiceWorker() must be a ServiceWorkerRegistration.","invalid-bg-handler":"The input to setBackgroundMessageHandler() must be a function.","invalid-vapid-key":"The public VAPID key must be a string.","use-vapid-key-after-get-token":"The usePublicVapidKey() method may only be called once and must be called before calling getToken() to ensure your VAPID key is used."});function ka(D,C){return Sn.apply(this,arguments)}function Sn(){return(Sn=(0,N.Z)(function*(D,C){const x=yield Vi(D),V=Ua(C),G={method:"POST",headers:x,body:JSON.stringify(V)};let ie;try{ie=yield(yield fetch(La(D.appConfig),G)).json()}catch(Me){throw Nn.create("token-subscribe-failed",{errorInfo:Me?.toString()})}if(ie.error)throw Nn.create("token-subscribe-failed",{errorInfo:ie.error.message});if(!ie.token)throw Nn.create("token-subscribe-no-token");return ie.token})).apply(this,arguments)}function Jo(D,C){return ws.apply(this,arguments)}function ws(){return(ws=(0,N.Z)(function*(D,C){const x=yield Vi(D),V=Ua(C.subscriptionOptions),G={method:"PATCH",headers:x,body:JSON.stringify(V)};let ie;try{ie=yield(yield fetch(`${La(D.appConfig)}/${C.token}`,G)).json()}catch(Me){throw Nn.create("token-update-failed",{errorInfo:Me?.toString()})}if(ie.error)throw Nn.create("token-update-failed",{errorInfo:ie.error.message});if(!ie.token)throw Nn.create("token-update-no-token");return ie.token})).apply(this,arguments)}function Br(D,C){return Fa.apply(this,arguments)}function Fa(){return(Fa=(0,N.Z)(function*(D,C){const V={method:"DELETE",headers:yield Vi(D)};try{const ie=yield(yield fetch(`${La(D.appConfig)}/${C}`,V)).json();if(ie.error)throw Nn.create("token-unsubscribe-failed",{errorInfo:ie.error.message})}catch(G){throw Nn.create("token-unsubscribe-failed",{errorInfo:G?.toString()})}})).apply(this,arguments)}function La({projectId:D}){return`https://fcmregistrations.googleapis.com/v1/projects/${D}/registrations`}function Vi(D){return Xn.apply(this,arguments)}function Xn(){return(Xn=(0,N.Z)(function*({appConfig:D,installations:C}){const x=yield C.getToken();return new Headers({"Content-Type":"application/json",Accept:"application/json","x-goog-api-key":D.apiKey,"x-goog-firebase-installations-auth":`FIS ${x}`})})).apply(this,arguments)}function Ua({p256dh:D,auth:C,endpoint:x,vapidKey:V}){const G={web:{endpoint:x,auth:C,p256dh:D}};return V!==yo&&(G.web.applicationPubKey=V),G}const vo=6048e5;function nh(D){return di.apply(this,arguments)}function di(){return(di=(0,N.Z)(function*(D){const C=yield rh(D.swRegistration,D.vapidKey),x={vapidKey:D.vapidKey,swScope:D.swRegistration.scope,endpoint:C.endpoint,auth:ns(C.getKey("auth")),p256dh:ns(C.getKey("p256dh"))},V=yield Pa(D.firebaseDependencies);if(V){if(gl(V.subscriptionOptions,x))return Date.now()>=V.createTime+vo?Rt(D,{token:V.token,createTime:Date.now(),subscriptionOptions:x}):V.token;try{yield Br(D.firebaseDependencies,V.token)}catch(G){console.warn(G)}return pl(D.firebaseDependencies,x)}return pl(D.firebaseDependencies,x)})).apply(this,arguments)}function qu(D){return Ks.apply(this,arguments)}function Ks(){return(Ks=(0,N.Z)(function*(D){const C=yield Pa(D.firebaseDependencies);C&&(yield Br(D.firebaseDependencies,C.token),yield Yo(D.firebaseDependencies));const x=yield D.swRegistration.pushManager.getSubscription();return!x||x.unsubscribe()})).apply(this,arguments)}function Rt(D,C){return _o.apply(this,arguments)}function _o(){return(_o=(0,N.Z)(function*(D,C){try{const x=yield Jo(D.firebaseDependencies,C),V=Object.assign(Object.assign({},C),{token:x,createTime:Date.now()});return yield Zs(D.firebaseDependencies,V),x}catch(x){throw yield qu(D),x}})).apply(this,arguments)}function pl(D,C){return ea.apply(this,arguments)}function ea(){return(ea=(0,N.Z)(function*(D,C){const V={token:yield ka(D,C),createTime:Date.now(),subscriptionOptions:C};return yield Zs(D,V),V.token})).apply(this,arguments)}function rh(D,C){return Va.apply(this,arguments)}function Va(){return(Va=(0,N.Z)(function*(D,C){return(yield D.pushManager.getSubscription())||D.pushManager.subscribe({userVisibleOnly:!0,applicationServerKey:hl(C)})})).apply(this,arguments)}function gl(D,C){return C.vapidKey===D.vapidKey&&C.endpoint===D.endpoint&&C.auth===D.auth&&C.p256dh===D.p256dh}function bn(D){const C={from:D.from,collapseKey:D.collapse_key,messageId:D.fcmMessageId};return function sp(D,C){if(!C.notification)return;D.notification={};const x=C.notification.title;x&&(D.notification.title=x);const V=C.notification.body;V&&(D.notification.body=V);const G=C.notification.image;G&&(D.notification.image=G);const ie=C.notification.icon;ie&&(D.notification.icon=ie)}(C,D),function xe(D,C){!C.data||(D.data=C.data)}(C,D),function Yt(D,C){var x,V,G,ie,Me;if(!(C.fcmOptions||null!==(x=C.notification)&&void 0!==x&&x.click_action))return;D.fcmOptions={};const et=null!==(G=null===(V=C.fcmOptions)||void 0===V?void 0:V.link)&&void 0!==G?G:null===(ie=C.notification)||void 0===ie?void 0:ie.click_action;et&&(D.fcmOptions.link=et);const rt=null===(Me=C.fcmOptions)||void 0===Me?void 0:Me.analytics_label;rt&&(D.fcmOptions.analyticsLabel=rt)}(C,D),C}function ih(D){return"object"==typeof D&&!!D&&eh in D}function ml(D,C){const x=[];for(let V=0;V<D.length;V++)x.push(D.charAt(V)),V<C.length&&x.push(C.charAt(V));return x.join("")}function Ba(D){return Nn.create("missing-app-config-values",{valueName:D})}ml("hts/frbslgigp.ogepscmv/ieo/eaylg","tp:/ieaeogn-agolai.o/1frlglgc/o"),ml("AzSCbw63g1R0nCw85jG8","Iaya3yLKwmgvh7cF0q4");class Io{constructor(C,x,V){this.deliveryMetricsExportedToBigQueryEnabled=!1,this.onBackgroundMessageHandler=null,this.onMessageHandler=null,this.logEvents=[],this.isLogServiceStarted=!1;const G=function Jn(D){if(!D||!D.options)throw Ba("App Configuration Object");if(!D.name)throw Ba("App Name");const C=["projectId","apiKey","appId","messagingSenderId"],{options:x}=D;for(const V of C)if(!x[V])throw Ba(V);return{appName:D.name,projectId:x.projectId,apiKey:x.apiKey,appId:x.appId,senderId:x.messagingSenderId}}(C);this.firebaseDependencies={app:C,appConfig:G,installations:x,analyticsProvider:V}}_delete(){return Promise.resolve()}}function Bi(D){return wo.apply(this,arguments)}function wo(){return(wo=(0,N.Z)(function*(D){try{D.swRegistration=yield navigator.serviceWorker.register(ts,{scope:mo}),D.swRegistration.update().catch(()=>{})}catch(C){throw Nn.create("failed-service-worker-registration",{browserErrorMessage:C?.message})}})).apply(this,arguments)}function $a(D,C){return ta.apply(this,arguments)}function ta(){return(ta=(0,N.Z)(function*(D,C){if(!C&&!D.swRegistration&&(yield Bi(D)),C||!D.swRegistration){if(!(C instanceof ServiceWorkerRegistration))throw Nn.create("invalid-sw-registration");D.swRegistration=C}})).apply(this,arguments)}function op(D,C){return Es.apply(this,arguments)}function Es(){return(Es=(0,N.Z)(function*(D,C){C?D.vapidKey=C:D.vapidKey||(D.vapidKey=yo)})).apply(this,arguments)}function hi(){return(hi=(0,N.Z)(function*(D,C){if(!navigator)throw Nn.create("only-available-in-window");if("default"===Notification.permission&&(yield Notification.requestPermission()),"granted"!==Notification.permission)throw Nn.create("permission-blocked");return yield op(D,C?.vapidKey),yield $a(D,C?.serviceWorkerRegistration),nh(D)})).apply(this,arguments)}function sh(D,C,x){return Mi.apply(this,arguments)}function Mi(){return(Mi=(0,N.Z)(function*(D,C,x){const V=$i(C);(yield D.firebaseDependencies.analyticsProvider.get()).logEvent(V,{message_id:x[eh],message_name:x[rp],message_time:x[dl],message_device_time:Math.floor(Date.now()/1e3)})})).apply(this,arguments)}function $i(D){switch(D){case Hs.NOTIFICATION_CLICKED:return"notification_open";case Hs.PUSH_RECEIVED:return"notification_foreground";default:throw new Error}}function ja(){return(ja=(0,N.Z)(function*(D,C){const x=C.data;if(!x.isFirebaseMessaging)return;D.onMessageHandler&&x.messageType===Hs.PUSH_RECEIVED&&("function"==typeof D.onMessageHandler?D.onMessageHandler(bn(x)):D.onMessageHandler.next(bn(x)));const V=x.data;ih(V)&&"1"===V[js]&&(yield sh(D,x.messageType,V))})).apply(this,arguments)}const Ha="@firebase/messaging",Ys=D=>{const C=new Io(D.getProvider("app").getImmediate(),D.getProvider("installations-internal").getImmediate(),D.getProvider("analytics-internal"));return navigator.serviceWorker.addEventListener("message",x=>function ap(D,C){return ja.apply(this,arguments)}(C,x)),C},Ku=D=>{const C=D.getProvider("messaging").getImmediate();return{getToken:V=>function Pn(D,C){return hi.apply(this,arguments)}(C,V)}};function Yu(){return yl.apply(this,arguments)}function yl(){return(yl=(0,N.Z)(function*(){try{yield(0,ae.eu)()}catch{return!1}return typeof window<"u"&&(0,ae.hl)()&&(0,ae.zI)()&&"serviceWorker"in navigator&&"PushManager"in window&&"Notification"in window&&"fetch"in window&&ServiceWorkerRegistration.prototype.hasOwnProperty("showNotification")&&PushSubscription.prototype.hasOwnProperty("getKey")})).apply(this,arguments)}!function oh(){(0,ne._registerComponent)(new ue.wA("messaging",Ys,"PUBLIC")),(0,ne._registerComponent)(new ue.wA("messaging-internal",Ku,"PRIVATE")),(0,ne.registerVersion)(Ha,"0.12.0"),(0,ne.registerVersion)(Ha,"0.12.0","esm2017")}();const Xu="analytics",ti="firebase_id",vl="https://firebase.googleapis.com/v1alpha/projects/-/apps/{app-id}/webConfig",uh="https://www.googletagmanager.com/gtag/js",vr=new me.Yd("@firebase/analytics");function ch(D){return Promise.all(D.map(C=>C.catch(x=>x)))}function hp(D,C){const x=document.createElement("script");x.src=`${uh}?l=${D}&id=${C}`,x.async=!0,document.head.appendChild(x)}function bs(D,C,x,V,G,ie){return ji.apply(this,arguments)}function ji(){return(ji=(0,N.Z)(function*(D,C,x,V,G,ie){const Me=V[G];try{if(Me)yield C[Me];else{const rt=(yield ch(x)).find(ot=>ot.measurementId===G);rt&&(yield C[rt.appId])}}catch(et){vr.error(et)}D("config",G,ie)})).apply(this,arguments)}function Qs(D,C,x,V,G){return rs.apply(this,arguments)}function rs(){return(rs=(0,N.Z)(function*(D,C,x,V,G){try{let ie=[];if(G&&G.send_to){let Me=G.send_to;Array.isArray(Me)||(Me=[Me]);const et=yield ch(x);for(const rt of Me){const ot=et.find(St=>St.measurementId===rt),Gt=ot&&C[ot.appId];if(!Gt){ie=[];break}ie.push(Gt)}}0===ie.length&&(ie=Object.values(C)),yield Promise.all(ie),D("event",V,G||{})}catch(ie){vr.error(ie)}})).apply(this,arguments)}function Eo(D){const C=window.document.getElementsByTagName("script");for(const x of Object.values(C))if(x.src&&x.src.includes(uh)&&x.src.includes(D))return x;return null}const $r=new ae.LL("analytics","Analytics",{"already-exists":"A Firebase Analytics instance with the appId {$id}  already exists. Only one Firebase Analytics instance can be created for each appId.","already-initialized":"initializeAnalytics() cannot be called again with different options than those it was initially called with. It can be called again with the same options to return the existing instance, or getAnalytics() can be used to get a reference to the already-intialized instance.","already-initialized-settings":"Firebase Analytics has already been initialized.settings() must be called before initializing any Analytics instanceor it will have no effect.","interop-component-reg-failed":"Firebase Analytics Interop Component failed to instantiate: {$reason}","invalid-analytics-context":"Firebase Analytics is not supported in this environment. Wrap initialization of analytics in analytics.isSupported() to prevent initialization in unsupported environments. Details: {$errorInfo}","indexeddb-unavailable":"IndexedDB unavailable or restricted in this environment. Wrap initialization of analytics in analytics.isSupported() to prevent initialization in unsupported environments. Details: {$errorInfo}","fetch-throttle":"The config fetch request timed out while in an exponential backoff state. Unix timestamp in milliseconds when fetch request throttling ends: {$throttleEndTimeMillis}.","config-fetch-failed":"Dynamic config fetch failed: [{$httpStatus}] {$responseMessage}","no-api-key":'The "apiKey" field is empty in the local Firebase config. Firebase Analytics requires this field tocontain a valid API key.',"no-app-id":'The "appId" field is empty in the local Firebase config. Firebase Analytics requires this field tocontain a valid app ID.'}),tc=new class ec{constructor(C={},x=1e3){this.throttleMetadata=C,this.intervalMillis=x}getThrottleMetadata(C){return this.throttleMetadata[C]}setThrottleMetadata(C,x){this.throttleMetadata[C]=x}deleteThrottleMetadata(C){delete this.throttleMetadata[C]}};function Do(D){return new Headers({Accept:"application/json","x-goog-api-key":D})}function Ga(D){return An.apply(this,arguments)}function An(){return(An=(0,N.Z)(function*(D){var C;const{appId:x,apiKey:V}=D,G={method:"GET",headers:Do(V)},ie=vl.replace("{app-id}",x),Me=yield fetch(ie,G);if(200!==Me.status&&304!==Me.status){let et="";try{const rt=yield Me.json();null!==(C=rt.error)&&void 0!==C&&C.message&&(et=rt.error.message)}catch{}throw $r.create("config-fetch-failed",{httpStatus:Me.status,responseMessage:et})}return Me.json()})).apply(this,arguments)}function na(D){return Ts.apply(this,arguments)}function Ts(){return(Ts=(0,N.Z)(function*(D,C=tc,x){const{appId:V,apiKey:G,measurementId:ie}=D.options;if(!V)throw $r.create("no-app-id");if(!G){if(ie)return{measurementId:ie,appId:V};throw $r.create("no-api-key")}const Me=C.getThrottleMetadata(V)||{backoffCount:0,throttleEndTimeMillis:Date.now()},et=new ra;return setTimeout((0,N.Z)(function*(){et.abort()}),void 0!==x?x:6e4),qa({appId:V,apiKey:G,measurementId:ie},Me,et,C)})).apply(this,arguments)}function qa(D,C,x){return Hi.apply(this,arguments)}function Hi(){return(Hi=(0,N.Z)(function*(D,{throttleEndTimeMillis:C,backoffCount:x},V,G=tc){var ie;const{appId:Me,measurementId:et}=D;try{yield wl(V,C)}catch(rt){if(et)return vr.warn(`Timed out fetching this Firebase app's measurement ID from the server. Falling back to the measurement ID ${et} provided in the "measurementId" field in the local Firebase config. [${rt?.message}]`),{appId:Me,measurementId:et};throw rt}try{const rt=yield Ga(D);return G.deleteThrottleMetadata(Me),rt}catch(rt){const ot=rt;if(!El(ot)){if(G.deleteThrottleMetadata(Me),et)return vr.warn(`Failed to fetch this Firebase app's measurement ID from the server. Falling back to the measurement ID ${et} provided in the "measurementId" field in the local Firebase config. [${ot?.message}]`),{appId:Me,measurementId:et};throw rt}const Gt=503===Number(null===(ie=ot?.customData)||void 0===ie?void 0:ie.httpStatus)?(0,ae.$s)(x,G.intervalMillis,30):(0,ae.$s)(x,G.intervalMillis),St={throttleEndTimeMillis:Date.now()+Gt,backoffCount:x+1};return G.setThrottleMetadata(Me,St),vr.debug(`Calling attemptFetch again in ${Gt} millis`),qa(D,St,V,G)}})).apply(this,arguments)}function wl(D,C){return new Promise((x,V)=>{const G=Math.max(C-Date.now(),0),ie=setTimeout(x,G);D.addEventListener(()=>{clearTimeout(ie),V($r.create("fetch-throttle",{throttleEndTimeMillis:C}))})})}function El(D){if(!(D instanceof ae.ZR&&D.customData))return!1;const C=Number(D.customData.httpStatus);return 429===C||500===C||503===C||504===C}class ra{constructor(){this.listeners=[]}addEventListener(C){this.listeners.push(C)}abort(){this.listeners.forEach(C=>C())}}let nc,Co;function Xs(){return(Xs=(0,N.Z)(function*(D,C,x,V,G){if(G&&G.global)D("event",x,V);else{const ie=yield C;D("event",x,Object.assign(Object.assign({},V),{send_to:ie}))}})).apply(this,arguments)}function Ka(D){Co=D}function Ya(D){nc=D}function Dl(){return Qa.apply(this,arguments)}function Qa(){return(Qa=(0,N.Z)(function*(){if(!(0,ae.hl)())return vr.warn($r.create("indexeddb-unavailable",{errorInfo:"IndexedDB is not available in this environment."}).message),!1;try{yield(0,ae.eu)()}catch(D){return vr.warn($r.create("indexeddb-unavailable",{errorInfo:D?.toString()}).message),!1}return!0})).apply(this,arguments)}function ic(){return(ic=(0,N.Z)(function*(D,C,x,V,G,ie,Me){var et;const rt=na(D);rt.then(Bn=>{x[Bn.measurementId]=Bn.appId,D.options.measurementId&&Bn.measurementId!==D.options.measurementId&&vr.warn(`The measurement ID in the local Firebase config (${D.options.measurementId}) does not match the measurement ID fetched from the server (${Bn.measurementId}). To ensure analytics events are always sent to the correct Analytics property, update the measurement ID field in the local config or remove it from the local config.`)}).catch(Bn=>vr.error(Bn)),C.push(rt);const ot=Dl().then(Bn=>{if(Bn)return V.getId()}),[Gt,St]=yield Promise.all([rt,ot]);Eo(ie)||hp(ie,Gt.measurementId),Co&&(G("consent","default",Co),Ka(void 0)),G("js",new Date);const _r=null!==(et=Me?.config)&&void 0!==et?et:{};return _r.origin="firebase",_r.update=!0,null!=St&&(_r[ti]=St),G("config",Gt.measurementId,_r),nc&&(G("set",nc),Ya(void 0)),Gt.measurementId})).apply(this,arguments)}class dh{constructor(C){this.app=C}_delete(){return delete ni[this.app.options.appId],Promise.resolve()}}let ni={},hh=[];const To={};let Ja,ri,Ri="dataLayer",ss=!1;function ia(D,C,x){!function sc(){const D=[];if((0,ae.ru)()&&D.push("This is a browser extension environment."),(0,ae.zI)()||D.push("Cookies are not available."),D.length>0){const C=D.map((V,G)=>`(${G+1}) ${V}`).join(" "),x=$r.create("invalid-analytics-context",{errorInfo:C});vr.warn(x.message)}}();const V=D.options.appId;if(!V)throw $r.create("no-app-id");if(!D.options.apiKey){if(!D.options.measurementId)throw $r.create("no-api-key");vr.warn(`The "apiKey" field is empty in the local Firebase config. This is needed to fetch the latest measurement ID for this Firebase app. Falling back to the measurement ID ${D.options.measurementId} provided in the "measurementId" field in the local Firebase config.`)}if(null!=ni[V])throw $r.create("already-exists",{id:V});if(!ss){!function Ju(D){let C=[];Array.isArray(window[D])?C=window[D]:window[D]=C}(Ri);const{wrappedGtag:ie,gtagCore:Me}=function Il(D,C,x,V,G){let ie=function(...Me){window[V].push(arguments)};return window[G]&&"function"==typeof window[G]&&(ie=window[G]),window[G]=function _l(D,C,x,V){function ie(){return(ie=(0,N.Z)(function*(Me,et,rt){try{"event"===Me?yield Qs(D,C,x,et,rt):"config"===Me?yield bs(D,C,x,V,et,rt):"consent"===Me?D("consent","update",rt):D("set",et)}catch(ot){vr.error(ot)}})).apply(this,arguments)}return function G(Me,et,rt){return ie.apply(this,arguments)}}(ie,D,C,x),{gtagCore:ie,wrappedGtag:window[G]}}(ni,hh,To,Ri,"gtag");ri=ie,Ja=Me,ss=!0}return ni[V]=function Xa(D,C,x,V,G,ie,Me){return ic.apply(this,arguments)}(D,hh,To,C,Ja,Ri,x),new dh(D)}function Tl(){return As.apply(this,arguments)}function As(){return(As=(0,N.Z)(function*(){if((0,ae.ru)()||!(0,ae.zI)()||!(0,ae.hl)())return!1;try{return yield(0,ae.eu)()}catch{return!1}})).apply(this,arguments)}const on="@firebase/analytics";!function tu(){(0,ne._registerComponent)(new ue.wA(Xu,(C,{options:x})=>ia(C.getProvider("app").getImmediate(),C.getProvider("installations-internal").getImmediate(),x),"PUBLIC")),(0,ne._registerComponent)(new ue.wA("analytics-internal",function D(C){try{const x=C.getProvider(Xu).getImmediate();return{logEvent:(V,G,ie)=>function oc(D,C,x,V){D=(0,ae.m9)(D),function is(D,C,x,V,G){return Xs.apply(this,arguments)}(ri,ni[D.app.options.appId],C,x,V).catch(G=>vr.error(G))}(x,V,G,ie)}}catch(x){throw $r.create("interop-component-reg-failed",{reason:x})}},"PRIVATE")),(0,ne.registerVersion)(on,"0.9.0"),(0,ne.registerVersion)(on,"0.9.0","esm2017")}();var yh=k(4408),Sl=k(7565);const fp=new class _h extends Sl.v{}(class vh extends yh.o{constructor(C,x){super(C,x),this.scheduler=C,this.work=x}schedule(C,x=0){return x>0?super.schedule(C,x):(this.delay=x,this.state=C,this.scheduler.flush(this),this)}execute(C,x){return x>0||this.closed?super.execute(C,x):this._execute(C,x)}requestAsyncId(C,x,V=0){return null!=V&&V>0||null==V&&this.delay>0?super.requestAsyncId(C,x,V):(C.flush(this),0)}});var Pm=k(4986),xo=k(9751),On=k(8505),ac=k(9468),Mo=k(5363);const pp=new p.GfV("7.5.0"),Mr="__angularfire_symbol__analyticsIsSupportedValue",os="__angularfire_symbol__analyticsIsSupported",uc="__angularfire_symbol__remoteConfigIsSupportedValue",oa="__angularfire_symbol__remoteConfigIsSupported",xs="__angularfire_symbol__messagingIsSupportedValue",Al="__angularfire_symbol__messagingIsSupported";function no(D,C,x){if(C){if(1===C.length)return C[0];const ie=C.filter(Me=>Me.app===x);if(1===ie.length)return ie[0]}return x.container.getProvider(D).getImmediate({optional:!0})}globalThis[os]||(globalThis[os]=Tl().then(D=>globalThis[Mr]=D).catch(()=>globalThis[Mr]=!1)),globalThis[Al]||(globalThis[Al]=Yu().then(D=>globalThis[xs]=D).catch(()=>globalThis[xs]=!1)),globalThis[oa]||(globalThis[oa]=tp().then(D=>globalThis[uc]=D).catch(()=>globalThis[uc]=!1));const Qe=(D,C)=>{const x=C?[C]:(0,B.C6)(),V=[];return x.forEach(G=>{G.container.getProvider(D).instances.forEach(Me=>{V.includes(Me)||V.push(Me)})}),V};function fi(){}class ii{constructor(C,x=fp){this.zone=C,this.delegate=x}now(){return this.delegate.now()}schedule(C,x,V){const G=this.zone;return this.delegate.schedule(function(Me){G.runGuarded(()=>{C.apply(this,[Me])})},x,V)}}class lc{constructor(C){this.zone=C,this.task=null}call(C,x){const V=this.unscheduleTask.bind(this);return this.task=this.zone.run(()=>Zone.current.scheduleMacroTask("firebaseZoneBlock",fi,{},fi,fi)),x.pipe((0,On.b)({next:V,complete:V,error:V})).subscribe(C).add(V)}unscheduleTask(){setTimeout(()=>{null!=this.task&&"scheduled"===this.task.state&&(this.task.invoke(),this.task=null)},10)}}let Ro=(()=>{class D{constructor(x){this.ngZone=x,this.outsideAngular=x.runOutsideAngular(()=>new ii(Zone.current)),this.insideAngular=x.run(()=>new ii(Zone.current,Pm.z)),globalThis.\u0275AngularFireScheduler||(globalThis.\u0275AngularFireScheduler=this)}}return D.\u0275fac=function(x){return new(x||D)(p.LFG(p.R0b))},D.\u0275prov=p.Yz7({token:D,factory:D.\u0275fac,providedIn:"root"}),D})();function dr(){const D=globalThis.\u0275AngularFireScheduler;if(!D)throw new Error("Either AngularFireModule has not been provided in your AppModule (this can be done manually or implictly using\nprovideFirebaseApp) or you're calling an AngularFire method outside of an NgModule (which is not supported).");return D}function Ih(D){return dr().ngZone.runOutsideAngular(()=>D())}function Ms(D){return dr().ngZone.run(()=>D())}function aa(D){return dr(),function hc(D){return function(x){return(x=x.lift(new lc(D.ngZone))).pipe((0,ac.R)(D.outsideAngular),(0,Mo.Q)(D.insideAngular))}}(dr())(D)}const Ni=(D,C)=>function(){const V=arguments;return C&&setTimeout(()=>{"scheduled"===C.state&&C.invoke()},10),Ms(()=>D.apply(void 0,V))},_t=(D,C)=>function(){let x;const V=arguments;for(let ie=0;ie<arguments.length;ie++)"function"==typeof V[ie]&&(C&&(x||(x=Ms(()=>Zone.current.scheduleMacroTask("firebaseZoneBlock",fi,{},fi,fi)))),V[ie]=Ni(V[ie],x));const G=Ih(()=>D.apply(this,V));if(!C){if(G instanceof xo.y){const ie=dr();return G.pipe((0,ac.R)(ie.outsideAngular),(0,Mo.Q)(ie.insideAngular))}return Ms(()=>G)}return G instanceof xo.y?G.pipe(aa):G instanceof Promise?Ms(()=>new Promise((ie,Me)=>G.then(et=>Ms(()=>ie(et)),et=>Ms(()=>Me(et))))):"function"==typeof G&&x?function(){return setTimeout(()=>{x&&"scheduled"===x.state&&x.invoke()},10),G.apply(this,arguments)}:Ms(()=>G)}},552:(lt,be,k)=>{k.d(be,{$:()=>La,A:()=>H,B:()=>Se,G:()=>ll,H:()=>_n,J:()=>Xi,L:()=>j,M:()=>Ma,N:()=>np,P:()=>Pm,Q:()=>eh,R:()=>gh,T:()=>rp,U:()=>yo,V:()=>Hs,W:()=>ns,X:()=>th,Y:()=>Ar,Z:()=>ka,_:()=>Jo,a:()=>Cs,a0:()=>nh,a1:()=>qu,a2:()=>Rt,a3:()=>pl,a4:()=>rh,a5:()=>gl,a6:()=>sp,a7:()=>xe,a8:()=>ih,a9:()=>ml,aA:()=>$,aB:()=>et,aC:()=>Ms,aD:()=>Ih,aE:()=>ur,aI:()=>Do,aL:()=>js,aa:()=>Bi,ab:()=>$a,ac:()=>op,af:()=>sh,ag:()=>$i,ah:()=>ap,ak:()=>Ws,al:()=>za,an:()=>uh,ao:()=>ji,ap:()=>_e,aq:()=>ut,ar:()=>it,as:()=>Re,at:()=>Rl,au:()=>zi,av:()=>gn,aw:()=>Pe,ax:()=>X,ay:()=>_r,az:()=>Y,b:()=>$r,c:()=>oa,d:()=>gp,e:()=>Al,f:()=>aa,g:()=>x,h:()=>_t,i:()=>Qa,j:()=>ie,k:()=>Th,l:()=>mh,m:()=>No,o:()=>de,r:()=>yh,s:()=>to,u:()=>fp});var p=k(5861),B=k(2090),N=k(9681),ne=k(1877),ae=k(655),ue=k(4859);const de={FACEBOOK:"facebook.com",GITHUB:"github.com",GOOGLE:"google.com",PASSWORD:"password",PHONE:"phone",TWITTER:"twitter.com"},H={EMAIL_SIGNIN:"EMAIL_SIGNIN",PASSWORD_RESET:"PASSWORD_RESET",RECOVER_EMAIL:"RECOVER_EMAIL",REVERT_SECOND_FACTOR_ADDITION:"REVERT_SECOND_FACTOR_ADDITION",VERIFY_AND_CHANGE_EMAIL:"VERIFY_AND_CHANGE_EMAIL",VERIFY_EMAIL:"VERIFY_EMAIL"};const Se=function Q(){return{"admin-restricted-operation":"This operation is restricted to administrators only.","argument-error":"","app-not-authorized":"This app, identified by the domain where it's hosted, is not authorized to use Firebase Authentication with the provided API key. Review your key configuration in the Google API console.","app-not-installed":"The requested mobile application corresponding to the identifier (Android package name or iOS bundle ID) provided is not installed on this device.","captcha-check-failed":"The reCAPTCHA response token provided is either invalid, expired, already used or the domain associated with it does not match the list of whitelisted domains.","code-expired":"The SMS code has expired. Please re-send the verification code to try again.","cordova-not-ready":"Cordova framework is not ready.","cors-unsupported":"This browser is not supported.","credential-already-in-use":"This credential is already associated with a different user account.","custom-token-mismatch":"The custom token corresponds to a different audience.","requires-recent-login":"This operation is sensitive and requires recent authentication. Log in again before retrying this request.","dependent-sdk-initialized-before-auth":"Another Firebase SDK was initialized and is trying to use Auth before Auth is initialized. Please be sure to call `initializeAuth` or `getAuth` before starting any other Firebase SDK.","dynamic-link-not-activated":"Please activate Dynamic Links in the Firebase Console and agree to the terms and conditions.","email-change-needs-verification":"Multi-factor users must always have a verified email.","email-already-in-use":"The email address is already in use by another account.","emulator-config-failed":'Auth instance has already been used to make a network call. Auth can no longer be configured to use the emulator. Try calling "connectAuthEmulator()" sooner.',"expired-action-code":"The action code has expired.","cancelled-popup-request":"This operation has been cancelled due to another conflicting popup being opened.","internal-error":"An internal AuthError has occurred.","invalid-app-credential":"The phone verification request contains an invalid application verifier. The reCAPTCHA token response is either invalid or expired.","invalid-app-id":"The mobile app identifier is not registed for the current project.","invalid-user-token":"This user's credential isn't valid for this project. This can happen if the user's token has been tampered with, or if the user isn't for the project associated with this API key.","invalid-auth-event":"An internal AuthError has occurred.","invalid-verification-code":"The SMS verification code used to create the phone auth credential is invalid. Please resend the verification code sms and be sure to use the verification code provided by the user.","invalid-continue-uri":"The continue URL provided in the request is invalid.","invalid-cordova-configuration":"The following Cordova plugins must be installed to enable OAuth sign-in: cordova-plugin-buildinfo, cordova-universal-links-plugin, cordova-plugin-browsertab, cordova-plugin-inappbrowser and cordova-plugin-customurlscheme.","invalid-custom-token":"The custom token format is incorrect. Please check the documentation.","invalid-dynamic-link-domain":"The provided dynamic link domain is not configured or authorized for the current project.","invalid-email":"The email address is badly formatted.","invalid-emulator-scheme":"Emulator URL must start with a valid scheme (http:// or https://).","invalid-api-key":"Your API key is invalid, please check you have copied it correctly.","invalid-cert-hash":"The SHA-1 certificate hash provided is invalid.","invalid-credential":"The supplied auth credential is malformed or has expired.","invalid-message-payload":"The email template corresponding to this action contains invalid characters in its message. Please fix by going to the Auth email templates section in the Firebase Console.","invalid-multi-factor-session":"The request does not contain a valid proof of first factor successful sign-in.","invalid-oauth-provider":"EmailAuthProvider is not supported for this operation. This operation only supports OAuth providers.","invalid-oauth-client-id":"The OAuth client ID provided is either invalid or does not match the specified API key.","unauthorized-domain":"This domain is not authorized for OAuth operations for your Firebase project. Edit the list of authorized domains from the Firebase console.","invalid-action-code":"The action code is invalid. This can happen if the code is malformed, expired, or has already been used.","wrong-password":"The password is invalid or the user does not have a password.","invalid-persistence-type":"The specified persistence type is invalid. It can only be local, session or none.","invalid-phone-number":"The format of the phone number provided is incorrect. Please enter the phone number in a format that can be parsed into E.164 format. E.164 phone numbers are written in the format [+][country code][subscriber number including area code].","invalid-provider-id":"The specified provider ID is invalid.","invalid-recipient-email":"The email corresponding to this action failed to send as the provided recipient email address is invalid.","invalid-sender":"The email template corresponding to this action contains an invalid sender email or name. Please fix by going to the Auth email templates section in the Firebase Console.","invalid-verification-id":"The verification ID used to create the phone auth credential is invalid.","invalid-tenant-id":"The Auth instance's tenant ID is invalid.","login-blocked":"Login blocked by user-provided method: {$originalMessage}","missing-android-pkg-name":"An Android Package Name must be provided if the Android App is required to be installed.","auth-domain-config-required":"Be sure to include authDomain when calling firebase.initializeApp(), by following the instructions in the Firebase console.","missing-app-credential":"The phone verification request is missing an application verifier assertion. A reCAPTCHA response token needs to be provided.","missing-verification-code":"The phone auth credential was created with an empty SMS verification code.","missing-continue-uri":"A continue URL must be provided in the request.","missing-iframe-start":"An internal AuthError has occurred.","missing-ios-bundle-id":"An iOS Bundle ID must be provided if an App Store ID is provided.","missing-or-invalid-nonce":"The request does not contain a valid nonce. This can occur if the SHA-256 hash of the provided raw nonce does not match the hashed nonce in the ID token payload.","missing-multi-factor-info":"No second factor identifier is provided.","missing-multi-factor-session":"The request is missing proof of first factor successful sign-in.","missing-phone-number":"To send verification codes, provide a phone number for the recipient.","missing-verification-id":"The phone auth credential was created with an empty verification ID.","app-deleted":"This instance of FirebaseApp has been deleted.","multi-factor-info-not-found":"The user does not have a second factor matching the identifier provided.","multi-factor-auth-required":"Proof of ownership of a second factor is required to complete sign-in.","account-exists-with-different-credential":"An account already exists with the same email address but different sign-in credentials. Sign in using a provider associated with this email address.","network-request-failed":"A network AuthError (such as timeout, interrupted connection or unreachable host) has occurred.","no-auth-event":"An internal AuthError has occurred.","no-such-provider":"User was not linked to an account with the given provider.","null-user":"A null user object was provided as the argument for an operation which requires a non-null user object.","operation-not-allowed":"The given sign-in provider is disabled for this Firebase project. Enable it in the Firebase console, under the sign-in method tab of the Auth section.","operation-not-supported-in-this-environment":'This operation is not supported in the environment this application is running on. "location.protocol" must be http, https or chrome-extension and web storage must be enabled.',"popup-blocked":"Unable to establish a connection with the popup. It may have been blocked by the browser.","popup-closed-by-user":"The popup has been closed by the user before finalizing the operation.","provider-already-linked":"User can only be linked to one identity for the given provider.","quota-exceeded":"The project's quota for this operation has been exceeded.","redirect-cancelled-by-user":"The redirect operation has been cancelled by the user before finalizing.","redirect-operation-pending":"A redirect sign-in operation is already pending.","rejected-credential":"The request contains malformed or mismatching credentials.","second-factor-already-in-use":"The second factor is already enrolled on this account.","maximum-second-factor-count-exceeded":"The maximum allowed number of second factors on a user has been exceeded.","tenant-id-mismatch":"The provided tenant ID does not match the Auth instance's tenant ID",timeout:"The operation has timed out.","user-token-expired":"The user's credential is no longer valid. The user must sign in again.","too-many-requests":"We have blocked all requests from this device due to unusual activity. Try again later.","unauthorized-continue-uri":"The domain of the continue URL is not whitelisted.  Please whitelist the domain in the Firebase console.","unsupported-first-factor":"Enrolling a second factor or signing in with a multi-factor account requires sign-in with a supported first factor.","unsupported-persistence-type":"The current environment does not support the specified persistence type.","unsupported-tenant-operation":"This operation is not supported in a multi-tenant context.","unverified-email":"The operation requires a verified email.","user-cancelled":"The user did not grant your application the permissions it requested.","user-not-found":"There is no user record corresponding to this identifier. The user may have been deleted.","user-disabled":"The user account has been disabled by an administrator.","user-mismatch":"The supplied credentials do not correspond to the previously signed in user.","user-signed-out":"","weak-password":"The password must be 6 characters long or more.","web-storage-unsupported":"This browser is not supported or 3rd party cookies and data may be disabled.","already-initialized":"initializeAuth() has already been called with different options. To avoid this error, call initializeAuth() with the same options as when it was originally called, or call getAuth() to return the already initialized instance."}},ze=function Ue(){return{"dependent-sdk-initialized-before-auth":"Another Firebase SDK was initialized and is trying to use Auth before Auth is initialized. Please be sure to call `initializeAuth` or `getAuth` before starting any other Firebase SDK."}},nt=new B.LL("auth","Firebase",{"dependent-sdk-initialized-before-auth":"Another Firebase SDK was initialized and is trying to use Auth before Auth is initialized. Please be sure to call `initializeAuth` or `getAuth` before starting any other Firebase SDK."}),Ee=new ne.Yd("@firebase/auth");function we(v,...f){Ee.logLevel<=ne.in.ERROR&&Ee.error(`Auth (${N.SDK_VERSION}): ${v}`,...f)}function Re(v,...f){throw He(v,...f)}function Pe(v,...f){return He(v,...f)}function Ne(v,f,m){const w=Object.assign(Object.assign({},ze()),{[f]:m});return new B.LL("auth","Firebase",w).create(f,{appName:v.name})}function De(v,f,m){if(!(f instanceof m))throw m.name!==f.constructor.name&&Re(v,"argument-error"),Ne(v,"argument-error",`Type of ${f.constructor.name} does not match expected instance.Did you pass a reference from a different Auth SDK?`)}function He(v,...f){if("string"!=typeof v){const m=f[0],w=[...f.slice(1)];return w[0]&&(w[0].appName=v.name),v._errorFactory.create(m,...w)}return nt.create(v,...f)}function X(v,f,...m){if(!v)throw He(f,...m)}function ce(v){const f="INTERNAL ASSERTION FAILED: "+v;throw we(f),new Error(f)}function _e(v,f){v||ce(f)}const K=new Map;function Y(v){_e(v instanceof Function,"Expected a class definition");let f=K.get(v);return f?(_e(f instanceof v,"Instance stored in cache mismatched with class"),f):(f=new v,K.set(v,f),f)}function Le(){var v;return typeof self<"u"&&(null===(v=self.location)||void 0===v?void 0:v.href)||""}function Fe(){return"http:"===dt()||"https:"===dt()}function dt(){var v;return typeof self<"u"&&(null===(v=self.location)||void 0===v?void 0:v.protocol)||null}class It{constructor(f,m){this.shortDelay=f,this.longDelay=m,_e(m>f,"Short delay should be less than long delay!"),this.isMobile=(0,B.uI)()||(0,B.b$)()}get(){return function Jt(){return!(typeof navigator<"u"&&navigator&&"onLine"in navigator&&"boolean"==typeof navigator.onLine&&(Fe()||(0,B.ru)()||"connection"in navigator))||navigator.onLine}()?this.isMobile?this.longDelay:this.shortDelay:Math.min(5e3,this.shortDelay)}}function Vt(v,f){_e(v.emulator,"Emulator should always be set here");const{url:m}=v.emulator;return f?`${m}${f.startsWith("/")?f.slice(1):f}`:m}class pt{static initialize(f,m,w){this.fetchImpl=f,m&&(this.headersImpl=m),w&&(this.responseImpl=w)}static fetch(){return this.fetchImpl?this.fetchImpl:typeof self<"u"&&"fetch"in self?self.fetch:void ce("Could not find fetch implementation, make sure you call FetchProvider.initialize() with an appropriate polyfill")}static headers(){return this.headersImpl?this.headersImpl:typeof self<"u"&&"Headers"in self?self.Headers:void ce("Could not find Headers implementation, make sure you call FetchProvider.initialize() with an appropriate polyfill")}static response(){return this.responseImpl?this.responseImpl:typeof self<"u"&&"Response"in self?self.Response:void ce("Could not find Response implementation, make sure you call FetchProvider.initialize() with an appropriate polyfill")}}const Xt={CREDENTIAL_MISMATCH:"custom-token-mismatch",MISSING_CUSTOM_TOKEN:"internal-error",INVALID_IDENTIFIER:"invalid-email",MISSING_CONTINUE_URI:"internal-error",INVALID_PASSWORD:"wrong-password",MISSING_PASSWORD:"internal-error",EMAIL_EXISTS:"email-already-in-use",PASSWORD_LOGIN_DISABLED:"operation-not-allowed",INVALID_IDP_RESPONSE:"invalid-credential",INVALID_PENDING_TOKEN:"invalid-credential",FEDERATED_USER_ID_ALREADY_LINKED:"credential-already-in-use",MISSING_REQ_TYPE:"internal-error",EMAIL_NOT_FOUND:"user-not-found",RESET_PASSWORD_EXCEED_LIMIT:"too-many-requests",EXPIRED_OOB_CODE:"expired-action-code",INVALID_OOB_CODE:"invalid-action-code",MISSING_OOB_CODE:"internal-error",CREDENTIAL_TOO_OLD_LOGIN_AGAIN:"requires-recent-login",INVALID_ID_TOKEN:"invalid-user-token",TOKEN_EXPIRED:"user-token-expired",USER_NOT_FOUND:"user-token-expired",TOO_MANY_ATTEMPTS_TRY_LATER:"too-many-requests",INVALID_CODE:"invalid-verification-code",INVALID_SESSION_INFO:"invalid-verification-id",INVALID_TEMPORARY_PROOF:"invalid-credential",MISSING_SESSION_INFO:"missing-verification-id",SESSION_EXPIRED:"code-expired",MISSING_ANDROID_PACKAGE_NAME:"missing-android-pkg-name",UNAUTHORIZED_DOMAIN:"unauthorized-continue-uri",INVALID_OAUTH_CLIENT_ID:"invalid-oauth-client-id",ADMIN_ONLY_OPERATION:"admin-restricted-operation",INVALID_MFA_PENDING_CREDENTIAL:"invalid-multi-factor-session",MFA_ENROLLMENT_NOT_FOUND:"multi-factor-info-not-found",MISSING_MFA_ENROLLMENT_ID:"missing-multi-factor-info",MISSING_MFA_PENDING_CREDENTIAL:"missing-multi-factor-session",SECOND_FACTOR_EXISTS:"second-factor-already-in-use",SECOND_FACTOR_LIMIT_EXCEEDED:"maximum-second-factor-count-exceeded",BLOCKING_FUNCTION_ERROR_RESPONSE:"internal-error"},ir=new It(3e4,6e4);function Wt(v,f){return v.tenantId&&!f.tenantId?Object.assign(Object.assign({},f),{tenantId:v.tenantId}):f}function gt(v,f,m,w){return Ei.apply(this,arguments)}function Ei(){return(Ei=(0,p.Z)(function*(v,f,m,w,A={}){return Yr(v,A,(0,p.Z)(function*(){let O={},ee={};w&&("GET"===f?ee=w:O={body:JSON.stringify(w)});const Ce=(0,B.xO)(Object.assign({key:v.config.apiKey},ee)).slice(1),Xe=yield v._getAdditionalHeaders();return Xe["Content-Type"]="application/json",v.languageCode&&(Xe["X-Firebase-Locale"]=v.languageCode),pt.fetch()(ys(v,v.config.apiHost,m,Ce),Object.assign({method:f,headers:Xe,referrerPolicy:"no-referrer"},O))}))})).apply(this,arguments)}function Yr(v,f,m){return gr.apply(this,arguments)}function gr(){return(gr=(0,p.Z)(function*(v,f,m){v._canInitEmulator=!1;const w=Object.assign(Object.assign({},Xt),f);try{const A=new Di(v),O=yield Promise.race([m(),A.promise]);A.clearNetworkTimeout();const ee=yield O.json();if("needConfirmation"in ee)throw Fn(v,"account-exists-with-different-credential",ee);if(O.ok&&!("errorMessage"in ee))return ee;{const Ce=O.ok?ee.errorMessage:ee.error.message,[Xe,at]=Ce.split(" : ");if("FEDERATED_USER_ID_ALREADY_LINKED"===Xe)throw Fn(v,"credential-already-in-use",ee);if("EMAIL_EXISTS"===Xe)throw Fn(v,"email-already-in-use",ee);if("USER_DISABLED"===Xe)throw Fn(v,"user-disabled",ee);const Nt=w[Xe]||Xe.toLowerCase().replace(/[_\s]+/g,"-");if(at)throw Ne(v,Nt,at);Re(v,Nt)}}catch(A){if(A instanceof B.ZR)throw A;Re(v,"network-request-failed")}})).apply(this,arguments)}function En(v,f,m,w){return Ui.apply(this,arguments)}function Ui(){return(Ui=(0,p.Z)(function*(v,f,m,w,A={}){const O=yield gt(v,f,m,w,A);return"mfaPendingCredential"in O&&Re(v,"multi-factor-auth-required",{_serverResponse:O}),O})).apply(this,arguments)}function ys(v,f,m,w){const A=`${f}${m}?${w}`;return v.config.emulator?Vt(v.config,A):`${v.config.apiScheme}://${A}`}class Di{constructor(f){this.auth=f,this.timer=null,this.promise=new Promise((m,w)=>{this.timer=setTimeout(()=>w(Pe(this.auth,"network-request-failed")),ir.get())})}clearNetworkTimeout(){clearTimeout(this.timer)}}function Fn(v,f,m){const w={appName:v.name};m.email&&(w.email=m.email),m.phoneNumber&&(w.phoneNumber=m.phoneNumber);const A=Pe(v,f,w);return A.customData._tokenResponse=m,A}function bi(){return(bi=(0,p.Z)(function*(v,f){return gt(v,"POST","/v1/accounts:delete",f)})).apply(this,arguments)}function ln(v,f){return sr.apply(this,arguments)}function sr(){return(sr=(0,p.Z)(function*(v,f){return gt(v,"POST","/v1/accounts:update",f)})).apply(this,arguments)}function Je(v,f){return or.apply(this,arguments)}function or(){return(or=(0,p.Z)(function*(v,f){return gt(v,"POST","/v1/accounts:lookup",f)})).apply(this,arguments)}function mr(v){if(v)try{const f=new Date(Number(v));if(!isNaN(f.getTime()))return f.toUTCString()}catch{}}function Lr(){return(Lr=(0,p.Z)(function*(v,f=!1){const m=(0,B.m9)(v),w=yield m.getIdToken(f),A=ht(w);X(A&&A.exp&&A.auth_time&&A.iat,m.auth,"internal-error");const O="object"==typeof A.firebase?A.firebase:void 0,ee=O?.sign_in_provider;return{claims:A,token:w,authTime:mr(bt(A.auth_time)),issuedAtTime:mr(bt(A.iat)),expirationTime:mr(bt(A.exp)),signInProvider:ee||null,signInSecondFactor:O?.sign_in_second_factor||null}})).apply(this,arguments)}function bt(v){return 1e3*Number(v)}function ht(v){const[f,m,w]=v.split(".");if(void 0===f||void 0===m||void 0===w)return we("JWT malformed, contained fewer than 3 sections"),null;try{const A=(0,B.tV)(m);return A?JSON.parse(A):(we("Failed to decode base64 JWT payload"),null)}catch(A){return we("Caught error parsing JWT payload as JSON",A?.toString()),null}}function hn(v,f){return Kn.apply(this,arguments)}function Kn(){return(Kn=(0,p.Z)(function*(v,f,m=!1){if(m)return f;try{return yield f}catch(w){throw w instanceof B.ZR&&Dn(w)&&v.auth.currentUser===v&&(yield v.auth.signOut()),w}})).apply(this,arguments)}function Dn({code:v}){return"auth/user-disabled"===v||"auth/user-token-expired"===v}class Xr{constructor(f){this.user=f,this.isRunning=!1,this.timerId=null,this.errorBackoff=3e4}_start(){this.isRunning||(this.isRunning=!0,this.schedule())}_stop(){!this.isRunning||(this.isRunning=!1,null!==this.timerId&&clearTimeout(this.timerId))}getInterval(f){var m;if(f){const w=this.errorBackoff;return this.errorBackoff=Math.min(2*this.errorBackoff,96e4),w}{this.errorBackoff=3e4;const A=(null!==(m=this.user.stsTokenManager.expirationTime)&&void 0!==m?m:0)-Date.now()-3e5;return Math.max(0,A)}}schedule(f=!1){var m=this;if(!this.isRunning)return;const w=this.getInterval(f);this.timerId=setTimeout((0,p.Z)(function*(){yield m.iteration()}),w)}iteration(){var f=this;return(0,p.Z)(function*(){try{yield f.user.getIdToken(!0)}catch(m){return void("auth/network-request-failed"===m?.code&&f.schedule(!0))}f.schedule()})()}}class Yn{constructor(f,m){this.createdAt=f,this.lastLoginAt=m,this._initializeTime()}_initializeTime(){this.lastSignInTime=mr(this.lastLoginAt),this.creationTime=mr(this.createdAt)}_copy(f){this.createdAt=f.createdAt,this.lastLoginAt=f.lastLoginAt,this._initializeTime()}toJSON(){return{createdAt:this.createdAt,lastLoginAt:this.lastLoginAt}}}function Ci(v){return Pt.apply(this,arguments)}function Pt(){return(Pt=(0,p.Z)(function*(v){var f;const m=v.auth,w=yield v.getIdToken(),A=yield hn(v,Je(m,{idToken:w}));X(A?.users.length,m,"internal-error");const O=A.users[0];v._notifyReloadListener(O);const ee=null!==(f=O.providerUserInfo)&&void 0!==f&&f.length?Mn(O.providerUserInfo):[],Ce=br(v.providerData,ee),Nt=!!v.isAnonymous&&!(v.email&&O.passwordHash||Ce?.length),wn={uid:O.localId,displayName:O.displayName||null,photoURL:O.photoUrl||null,email:O.email||null,emailVerified:O.emailVerified||!1,phoneNumber:O.phoneNumber||null,tenantId:O.tenantId||null,providerData:Ce,metadata:new Yn(O.createdAt,O.lastLoginAt),isAnonymous:Nt};Object.assign(v,wn)})).apply(this,arguments)}function jt(){return(jt=(0,p.Z)(function*(v){const f=(0,B.m9)(v);yield Ci(f),yield f.auth._persistUserIfCurrent(f),f.auth._notifyListenersIfCurrent(f)})).apply(this,arguments)}function br(v,f){return[...v.filter(w=>!f.some(A=>A.providerId===w.providerId)),...f]}function Mn(v){return v.map(f=>{var{providerId:m}=f,w=(0,ae._T)(f,["providerId"]);return{providerId:m,uid:w.rawId||"",displayName:w.displayName||null,email:w.email||null,phoneNumber:w.phoneNumber||null,photoURL:w.photoUrl||null}})}function Ie(){return(Ie=(0,p.Z)(function*(v,f){const m=yield Yr(v,{},(0,p.Z)(function*(){const w=(0,B.xO)({grant_type:"refresh_token",refresh_token:f}).slice(1),{tokenApiHost:A,apiKey:O}=v.config,ee=ys(v,A,"/v1/token",`key=${O}`),Ce=yield v._getAdditionalHeaders();return Ce["Content-Type"]="application/x-www-form-urlencoded",pt.fetch()(ee,{method:"POST",headers:Ce,body:w})}));return{accessToken:m.access_token,expiresIn:m.expires_in,refreshToken:m.refresh_token}})).apply(this,arguments)}class Ke{constructor(){this.refreshToken=null,this.accessToken=null,this.expirationTime=null}get isExpired(){return!this.expirationTime||Date.now()>this.expirationTime-3e4}updateFromServerResponse(f){X(f.idToken,"internal-error"),X(typeof f.idToken<"u","internal-error"),X(typeof f.refreshToken<"u","internal-error");const m="expiresIn"in f&&typeof f.expiresIn<"u"?Number(f.expiresIn):function Et(v){const f=ht(v);return X(f,"internal-error"),X(typeof f.exp<"u","internal-error"),X(typeof f.iat<"u","internal-error"),Number(f.exp)-Number(f.iat)}(f.idToken);this.updateTokensAndExpiration(f.idToken,f.refreshToken,m)}getToken(f,m=!1){var w=this;return(0,p.Z)(function*(){return X(!w.accessToken||w.refreshToken,f,"user-token-expired"),m||!w.accessToken||w.isExpired?w.refreshToken?(yield w.refresh(f,w.refreshToken),w.accessToken):null:w.accessToken})()}clearRefreshToken(){this.refreshToken=null}refresh(f,m){var w=this;return(0,p.Z)(function*(){const{accessToken:A,refreshToken:O,expiresIn:ee}=yield function $e(v,f){return Ie.apply(this,arguments)}(f,m);w.updateTokensAndExpiration(A,O,Number(ee))})()}updateTokensAndExpiration(f,m,w){this.refreshToken=m||null,this.accessToken=f||null,this.expirationTime=Date.now()+1e3*w}static fromJSON(f,m){const{refreshToken:w,accessToken:A,expirationTime:O}=m,ee=new Ke;return w&&(X("string"==typeof w,"internal-error",{appName:f}),ee.refreshToken=w),A&&(X("string"==typeof A,"internal-error",{appName:f}),ee.accessToken=A),O&&(X("number"==typeof O,"internal-error",{appName:f}),ee.expirationTime=O),ee}toJSON(){return{refreshToken:this.refreshToken,accessToken:this.accessToken,expirationTime:this.expirationTime}}_assign(f){this.accessToken=f.accessToken,this.refreshToken=f.refreshToken,this.expirationTime=f.expirationTime}_clone(){return Object.assign(new Ke,this.toJSON())}_performRefresh(){return ce("not implemented")}}function yt(v,f){X("string"==typeof v||typeof v>"u","internal-error",{appName:f})}class wt{constructor(f){var{uid:m,auth:w,stsTokenManager:A}=f,O=(0,ae._T)(f,["uid","auth","stsTokenManager"]);this.providerId="firebase",this.proactiveRefresh=new Xr(this),this.reloadUserInfo=null,this.reloadListener=null,this.uid=m,this.auth=w,this.stsTokenManager=A,this.accessToken=A.accessToken,this.displayName=O.displayName||null,this.email=O.email||null,this.emailVerified=O.emailVerified||!1,this.phoneNumber=O.phoneNumber||null,this.photoURL=O.photoURL||null,this.isAnonymous=O.isAnonymous||!1,this.tenantId=O.tenantId||null,this.providerData=O.providerData?[...O.providerData]:[],this.metadata=new Yn(O.createdAt||void 0,O.lastLoginAt||void 0)}getIdToken(f){var m=this;return(0,p.Z)(function*(){const w=yield hn(m,m.stsTokenManager.getToken(m.auth,f));return X(w,m.auth,"internal-error"),m.accessToken!==w&&(m.accessToken=w,yield m.auth._persistUserIfCurrent(m),m.auth._notifyListenersIfCurrent(m)),w})()}getIdTokenResult(f){return function Un(v){return Lr.apply(this,arguments)}(this,f)}reload(){return function Ti(v){return jt.apply(this,arguments)}(this)}_assign(f){this!==f&&(X(this.uid===f.uid,this.auth,"internal-error"),this.displayName=f.displayName,this.photoURL=f.photoURL,this.email=f.email,this.emailVerified=f.emailVerified,this.phoneNumber=f.phoneNumber,this.isAnonymous=f.isAnonymous,this.tenantId=f.tenantId,this.providerData=f.providerData.map(m=>Object.assign({},m)),this.metadata._copy(f.metadata),this.stsTokenManager._assign(f.stsTokenManager))}_clone(f){return new wt(Object.assign(Object.assign({},this),{auth:f,stsTokenManager:this.stsTokenManager._clone()}))}_onReload(f){X(!this.reloadListener,this.auth,"internal-error"),this.reloadListener=f,this.reloadUserInfo&&(this._notifyReloadListener(this.reloadUserInfo),this.reloadUserInfo=null)}_notifyReloadListener(f){this.reloadListener?this.reloadListener(f):this.reloadUserInfo=f}_startProactiveRefresh(){this.proactiveRefresh._start()}_stopProactiveRefresh(){this.proactiveRefresh._stop()}_updateTokensIfNecessary(f,m=!1){var w=this;return(0,p.Z)(function*(){let A=!1;f.idToken&&f.idToken!==w.stsTokenManager.accessToken&&(w.stsTokenManager.updateFromServerResponse(f),A=!0),m&&(yield Ci(w)),yield w.auth._persistUserIfCurrent(w),A&&w.auth._notifyListenersIfCurrent(w)})()}delete(){var f=this;return(0,p.Z)(function*(){const m=yield f.getIdToken();return yield hn(f,function Qr(v,f){return bi.apply(this,arguments)}(f.auth,{idToken:m})),f.stsTokenManager.clearRefreshToken(),f.auth.signOut()})()}toJSON(){return Object.assign(Object.assign({uid:this.uid,email:this.email||void 0,emailVerified:this.emailVerified,displayName:this.displayName||void 0,isAnonymous:this.isAnonymous,photoURL:this.photoURL||void 0,phoneNumber:this.phoneNumber||void 0,tenantId:this.tenantId||void 0,providerData:this.providerData.map(f=>Object.assign({},f)),stsTokenManager:this.stsTokenManager.toJSON(),_redirectEventId:this._redirectEventId},this.metadata.toJSON()),{apiKey:this.auth.config.apiKey,appName:this.auth.name})}get refreshToken(){return this.stsTokenManager.refreshToken||""}static _fromJSON(f,m){var w,A,O,ee,Ce,Xe,at,Nt;const wn=null!==(w=m.displayName)&&void 0!==w?w:void 0,oi=null!==(A=m.email)&&void 0!==A?A:void 0,Rs=null!==(O=m.phoneNumber)&&void 0!==O?O:void 0,da=null!==(ee=m.photoURL)&&void 0!==ee?ee:void 0,Ns=null!==(Ce=m.tenantId)&&void 0!==Ce?Ce:void 0,uu=null!==(Xe=m._redirectEventId)&&void 0!==Xe?Xe:void 0,Ll=null!==(at=m.createdAt)&&void 0!==at?at:void 0,wp=null!==(Nt=m.lastLoginAt)&&void 0!==Nt?Nt:void 0,{uid:pc,emailVerified:Ep,isAnonymous:gc,providerData:Ah,stsTokenManager:Dp}=m;X(pc&&Dp,f,"internal-error");const Um=Ke.fromJSON(this.name,Dp);X("string"==typeof pc,f,"internal-error"),yt(wn,f.name),yt(oi,f.name),X("boolean"==typeof Ep,f,"internal-error"),X("boolean"==typeof gc,f,"internal-error"),yt(Rs,f.name),yt(da,f.name),yt(Ns,f.name),yt(uu,f.name),yt(Ll,f.name),yt(wp,f.name);const xh=new wt({uid:pc,auth:f,email:oi,emailVerified:Ep,displayName:wn,isAnonymous:gc,photoURL:da,phoneNumber:Rs,tenantId:Ns,stsTokenManager:Um,createdAt:Ll,lastLoginAt:wp});return Ah&&Array.isArray(Ah)&&(xh.providerData=Ah.map(bp=>Object.assign({},bp))),uu&&(xh._redirectEventId=uu),xh}static _fromIdTokenResponse(f,m,w=!1){return(0,p.Z)(function*(){const A=new Ke;A.updateFromServerResponse(m);const O=new wt({uid:m.localId,auth:f,stsTokenManager:A,isAnonymous:w});return yield Ci(O),O})()}}const j=(()=>{class v{constructor(){this.type="NONE",this.storage={}}_isAvailable(){return(0,p.Z)(function*(){return!0})()}_set(m,w){var A=this;return(0,p.Z)(function*(){A.storage[m]=w})()}_get(m){var w=this;return(0,p.Z)(function*(){const A=w.storage[m];return void 0===A?null:A})()}_remove(m){var w=this;return(0,p.Z)(function*(){delete w.storage[m]})()}_addListener(m,w){}_removeListener(m,w){}}return v.type="NONE",v})();function $(v,f,m){return`firebase:${v}:${f}:${m}`}class Z{constructor(f,m,w){this.persistence=f,this.auth=m,this.userKey=w;const{config:A,name:O}=this.auth;this.fullUserKey=$(this.userKey,A.apiKey,O),this.fullPersistenceKey=$("persistence",A.apiKey,O),this.boundEventHandler=m._onStorageEvent.bind(m),this.persistence._addListener(this.fullUserKey,this.boundEventHandler)}setCurrentUser(f){return this.persistence._set(this.fullUserKey,f.toJSON())}getCurrentUser(){var f=this;return(0,p.Z)(function*(){const m=yield f.persistence._get(f.fullUserKey);return m?wt._fromJSON(f.auth,m):null})()}removeCurrentUser(){return this.persistence._remove(this.fullUserKey)}savePersistenceForRedirect(){return this.persistence._set(this.fullPersistenceKey,this.persistence.type)}setPersistence(f){var m=this;return(0,p.Z)(function*(){if(m.persistence===f)return;const w=yield m.getCurrentUser();return yield m.removeCurrentUser(),m.persistence=f,w?m.setCurrentUser(w):void 0})()}delete(){this.persistence._removeListener(this.fullUserKey,this.boundEventHandler)}static create(f,m,w="authUser"){return(0,p.Z)(function*(){if(!m.length)return new Z(Y(j),f,w);const A=(yield Promise.all(m.map(function(){var at=(0,p.Z)(function*(Nt){if(yield Nt._isAvailable())return Nt});return function(Nt){return at.apply(this,arguments)}}()))).filter(at=>at);let O=A[0]||Y(j);const ee=$(w,f.config.apiKey,f.name);let Ce=null;for(const at of m)try{const Nt=yield at._get(ee);if(Nt){const wn=wt._fromJSON(f,Nt);at!==O&&(Ce=wn),O=at;break}}catch{}const Xe=A.filter(at=>at._shouldAllowMigration);return O._shouldAllowMigration&&Xe.length?(O=Xe[0],Ce&&(yield O._set(ee,Ce.toJSON())),yield Promise.all(m.map(function(){var at=(0,p.Z)(function*(Nt){if(Nt!==O)try{yield Nt._remove(ee)}catch{}});return function(Nt){return at.apply(this,arguments)}}())),new Z(O,f,w)):new Z(O,f,w)})()}}function U(v){const f=v.toLowerCase();if(f.includes("opera/")||f.includes("opr/")||f.includes("opios/"))return"Opera";if(Ae(f))return"IEMobile";if(f.includes("msie")||f.includes("trident/"))return"IE";if(f.includes("edge/"))return"Edge";if(R(f))return"Firefox";if(f.includes("silk/"))return"Silk";if(We(f))return"Blackberry";if(xt(f))return"Webos";if(L(f))return"Safari";if((f.includes("chrome/")||se(f))&&!f.includes("edge/"))return"Chrome";if(it(f))return"Android";{const w=v.match(/([a-zA-Z\d\.]+)\/[a-zA-Z\d\.]*$/);if(2===w?.length)return w[1]}return"Other"}function R(v=(0,B.z$)()){return/firefox\//i.test(v)}function L(v=(0,B.z$)()){const f=v.toLowerCase();return f.includes("safari/")&&!f.includes("chrome/")&&!f.includes("crios/")&&!f.includes("android")}function se(v=(0,B.z$)()){return/crios\//i.test(v)}function Ae(v=(0,B.z$)()){return/iemobile/i.test(v)}function it(v=(0,B.z$)()){return/android/i.test(v)}function We(v=(0,B.z$)()){return/blackberry/i.test(v)}function xt(v=(0,B.z$)()){return/webos/i.test(v)}function ut(v=(0,B.z$)()){return/iphone|ipad|ipod/i.test(v)||/macintosh/i.test(v)&&/mobile/i.test(v)}function gn(v=(0,B.z$)()){return/(iPad|iPhone|iPod).*OS 7_\d/i.test(v)||/(iPad|iPhone|iPod).*OS 8_\d/i.test(v)}function Cr(v=(0,B.z$)()){return ut(v)||it(v)||xt(v)||We(v)||/windows phone/i.test(v)||Ae(v)}function ho(v,f=[]){let m;switch(v){case"Browser":m=U((0,B.z$)());break;case"Worker":m=`${U((0,B.z$)())}-${v}`;break;default:m=v}const w=f.length?f.join(","):"FirebaseCore-web";return`${m}/JsCore/${N.SDK_VERSION}/${w}`}class $u{constructor(f){this.auth=f,this.queue=[]}pushCallback(f,m){const w=O=>new Promise((ee,Ce)=>{try{ee(f(O))}catch(Xe){Ce(Xe)}});w.onAbort=m,this.queue.push(w);const A=this.queue.length-1;return()=>{this.queue[A]=()=>Promise.resolve()}}runMiddleware(f){var m=this;return(0,p.Z)(function*(){if(m.auth.currentUser===f)return;const w=[];try{for(const A of m.queue)yield A(f),A.onAbort&&w.push(A.onAbort)}catch(A){w.reverse();for(const O of w)try{O()}catch{}throw m.auth._errorFactory.create("login-blocked",{originalMessage:A?.message})}})()}}class ju{constructor(f,m,w){this.app=f,this.heartbeatServiceProvider=m,this.config=w,this.currentUser=null,this.emulatorConfig=null,this.operations=Promise.resolve(),this.authStateSubscription=new fo(this),this.idTokenSubscription=new fo(this),this.beforeStateQueue=new $u(this),this.redirectUser=null,this.isProactiveRefreshEnabled=!1,this._canInitEmulator=!0,this._isInitialized=!1,this._deleted=!1,this._initializationPromise=null,this._popupRedirectResolver=null,this._errorFactory=nt,this.lastNotifiedUid=void 0,this.languageCode=null,this.tenantId=null,this.settings={appVerificationDisabledForTesting:!1},this.frameworks=[],this.name=f.name,this.clientVersion=w.sdkClientVersion}_initializeWithPersistence(f,m){var w=this;return m&&(this._popupRedirectResolver=Y(m)),this._initializationPromise=this.queue((0,p.Z)(function*(){var A,O;if(!w._deleted&&(w.persistenceManager=yield Z.create(w,f),!w._deleted)){if(null!==(A=w._popupRedirectResolver)&&void 0!==A&&A._shouldInitProactively)try{yield w._popupRedirectResolver._initialize(w)}catch{}yield w.initializeCurrentUser(m),w.lastNotifiedUid=(null===(O=w.currentUser)||void 0===O?void 0:O.uid)||null,!w._deleted&&(w._isInitialized=!0)}})),this._initializationPromise}_onStorageEvent(){var f=this;return(0,p.Z)(function*(){if(f._deleted)return;const m=yield f.assertedPersistence.getCurrentUser();if(f.currentUser||m){if(f.currentUser&&m&&f.currentUser.uid===m.uid)return f._currentUser._assign(m),void(yield f.currentUser.getIdToken());yield f._updateCurrentUser(m,!0)}})()}initializeCurrentUser(f){var m=this;return(0,p.Z)(function*(){var w;const A=yield m.assertedPersistence.getCurrentUser();let O=A,ee=!1;if(f&&m.config.authDomain){yield m.getOrInitRedirectPersistenceManager();const Ce=null===(w=m.redirectUser)||void 0===w?void 0:w._redirectEventId,Xe=O?._redirectEventId,at=yield m.tryRedirectSignIn(f);(!Ce||Ce===Xe)&&at?.user&&(O=at.user,ee=!0)}if(!O)return m.directlySetCurrentUser(null);if(!O._redirectEventId){if(ee)try{yield m.beforeStateQueue.runMiddleware(O)}catch(Ce){O=A,m._popupRedirectResolver._overrideRedirectResult(m,()=>Promise.reject(Ce))}return O?m.reloadAndSetCurrentUserOrClear(O):m.directlySetCurrentUser(null)}return X(m._popupRedirectResolver,m,"argument-error"),yield m.getOrInitRedirectPersistenceManager(),m.redirectUser&&m.redirectUser._redirectEventId===O._redirectEventId?m.directlySetCurrentUser(O):m.reloadAndSetCurrentUserOrClear(O)})()}tryRedirectSignIn(f){var m=this;return(0,p.Z)(function*(){let w=null;try{w=yield m._popupRedirectResolver._completeRedirectFn(m,f,!0)}catch{yield m._setRedirectUser(null)}return w})()}reloadAndSetCurrentUserOrClear(f){var m=this;return(0,p.Z)(function*(){try{yield Ci(f)}catch(w){if("auth/network-request-failed"!==w?.code)return m.directlySetCurrentUser(null)}return m.directlySetCurrentUser(f)})()}useDeviceLanguage(){this.languageCode=function un(){if(typeof navigator>"u")return null;const v=navigator;return v.languages&&v.languages[0]||v.language||null}()}_delete(){var f=this;return(0,p.Z)(function*(){f._deleted=!0})()}updateCurrentUser(f){var m=this;return(0,p.Z)(function*(){const w=f?(0,B.m9)(f):null;return w&&X(w.auth.config.apiKey===m.config.apiKey,m,"invalid-user-token"),m._updateCurrentUser(w&&w._clone(m))})()}_updateCurrentUser(f,m=!1){var w=this;return(0,p.Z)(function*(){if(!w._deleted)return f&&X(w.tenantId===f.tenantId,w,"tenant-id-mismatch"),m||(yield w.beforeStateQueue.runMiddleware(f)),w.queue((0,p.Z)(function*(){yield w.directlySetCurrentUser(f),w.notifyAuthListeners()}))})()}signOut(){var f=this;return(0,p.Z)(function*(){return yield f.beforeStateQueue.runMiddleware(null),(f.redirectPersistenceManager||f._popupRedirectResolver)&&(yield f._setRedirectUser(null)),f._updateCurrentUser(null,!0)})()}setPersistence(f){var m=this;return this.queue((0,p.Z)(function*(){yield m.assertedPersistence.setPersistence(Y(f))}))}_getPersistence(){return this.assertedPersistence.persistence.type}_updateErrorMap(f){this._errorFactory=new B.LL("auth","Firebase",f())}onAuthStateChanged(f,m,w){return this.registerStateListener(this.authStateSubscription,f,m,w)}beforeAuthStateChanged(f,m){return this.beforeStateQueue.pushCallback(f,m)}onIdTokenChanged(f,m,w){return this.registerStateListener(this.idTokenSubscription,f,m,w)}toJSON(){var f;return{apiKey:this.config.apiKey,authDomain:this.config.authDomain,appName:this.name,currentUser:null===(f=this._currentUser)||void 0===f?void 0:f.toJSON()}}_setRedirectUser(f,m){var w=this;return(0,p.Z)(function*(){const A=yield w.getOrInitRedirectPersistenceManager(m);return null===f?A.removeCurrentUser():A.setCurrentUser(f)})()}getOrInitRedirectPersistenceManager(f){var m=this;return(0,p.Z)(function*(){if(!m.redirectPersistenceManager){const w=f&&Y(f)||m._popupRedirectResolver;X(w,m,"argument-error"),m.redirectPersistenceManager=yield Z.create(m,[Y(w._redirectPersistence)],"redirectUser"),m.redirectUser=yield m.redirectPersistenceManager.getCurrentUser()}return m.redirectPersistenceManager})()}_redirectUserForId(f){var m=this;return(0,p.Z)(function*(){var w,A;return m._isInitialized&&(yield m.queue((0,p.Z)(function*(){}))),(null===(w=m._currentUser)||void 0===w?void 0:w._redirectEventId)===f?m._currentUser:(null===(A=m.redirectUser)||void 0===A?void 0:A._redirectEventId)===f?m.redirectUser:null})()}_persistUserIfCurrent(f){var m=this;return(0,p.Z)(function*(){if(f===m.currentUser)return m.queue((0,p.Z)(function*(){return m.directlySetCurrentUser(f)}))})()}_notifyListenersIfCurrent(f){f===this.currentUser&&this.notifyAuthListeners()}_key(){return`${this.config.authDomain}:${this.config.apiKey}:${this.name}`}_startProactiveRefresh(){this.isProactiveRefreshEnabled=!0,this.currentUser&&this._currentUser._startProactiveRefresh()}_stopProactiveRefresh(){this.isProactiveRefreshEnabled=!1,this.currentUser&&this._currentUser._stopProactiveRefresh()}get _currentUser(){return this.currentUser}notifyAuthListeners(){var f,m;if(!this._isInitialized)return;this.idTokenSubscription.next(this.currentUser);const w=null!==(m=null===(f=this.currentUser)||void 0===f?void 0:f.uid)&&void 0!==m?m:null;this.lastNotifiedUid!==w&&(this.lastNotifiedUid=w,this.authStateSubscription.next(this.currentUser))}registerStateListener(f,m,w,A){if(this._deleted)return()=>{};const O="function"==typeof m?m:m.next.bind(m),ee=this._isInitialized?Promise.resolve():this._initializationPromise;return X(ee,this,"internal-error"),ee.then(()=>O(this.currentUser)),"function"==typeof m?f.addObserver(m,w,A):f.addObserver(m)}directlySetCurrentUser(f){var m=this;return(0,p.Z)(function*(){m.currentUser&&m.currentUser!==f&&m._currentUser._stopProactiveRefresh(),f&&m.isProactiveRefreshEnabled&&f._startProactiveRefresh(),m.currentUser=f,f?yield m.assertedPersistence.setCurrentUser(f):yield m.assertedPersistence.removeCurrentUser()})()}queue(f){return this.operations=this.operations.then(f,f),this.operations}get assertedPersistence(){return X(this.persistenceManager,this,"internal-error"),this.persistenceManager}_logFramework(f){!f||this.frameworks.includes(f)||(this.frameworks.push(f),this.frameworks.sort(),this.clientVersion=ho(this.config.clientPlatform,this._getFrameworks()))}_getFrameworks(){return this.frameworks}_getAdditionalHeaders(){var f=this;return(0,p.Z)(function*(){var m;const w={"X-Client-Version":f.clientVersion};f.app.options.appId&&(w["X-Firebase-gmpid"]=f.app.options.appId);const A=yield null===(m=f.heartbeatServiceProvider.getImmediate({optional:!0}))||void 0===m?void 0:m.getHeartbeatsHeader();return A&&(w["X-Firebase-Client"]=A),w})()}}function ur(v){return(0,B.m9)(v)}class fo{constructor(f){this.auth=f,this.observer=null,this.addObserver=(0,B.ne)(m=>this.observer=m)}get next(){return X(this.observer,this.auth,"internal-error"),this.observer.next.bind(this.observer)}}function ll(v,f,m){const w=ur(v);X(w._canInitEmulator,w,"emulator-config-failed"),X(/^https?:\/\//.test(f),w,"invalid-emulator-scheme");const A=!!m?.disableWarnings,O=Hu(f),{host:ee,port:Ce}=function Ta(v){const f=Hu(v),m=/(\/\/)?([^?#/]+)/.exec(v.substr(f.length));if(!m)return{host:"",port:null};const w=m[2].split("@").pop()||"",A=/^(\[[^\]]+\])(:|$)/.exec(w);if(A){const O=A[1];return{host:O,port:po(w.substr(O.length+1))}}{const[O,ee]=w.split(":");return{host:O,port:po(ee)}}}(f);w.config.emulator={url:`${O}//${ee}${null===Ce?"":`:${Ce}`}/`},w.settings.appVerificationDisabledForTesting=!0,w.emulatorConfig=Object.freeze({host:ee,port:Ce,protocol:O.replace(":",""),options:Object.freeze({disableWarnings:A})}),A||function en(){function v(){const f=document.createElement("p"),m=f.style;f.innerText="Running in emulator mode. Do not use with production credentials.",m.position="fixed",m.width="100%",m.backgroundColor="#ffffff",m.border=".1em solid #000000",m.color="#b50000",m.bottom="0px",m.left="0px",m.margin="0px",m.zIndex="10000",m.textAlign="center",f.classList.add("firebase-emulator-warning"),document.body.appendChild(f)}typeof console<"u"&&"function"==typeof console.info&&console.info("WARNING: You are using the Auth Emulator, which is intended for local testing only.  Do not use with production credentials."),typeof window<"u"&&typeof document<"u"&&("loading"===document.readyState?window.addEventListener("DOMContentLoaded",v):v())}()}function Hu(v){const f=v.indexOf(":");return f<0?"":v.substr(0,f+1)}function po(v){if(!v)return null;const f=Number(v);return isNaN(f)?null:f}class _n{constructor(f,m){this.providerId=f,this.signInMethod=m}toJSON(){return ce("not implemented")}_getIdTokenResponse(f){return ce("not implemented")}_linkToIdToken(f,m){return ce("not implemented")}_getReauthenticationResolver(f){return ce("not implemented")}}function yr(v,f){return Rn.apply(this,arguments)}function Rn(){return(Rn=(0,p.Z)(function*(v,f){return gt(v,"POST","/v1/accounts:resetPassword",Wt(v,f))})).apply(this,arguments)}function Tr(v,f){return Si.apply(this,arguments)}function Si(){return(Si=(0,p.Z)(function*(v,f){return gt(v,"POST","/v1/accounts:update",f)})).apply(this,arguments)}function Ye(v,f){return At.apply(this,arguments)}function At(){return(At=(0,p.Z)(function*(v,f){return gt(v,"POST","/v1/accounts:update",Wt(v,f))})).apply(this,arguments)}function Sr(){return(Sr=(0,p.Z)(function*(v,f){return En(v,"POST","/v1/accounts:signInWithPassword",Wt(v,f))})).apply(this,arguments)}function Ai(v,f){return Vn.apply(this,arguments)}function Vn(){return(Vn=(0,p.Z)(function*(v,f){return gt(v,"POST","/v1/accounts:sendOobCode",Wt(v,f))})).apply(this,arguments)}function vs(v,f){return vn.apply(this,arguments)}function vn(){return(vn=(0,p.Z)(function*(v,f){return Ai(v,f)})).apply(this,arguments)}function Sa(v,f){return Qi.apply(this,arguments)}function Qi(){return(Qi=(0,p.Z)(function*(v,f){return Ai(v,f)})).apply(this,arguments)}function Ot(v,f){return go.apply(this,arguments)}function go(){return(go=(0,p.Z)(function*(v,f){return Ai(v,f)})).apply(this,arguments)}function Aa(v,f){return zu.apply(this,arguments)}function zu(){return(zu=(0,p.Z)(function*(v,f){return Ai(v,f)})).apply(this,arguments)}function Qn(){return(Qn=(0,p.Z)(function*(v,f){return En(v,"POST","/v1/accounts:signInWithEmailLink",Wt(v,f))})).apply(this,arguments)}function Is(){return(Is=(0,p.Z)(function*(v,f){return En(v,"POST","/v1/accounts:signInWithEmailLink",Wt(v,f))})).apply(this,arguments)}class Ur extends _n{constructor(f,m,w,A=null){super("password",w),this._email=f,this._password=m,this._tenantId=A}static _fromEmailAndPassword(f,m){return new Ur(f,m,"password")}static _fromEmailAndCode(f,m,w=null){return new Ur(f,m,"emailLink",w)}toJSON(){return{email:this._email,password:this._password,signInMethod:this.signInMethod,tenantId:this._tenantId}}static fromJSON(f){const m="string"==typeof f?JSON.parse(f):f;if(m?.email&&m?.password){if("password"===m.signInMethod)return this._fromEmailAndPassword(m.email,m.password);if("emailLink"===m.signInMethod)return this._fromEmailAndCode(m.email,m.password,m.tenantId)}return null}_getIdTokenResponse(f){var m=this;return(0,p.Z)(function*(){switch(m.signInMethod){case"password":return function In(v,f){return Sr.apply(this,arguments)}(f,{returnSecureToken:!0,email:m._email,password:m._password});case"emailLink":return function _s(v,f){return Qn.apply(this,arguments)}(f,{email:m._email,oobCode:m._password});default:Re(f,"internal-error")}})()}_linkToIdToken(f,m){var w=this;return(0,p.Z)(function*(){switch(w.signInMethod){case"password":return Tr(f,{idToken:m,returnSecureToken:!0,email:w._email,password:w._password});case"emailLink":return function Wo(v,f){return Is.apply(this,arguments)}(f,{idToken:m,email:w._email,oobCode:w._password});default:Re(f,"internal-error")}})()}_getReauthenticationResolver(f){return this._getIdTokenResponse(f)}}function ci(v,f){return Vr.apply(this,arguments)}function Vr(){return(Vr=(0,p.Z)(function*(v,f){return En(v,"POST","/v1/accounts:signInWithIdp",Wt(v,f))})).apply(this,arguments)}class Xi extends _n{constructor(){super(...arguments),this.pendingToken=null}static _fromParams(f){const m=new Xi(f.providerId,f.signInMethod);return f.idToken||f.accessToken?(f.idToken&&(m.idToken=f.idToken),f.accessToken&&(m.accessToken=f.accessToken),f.nonce&&!f.pendingToken&&(m.nonce=f.nonce),f.pendingToken&&(m.pendingToken=f.pendingToken)):f.oauthToken&&f.oauthTokenSecret?(m.accessToken=f.oauthToken,m.secret=f.oauthTokenSecret):Re("argument-error"),m}toJSON(){return{idToken:this.idToken,accessToken:this.accessToken,secret:this.secret,nonce:this.nonce,pendingToken:this.pendingToken,providerId:this.providerId,signInMethod:this.signInMethod}}static fromJSON(f){const m="string"==typeof f?JSON.parse(f):f,{providerId:w,signInMethod:A}=m,O=(0,ae._T)(m,["providerId","signInMethod"]);if(!w||!A)return null;const ee=new Xi(w,A);return ee.idToken=O.idToken||void 0,ee.accessToken=O.accessToken||void 0,ee.secret=O.secret,ee.nonce=O.nonce,ee.pendingToken=O.pendingToken||null,ee}_getIdTokenResponse(f){return ci(f,this.buildRequest())}_linkToIdToken(f,m){const w=this.buildRequest();return w.idToken=m,ci(f,w)}_getReauthenticationResolver(f){const m=this.buildRequest();return m.autoCreate=!1,ci(f,m)}buildRequest(){const f={requestUri:"http://localhost",returnSecureToken:!0};if(this.pendingToken)f.pendingToken=this.pendingToken;else{const m={};this.idToken&&(m.id_token=this.idToken),this.accessToken&&(m.access_token=this.accessToken),this.secret&&(m.oauth_token_secret=this.secret),m.providerId=this.providerId,this.nonce&&!this.pendingToken&&(m.nonce=this.nonce),f.postBody=(0,B.xO)(m)}return f}}function Wu(v,f){return xa.apply(this,arguments)}function xa(){return(xa=(0,p.Z)(function*(v,f){return gt(v,"POST","/v1/accounts:sendVerificationCode",Wt(v,f))})).apply(this,arguments)}function Ji(){return(Ji=(0,p.Z)(function*(v,f){return En(v,"POST","/v1/accounts:signInWithPhoneNumber",Wt(v,f))})).apply(this,arguments)}function cr(){return(cr=(0,p.Z)(function*(v,f){const m=yield En(v,"POST","/v1/accounts:signInWithPhoneNumber",Wt(v,f));if(m.temporaryProof)throw Fn(v,"account-exists-with-different-credential",m);return m})).apply(this,arguments)}const ep={USER_NOT_FOUND:"user-not-found"};function ei(){return(ei=(0,p.Z)(function*(v,f){return En(v,"POST","/v1/accounts:signInWithPhoneNumber",Wt(v,Object.assign(Object.assign({},f),{operation:"REAUTH"})),ep)})).apply(this,arguments)}class es extends _n{constructor(f){super("phone","phone"),this.params=f}static _fromVerification(f,m){return new es({verificationId:f,verificationCode:m})}static _fromTokenResponse(f,m){return new es({phoneNumber:f,temporaryProof:m})}_getIdTokenResponse(f){return function Go(v,f){return Ji.apply(this,arguments)}(f,this._makeVerificationRequest())}_linkToIdToken(f,m){return function li(v,f){return cr.apply(this,arguments)}(f,Object.assign({idToken:m},this._makeVerificationRequest()))}_getReauthenticationResolver(f){return function Jr(v,f){return ei.apply(this,arguments)}(f,this._makeVerificationRequest())}_makeVerificationRequest(){const{temporaryProof:f,phoneNumber:m,verificationId:w,verificationCode:A}=this.params;return f&&m?{temporaryProof:f,phoneNumber:m}:{sessionInfo:w,code:A}}toJSON(){const f={providerId:this.providerId};return this.params.phoneNumber&&(f.phoneNumber=this.params.phoneNumber),this.params.temporaryProof&&(f.temporaryProof=this.params.temporaryProof),this.params.verificationCode&&(f.verificationCode=this.params.verificationCode),this.params.verificationId&&(f.verificationId=this.params.verificationId),f}static fromJSON(f){"string"==typeof f&&(f=JSON.parse(f));const{verificationId:m,verificationCode:w,phoneNumber:A,temporaryProof:O}=f;return w||m||A||O?new es({verificationId:m,verificationCode:w,phoneNumber:A,temporaryProof:O}):null}}class lr{constructor(f){var m,w,A,O,ee,Ce;const Xe=(0,B.zd)((0,B.pd)(f)),at=null!==(m=Xe.apiKey)&&void 0!==m?m:null,Nt=null!==(w=Xe.oobCode)&&void 0!==w?w:null,wn=function qo(v){switch(v){case"recoverEmail":return"RECOVER_EMAIL";case"resetPassword":return"PASSWORD_RESET";case"signIn":return"EMAIL_SIGNIN";case"verifyEmail":return"VERIFY_EMAIL";case"verifyAndChangeEmail":return"VERIFY_AND_CHANGE_EMAIL";case"revertSecondFactorAddition":return"REVERT_SECOND_FACTOR_ADDITION";default:return null}}(null!==(A=Xe.mode)&&void 0!==A?A:null);X(at&&Nt&&wn,"argument-error"),this.apiKey=at,this.operation=wn,this.code=Nt,this.continueUrl=null!==(O=Xe.continueUrl)&&void 0!==O?O:null,this.languageCode=null!==(ee=Xe.languageCode)&&void 0!==ee?ee:null,this.tenantId=null!==(Ce=Xe.tenantId)&&void 0!==Ce?Ce:null}static parseLink(f){const m=function Gu(v){const f=(0,B.zd)((0,B.pd)(v)).link,m=f?(0,B.zd)((0,B.pd)(f)).deep_link_id:null,w=(0,B.zd)((0,B.pd)(v)).deep_link_id;return(w?(0,B.zd)((0,B.pd)(w)).link:null)||w||m||f||v}(f);try{return new lr(m)}catch{return null}}}let Ma=(()=>{class v{constructor(){this.providerId=v.PROVIDER_ID}static credential(m,w){return Ur._fromEmailAndPassword(m,w)}static credentialWithLink(m,w){const A=lr.parseLink(w);return X(A,"argument-error"),Ur._fromEmailAndCode(m,A.code,A.tenantId)}}return v.PROVIDER_ID="password",v.EMAIL_PASSWORD_SIGN_IN_METHOD="password",v.EMAIL_LINK_SIGN_IN_METHOD="emailLink",v})();class ts{constructor(f){this.providerId=f,this.defaultLanguageCode=null,this.customParameters={}}setDefaultLanguage(f){this.defaultLanguageCode=f}setCustomParameters(f){return this.customParameters=f,this}getCustomParameters(){return this.customParameters}}class mo extends ts{constructor(){super(...arguments),this.scopes=[]}addScope(f){return this.scopes.includes(f)||this.scopes.push(f),this}getScopes(){return[...this.scopes]}}class yo extends mo{static credentialFromJSON(f){const m="string"==typeof f?JSON.parse(f):f;return X("providerId"in m&&"signInMethod"in m,"argument-error"),Xi._fromParams(m)}credential(f){return this._credential(Object.assign(Object.assign({},f),{nonce:f.rawNonce}))}_credential(f){return X(f.idToken||f.accessToken,"argument-error"),Xi._fromParams(Object.assign(Object.assign({},f),{providerId:this.providerId,signInMethod:this.providerId}))}static credentialFromResult(f){return yo.oauthCredentialFromTaggedObject(f)}static credentialFromError(f){return yo.oauthCredentialFromTaggedObject(f.customData||{})}static oauthCredentialFromTaggedObject({_tokenResponse:f}){if(!f)return null;const{oauthIdToken:m,oauthAccessToken:w,oauthTokenSecret:A,pendingToken:O,nonce:ee,providerId:Ce}=f;if(!w&&!A&&!m&&!O||!Ce)return null;try{return new yo(Ce)._credential({idToken:m,accessToken:w,nonce:ee,pendingToken:O})}catch{return null}}}let np=(()=>{class v extends mo{constructor(){super("facebook.com")}static credential(m){return Xi._fromParams({providerId:v.PROVIDER_ID,signInMethod:v.FACEBOOK_SIGN_IN_METHOD,accessToken:m})}static credentialFromResult(m){return v.credentialFromTaggedObject(m)}static credentialFromError(m){return v.credentialFromTaggedObject(m.customData||{})}static credentialFromTaggedObject({_tokenResponse:m}){if(!m||!("oauthAccessToken"in m)||!m.oauthAccessToken)return null;try{return v.credential(m.oauthAccessToken)}catch{return null}}}return v.FACEBOOK_SIGN_IN_METHOD="facebook.com",v.PROVIDER_ID="facebook.com",v})(),eh=(()=>{class v extends mo{constructor(){super("google.com"),this.addScope("profile")}static credential(m,w){return Xi._fromParams({providerId:v.PROVIDER_ID,signInMethod:v.GOOGLE_SIGN_IN_METHOD,idToken:m,accessToken:w})}static credentialFromResult(m){return v.credentialFromTaggedObject(m)}static credentialFromError(m){return v.credentialFromTaggedObject(m.customData||{})}static credentialFromTaggedObject({_tokenResponse:m}){if(!m)return null;const{oauthIdToken:w,oauthAccessToken:A}=m;if(!w&&!A)return null;try{return v.credential(w,A)}catch{return null}}}return v.GOOGLE_SIGN_IN_METHOD="google.com",v.PROVIDER_ID="google.com",v})(),rp=(()=>{class v extends mo{constructor(){super("github.com")}static credential(m){return Xi._fromParams({providerId:v.PROVIDER_ID,signInMethod:v.GITHUB_SIGN_IN_METHOD,accessToken:m})}static credentialFromResult(m){return v.credentialFromTaggedObject(m)}static credentialFromError(m){return v.credentialFromTaggedObject(m.customData||{})}static credentialFromTaggedObject({_tokenResponse:m}){if(!m||!("oauthAccessToken"in m)||!m.oauthAccessToken)return null;try{return v.credential(m.oauthAccessToken)}catch{return null}}}return v.GITHUB_SIGN_IN_METHOD="github.com",v.PROVIDER_ID="github.com",v})();class js extends _n{constructor(f,m){super(f,f),this.pendingToken=m}_getIdTokenResponse(f){return ci(f,this.buildRequest())}_linkToIdToken(f,m){const w=this.buildRequest();return w.idToken=m,ci(f,w)}_getReauthenticationResolver(f){const m=this.buildRequest();return m.autoCreate=!1,ci(f,m)}toJSON(){return{signInMethod:this.signInMethod,providerId:this.providerId,pendingToken:this.pendingToken}}static fromJSON(f){const m="string"==typeof f?JSON.parse(f):f,{providerId:w,signInMethod:A,pendingToken:O}=m;return w&&A&&O&&w===A?new js(w,O):null}static _create(f,m){return new js(f,m)}buildRequest(){return{requestUri:"http://localhost",returnSecureToken:!0,pendingToken:this.pendingToken}}}class Hs extends ts{constructor(f){X(f.startsWith("saml."),"argument-error"),super(f)}static credentialFromResult(f){return Hs.samlCredentialFromTaggedObject(f)}static credentialFromError(f){return Hs.samlCredentialFromTaggedObject(f.customData||{})}static credentialFromJSON(f){const m=js.fromJSON(f);return X(m,"argument-error"),m}static samlCredentialFromTaggedObject({_tokenResponse:f}){if(!f)return null;const{pendingToken:m,providerId:w}=f;if(!m||!w)return null;try{return js._create(w,m)}catch{return null}}}let ns=(()=>{class v extends mo{constructor(){super("twitter.com")}static credential(m,w){return Xi._fromParams({providerId:v.PROVIDER_ID,signInMethod:v.TWITTER_SIGN_IN_METHOD,oauthToken:m,oauthTokenSecret:w})}static credentialFromResult(m){return v.credentialFromTaggedObject(m)}static credentialFromError(m){return v.credentialFromTaggedObject(m.customData||{})}static credentialFromTaggedObject({_tokenResponse:m}){if(!m)return null;const{oauthAccessToken:w,oauthTokenSecret:A}=m;if(!w||!A)return null;try{return v.credential(w,A)}catch{return null}}}return v.TWITTER_SIGN_IN_METHOD="twitter.com",v.PROVIDER_ID="twitter.com",v})();function hl(v,f){return Ra.apply(this,arguments)}function Ra(){return(Ra=(0,p.Z)(function*(v,f){return En(v,"POST","/v1/accounts:signUp",Wt(v,f))})).apply(this,arguments)}class xi{constructor(f){this.user=f.user,this.providerId=f.providerId,this._tokenResponse=f._tokenResponse,this.operationType=f.operationType}static _fromIdTokenResponse(f,m,w,A=!1){return(0,p.Z)(function*(){const O=yield wt._fromIdTokenResponse(f,w,A),ee=Na(w);return new xi({user:O,providerId:ee,_tokenResponse:w,operationType:m})})()}static _forOperation(f,m,w){return(0,p.Z)(function*(){yield f._updateTokensIfNecessary(w,!0);const A=Na(w);return new xi({user:f,providerId:A,_tokenResponse:w,operationType:m})})()}}function Na(v){return v.providerId?v.providerId:"phoneNumber"in v?"phone":null}function th(v){return Zo.apply(this,arguments)}function Zo(){return(Zo=(0,p.Z)(function*(v){var f;const m=ur(v);if(yield m._initializationPromise,null!==(f=m.currentUser)&&void 0!==f&&f.isAnonymous)return new xi({user:m.currentUser,providerId:null,operationType:"signIn"});const w=yield hl(m,{returnSecureToken:!0}),A=yield xi._fromIdTokenResponse(m,"signIn",w,!0);return yield m._updateCurrentUser(A.user),A})).apply(this,arguments)}class fl extends B.ZR{constructor(f,m,w,A){var O;super(m.code,m.message),this.operationType=w,this.user=A,Object.setPrototypeOf(this,fl.prototype),this.customData={appName:f.name,tenantId:null!==(O=f.tenantId)&&void 0!==O?O:void 0,_serverResponse:m.customData._serverResponse,operationType:w}}static _fromErrorAndOperation(f,m,w,A){return new fl(f,m,w,A)}}function ip(v,f,m,w){return("reauthenticate"===f?m._getReauthenticationResolver(v):m._getIdTokenResponse(v)).catch(O=>{throw"auth/multi-factor-auth-required"===O.code?fl._fromErrorAndOperation(v,O,f,w):O})}function zs(v){return new Set(v.map(({providerId:f})=>f).filter(f=>!!f))}function Ws(v,f){return Gs.apply(this,arguments)}function Gs(){return(Gs=(0,p.Z)(function*(v,f){const m=(0,B.m9)(v);yield Ko(!0,m,f);const{providerUserInfo:w}=yield ln(m.auth,{idToken:yield m.getIdToken(),deleteProvider:[f]}),A=zs(w||[]);return m.providerData=m.providerData.filter(O=>A.has(O.providerId)),A.has("phone")||(m.phoneNumber=null),yield m.auth._persistUserIfCurrent(m),m})).apply(this,arguments)}function qs(v,f){return Pa.apply(this,arguments)}function Pa(){return(Pa=(0,p.Z)(function*(v,f,m=!1){const w=yield hn(v,f._linkToIdToken(v.auth,yield v.getIdToken()),m);return xi._forOperation(v,"link",w)})).apply(this,arguments)}function Ko(v,f,m){return Zs.apply(this,arguments)}function Zs(){return(Zs=(0,p.Z)(function*(v,f,m){yield Ci(f);const A=!1===v?"provider-already-linked":"no-such-provider";X(zs(f.providerData).has(m)===v,f.auth,A)})).apply(this,arguments)}function Oa(v,f){return Yo.apply(this,arguments)}function Yo(){return(Yo=(0,p.Z)(function*(v,f,m=!1){const{auth:w}=v,A="reauthenticate";try{const O=yield hn(v,ip(w,A,f,v),m);X(O.idToken,w,"internal-error");const ee=ht(O.idToken);X(ee,w,"internal-error");const{sub:Ce}=ee;return X(v.uid===Ce,w,"user-mismatch"),xi._forOperation(v,A,O)}catch(O){throw"auth/user-not-found"===O?.code&&Re(w,"user-mismatch"),O}})).apply(this,arguments)}function Qo(v,f){return Xo.apply(this,arguments)}function Xo(){return(Xo=(0,p.Z)(function*(v,f,m=!1){const w="signIn",A=yield ip(v,w,f),O=yield xi._fromIdTokenResponse(v,w,A);return m||(yield v._updateCurrentUser(O.user)),O})).apply(this,arguments)}function Ar(v,f){return Nn.apply(this,arguments)}function Nn(){return(Nn=(0,p.Z)(function*(v,f){return Qo(ur(v),f)})).apply(this,arguments)}function ka(v,f){return Sn.apply(this,arguments)}function Sn(){return(Sn=(0,p.Z)(function*(v,f){const m=(0,B.m9)(v);return yield Ko(!1,m,f.providerId),qs(m,f)})).apply(this,arguments)}function Jo(v,f){return ws.apply(this,arguments)}function ws(){return(ws=(0,p.Z)(function*(v,f){return Oa((0,B.m9)(v),f)})).apply(this,arguments)}function Br(v,f){return Fa.apply(this,arguments)}function Fa(){return(Fa=(0,p.Z)(function*(v,f){return En(v,"POST","/v1/accounts:signInWithCustomToken",Wt(v,f))})).apply(this,arguments)}function La(v,f){return Vi.apply(this,arguments)}function Vi(){return(Vi=(0,p.Z)(function*(v,f){const m=ur(v),w=yield Br(m,{token:f,returnSecureToken:!0}),A=yield xi._fromIdTokenResponse(m,"signIn",w);return yield m._updateCurrentUser(A.user),A})).apply(this,arguments)}class Xn{constructor(f,m){this.factorId=f,this.uid=m.mfaEnrollmentId,this.enrollmentTime=new Date(m.enrolledAt).toUTCString(),this.displayName=m.displayName}static _fromServerResponse(f,m){return"phoneInfo"in m?Ua._fromServerResponse(f,m):Re(f,"internal-error")}}class Ua extends Xn{constructor(f){super("phone",f),this.phoneNumber=f.phoneInfo}static _fromServerResponse(f,m){return new Ua(m)}}function vo(v,f,m){var w;X((null===(w=m.url)||void 0===w?void 0:w.length)>0,v,"invalid-continue-uri"),X(typeof m.dynamicLinkDomain>"u"||m.dynamicLinkDomain.length>0,v,"invalid-dynamic-link-domain"),f.continueUrl=m.url,f.dynamicLinkDomain=m.dynamicLinkDomain,f.canHandleCodeInApp=m.handleCodeInApp,m.iOS&&(X(m.iOS.bundleId.length>0,v,"missing-ios-bundle-id"),f.iOSBundleId=m.iOS.bundleId),m.android&&(X(m.android.packageName.length>0,v,"missing-android-pkg-name"),f.androidInstallApp=m.android.installApp,f.androidMinimumVersionCode=m.android.minimumVersion,f.androidPackageName=m.android.packageName)}function nh(v,f,m){return di.apply(this,arguments)}function di(){return(di=(0,p.Z)(function*(v,f,m){const w=(0,B.m9)(v),A={requestType:"PASSWORD_RESET",email:f};m&&vo(w,A,m),yield Sa(w,A)})).apply(this,arguments)}function qu(v,f,m){return Ks.apply(this,arguments)}function Ks(){return(Ks=(0,p.Z)(function*(v,f,m){yield yr((0,B.m9)(v),{oobCode:f,newPassword:m})})).apply(this,arguments)}function Rt(v,f){return _o.apply(this,arguments)}function _o(){return(_o=(0,p.Z)(function*(v,f){yield Ye((0,B.m9)(v),{oobCode:f})})).apply(this,arguments)}function pl(v,f){return ea.apply(this,arguments)}function ea(){return(ea=(0,p.Z)(function*(v,f){const m=(0,B.m9)(v),w=yield yr(m,{oobCode:f}),A=w.requestType;switch(X(A,m,"internal-error"),A){case"EMAIL_SIGNIN":break;case"VERIFY_AND_CHANGE_EMAIL":X(w.newEmail,m,"internal-error");break;case"REVERT_SECOND_FACTOR_ADDITION":X(w.mfaInfo,m,"internal-error");default:X(w.email,m,"internal-error")}let O=null;return w.mfaInfo&&(O=Xn._fromServerResponse(ur(m),w.mfaInfo)),{data:{email:("VERIFY_AND_CHANGE_EMAIL"===w.requestType?w.newEmail:w.email)||null,previousEmail:("VERIFY_AND_CHANGE_EMAIL"===w.requestType?w.email:w.newEmail)||null,multiFactorInfo:O},operation:A}})).apply(this,arguments)}function rh(v,f){return Va.apply(this,arguments)}function Va(){return(Va=(0,p.Z)(function*(v,f){const{data:m}=yield pl((0,B.m9)(v),f);return m.email})).apply(this,arguments)}function gl(v,f,m){return bn.apply(this,arguments)}function bn(){return(bn=(0,p.Z)(function*(v,f,m){const w=ur(v),A=yield hl(w,{returnSecureToken:!0,email:f,password:m}),O=yield xi._fromIdTokenResponse(w,"signIn",A);return yield w._updateCurrentUser(O.user),O})).apply(this,arguments)}function sp(v,f,m){return Ar((0,B.m9)(v),Ma.credential(f,m))}function xe(v,f,m){return Yt.apply(this,arguments)}function Yt(){return(Yt=(0,p.Z)(function*(v,f,m){const w=(0,B.m9)(v),A={requestType:"EMAIL_SIGNIN",email:f};X(m.handleCodeInApp,w,"argument-error"),m&&vo(w,A,m),yield Ot(w,A)})).apply(this,arguments)}function ih(v,f){return"EMAIL_SIGNIN"===lr.parseLink(f)?.operation}function ml(v,f,m){return Jn.apply(this,arguments)}function Jn(){return(Jn=(0,p.Z)(function*(v,f,m){const w=(0,B.m9)(v),A=Ma.credentialWithLink(f,m||Le());return X(A._tenantId===(w.tenantId||null),w,"tenant-id-mismatch"),Ar(w,A)})).apply(this,arguments)}function Ba(v,f){return Io.apply(this,arguments)}function Io(){return(Io=(0,p.Z)(function*(v,f){return gt(v,"POST","/v1/accounts:createAuthUri",Wt(v,f))})).apply(this,arguments)}function Bi(v,f){return wo.apply(this,arguments)}function wo(){return(wo=(0,p.Z)(function*(v,f){const w={identifier:f,continueUri:Fe()?Le():"http://localhost"},{signinMethods:A}=yield Ba((0,B.m9)(v),w);return A||[]})).apply(this,arguments)}function $a(v,f){return ta.apply(this,arguments)}function ta(){return(ta=(0,p.Z)(function*(v,f){const m=(0,B.m9)(v),A={requestType:"VERIFY_EMAIL",idToken:yield v.getIdToken()};f&&vo(m.auth,A,f);const{email:O}=yield vs(m.auth,A);O!==v.email&&(yield v.reload())})).apply(this,arguments)}function op(v,f,m){return Es.apply(this,arguments)}function Es(){return(Es=(0,p.Z)(function*(v,f,m){const w=(0,B.m9)(v),O={requestType:"VERIFY_AND_CHANGE_EMAIL",idToken:yield v.getIdToken(),newEmail:f};m&&vo(w.auth,O,m);const{email:ee}=yield Aa(w.auth,O);ee!==v.email&&(yield v.reload())})).apply(this,arguments)}function Pn(v,f){return hi.apply(this,arguments)}function hi(){return(hi=(0,p.Z)(function*(v,f){return gt(v,"POST","/v1/accounts:update",f)})).apply(this,arguments)}function sh(v,f){return Mi.apply(this,arguments)}function Mi(){return(Mi=(0,p.Z)(function*(v,{displayName:f,photoURL:m}){if(void 0===f&&void 0===m)return;const w=(0,B.m9)(v),O={idToken:yield w.getIdToken(),displayName:f,photoUrl:m,returnSecureToken:!0},ee=yield hn(w,Pn(w.auth,O));w.displayName=ee.displayName||null,w.photoURL=ee.photoUrl||null;const Ce=w.providerData.find(({providerId:Xe})=>"password"===Xe);Ce&&(Ce.displayName=w.displayName,Ce.photoURL=w.photoURL),yield w._updateTokensIfNecessary(ee)})).apply(this,arguments)}function $i(v,f){return ja((0,B.m9)(v),f,null)}function ap(v,f){return ja((0,B.m9)(v),null,f)}function ja(v,f,m){return Ha.apply(this,arguments)}function Ha(){return(Ha=(0,p.Z)(function*(v,f,m){const{auth:w}=v,O={idToken:yield v.getIdToken(),returnSecureToken:!0};f&&(O.email=f),m&&(O.password=m);const ee=yield hn(v,Tr(w,O));yield v._updateTokensIfNecessary(ee,!0)})).apply(this,arguments)}class Ys{constructor(f,m,w={}){this.isNewUser=f,this.providerId=m,this.profile=w}}class Ku extends Ys{constructor(f,m,w,A){super(f,m,w),this.username=A}}class oh extends Ys{constructor(f,m){super(f,"facebook.com",m)}}class Yu extends Ku{constructor(f,m){super(f,"github.com",m,"string"==typeof m?.login?m?.login:null)}}class yl extends Ys{constructor(f,m){super(f,"google.com",m)}}class ah extends Ku{constructor(f,m,w){super(f,"twitter.com",m,w)}}function za(v){const{user:f,_tokenResponse:m}=v;return f.isAnonymous&&!m?{providerId:null,isNewUser:!1,profile:null}:function Zu(v){var f,m;if(!v)return null;const{providerId:w}=v,A=v.rawUserInfo?JSON.parse(v.rawUserInfo):{},O=v.isNewUser||"identitytoolkit#SignupNewUserResponse"===v.kind;if(!w&&v?.idToken){const ee=null===(m=null===(f=ht(v.idToken))||void 0===f?void 0:f.firebase)||void 0===m?void 0:m.sign_in_provider;if(ee)return new Ys(O,"anonymous"!==ee&&"custom"!==ee?ee:null)}if(!w)return null;switch(w){case"facebook.com":return new oh(O,A);case"github.com":return new Yu(O,A);case"google.com":return new yl(O,A);case"twitter.com":return new ah(O,A,v.screenName||null);case"custom":case"anonymous":return new Ys(O,null);default:return new Ys(O,w,A)}}(m)}class cn{constructor(f,m,w){this.type=f,this.credential=m,this.auth=w}static _fromIdtoken(f,m){return new cn("enroll",f,m)}static _fromMfaPendingCredential(f){return new cn("signin",f)}toJSON(){return{multiFactorSession:{["enroll"===this.type?"idToken":"pendingCredential"]:this.credential}}}static fromJSON(f){var m,w;if(f?.multiFactorSession){if(null!==(m=f.multiFactorSession)&&void 0!==m&&m.pendingCredential)return cn._fromMfaPendingCredential(f.multiFactorSession.pendingCredential);if(null!==(w=f.multiFactorSession)&&void 0!==w&&w.idToken)return cn._fromIdtoken(f.multiFactorSession.idToken)}return null}}class vl{constructor(f,m,w){this.session=f,this.hints=m,this.signInResolver=w}static _fromError(f,m){const w=ur(f),A=m.customData._serverResponse,O=(A.mfaInfo||[]).map(Ce=>Xn._fromServerResponse(w,Ce));X(A.mfaPendingCredential,w,"internal-error");const ee=cn._fromMfaPendingCredential(A.mfaPendingCredential);return new vl(ee,O,function(){var Ce=(0,p.Z)(function*(Xe){const at=yield Xe._process(w,ee);delete A.mfaInfo,delete A.mfaPendingCredential;const Nt=Object.assign(Object.assign({},A),{idToken:at.idToken,refreshToken:at.refreshToken});switch(m.operationType){case"signIn":const wn=yield xi._fromIdTokenResponse(w,m.operationType,Nt);return yield w._updateCurrentUser(wn.user),wn;case"reauthenticate":return X(m.user,w,"internal-error"),xi._forOperation(m.user,m.operationType,Nt);default:Re(w,"internal-error")}});return function(Xe){return Ce.apply(this,arguments)}}())}resolveSignIn(f){var m=this;return(0,p.Z)(function*(){return m.signInResolver(f)})()}}function uh(v,f){var m;const w=(0,B.m9)(v),A=f;return X(f.customData.operationType,w,"argument-error"),X(null===(m=A.customData._serverResponse)||void 0===m?void 0:m.mfaPendingCredential,w,"argument-error"),vl._fromError(w,A)}function vr(v,f){return gt(v,"POST","/v2/accounts/mfaEnrollment:start",Wt(v,f))}class Ju{constructor(f){this.user=f,this.enrolledFactors=[],f._onReload(m=>{m.mfaInfo&&(this.enrolledFactors=m.mfaInfo.map(w=>Xn._fromServerResponse(f.auth,w)))})}static _fromUser(f){return new Ju(f)}getSession(){var f=this;return(0,p.Z)(function*(){return cn._fromIdtoken(yield f.user.getIdToken(),f.user.auth)})()}enroll(f,m){var w=this;return(0,p.Z)(function*(){const A=f,O=yield w.getSession(),ee=yield hn(w.user,A._process(w.user.auth,O,m));return yield w.user._updateTokensIfNecessary(ee),w.user.reload()})()}unenroll(f){var m=this;return(0,p.Z)(function*(){const w="string"==typeof f?f:f.uid,A=yield m.user.getIdToken(),O=yield hn(m.user,function hp(v,f){return gt(v,"POST","/v2/accounts/mfaEnrollment:withdraw",Wt(v,f))}(m.user.auth,{idToken:A,mfaEnrollmentId:w}));m.enrolledFactors=m.enrolledFactors.filter(({uid:ee})=>ee!==w),yield m.user._updateTokensIfNecessary(O);try{yield m.user.reload()}catch(ee){if("auth/user-token-expired"!==ee?.code)throw ee}})()}}const bs=new WeakMap;function ji(v){const f=(0,B.m9)(v);return bs.has(f)||bs.set(f,Ju._fromUser(f)),bs.get(f)}const Qs="__sak";class rs{constructor(f,m){this.storageRetriever=f,this.type=m}_isAvailable(){try{return this.storage?(this.storage.setItem(Qs,"1"),this.storage.removeItem(Qs),Promise.resolve(!0)):Promise.resolve(!1)}catch{return Promise.resolve(!1)}}_set(f,m){return this.storage.setItem(f,JSON.stringify(m)),Promise.resolve()}_get(f){const m=this.storage.getItem(f);return Promise.resolve(m?JSON.parse(m):null)}_remove(f){return this.storage.removeItem(f),Promise.resolve()}get storage(){return this.storageRetriever()}}const $r=(()=>{class v extends rs{constructor(){super(()=>window.localStorage,"LOCAL"),this.boundEventHandler=(m,w)=>this.onStorageEvent(m,w),this.listeners={},this.localCache={},this.pollTimer=null,this.safariLocalStorageNotSynced=function _l(){const v=(0,B.z$)();return L(v)||ut(v)}()&&function Bu(){try{return!(!window||window===window.top)}catch{return!1}}(),this.fallbackToPolling=Cr(),this._shouldAllowMigration=!0}forAllChangedKeys(m){for(const w of Object.keys(this.listeners)){const A=this.storage.getItem(w),O=this.localCache[w];A!==O&&m(w,O,A)}}onStorageEvent(m,w=!1){if(!m.key)return void this.forAllChangedKeys((Ce,Xe,at)=>{this.notifyListeners(Ce,at)});const A=m.key;if(w?this.detachListener():this.stopPolling(),this.safariLocalStorageNotSynced){const Ce=this.storage.getItem(A);if(m.newValue!==Ce)null!==m.newValue?this.storage.setItem(A,m.newValue):this.storage.removeItem(A);else if(this.localCache[A]===m.newValue&&!w)return}const O=()=>{const Ce=this.storage.getItem(A);!w&&this.localCache[A]===Ce||this.notifyListeners(A,Ce)},ee=this.storage.getItem(A);!function Tt(){return(0,B.w1)()&&10===document.documentMode}()||ee===m.newValue||m.newValue===m.oldValue?O():setTimeout(O,10)}notifyListeners(m,w){this.localCache[m]=w;const A=this.listeners[m];if(A)for(const O of Array.from(A))O(w&&JSON.parse(w))}startPolling(){this.stopPolling(),this.pollTimer=setInterval(()=>{this.forAllChangedKeys((m,w,A)=>{this.onStorageEvent(new StorageEvent("storage",{key:m,oldValue:w,newValue:A}),!0)})},1e3)}stopPolling(){this.pollTimer&&(clearInterval(this.pollTimer),this.pollTimer=null)}attachListener(){window.addEventListener("storage",this.boundEventHandler)}detachListener(){window.removeEventListener("storage",this.boundEventHandler)}_addListener(m,w){0===Object.keys(this.listeners).length&&(this.fallbackToPolling?this.startPolling():this.attachListener()),this.listeners[m]||(this.listeners[m]=new Set,this.localCache[m]=this.storage.getItem(m)),this.listeners[m].add(w)}_removeListener(m,w){this.listeners[m]&&(this.listeners[m].delete(w),0===this.listeners[m].size&&delete this.listeners[m]),0===Object.keys(this.listeners).length&&(this.detachListener(),this.stopPolling())}_set(m,w){var A=()=>super._set,O=this;return(0,p.Z)(function*(){yield A().call(O,m,w),O.localCache[m]=JSON.stringify(w)})()}_get(m){var w=()=>super._get,A=this;return(0,p.Z)(function*(){const O=yield w().call(A,m);return A.localCache[m]=JSON.stringify(O),O})()}_remove(m){var w=()=>super._remove,A=this;return(0,p.Z)(function*(){yield w().call(A,m),delete A.localCache[m]})()}}return v.type="LOCAL",v})(),Cs=(()=>{class v extends rs{constructor(){super(()=>window.sessionStorage,"SESSION")}_addListener(m,w){}_removeListener(m,w){}}return v.type="SESSION",v})();let tc=(()=>{class v{constructor(m){this.eventTarget=m,this.handlersMap={},this.boundEventHandler=this.handleEvent.bind(this)}static _getInstance(m){const w=this.receivers.find(O=>O.isListeningto(m));if(w)return w;const A=new v(m);return this.receivers.push(A),A}isListeningto(m){return this.eventTarget===m}handleEvent(m){var w=this;return(0,p.Z)(function*(){const A=m,{eventId:O,eventType:ee,data:Ce}=A.data,Xe=w.handlersMap[ee];if(!Xe?.size)return;A.ports[0].postMessage({status:"ack",eventId:O,eventType:ee});const at=Array.from(Xe).map(function(){var wn=(0,p.Z)(function*(oi){return oi(A.origin,Ce)});return function(oi){return wn.apply(this,arguments)}}()),Nt=yield function ec(v){return Promise.all(v.map(function(){var f=(0,p.Z)(function*(m){try{return{fulfilled:!0,value:yield m}}catch(w){return{fulfilled:!1,reason:w}}});return function(m){return f.apply(this,arguments)}}()))}(at);A.ports[0].postMessage({status:"done",eventId:O,eventType:ee,response:Nt})})()}_subscribe(m,w){0===Object.keys(this.handlersMap).length&&this.eventTarget.addEventListener("message",this.boundEventHandler),this.handlersMap[m]||(this.handlersMap[m]=new Set),this.handlersMap[m].add(w)}_unsubscribe(m,w){this.handlersMap[m]&&w&&this.handlersMap[m].delete(w),(!w||0===this.handlersMap[m].size)&&delete this.handlersMap[m],0===Object.keys(this.handlersMap).length&&this.eventTarget.removeEventListener("message",this.boundEventHandler)}}return v.receivers=[],v})();function Do(v="",f=10){let m="";for(let w=0;w<f;w++)m+=Math.floor(10*Math.random());return v+m}class Ga{constructor(f){this.target=f,this.handlers=new Set}removeMessageHandler(f){f.messageChannel&&(f.messageChannel.port1.removeEventListener("message",f.onMessage),f.messageChannel.port1.close()),this.handlers.delete(f)}_send(f,m,w=50){var A=this;return(0,p.Z)(function*(){const O=typeof MessageChannel<"u"?new MessageChannel:null;if(!O)throw new Error("connection_unavailable");let ee,Ce;return new Promise((Xe,at)=>{const Nt=Do("",20);O.port1.start();const wn=setTimeout(()=>{at(new Error("unsupported_event"))},w);Ce={messageChannel:O,onMessage(oi){const Rs=oi;if(Rs.data.eventId===Nt)switch(Rs.data.status){case"ack":clearTimeout(wn),ee=setTimeout(()=>{at(new Error("timeout"))},3e3);break;case"done":clearTimeout(ee),Xe(Rs.data.response);break;default:clearTimeout(wn),clearTimeout(ee),at(new Error("invalid_response"))}}},A.handlers.add(Ce),O.port1.addEventListener("message",Ce.onMessage),A.target.postMessage({eventType:f,eventId:Nt,data:m},[O.port2])}).finally(()=>{Ce&&A.removeMessageHandler(Ce)})})()}}function An(){return window}function Ts(){return typeof An().WorkerGlobalScope<"u"&&"function"==typeof An().importScripts}function Hi(){return(Hi=(0,p.Z)(function*(){if(!navigator?.serviceWorker)return null;try{return(yield navigator.serviceWorker.ready).active}catch{return null}})).apply(this,arguments)}const ra="firebaseLocalStorageDb",is="firebaseLocalStorage",Xs="fbase_key";class Js{constructor(f){this.request=f}toPromise(){return new Promise((f,m)=>{this.request.addEventListener("success",()=>{f(this.request.result)}),this.request.addEventListener("error",()=>{m(this.request.error)})})}}function eo(v,f){return v.transaction([is],f?"readwrite":"readonly").objectStore(is)}function bo(){const v=indexedDB.open(ra,1);return new Promise((f,m)=>{v.addEventListener("error",()=>{m(v.error)}),v.addEventListener("upgradeneeded",()=>{const w=v.result;try{w.createObjectStore(is,{keyPath:Xs})}catch(A){m(A)}}),v.addEventListener("success",(0,p.Z)(function*(){const w=v.result;w.objectStoreNames.contains(is)?f(w):(w.close(),yield function Za(){const v=indexedDB.deleteDatabase(ra);return new Js(v).toPromise()}(),f(yield bo()))}))})}function rc(v,f,m){return xr.apply(this,arguments)}function xr(){return(xr=(0,p.Z)(function*(v,f,m){const w=eo(v,!0).put({[Xs]:f,value:m});return new Js(w).toPromise()})).apply(this,arguments)}function Ss(){return(Ss=(0,p.Z)(function*(v,f){const m=eo(v,!1).get(f),w=yield new Js(m).toPromise();return void 0===w?null:w.value})).apply(this,arguments)}function Co(v,f){const m=eo(v,!0).delete(f);return new Js(m).toPromise()}const Qa=(()=>{class v{constructor(){this.type="LOCAL",this._shouldAllowMigration=!0,this.listeners={},this.localCache={},this.pollTimer=null,this.pendingWrites=0,this.receiver=null,this.sender=null,this.serviceWorkerReceiverAvailable=!1,this.activeServiceWorker=null,this._workerInitializationPromise=this.initializeServiceWorkerMessaging().then(()=>{},()=>{})}_openDb(){var m=this;return(0,p.Z)(function*(){return m.db||(m.db=yield bo()),m.db})()}_withRetries(m){var w=this;return(0,p.Z)(function*(){let A=0;for(;;)try{const O=yield w._openDb();return yield m(O)}catch(O){if(A++>3)throw O;w.db&&(w.db.close(),w.db=void 0)}})()}initializeServiceWorkerMessaging(){var m=this;return(0,p.Z)(function*(){return Ts()?m.initializeReceiver():m.initializeSender()})()}initializeReceiver(){var m=this;return(0,p.Z)(function*(){m.receiver=tc._getInstance(function El(){return Ts()?self:null}()),m.receiver._subscribe("keyChanged",function(){var w=(0,p.Z)(function*(A,O){return{keyProcessed:(yield m._poll()).includes(O.key)}});return function(A,O){return w.apply(this,arguments)}}()),m.receiver._subscribe("ping",function(){var w=(0,p.Z)(function*(A,O){return["keyChanged"]});return function(A,O){return w.apply(this,arguments)}}())})()}initializeSender(){var m=this;return(0,p.Z)(function*(){var w,A;if(m.activeServiceWorker=yield function qa(){return Hi.apply(this,arguments)}(),!m.activeServiceWorker)return;m.sender=new Ga(m.activeServiceWorker);const O=yield m.sender._send("ping",{},800);!O||(null===(w=O[0])||void 0===w?void 0:w.fulfilled)&&(null===(A=O[0])||void 0===A?void 0:A.value.includes("keyChanged"))&&(m.serviceWorkerReceiverAvailable=!0)})()}notifyServiceWorker(m){var w=this;return(0,p.Z)(function*(){if(w.sender&&w.activeServiceWorker&&function wl(){var v;return(null===(v=navigator?.serviceWorker)||void 0===v?void 0:v.controller)||null}()===w.activeServiceWorker)try{yield w.sender._send("keyChanged",{key:m},w.serviceWorkerReceiverAvailable?800:50)}catch{}})()}_isAvailable(){return(0,p.Z)(function*(){try{if(!indexedDB)return!1;const m=yield bo();return yield rc(m,Qs,"1"),yield Co(m,Qs),!0}catch{}return!1})()}_withPendingWrite(m){var w=this;return(0,p.Z)(function*(){w.pendingWrites++;try{yield m()}finally{w.pendingWrites--}})()}_set(m,w){var A=this;return(0,p.Z)(function*(){return A._withPendingWrite((0,p.Z)(function*(){return yield A._withRetries(O=>rc(O,m,w)),A.localCache[m]=w,A.notifyServiceWorker(m)}))})()}_get(m){var w=this;return(0,p.Z)(function*(){const A=yield w._withRetries(O=>function lh(v,f){return Ss.apply(this,arguments)}(O,m));return w.localCache[m]=A,A})()}_remove(m){var w=this;return(0,p.Z)(function*(){return w._withPendingWrite((0,p.Z)(function*(){return yield w._withRetries(A=>Co(A,m)),delete w.localCache[m],w.notifyServiceWorker(m)}))})()}_poll(){var m=this;return(0,p.Z)(function*(){const w=yield m._withRetries(ee=>{const Ce=eo(ee,!1).getAll();return new Js(Ce).toPromise()});if(!w)return[];if(0!==m.pendingWrites)return[];const A=[],O=new Set;for(const{fbase_key:ee,value:Ce}of w)O.add(ee),JSON.stringify(m.localCache[ee])!==JSON.stringify(Ce)&&(m.notifyListeners(ee,Ce),A.push(ee));for(const ee of Object.keys(m.localCache))m.localCache[ee]&&!O.has(ee)&&(m.notifyListeners(ee,null),A.push(ee));return A})()}notifyListeners(m,w){this.localCache[m]=w;const A=this.listeners[m];if(A)for(const O of Array.from(A))O(w)}startPolling(){var m=this;this.stopPolling(),this.pollTimer=setInterval((0,p.Z)(function*(){return m._poll()}),800)}stopPolling(){this.pollTimer&&(clearInterval(this.pollTimer),this.pollTimer=null)}_addListener(m,w){0===Object.keys(this.listeners).length&&this.startPolling(),this.listeners[m]||(this.listeners[m]=new Set,this._get(m)),this.listeners[m].add(w)}_removeListener(m,w){this.listeners[m]&&(this.listeners[m].delete(w),0===this.listeners[m].size&&delete this.listeners[m]),0===Object.keys(this.listeners).length&&this.stopPolling()}}return v.type="LOCAL",v})();function Xa(v,f){return gt(v,"POST","/v2/accounts/mfaSignIn:start",Wt(v,f))}function ni(){return(ni=(0,p.Z)(function*(v){return(yield gt(v,"GET","/v1/recaptchaParams")).recaptchaSiteKey||""})).apply(this,arguments)}function To(v){return new Promise((f,m)=>{const w=document.createElement("script");w.setAttribute("src",v),w.onload=f,w.onerror=A=>{const O=Pe("internal-error");O.customData=A,m(O)},w.type="text/javascript",w.charset="UTF-8",function hh(){var v,f;return null!==(f=null===(v=document.getElementsByTagName("head"))||void 0===v?void 0:v[0])&&void 0!==f?f:document}().appendChild(w)})}function Ri(v){return`__${v}${Math.floor(1e6*Math.random())}`}const ri=1e12;class ss{constructor(f){this.auth=f,this.counter=ri,this._widgets=new Map}render(f,m){const w=this.counter;return this._widgets.set(w,new fh(f,this.auth.name,m||{})),this.counter++,w}reset(f){var m;const w=f||ri;null===(m=this._widgets.get(w))||void 0===m||m.delete(),this._widgets.delete(w)}getResponse(f){var m;return(null===(m=this._widgets.get(f||ri))||void 0===m?void 0:m.getResponse())||""}execute(f){var m=this;return(0,p.Z)(function*(){var w;return null===(w=m._widgets.get(f||ri))||void 0===w||w.execute(),""})()}}class fh{constructor(f,m,w){this.params=w,this.timerId=null,this.deleted=!1,this.responseToken=null,this.clickHandler=()=>{this.execute()};const A="string"==typeof f?document.getElementById(f):f;X(A,"argument-error",{appName:m}),this.container=A,this.isVisible="invisible"!==this.params.size,this.isVisible?this.execute():this.container.addEventListener("click",this.clickHandler)}getResponse(){return this.checkIfDeleted(),this.responseToken}delete(){this.checkIfDeleted(),this.deleted=!0,this.timerId&&(clearTimeout(this.timerId),this.timerId=null),this.container.removeEventListener("click",this.clickHandler)}execute(){this.checkIfDeleted(),!this.timerId&&(this.timerId=window.setTimeout(()=>{this.responseToken=function sc(v){const f=[],m="1234567890abcdefghijklmnopqrstuvwxyzABCDEFGHIJKLMNOPQRSTUVWXYZ";for(let w=0;w<v;w++)f.push(m.charAt(Math.floor(Math.random()*m.length)));return f.join("")}(50);const{callback:f,"expired-callback":m}=this.params;if(f)try{f(this.responseToken)}catch{}this.timerId=window.setTimeout(()=>{if(this.timerId=null,this.responseToken=null,m)try{m()}catch{}this.isVisible&&this.execute()},6e4)},500))}checkIfDeleted(){if(this.deleted)throw new Error("reCAPTCHA mock was already deleted!")}}const ia=Ri("rcb"),Nm=new It(3e4,6e4);class Tl{constructor(){var f;this.hostLanguage="",this.counter=0,this.librarySeparatelyLoaded=!(null===(f=An().grecaptcha)||void 0===f||!f.render)}load(f,m=""){return X(function As(v){return v.length<=6&&/^\s*[a-zA-Z0-9\-]*\s*$/.test(v)}(m),f,"argument-error"),this.shouldResolveImmediately(m)?Promise.resolve(An().grecaptcha):new Promise((w,A)=>{const O=An().setTimeout(()=>{A(Pe(f,"network-request-failed"))},Nm.get());An()[ia]=()=>{An().clearTimeout(O),delete An()[ia];const Ce=An().grecaptcha;if(!Ce)return void A(Pe(f,"internal-error"));const Xe=Ce.render;Ce.render=(at,Nt)=>{const wn=Xe(at,Nt);return this.counter++,wn},this.hostLanguage=m,w(Ce)},To(`https://www.google.com/recaptcha/api.js??${(0,B.xO)({onload:ia,render:"explicit",hl:m})}`).catch(()=>{clearTimeout(O),A(Pe(f,"internal-error"))})})}clearedOneInstance(){this.counter--}shouldResolveImmediately(f){var m;return!(null===(m=An().grecaptcha)||void 0===m||!m.render)&&(f===this.hostLanguage||this.counter>0||this.librarySeparatelyLoaded)}}class So{load(f){return(0,p.Z)(function*(){return new ss(f)})()}clearedOneInstance(){}}const Ao="recaptcha",ph={theme:"light",type:"image"};class gh{constructor(f,m=Object.assign({},ph),w){this.parameters=m,this.type=Ao,this.destroyed=!1,this.widgetId=null,this.tokenChangeListeners=new Set,this.renderPromise=null,this.recaptcha=null,this.auth=ur(w),this.isInvisible="invisible"===this.parameters.size,X(typeof document<"u",this.auth,"operation-not-supported-in-this-environment");const A="string"==typeof f?document.getElementById(f):f;X(A,this.auth,"argument-error"),this.container=A,this.parameters.callback=this.makeTokenCallback(this.parameters.callback),this._recaptchaLoader=this.auth.settings.appVerificationDisabledForTesting?new So:new Tl,this.validateStartingState()}verify(){var f=this;return(0,p.Z)(function*(){f.assertNotDestroyed();const m=yield f.render(),w=f.getAssertedRecaptcha();return w.getResponse(m)||new Promise(O=>{const ee=Ce=>{!Ce||(f.tokenChangeListeners.delete(ee),O(Ce))};f.tokenChangeListeners.add(ee),f.isInvisible&&w.execute(m)})})()}render(){try{this.assertNotDestroyed()}catch(f){return Promise.reject(f)}return this.renderPromise||(this.renderPromise=this.makeRenderPromise().catch(f=>{throw this.renderPromise=null,f})),this.renderPromise}_reset(){this.assertNotDestroyed(),null!==this.widgetId&&this.getAssertedRecaptcha().reset(this.widgetId)}clear(){this.assertNotDestroyed(),this.destroyed=!0,this._recaptchaLoader.clearedOneInstance(),this.isInvisible||this.container.childNodes.forEach(f=>{this.container.removeChild(f)})}validateStartingState(){X(!this.parameters.sitekey,this.auth,"argument-error"),X(this.isInvisible||!this.container.hasChildNodes(),this.auth,"argument-error"),X(typeof document<"u",this.auth,"operation-not-supported-in-this-environment")}makeTokenCallback(f){return m=>{if(this.tokenChangeListeners.forEach(w=>w(m)),"function"==typeof f)f(m);else if("string"==typeof f){const w=An()[f];"function"==typeof w&&w(m)}}}assertNotDestroyed(){X(!this.destroyed,this.auth,"internal-error")}makeRenderPromise(){var f=this;return(0,p.Z)(function*(){if(yield f.init(),!f.widgetId){let m=f.container;if(!f.isInvisible){const w=document.createElement("div");m.appendChild(w),m=w}f.widgetId=f.getAssertedRecaptcha().render(m,f.parameters)}return f.widgetId})()}init(){var f=this;return(0,p.Z)(function*(){X(Fe()&&!Ts(),f.auth,"internal-error"),yield function eu(){let v=null;return new Promise(f=>{"complete"!==document.readyState?(v=()=>f(),window.addEventListener("load",v)):f()}).catch(f=>{throw v&&window.removeEventListener("load",v),f})}(),f.recaptcha=yield f._recaptchaLoader.load(f.auth,f.auth.languageCode||void 0);const m=yield function dh(v){return ni.apply(this,arguments)}(f.auth);X(m,f.auth,"internal-error"),f.parameters.sitekey=m})()}getAssertedRecaptcha(){return X(this.recaptcha,this.auth,"internal-error"),this.recaptcha}}class oc{constructor(f,m){this.verificationId=f,this.onConfirmation=m}confirm(f){const m=es._fromVerification(this.verificationId,f);return this.onConfirmation(m)}}function to(v,f,m){return on.apply(this,arguments)}function on(){return(on=(0,p.Z)(function*(v,f,m){const w=ur(v),A=yield Sl(w,f,(0,B.m9)(m));return new oc(A,O=>Ar(w,O))})).apply(this,arguments)}function mh(v,f,m){return tu.apply(this,arguments)}function tu(){return(tu=(0,p.Z)(function*(v,f,m){const w=(0,B.m9)(v);yield Ko(!1,w,"phone");const A=yield Sl(w.auth,f,(0,B.m9)(m));return new oc(A,O=>ka(w,O))})).apply(this,arguments)}function yh(v,f,m){return vh.apply(this,arguments)}function vh(){return(vh=(0,p.Z)(function*(v,f,m){const w=(0,B.m9)(v),A=yield Sl(w.auth,f,(0,B.m9)(m));return new oc(A,O=>Jo(w,O))})).apply(this,arguments)}function Sl(v,f,m){return _h.apply(this,arguments)}function _h(){return(_h=(0,p.Z)(function*(v,f,m){var w;const A=yield m.verify();try{let O;if(X("string"==typeof A,v,"argument-error"),X(m.type===Ao,v,"argument-error"),O="string"==typeof f?{phoneNumber:f}:f,"session"in O){const ee=O.session;if("phoneNumber"in O)return X("enroll"===ee.type,v,"internal-error"),(yield vr(v,{idToken:ee.credential,phoneEnrollmentInfo:{phoneNumber:O.phoneNumber,recaptchaToken:A}})).phoneSessionInfo.sessionInfo;{X("signin"===ee.type,v,"internal-error");const Ce=(null===(w=O.multiFactorHint)||void 0===w?void 0:w.uid)||O.multiFactorUid;return X(Ce,v,"missing-multi-factor-info"),(yield Xa(v,{mfaPendingCredential:ee.credential,mfaEnrollmentId:Ce,phoneSignInInfo:{recaptchaToken:A}})).phoneResponseInfo.sessionInfo}}{const{sessionInfo:ee}=yield Wu(v,{phoneNumber:O.phoneNumber,recaptchaToken:A});return ee}}finally{m._reset()}})).apply(this,arguments)}function fp(v,f){return sa.apply(this,arguments)}function sa(){return(sa=(0,p.Z)(function*(v,f){yield qs((0,B.m9)(v),f)})).apply(this,arguments)}let Pm=(()=>{class v{constructor(m){this.providerId=v.PROVIDER_ID,this.auth=ur(m)}verifyPhoneNumber(m,w){return Sl(this.auth,m,(0,B.m9)(w))}static credential(m,w){return es._fromVerification(m,w)}static credentialFromResult(m){return v.credentialFromTaggedObject(m)}static credentialFromError(m){return v.credentialFromTaggedObject(m.customData||{})}static credentialFromTaggedObject({_tokenResponse:m}){if(!m)return null;const{phoneNumber:w,temporaryProof:A}=m;return w&&A?es._fromTokenResponse(w,A):null}}return v.PROVIDER_ID="phone",v.PHONE_SIGN_IN_METHOD="phone",v})();function xo(v,f){return f?Y(f):(X(v._popupRedirectResolver,v,"argument-error"),v._popupRedirectResolver)}class On extends _n{constructor(f){super("custom","custom"),this.params=f}_getIdTokenResponse(f){return ci(f,this._buildIdpRequest())}_linkToIdToken(f,m){return ci(f,this._buildIdpRequest(m))}_getReauthenticationResolver(f){return ci(f,this._buildIdpRequest())}_buildIdpRequest(f){const m={requestUri:this.params.requestUri,sessionId:this.params.sessionId,postBody:this.params.postBody,tenantId:this.params.tenantId,pendingToken:this.params.pendingToken,returnSecureToken:!0,returnIdpCredential:!0};return f&&(m.idToken=f),m}}function ac(v){return Qo(v.auth,new On(v),v.bypassAuthState)}function Mo(v){const{auth:f,user:m}=v;return X(m,f,"internal-error"),Oa(m,new On(v),v.bypassAuthState)}function pp(v){return Mr.apply(this,arguments)}function Mr(){return(Mr=(0,p.Z)(function*(v){const{auth:f,user:m}=v;return X(m,f,"internal-error"),qs(m,new On(v),v.bypassAuthState)})).apply(this,arguments)}class os{constructor(f,m,w,A,O=!1){this.auth=f,this.resolver=w,this.user=A,this.bypassAuthState=O,this.pendingPromise=null,this.eventManager=null,this.filter=Array.isArray(m)?m:[m]}execute(){var f=this;return new Promise(function(){var m=(0,p.Z)(function*(w,A){f.pendingPromise={resolve:w,reject:A};try{f.eventManager=yield f.resolver._initialize(f.auth),yield f.onExecution(),f.eventManager.registerConsumer(f)}catch(O){f.reject(O)}});return function(w,A){return m.apply(this,arguments)}}())}onAuthEvent(f){var m=this;return(0,p.Z)(function*(){const{urlResponse:w,sessionId:A,postBody:O,tenantId:ee,error:Ce,type:Xe}=f;if(Ce)return void m.reject(Ce);const at={auth:m.auth,requestUri:w,sessionId:A,tenantId:ee||void 0,postBody:O||void 0,user:m.user,bypassAuthState:m.bypassAuthState};try{m.resolve(yield m.getIdpTask(Xe)(at))}catch(Nt){m.reject(Nt)}})()}onError(f){this.reject(f)}getIdpTask(f){switch(f){case"signInViaPopup":case"signInViaRedirect":return ac;case"linkViaPopup":case"linkViaRedirect":return pp;case"reauthViaPopup":case"reauthViaRedirect":return Mo;default:Re(this.auth,"internal-error")}}resolve(f){_e(this.pendingPromise,"Pending promise was never set"),this.pendingPromise.resolve(f),this.unregisterAndCleanUp()}reject(f){_e(this.pendingPromise,"Pending promise was never set"),this.pendingPromise.reject(f),this.unregisterAndCleanUp()}unregisterAndCleanUp(){this.eventManager&&this.eventManager.unregisterConsumer(this),this.pendingPromise=null,this.cleanUp()}}const uc=new It(2e3,1e4);function oa(v,f,m){return xs.apply(this,arguments)}function xs(){return(xs=(0,p.Z)(function*(v,f,m){const w=ur(v);De(v,f,ts);const A=xo(w,m);return new Zt(w,"signInViaPopup",f,A).executeNotNull()})).apply(this,arguments)}function Al(v,f,m){return cc.apply(this,arguments)}function cc(){return(cc=(0,p.Z)(function*(v,f,m){const w=(0,B.m9)(v);De(w.auth,f,ts);const A=xo(w.auth,m);return new Zt(w.auth,"reauthViaPopup",f,A,w).executeNotNull()})).apply(this,arguments)}function gp(v,f,m){return mp.apply(this,arguments)}function mp(){return(mp=(0,p.Z)(function*(v,f,m){const w=(0,B.m9)(v);De(w.auth,f,ts);const A=xo(w.auth,m);return new Zt(w.auth,"linkViaPopup",f,A,w).executeNotNull()})).apply(this,arguments)}let Zt=(()=>{class v extends os{constructor(m,w,A,O,ee){super(m,w,O,ee),this.provider=A,this.authWindow=null,this.pollId=null,v.currentPopupAction&&v.currentPopupAction.cancel(),v.currentPopupAction=this}executeNotNull(){var m=this;return(0,p.Z)(function*(){const w=yield m.execute();return X(w,m.auth,"internal-error"),w})()}onExecution(){var m=this;return(0,p.Z)(function*(){_e(1===m.filter.length,"Popup operations only handle one event");const w=Do();m.authWindow=yield m.resolver._openPopup(m.auth,m.provider,m.filter[0],w),m.authWindow.associatedEvent=w,m.resolver._originValidation(m.auth).catch(A=>{m.reject(A)}),m.resolver._isIframeWebStorageSupported(m.auth,A=>{A||m.reject(Pe(m.auth,"web-storage-unsupported"))}),m.pollUserCancellation()})()}get eventId(){var m;return(null===(m=this.authWindow)||void 0===m?void 0:m.associatedEvent)||null}cancel(){this.reject(Pe(this.auth,"cancelled-popup-request"))}cleanUp(){this.authWindow&&this.authWindow.close(),this.pollId&&window.clearTimeout(this.pollId),this.authWindow=null,this.pollId=null,v.currentPopupAction=null}pollUserCancellation(){const m=()=>{var w,A;this.pollId=null!==(A=null===(w=this.authWindow)||void 0===w?void 0:w.window)&&void 0!==A&&A.closed?window.setTimeout(()=>{this.pollId=null,this.reject(Pe(this.auth,"popup-closed-by-user"))},2e3):window.setTimeout(m,uc.get())};m()}}return v.currentPopupAction=null,v})();const Qe=new Map;class fi extends os{constructor(f,m,w=!1){super(f,["signInViaRedirect","linkViaRedirect","reauthViaRedirect","unknown"],m,void 0,w),this.eventId=null}execute(){var f=()=>super.execute,m=this;return(0,p.Z)(function*(){let w=Qe.get(m.auth._key());if(!w){try{const O=(yield function ii(v,f){return lc.apply(this,arguments)}(m.resolver,m.auth))?yield f().call(m):null;w=()=>Promise.resolve(O)}catch(A){w=()=>Promise.reject(A)}Qe.set(m.auth._key(),w)}return m.bypassAuthState||Qe.set(m.auth._key(),()=>Promise.resolve(null)),w()})()}onAuthEvent(f){var m=()=>super.onAuthEvent,w=this;return(0,p.Z)(function*(){if("signInViaRedirect"===f.type)return m().call(w,f);if("unknown"!==f.type){if(f.eventId){const A=yield w.auth._redirectUserForId(f.eventId);if(A)return w.user=A,m().call(w,f);w.resolve(null)}}else w.resolve(null)})()}onExecution(){return(0,p.Z)(function*(){})()}cleanUp(){}}function lc(){return(lc=(0,p.Z)(function*(v,f){const m=dc(f),w=wh(v);if(!(yield w._isAvailable()))return!1;const A="true"===(yield w._get(m));return yield w._remove(m),A})).apply(this,arguments)}function Ro(v,f){return dr.apply(this,arguments)}function dr(){return(dr=(0,p.Z)(function*(v,f){return wh(v)._set(dc(f),"true")})).apply(this,arguments)}function Ih(){Qe.clear()}function Ms(v,f){Qe.set(v._key(),f)}function wh(v){return Y(v._redirectPersistence)}function dc(v){return $("pendingRedirect",v.config.apiKey,v.name)}function aa(v,f,m){return function hc(v,f,m){return Ni.apply(this,arguments)}(v,f,m)}function Ni(){return(Ni=(0,p.Z)(function*(v,f,m){const w=ur(v);De(v,f,ts);const A=xo(w,m);return yield Ro(A,w),A._openRedirect(w,f,"signInViaRedirect")})).apply(this,arguments)}function _t(v,f,m){return function D(v,f,m){return C.apply(this,arguments)}(v,f,m)}function C(){return(C=(0,p.Z)(function*(v,f,m){const w=(0,B.m9)(v);De(w.auth,f,ts);const A=xo(w.auth,m);yield Ro(A,w.auth);const O=yield ot(w);return A._openRedirect(w.auth,f,"reauthViaRedirect",O)})).apply(this,arguments)}function x(v,f,m){return function V(v,f,m){return G.apply(this,arguments)}(v,f,m)}function G(){return(G=(0,p.Z)(function*(v,f,m){const w=(0,B.m9)(v);De(w.auth,f,ts);const A=xo(w.auth,m);yield Ko(!1,w,f.providerId),yield Ro(A,w.auth);const O=yield ot(w);return A._openRedirect(w.auth,f,"linkViaRedirect",O)})).apply(this,arguments)}function ie(v,f){return Me.apply(this,arguments)}function Me(){return(Me=(0,p.Z)(function*(v,f){return yield ur(v)._initializationPromise,et(v,f,!1)})).apply(this,arguments)}function et(v,f){return rt.apply(this,arguments)}function rt(){return(rt=(0,p.Z)(function*(v,f,m=!1){const w=ur(v),A=xo(w,f),ee=yield new fi(w,A,m).execute();return ee&&!m&&(delete ee.user._redirectEventId,yield w._persistUserIfCurrent(ee.user),yield w._setRedirectUser(null,f)),ee})).apply(this,arguments)}function ot(v){return Gt.apply(this,arguments)}function Gt(){return(Gt=(0,p.Z)(function*(v){const f=Do(`${v.uid}:::`);return v._redirectEventId=f,yield v.auth._setRedirectUser(v),yield v.auth._persistUserIfCurrent(v),f})).apply(this,arguments)}class _r{constructor(f){this.auth=f,this.cachedEventUids=new Set,this.consumers=new Set,this.queuedRedirectEvent=null,this.hasHandledPotentialRedirect=!1,this.lastProcessedEventTime=Date.now()}registerConsumer(f){this.consumers.add(f),this.queuedRedirectEvent&&this.isEventForConsumer(this.queuedRedirectEvent,f)&&(this.sendToConsumer(this.queuedRedirectEvent,f),this.saveEventToCache(this.queuedRedirectEvent),this.queuedRedirectEvent=null)}unregisterConsumer(f){this.consumers.delete(f)}onEvent(f){if(this.hasEventBeenHandled(f))return!1;let m=!1;return this.consumers.forEach(w=>{this.isEventForConsumer(f,w)&&(m=!0,this.sendToConsumer(f,w),this.saveEventToCache(f))}),this.hasHandledPotentialRedirect||!function ua(v){switch(v.type){case"signInViaRedirect":case"linkViaRedirect":case"reauthViaRedirect":return!0;case"unknown":return nu(v);default:return!1}}(f)||(this.hasHandledPotentialRedirect=!0,m||(this.queuedRedirectEvent=f,m=!0)),m}sendToConsumer(f,m){var w;if(f.error&&!nu(f)){const A=(null===(w=f.error.code)||void 0===w?void 0:w.split("auth/")[1])||"internal-error";m.onError(Pe(this.auth,A))}else m.onAuthEvent(f)}isEventForConsumer(f,m){const w=null===m.eventId||!!f.eventId&&f.eventId===m.eventId;return m.filter.includes(f.type)&&w}hasEventBeenHandled(f){return Date.now()-this.lastProcessedEventTime>=6e5&&this.cachedEventUids.clear(),this.cachedEventUids.has(Bn(f))}saveEventToCache(f){this.cachedEventUids.add(Bn(f)),this.lastProcessedEventTime=Date.now()}}function Bn(v){return[v.type,v.eventId,v.sessionId,v.tenantId].filter(f=>f).join("-")}function nu({type:v,error:f}){return"unknown"===v&&"auth/no-auth-event"===f?.code}function zi(v){return $n.apply(this,arguments)}function $n(){return($n=(0,p.Z)(function*(v,f={}){return gt(v,"GET","/v1/projects",f)})).apply(this,arguments)}const pi=/^\d{1,3}\.\d{1,3}\.\d{1,3}\.\d{1,3}$/,hr=/^https?/;function fc(){return(fc=(0,p.Z)(function*(v){if(v.config.emulator)return;const{authorizedDomains:f}=yield zi(v);for(const m of f)try{if(Rr(m))return}catch{}Re(v,"unauthorized-domain")})).apply(this,arguments)}function Rr(v){const f=Le(),{protocol:m,hostname:w}=new URL(f);if(v.startsWith("chrome-extension://")){const ee=new URL(v);return""===ee.hostname&&""===w?"chrome-extension:"===m&&v.replace("chrome-extension://","")===f.replace("chrome-extension://",""):"chrome-extension:"===m&&ee.hostname===w}if(!hr.test(m))return!1;if(pi.test(v))return w===v;const A=v.replace(/\./g,"\\.");return new RegExp("^(.+\\."+A+"|"+A+")$","i").test(w)}const ru=new It(3e4,6e4);function xl(){const v=An().___jsl;if(v?.H)for(const f of Object.keys(v.H))if(v.H[f].r=v.H[f].r||[],v.H[f].L=v.H[f].L||[],v.H[f].r=[...v.H[f].L],v.CP)for(let m=0;m<v.CP.length;m++)v.CP[m]=null}let Ir=null;function iu(v){return Ir=Ir||function Wi(v){return new Promise((f,m)=>{var w,A,O;function ee(){xl(),gapi.load("gapi.iframes",{callback:()=>{f(gapi.iframes.getContext())},ontimeout:()=>{xl(),m(Pe(v,"network-request-failed"))},timeout:ru.get()})}if(null!==(A=null===(w=An().gapi)||void 0===w?void 0:w.iframes)&&void 0!==A&&A.Iframe)f(gapi.iframes.getContext());else{if(null===(O=An().gapi)||void 0===O||!O.load){const Ce=Ri("iframefcb");return An()[Ce]=()=>{gapi.load?ee():m(Pe(v,"network-request-failed"))},To(`https://apis.google.com/js/api.js?onload=${Ce}`).catch(Xe=>m(Xe))}ee()}}).catch(f=>{throw Ir=null,f})}(v),Ir}const Om=new It(5e3,15e3),ca={style:{position:"absolute",top:"-100px",width:"1px",height:"1px"},"aria-hidden":"true",tabindex:"-1"},si=new Map([["identitytoolkit.googleapis.com","p"],["staging-identitytoolkit.sandbox.googleapis.com","s"],["test-identitytoolkit.sandbox.googleapis.com","t"]]);function la(v){const f=v.config;X(f.authDomain,v,"auth-domain-config-required");const m=f.emulator?Vt(f,"emulator/auth/iframe"):`https://${v.config.authDomain}/__/auth/iframe`,w={apiKey:f.apiKey,appName:v.name,v:N.SDK_VERSION},A=si.get(v.config.apiHost);A&&(w.eid=A);const O=v._getFrameworks();return O.length&&(w.fw=O.join(",")),`${m}?${(0,B.xO)(w).slice(1)}`}function su(){return su=(0,p.Z)(function*(v){const f=yield iu(v),m=An().gapi;return X(m,v,"internal-error"),f.open({where:document.body,url:la(v),messageHandlersFilter:m.iframes.CROSS_ORIGIN_IFRAMES_FILTER,attributes:ca,dontclear:!0},w=>new Promise(function(){var A=(0,p.Z)(function*(O,ee){yield w.restyle({setHideOnLeave:!1});const Ce=Pe(v,"network-request-failed"),Xe=An().setTimeout(()=>{ee(Ce)},Om.get());function at(){An().clearTimeout(Xe),O(w)}w.ping(at).then(at,()=>{ee(Ce)})});return function(O,ee){return A.apply(this,arguments)}}()))}),su.apply(this,arguments)}const Dh={location:"yes",resizable:"yes",statusbar:"yes",toolbar:"no"};class Ht{constructor(f){this.window=f,this.associatedEvent=null}close(){if(this.window)try{this.window.close()}catch{}}}function Rl(v,f,m,w,A,O){X(v.config.authDomain,v,"auth-domain-config-required"),X(v.config.apiKey,v,"invalid-api-key");const ee={apiKey:v.config.apiKey,appName:v.name,authType:m,redirectUrl:w,v:N.SDK_VERSION,eventId:A};if(f instanceof ts){f.setDefaultLanguage(v.languageCode),ee.providerId=f.providerId||"",(0,B.xb)(f.getCustomParameters())||(ee.customParameters=JSON.stringify(f.getCustomParameters()));for(const[Xe,at]of Object.entries(O||{}))ee[Xe]=at}if(f instanceof mo){const Xe=f.getScopes().filter(at=>""!==at);Xe.length>0&&(ee.scopes=Xe.join(","))}v.tenantId&&(ee.tid=v.tenantId);const Ce=ee;for(const Xe of Object.keys(Ce))void 0===Ce[Xe]&&delete Ce[Xe];return`${function Gi({config:v}){return v.emulator?Vt(v,"emulator/auth/handler"):`https://${v.authDomain}/__/auth/handler`}(v)}?${(0,B.xO)(Ce).slice(1)}`}const Nl="webStorageSupport",Th=class vp{constructor(){this.eventManagers={},this.iframes={},this.originValidationPromises={},this._redirectPersistence=Cs,this._completeRedirectFn=et,this._overrideRedirectResult=Ms}_openPopup(f,m,w,A){var O=this;return(0,p.Z)(function*(){var ee;_e(null===(ee=O.eventManagers[f._key()])||void 0===ee?void 0:ee.manager,"_initialize() not called before _openPopup()");const Ce=Rl(f,m,w,Le(),A);return function gi(v,f,m,w=500,A=600){const O=Math.max((window.screen.availHeight-A)/2,0).toString(),ee=Math.max((window.screen.availWidth-w)/2,0).toString();let Ce="";const Xe=Object.assign(Object.assign({},Dh),{width:w.toString(),height:A.toString(),top:O,left:ee}),at=(0,B.z$)().toLowerCase();m&&(Ce=se(at)?"_blank":m),R(at)&&(f=f||"http://localhost",Xe.scrollbars="yes");const Nt=Object.entries(Xe).reduce((oi,[Rs,da])=>`${oi}${Rs}=${da},`,"");if(function ar(v=(0,B.z$)()){var f;return ut(v)&&!(null===(f=window.navigator)||void 0===f||!f.standalone)}(at)&&"_self"!==Ce)return function km(v,f){const m=document.createElement("a");m.href=v,m.target=f;const w=document.createEvent("MouseEvent");w.initMouseEvent("click",!0,!0,window,1,0,0,0,0,!1,!1,!1,!1,1,null),m.dispatchEvent(w)}(f||"",Ce),new Ht(null);const wn=window.open(f||"",Ce,Nt);X(wn,v,"popup-blocked");try{wn.focus()}catch{}return new Ht(wn)}(f,Ce,Do())})()}_openRedirect(f,m,w,A){var O=this;return(0,p.Z)(function*(){return yield O._originValidation(f),function na(v){An().location.href=v}(Rl(f,m,w,Le(),A)),new Promise(()=>{})})()}_initialize(f){const m=f._key();if(this.eventManagers[m]){const{manager:A,promise:O}=this.eventManagers[m];return A?Promise.resolve(A):(_e(O,"If manager is not set, promise should be"),O)}const w=this.initAndGetManager(f);return this.eventManagers[m]={promise:w},w.catch(()=>{delete this.eventManagers[m]}),w}initAndGetManager(f){var m=this;return(0,p.Z)(function*(){const w=yield function z_(v){return su.apply(this,arguments)}(f),A=new _r(f);return w.register("authEvent",O=>(X(O?.authEvent,f,"invalid-auth-event"),{status:A.onEvent(O.authEvent)?"ACK":"ERROR"}),gapi.iframes.CROSS_ORIGIN_IFRAMES_FILTER),m.eventManagers[f._key()]={manager:A},m.iframes[f._key()]=w,A})()}_isIframeWebStorageSupported(f,m){this.iframes[f._key()].send(Nl,{type:Nl},A=>{var O;const ee=null===(O=A?.[0])||void 0===O?void 0:O[Nl];void 0!==ee&&m(!!ee),Re(f,"internal-error")},gapi.iframes.CROSS_ORIGIN_IFRAMES_FILTER)}_originValidation(f){const m=f._key();return this.originValidationPromises[m]||(this.originValidationPromises[m]=function Eh(v){return fc.apply(this,arguments)}(f)),this.originValidationPromises[m]}get _shouldInitProactively(){return Cr()||L()||ut()}};class Lm{constructor(f){this.factorId=f}_process(f,m,w){switch(m.type){case"enroll":return this._finalizeEnroll(f,m.credential,w);case"signin":return this._finalizeSignIn(f,m.credential);default:return ce("unexpected MultiFactorSessionType")}}}class fr extends Lm{constructor(f){super("phone"),this.credential=f}static _fromCredential(f){return new fr(f)}_finalizeEnroll(f,m,w){return function ch(v,f){return gt(v,"POST","/v2/accounts/mfaEnrollment:finalize",Wt(v,f))}(f,{idToken:m,displayName:w,phoneVerificationInfo:this.credential._makeVerificationRequest()})}_finalizeSignIn(f,m){return function ic(v,f){return gt(v,"POST","/v2/accounts/mfaSignIn:finalize",Wt(v,f))}(f,{mfaPendingCredential:m,phoneVerificationInfo:this.credential._makeVerificationRequest()})}}let No=(()=>{class v{constructor(){}static assertion(m){return fr._fromCredential(m)}}return v.FACTOR_ID="phone",v})();var wr="@firebase/auth";class Sh{constructor(f){this.auth=f,this.internalListeners=new Map}getUid(){var f;return this.assertAuthConfigured(),(null===(f=this.auth.currentUser)||void 0===f?void 0:f.uid)||null}getToken(f){var m=this;return(0,p.Z)(function*(){return m.assertAuthConfigured(),yield m.auth._initializationPromise,m.auth.currentUser?{accessToken:yield m.auth.currentUser.getIdToken(f)}:null})()}addAuthTokenListener(f){if(this.assertAuthConfigured(),this.internalListeners.has(f))return;const m=this.auth.onIdTokenChanged(w=>{f(w?.stsTokenManager.accessToken||null)});this.internalListeners.set(f,m),this.updateProactiveRefresh()}removeAuthTokenListener(f){this.assertAuthConfigured();const m=this.internalListeners.get(f);!m||(this.internalListeners.delete(f),m(),this.updateProactiveRefresh())}assertAuthConfigured(){X(this.auth._initializationPromise,"dependent-sdk-initialized-before-auth")}updateProactiveRefresh(){this.internalListeners.size>0?this.auth._startProactiveRefresh():this.auth._stopProactiveRefresh()}}(0,B.Pz)("authIdTokenMaxAge"),function jr(v){(0,N._registerComponent)(new ue.wA("auth",(f,{options:m})=>{const w=f.getProvider("app").getImmediate(),A=f.getProvider("heartbeat"),{apiKey:O,authDomain:ee}=w.options;return((Ce,Xe)=>{X(O&&!O.includes(":"),"invalid-api-key",{appName:Ce.name}),X(!ee?.includes(":"),"argument-error",{appName:Ce.name});const at={apiKey:O,authDomain:ee,clientPlatform:v,apiHost:"identitytoolkit.googleapis.com",tokenApiHost:"securetoken.googleapis.com",apiScheme:"https",sdkClientVersion:ho(v)},Nt=new ju(Ce,Xe,at);return function re(v,f){const m=f?.persistence||[],w=(Array.isArray(m)?m:[m]).map(Y);f?.errorMap&&v._updateErrorMap(f.errorMap),v._initializeWithPersistence(w,f?.popupRedirectResolver)}(Nt,m),Nt})(w,A)},"PUBLIC").setInstantiationMode("EXPLICIT").setInstanceCreatedCallback((f,m,w)=>{f.getProvider("auth-internal").initialize()})),(0,N._registerComponent)(new ue.wA("auth-internal",f=>{const m=ur(f.getProvider("auth").getImmediate());return new Sh(m)},"PRIVATE").setInstantiationMode("EXPLICIT")),(0,N.registerVersion)(wr,"0.21.0",function Ol(v){switch(v){case"Node":return"node";case"ReactNative":return"rn";case"Worker":return"webworker";case"Cordova":return"cordova";default:return}}(v)),(0,N.registerVersion)(wr,"0.21.0","esm2017")}("Browser")},2090:(lt,be,k)=>{k.d(be,{$s:()=>Ke,BH:()=>un,G6:()=>De,L:()=>de,LL:()=>Xt,P0:()=>Fe,Pz:()=>Jt,Sg:()=>It,UG:()=>ze,US:()=>ue,ZB:()=>H,ZR:()=>pt,aH:()=>dt,b$:()=>Ee,eu:()=>X,hl:()=>He,jU:()=>nt,m9:()=>Kt,ne:()=>Lr,pd:()=>Ln,r3:()=>Di,ru:()=>ge,tV:()=>pe,uI:()=>Se,vZ:()=>ln,w1:()=>Re,xO:()=>or,xb:()=>Qr,z$:()=>Ue,zI:()=>ce,zd:()=>mr});const ne=function(j){const $=[];let Z=0;for(let U=0;U<j.length;U++){let R=j.charCodeAt(U);R<128?$[Z++]=R:R<2048?($[Z++]=R>>6|192,$[Z++]=63&R|128):55296==(64512&R)&&U+1<j.length&&56320==(64512&j.charCodeAt(U+1))?(R=65536+((1023&R)<<10)+(1023&j.charCodeAt(++U)),$[Z++]=R>>18|240,$[Z++]=R>>12&63|128,$[Z++]=R>>6&63|128,$[Z++]=63&R|128):($[Z++]=R>>12|224,$[Z++]=R>>6&63|128,$[Z++]=63&R|128)}return $},ue={byteToCharMap_:null,charToByteMap_:null,byteToCharMapWebSafe_:null,charToByteMapWebSafe_:null,ENCODED_VALS_BASE:"ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789",get ENCODED_VALS(){return this.ENCODED_VALS_BASE+"+/="},get ENCODED_VALS_WEBSAFE(){return this.ENCODED_VALS_BASE+"-_."},HAS_NATIVE_SUPPORT:"function"==typeof atob,encodeByteArray(j,$){if(!Array.isArray(j))throw Error("encodeByteArray takes an array as a parameter");this.init_();const Z=$?this.byteToCharMapWebSafe_:this.byteToCharMap_,U=[];for(let R=0;R<j.length;R+=3){const L=j[R],se=R+1<j.length,Ae=se?j[R+1]:0,it=R+2<j.length,We=it?j[R+2]:0;let gn=(15&Ae)<<2|We>>6,ar=63&We;it||(ar=64,se||(gn=64)),U.push(Z[L>>2],Z[(3&L)<<4|Ae>>4],Z[gn],Z[ar])}return U.join("")},encodeString(j,$){return this.HAS_NATIVE_SUPPORT&&!$?btoa(j):this.encodeByteArray(ne(j),$)},decodeString(j,$){return this.HAS_NATIVE_SUPPORT&&!$?atob(j):function(j){const $=[];let Z=0,U=0;for(;Z<j.length;){const R=j[Z++];if(R<128)$[U++]=String.fromCharCode(R);else if(R>191&&R<224){const L=j[Z++];$[U++]=String.fromCharCode((31&R)<<6|63&L)}else if(R>239&&R<365){const it=((7&R)<<18|(63&j[Z++])<<12|(63&j[Z++])<<6|63&j[Z++])-65536;$[U++]=String.fromCharCode(55296+(it>>10)),$[U++]=String.fromCharCode(56320+(1023&it))}else{const L=j[Z++],se=j[Z++];$[U++]=String.fromCharCode((15&R)<<12|(63&L)<<6|63&se)}}return $.join("")}(this.decodeStringToByteArray(j,$))},decodeStringToByteArray(j,$){this.init_();const Z=$?this.charToByteMapWebSafe_:this.charToByteMap_,U=[];for(let R=0;R<j.length;){const L=Z[j.charAt(R++)],Ae=R<j.length?Z[j.charAt(R)]:0;++R;const We=R<j.length?Z[j.charAt(R)]:64;++R;const ut=R<j.length?Z[j.charAt(R)]:64;if(++R,null==L||null==Ae||null==We||null==ut)throw Error();U.push(L<<2|Ae>>4),64!==We&&(U.push(Ae<<4&240|We>>2),64!==ut&&U.push(We<<6&192|ut))}return U},init_(){if(!this.byteToCharMap_){this.byteToCharMap_={},this.charToByteMap_={},this.byteToCharMapWebSafe_={},this.charToByteMapWebSafe_={};for(let j=0;j<this.ENCODED_VALS.length;j++)this.byteToCharMap_[j]=this.ENCODED_VALS.charAt(j),this.charToByteMap_[this.byteToCharMap_[j]]=j,this.byteToCharMapWebSafe_[j]=this.ENCODED_VALS_WEBSAFE.charAt(j),this.charToByteMapWebSafe_[this.byteToCharMapWebSafe_[j]]=j,j>=this.ENCODED_VALS_BASE.length&&(this.charToByteMap_[this.ENCODED_VALS_WEBSAFE.charAt(j)]=j,this.charToByteMapWebSafe_[this.ENCODED_VALS.charAt(j)]=j)}}},de=function(j){return function(j){const $=ne(j);return ue.encodeByteArray($,!0)}(j).replace(/\./g,"")},pe=function(j){try{return ue.decodeString(j,!0)}catch($){console.error("base64Decode failed: ",$)}return null};function H(j,$){if(!($ instanceof Object))return $;switch($.constructor){case Date:return new Date($.getTime());case Object:void 0===j&&(j={});break;case Array:j=[];break;default:return $}for(const Z in $)!$.hasOwnProperty(Z)||!Q(Z)||(j[Z]=H(j[Z],$[Z]));return j}function Q(j){return"__proto__"!==j}function Ue(){return typeof navigator<"u"&&"string"==typeof navigator.userAgent?navigator.userAgent:""}function Se(){return typeof window<"u"&&!!(window.cordova||window.phonegap||window.PhoneGap)&&/ios|iphone|ipod|ipad|android|blackberry|iemobile/i.test(Ue())}function ze(){try{return"[object process]"===Object.prototype.toString.call(global.process)}catch{return!1}}function nt(){return"object"==typeof self&&self.self===self}function ge(){const j="object"==typeof chrome?chrome.runtime:"object"==typeof browser?browser.runtime:void 0;return"object"==typeof j&&void 0!==j.id}function Ee(){return"object"==typeof navigator&&"ReactNative"===navigator.product}function Re(){const j=Ue();return j.indexOf("MSIE ")>=0||j.indexOf("Trident/")>=0}function De(){return!ze()&&navigator.userAgent.includes("Safari")&&!navigator.userAgent.includes("Chrome")}function He(){try{return"object"==typeof indexedDB}catch{return!1}}function X(){return new Promise((j,$)=>{try{let Z=!0;const U="validate-browser-context-for-indexeddb-analytics-module",R=self.indexedDB.open(U);R.onsuccess=()=>{R.result.close(),Z||self.indexedDB.deleteDatabase(U),j(!0)},R.onupgradeneeded=()=>{Z=!1},R.onerror=()=>{var L;$((null===(L=R.error)||void 0===L?void 0:L.message)||"")}}catch(Z){$(Z)}})}function ce(){return!(typeof navigator>"u"||!navigator.cookieEnabled)}const re=()=>{try{return function _e(){if(typeof self<"u")return self;if(typeof window<"u")return window;if(typeof global<"u")return global;throw new Error("Unable to locate global object.")}().__FIREBASE_DEFAULTS__||(()=>{if(typeof process>"u"||typeof process.env>"u")return;const j=process.env.__FIREBASE_DEFAULTS__;return j?JSON.parse(j):void 0})()||(()=>{if(typeof document>"u")return;let j;try{j=document.cookie.match(/__FIREBASE_DEFAULTS__=([^;]+)/)}catch{return}const $=j&&pe(j[1]);return $&&JSON.parse($)})()}catch(j){return void console.info(`Unable to get __FIREBASE_DEFAULTS__ due to: ${j}`)}},Fe=j=>{const $=(j=>{var $,Z;return null===(Z=null===($=re())||void 0===$?void 0:$.emulatorHosts)||void 0===Z?void 0:Z[j]})(j);if(!$)return;const Z=$.lastIndexOf(":");if(Z<=0||Z+1===$.length)throw new Error(`Invalid host ${$} with no separate hostname and port!`);const U=parseInt($.substring(Z+1),10);return"["===$[0]?[$.substring(1,Z-1),U]:[$.substring(0,Z),U]},dt=()=>{var j;return null===(j=re())||void 0===j?void 0:j.config},Jt=j=>{var $;return null===($=re())||void 0===$?void 0:$[`_${j}`]};class un{constructor(){this.reject=()=>{},this.resolve=()=>{},this.promise=new Promise(($,Z)=>{this.resolve=$,this.reject=Z})}wrapCallback($){return(Z,U)=>{Z?this.reject(Z):this.resolve(U),"function"==typeof $&&(this.promise.catch(()=>{}),1===$.length?$(Z):$(Z,U))}}}function It(j,$){if(j.uid)throw new Error('The "uid" field is no longer supported by mockUserToken. Please use "sub" instead for Firebase Auth User ID.');const U=$||"demo-project",R=j.iat||0,L=j.sub||j.user_id;if(!L)throw new Error("mockUserToken must contain 'sub' or 'user_id' field!");const se=Object.assign({iss:`https://securetoken.google.com/${U}`,aud:U,iat:R,exp:R+3600,auth_time:R,sub:L,user_id:L,firebase:{sign_in_provider:"custom",identities:{}}},j);return[de(JSON.stringify({alg:"none",type:"JWT"})),de(JSON.stringify(se)),""].join(".")}class pt extends Error{constructor($,Z,U){super(Z),this.code=$,this.customData=U,this.name="FirebaseError",Object.setPrototypeOf(this,pt.prototype),Error.captureStackTrace&&Error.captureStackTrace(this,Xt.prototype.create)}}class Xt{constructor($,Z,U){this.service=$,this.serviceName=Z,this.errors=U}create($,...Z){const U=Z[0]||{},R=`${this.service}/${$}`,L=this.errors[$],se=L?function ir(j,$){return j.replace(Wt,(Z,U)=>{const R=$[U];return null!=R?String(R):`<${U}?>`})}(L,U):"Error";return new pt(R,`${this.serviceName}: ${se} (${R}).`,U)}}const Wt=/\{\$([^}]+)}/g;function Di(j,$){return Object.prototype.hasOwnProperty.call(j,$)}function Qr(j){for(const $ in j)if(Object.prototype.hasOwnProperty.call(j,$))return!1;return!0}function ln(j,$){if(j===$)return!0;const Z=Object.keys(j),U=Object.keys($);for(const R of Z){if(!U.includes(R))return!1;const L=j[R],se=$[R];if(sr(L)&&sr(se)){if(!ln(L,se))return!1}else if(L!==se)return!1}for(const R of U)if(!Z.includes(R))return!1;return!0}function sr(j){return null!==j&&"object"==typeof j}function or(j){const $=[];for(const[Z,U]of Object.entries(j))Array.isArray(U)?U.forEach(R=>{$.push(encodeURIComponent(Z)+"="+encodeURIComponent(R))}):$.push(encodeURIComponent(Z)+"="+encodeURIComponent(U));return $.length?"&"+$.join("&"):""}function mr(j){const $={};return j.replace(/^\?/,"").split("&").forEach(U=>{if(U){const[R,L]=U.split("=");$[decodeURIComponent(R)]=decodeURIComponent(L)}}),$}function Ln(j){const $=j.indexOf("?");if(!$)return"";const Z=j.indexOf("#",$);return j.substring($,Z>0?Z:void 0)}function Lr(j,$){const Z=new bt(j,$);return Z.subscribe.bind(Z)}class bt{constructor($,Z){this.observers=[],this.unsubscribes=[],this.observerCount=0,this.task=Promise.resolve(),this.finalized=!1,this.onNoObservers=Z,this.task.then(()=>{$(this)}).catch(U=>{this.error(U)})}next($){this.forEachObserver(Z=>{Z.next($)})}error($){this.forEachObserver(Z=>{Z.error($)}),this.close($)}complete(){this.forEachObserver($=>{$.complete()}),this.close()}subscribe($,Z,U){let R;if(void 0===$&&void 0===Z&&void 0===U)throw new Error("Missing Observer.");R=function Et(j,$){if("object"!=typeof j||null===j)return!1;for(const Z of $)if(Z in j&&"function"==typeof j[Z])return!0;return!1}($,["next","error","complete"])?$:{next:$,error:Z,complete:U},void 0===R.next&&(R.next=hn),void 0===R.error&&(R.error=hn),void 0===R.complete&&(R.complete=hn);const L=this.unsubscribeOne.bind(this,this.observers.length);return this.finalized&&this.task.then(()=>{try{this.finalError?R.error(this.finalError):R.complete()}catch{}}),this.observers.push(R),L}unsubscribeOne($){void 0===this.observers||void 0===this.observers[$]||(delete this.observers[$],this.observerCount-=1,0===this.observerCount&&void 0!==this.onNoObservers&&this.onNoObservers(this))}forEachObserver($){if(!this.finalized)for(let Z=0;Z<this.observers.length;Z++)this.sendOne(Z,$)}sendOne($,Z){this.task.then(()=>{if(void 0!==this.observers&&void 0!==this.observers[$])try{Z(this.observers[$])}catch(U){typeof console<"u"&&console.error&&console.error(U)}})}close($){this.finalized||(this.finalized=!0,void 0!==$&&(this.finalError=$),this.task.then(()=>{this.observers=void 0,this.onNoObservers=void 0}))}}function hn(){}function Ke(j,$=1e3,Z=2){const U=$*Math.pow(Z,j),R=Math.round(.5*U*(Math.random()-.5)*2);return Math.min(144e5,U+R)}function Kt(j){return j&&j._delegate?j._delegate:j}},9425:(lt,be,k)=>{var p=k(4650);let B=null;function N(){return B}class ae{}const ue=new p.OlP("DocumentToken");let me=(()=>{class n{historyGo(t){throw new Error("Not implemented")}}return n.\u0275fac=function(t){return new(t||n)},n.\u0275prov=p.Yz7({token:n,factory:function(){return function de(){return(0,p.LFG)(z)}()},providedIn:"platform"}),n})();const pe=new p.OlP("Location Initialized");let z=(()=>{class n extends me{constructor(t){super(),this._doc=t,this._init()}_init(){this.location=window.location,this._history=window.history}getBaseHrefFromDOM(){return N().getBaseHref(this._doc)}onPopState(t){const r=N().getGlobalEventTarget(this._doc,"window");return r.addEventListener("popstate",t,!1),()=>r.removeEventListener("popstate",t)}onHashChange(t){const r=N().getGlobalEventTarget(this._doc,"window");return r.addEventListener("hashchange",t,!1),()=>r.removeEventListener("hashchange",t)}get href(){return this.location.href}get protocol(){return this.location.protocol}get hostname(){return this.location.hostname}get port(){return this.location.port}get pathname(){return this.location.pathname}get search(){return this.location.search}get hash(){return this.location.hash}set pathname(t){this.location.pathname=t}pushState(t,r,o){H()?this._history.pushState(t,r,o):this.location.hash=o}replaceState(t,r,o){H()?this._history.replaceState(t,r,o):this.location.hash=o}forward(){this._history.forward()}back(){this._history.back()}historyGo(t=0){this._history.go(t)}getState(){return this._history.state}}return n.\u0275fac=function(t){return new(t||n)(p.LFG(ue))},n.\u0275prov=p.Yz7({token:n,factory:function(){return function Q(){return new z((0,p.LFG)(ue))}()},providedIn:"platform"}),n})();function H(){return!!window.history.pushState}function Ue(n,e){if(0==n.length)return e;if(0==e.length)return n;let t=0;return n.endsWith("/")&&t++,e.startsWith("/")&&t++,2==t?n+e.substring(1):1==t?n+e:n+"/"+e}function Se(n){const e=n.match(/#|\?|$/),t=e&&e.index||n.length;return n.slice(0,t-("/"===n[t-1]?1:0))+n.slice(t)}function ze(n){return n&&"?"!==n[0]?"?"+n:n}let nt=(()=>{class n{historyGo(t){throw new Error("Not implemented")}}return n.\u0275fac=function(t){return new(t||n)},n.\u0275prov=p.Yz7({token:n,factory:function(){return(0,p.f3M)(Ee)},providedIn:"root"}),n})();const ge=new p.OlP("appBaseHref");let Ee=(()=>{class n extends nt{constructor(t,r){super(),this._platformLocation=t,this._removeListenerFns=[],this._baseHref=r??this._platformLocation.getBaseHrefFromDOM()??(0,p.f3M)(ue).location?.origin??""}ngOnDestroy(){for(;this._removeListenerFns.length;)this._removeListenerFns.pop()()}onPopState(t){this._removeListenerFns.push(this._platformLocation.onPopState(t),this._platformLocation.onHashChange(t))}getBaseHref(){return this._baseHref}prepareExternalUrl(t){return Ue(this._baseHref,t)}path(t=!1){const r=this._platformLocation.pathname+ze(this._platformLocation.search),o=this._platformLocation.hash;return o&&t?`${r}${o}`:r}pushState(t,r,o,u){const l=this.prepareExternalUrl(o+ze(u));this._platformLocation.pushState(t,r,l)}replaceState(t,r,o,u){const l=this.prepareExternalUrl(o+ze(u));this._platformLocation.replaceState(t,r,l)}forward(){this._platformLocation.forward()}back(){this._platformLocation.back()}getState(){return this._platformLocation.getState()}historyGo(t=0){this._platformLocation.historyGo?.(t)}}return n.\u0275fac=function(t){return new(t||n)(p.LFG(me),p.LFG(ge,8))},n.\u0275prov=p.Yz7({token:n,factory:n.\u0275fac,providedIn:"root"}),n})(),we=(()=>{class n extends nt{constructor(t,r){super(),this._platformLocation=t,this._baseHref="",this._removeListenerFns=[],null!=r&&(this._baseHref=r)}ngOnDestroy(){for(;this._removeListenerFns.length;)this._removeListenerFns.pop()()}onPopState(t){this._removeListenerFns.push(this._platformLocation.onPopState(t),this._platformLocation.onHashChange(t))}getBaseHref(){return this._baseHref}path(t=!1){let r=this._platformLocation.hash;return null==r&&(r="#"),r.length>0?r.substring(1):r}prepareExternalUrl(t){const r=Ue(this._baseHref,t);return r.length>0?"#"+r:r}pushState(t,r,o,u){let l=this.prepareExternalUrl(o+ze(u));0==l.length&&(l=this._platformLocation.pathname),this._platformLocation.pushState(t,r,l)}replaceState(t,r,o,u){let l=this.prepareExternalUrl(o+ze(u));0==l.length&&(l=this._platformLocation.pathname),this._platformLocation.replaceState(t,r,l)}forward(){this._platformLocation.forward()}back(){this._platformLocation.back()}getState(){return this._platformLocation.getState()}historyGo(t=0){this._platformLocation.historyGo?.(t)}}return n.\u0275fac=function(t){return new(t||n)(p.LFG(me),p.LFG(ge,8))},n.\u0275prov=p.Yz7({token:n,factory:n.\u0275fac}),n})(),Re=(()=>{class n{constructor(t){this._subject=new p.vpe,this._urlChangeListeners=[],this._urlChangeSubscription=null,this._locationStrategy=t;const r=this._locationStrategy.getBaseHref();this._basePath=function He(n){if(new RegExp("^(https?:)?//").test(n)){const[,t]=n.split(/\/\/[^\/]+/);return t}return n}(Se(De(r))),this._locationStrategy.onPopState(o=>{this._subject.emit({url:this.path(!0),pop:!0,state:o.state,type:o.type})})}ngOnDestroy(){this._urlChangeSubscription?.unsubscribe(),this._urlChangeListeners=[]}path(t=!1){return this.normalize(this._locationStrategy.path(t))}getState(){return this._locationStrategy.getState()}isCurrentPathEqualTo(t,r=""){return this.path()==this.normalize(t+ze(r))}normalize(t){return n.stripTrailingSlash(function Ne(n,e){return n&&e.startsWith(n)?e.substring(n.length):e}(this._basePath,De(t)))}prepareExternalUrl(t){return t&&"/"!==t[0]&&(t="/"+t),this._locationStrategy.prepareExternalUrl(t)}go(t,r="",o=null){this._locationStrategy.pushState(o,"",t,r),this._notifyUrlChangeListeners(this.prepareExternalUrl(t+ze(r)),o)}replaceState(t,r="",o=null){this._locationStrategy.replaceState(o,"",t,r),this._notifyUrlChangeListeners(this.prepareExternalUrl(t+ze(r)),o)}forward(){this._locationStrategy.forward()}back(){this._locationStrategy.back()}historyGo(t=0){this._locationStrategy.historyGo?.(t)}onUrlChange(t){return this._urlChangeListeners.push(t),this._urlChangeSubscription||(this._urlChangeSubscription=this.subscribe(r=>{this._notifyUrlChangeListeners(r.url,r.state)})),()=>{const r=this._urlChangeListeners.indexOf(t);this._urlChangeListeners.splice(r,1),0===this._urlChangeListeners.length&&(this._urlChangeSubscription?.unsubscribe(),this._urlChangeSubscription=null)}}_notifyUrlChangeListeners(t="",r){this._urlChangeListeners.forEach(o=>o(t,r))}subscribe(t,r,o){return this._subject.subscribe({next:t,error:r,complete:o})}}return n.normalizeQueryParams=ze,n.joinWithSlash=Ue,n.stripTrailingSlash=Se,n.\u0275fac=function(t){return new(t||n)(p.LFG(nt))},n.\u0275prov=p.Yz7({token:n,factory:function(){return function Pe(){return new Re((0,p.LFG)(nt))}()},providedIn:"root"}),n})();function De(n){return n.replace(/\/index.html$/,"")}function Tr(n,e){e=encodeURIComponent(e);for(const t of n.split(";")){const r=t.indexOf("="),[o,u]=-1==r?[t,""]:[t.slice(0,r),t.slice(r+1)];if(o.trim()===e)return decodeURIComponent(u)}return null}class Sr{constructor(e,t,r,o){this.$implicit=e,this.ngForOf=t,this.index=r,this.count=o}get first(){return 0===this.index}get last(){return this.index===this.count-1}get even(){return this.index%2==0}get odd(){return!this.even}}let Ai=(()=>{class n{constructor(t,r,o){this._viewContainer=t,this._template=r,this._differs=o,this._ngForOf=null,this._ngForOfDirty=!0,this._differ=null}set ngForOf(t){this._ngForOf=t,this._ngForOfDirty=!0}set ngForTrackBy(t){this._trackByFn=t}get ngForTrackBy(){return this._trackByFn}set ngForTemplate(t){t&&(this._template=t)}ngDoCheck(){if(this._ngForOfDirty){this._ngForOfDirty=!1;const t=this._ngForOf;!this._differ&&t&&(this._differ=this._differs.find(t).create(this.ngForTrackBy))}if(this._differ){const t=this._differ.diff(this._ngForOf);t&&this._applyChanges(t)}}_applyChanges(t){const r=this._viewContainer;t.forEachOperation((o,u,l)=>{if(null==o.previousIndex)r.createEmbeddedView(this._template,new Sr(o.item,this._ngForOf,-1,-1),null===l?void 0:l);else if(null==l)r.remove(null===u?void 0:u);else if(null!==u){const g=r.get(u);r.move(g,l),Vn(g,o)}});for(let o=0,u=r.length;o<u;o++){const g=r.get(o).context;g.index=o,g.count=u,g.ngForOf=this._ngForOf}t.forEachIdentityChange(o=>{Vn(r.get(o.currentIndex),o)})}static ngTemplateContextGuard(t,r){return!0}}return n.\u0275fac=function(t){return new(t||n)(p.Y36(p.s_b),p.Y36(p.Rgc),p.Y36(p.ZZ4))},n.\u0275dir=p.lG2({type:n,selectors:[["","ngFor","","ngForOf",""]],inputs:{ngForOf:"ngForOf",ngForTrackBy:"ngForTrackBy",ngForTemplate:"ngForTemplate"},standalone:!0}),n})();function Vn(n,e){n.context.$implicit=e.item}let vn=(()=>{class n{constructor(t,r){this._viewContainer=t,this._context=new Sa,this._thenTemplateRef=null,this._elseTemplateRef=null,this._thenViewRef=null,this._elseViewRef=null,this._thenTemplateRef=r}set ngIf(t){this._context.$implicit=this._context.ngIf=t,this._updateView()}set ngIfThen(t){Qi("ngIfThen",t),this._thenTemplateRef=t,this._thenViewRef=null,this._updateView()}set ngIfElse(t){Qi("ngIfElse",t),this._elseTemplateRef=t,this._elseViewRef=null,this._updateView()}_updateView(){this._context.$implicit?this._thenViewRef||(this._viewContainer.clear(),this._elseViewRef=null,this._thenTemplateRef&&(this._thenViewRef=this._viewContainer.createEmbeddedView(this._thenTemplateRef,this._context))):this._elseViewRef||(this._viewContainer.clear(),this._thenViewRef=null,this._elseTemplateRef&&(this._elseViewRef=this._viewContainer.createEmbeddedView(this._elseTemplateRef,this._context)))}static ngTemplateContextGuard(t,r){return!0}}return n.\u0275fac=function(t){return new(t||n)(p.Y36(p.s_b),p.Y36(p.Rgc))},n.\u0275dir=p.lG2({type:n,selectors:[["","ngIf",""]],inputs:{ngIf:"ngIf",ngIfThen:"ngIfThen",ngIfElse:"ngIfElse"},standalone:!0}),n})();class Sa{constructor(){this.$implicit=null,this.ngIf=null}}function Qi(n,e){if(e&&!e.createEmbeddedView)throw new Error(`${n} must be a TemplateRef, but received '${(0,p.AaK)(e)}'.`)}class mn{createSubscription(e,t){return e.subscribe({next:t,error:r=>{throw r}})}dispose(e){e.unsubscribe()}}class Xi{createSubscription(e,t){return e.then(t,r=>{throw r})}dispose(e){}}const Wu=new Xi,xa=new mn;let Go=(()=>{class n{constructor(t){this._latestValue=null,this._subscription=null,this._obj=null,this._strategy=null,this._ref=t}ngOnDestroy(){this._subscription&&this._dispose(),this._ref=null}transform(t){return this._obj?t!==this._obj?(this._dispose(),this.transform(t)):this._latestValue:(t&&this._subscribe(t),this._latestValue)}_subscribe(t){this._obj=t,this._strategy=this._selectStrategy(t),this._subscription=this._strategy.createSubscription(t,r=>this._updateLatestValue(t,r))}_selectStrategy(t){if((0,p.QGY)(t))return Wu;if((0,p.F4k)(t))return xa;throw function Vr(n,e){return new p.vHH(2100,!1)}()}_dispose(){this._strategy.dispose(this._subscription),this._latestValue=null,this._subscription=null,this._obj=null}_updateLatestValue(t,r){t===this._obj&&(this._latestValue=r,this._ref.markForCheck())}}return n.\u0275fac=function(t){return new(t||n)(p.Y36(p.sBO,16))},n.\u0275pipe=p.Yjl({name:"async",type:n,pure:!1,standalone:!0}),n})(),ns=(()=>{class n{}return n.\u0275fac=function(t){return new(t||n)},n.\u0275mod=p.oAB({type:n}),n.\u0275inj=p.cJS({}),n})();function Zo(n){return"server"===n}let Ws=(()=>{class n{}return n.\u0275prov=(0,p.Yz7)({token:n,providedIn:"root",factory:()=>new Gs((0,p.LFG)(ue),window)}),n})();class Gs{constructor(e,t){this.document=e,this.window=t,this.offset=()=>[0,0]}setOffset(e){this.offset=Array.isArray(e)?()=>e:e}getScrollPosition(){return this.supportsScrolling()?[this.window.pageXOffset,this.window.pageYOffset]:[0,0]}scrollToPosition(e){this.supportsScrolling()&&this.window.scrollTo(e[0],e[1])}scrollToAnchor(e){if(!this.supportsScrolling())return;const t=function Pa(n,e){const t=n.getElementById(e)||n.getElementsByName(e)[0];if(t)return t;if("function"==typeof n.createTreeWalker&&n.body&&(n.body.createShadowRoot||n.body.attachShadow)){const r=n.createTreeWalker(n.body,NodeFilter.SHOW_ELEMENT);let o=r.currentNode;for(;o;){const u=o.shadowRoot;if(u){const l=u.getElementById(e)||u.querySelector(`[name="${e}"]`);if(l)return l}o=r.nextNode()}}return null}(this.document,e);t&&(this.scrollToElement(t),t.focus())}setHistoryScrollRestoration(e){if(this.supportScrollRestoration()){const t=this.window.history;t&&t.scrollRestoration&&(t.scrollRestoration=e)}}scrollToElement(e){const t=e.getBoundingClientRect(),r=t.left+this.window.pageXOffset,o=t.top+this.window.pageYOffset,u=this.offset();this.window.scrollTo(r-u[0],o-u[1])}supportScrollRestoration(){try{if(!this.supportsScrolling())return!1;const e=qs(this.window.history)||qs(Object.getPrototypeOf(this.window.history));return!(!e||!e.writable&&!e.set)}catch{return!1}}supportsScrolling(){try{return!!this.window&&!!this.window.scrollTo&&"pageXOffset"in this.window}catch{return!1}}}function qs(n){return Object.getOwnPropertyDescriptor(n,"scrollRestoration")}class Zs{}class Ju extends ae{constructor(){super(...arguments),this.supportsDOMEvents=!0}}class bs extends Ju{static makeCurrent(){!function ne(n){B||(B=n)}(new bs)}onAndCancel(e,t,r){return e.addEventListener(t,r,!1),()=>{e.removeEventListener(t,r,!1)}}dispatchEvent(e,t){e.dispatchEvent(t)}remove(e){e.parentNode&&e.parentNode.removeChild(e)}createElement(e,t){return(t=t||this.getDefaultDocument()).createElement(e)}createHtmlDocument(){return document.implementation.createHTMLDocument("fakeTitle")}getDefaultDocument(){return document}isElementNode(e){return e.nodeType===Node.ELEMENT_NODE}isShadowRoot(e){return e instanceof DocumentFragment}getGlobalEventTarget(e,t){return"window"===t?window:"document"===t?e:"body"===t?e.body:null}getBaseHref(e){const t=function Qs(){return ji=ji||document.querySelector("base"),ji?ji.getAttribute("href"):null}();return null==t?null:function _l(n){rs=rs||document.createElement("a"),rs.setAttribute("href",n);const e=rs.pathname;return"/"===e.charAt(0)?e:`/${e}`}(t)}resetBaseElement(){ji=null}getUserAgent(){return window.navigator.userAgent}getCookie(e){return Tr(document.cookie,e)}}let rs,ji=null;const Il=new p.OlP("TRANSITION_ID"),Wa=[{provide:p.ip1,useFactory:function Eo(n,e,t){return()=>{t.get(p.CZH).donePromise.then(()=>{const r=N(),o=e.querySelectorAll(`style[ng-transition="${n}"]`);for(let u=0;u<o.length;u++)r.remove(o[u])})}},deps:[Il,ue,p.zs3],multi:!0}];let Rm=(()=>{class n{build(){return new XMLHttpRequest}}return n.\u0275fac=function(t){return new(t||n)},n.\u0275prov=p.Yz7({token:n,factory:n.\u0275fac}),n})();const Cs=new p.OlP("EventManagerPlugins");let ec=(()=>{class n{constructor(t,r){this._zone=r,this._eventNameToPlugin=new Map,t.forEach(o=>o.manager=this),this._plugins=t.slice().reverse()}addEventListener(t,r,o){return this._findPluginFor(r).addEventListener(t,r,o)}addGlobalEventListener(t,r,o){return this._findPluginFor(r).addGlobalEventListener(t,r,o)}getZone(){return this._zone}_findPluginFor(t){const r=this._eventNameToPlugin.get(t);if(r)return r;const o=this._plugins;for(let u=0;u<o.length;u++){const l=o[u];if(l.supports(t))return this._eventNameToPlugin.set(t,l),l}throw new Error(`No event manager plugin found for event ${t}`)}}return n.\u0275fac=function(t){return new(t||n)(p.LFG(Cs),p.LFG(p.R0b))},n.\u0275prov=p.Yz7({token:n,factory:n.\u0275fac}),n})();class tc{constructor(e){this._doc=e}addGlobalEventListener(e,t,r){const o=N().getGlobalEventTarget(this._doc,e);if(!o)throw new Error(`Unsupported event target ${o} for event ${t}`);return this.addEventListener(o,t,r)}}let Do=(()=>{class n{constructor(){this._stylesSet=new Set}addStyles(t){const r=new Set;t.forEach(o=>{this._stylesSet.has(o)||(this._stylesSet.add(o),r.add(o))}),this.onStylesAdded(r)}onStylesAdded(t){}getAllStyles(){return Array.from(this._stylesSet)}}return n.\u0275fac=function(t){return new(t||n)},n.\u0275prov=p.Yz7({token:n,factory:n.\u0275fac}),n})(),Ga=(()=>{class n extends Do{constructor(t){super(),this._doc=t,this._hostNodes=new Map,this._hostNodes.set(t.head,[])}_addStylesToHost(t,r,o){t.forEach(u=>{const l=this._doc.createElement("style");l.textContent=u,o.push(r.appendChild(l))})}addHost(t){const r=[];this._addStylesToHost(this._stylesSet,t,r),this._hostNodes.set(t,r)}removeHost(t){const r=this._hostNodes.get(t);r&&r.forEach(An),this._hostNodes.delete(t)}onStylesAdded(t){this._hostNodes.forEach((r,o)=>{this._addStylesToHost(t,o,r)})}ngOnDestroy(){this._hostNodes.forEach(t=>t.forEach(An))}}return n.\u0275fac=function(t){return new(t||n)(p.LFG(ue))},n.\u0275prov=p.Yz7({token:n,factory:n.\u0275fac}),n})();function An(n){N().remove(n)}const na={svg:"http://www.w3.org/2000/svg",xhtml:"http://www.w3.org/1999/xhtml",xlink:"http://www.w3.org/1999/xlink",xml:"http://www.w3.org/XML/1998/namespace",xmlns:"http://www.w3.org/2000/xmlns/",math:"http://www.w3.org/1998/MathML/"},Ts=/%COMP%/g;function is(n,e){return e.flat(100).map(t=>t.replace(Ts,n))}function Xs(n){return e=>{if("__ngUnwrap__"===e)return n;!1===n(e)&&(e.preventDefault(),e.returnValue=!1)}}let eo=(()=>{class n{constructor(t,r,o){this.eventManager=t,this.sharedStylesHost=r,this.appId=o,this.rendererByCompId=new Map,this.defaultRenderer=new Za(t)}createRenderer(t,r){if(!t||!r)return this.defaultRenderer;switch(r.encapsulation){case p.ifc.Emulated:{let o=this.rendererByCompId.get(r.id);return o||(o=new lh(this.eventManager,this.sharedStylesHost,r,this.appId),this.rendererByCompId.set(r.id,o)),o.applyToHost(t),o}case 1:case p.ifc.ShadowDom:return new Ss(this.eventManager,this.sharedStylesHost,t,r);default:if(!this.rendererByCompId.has(r.id)){const o=is(r.id,r.styles);this.sharedStylesHost.addStyles(o),this.rendererByCompId.set(r.id,this.defaultRenderer)}return this.defaultRenderer}}begin(){}end(){}}return n.\u0275fac=function(t){return new(t||n)(p.LFG(ec),p.LFG(Ga),p.LFG(p.AFp))},n.\u0275prov=p.Yz7({token:n,factory:n.\u0275fac}),n})();class Za{constructor(e){this.eventManager=e,this.data=Object.create(null),this.destroyNode=null}destroy(){}createElement(e,t){return t?document.createElementNS(na[t]||t,e):document.createElement(e)}createComment(e){return document.createComment(e)}createText(e){return document.createTextNode(e)}appendChild(e,t){(xr(e)?e.content:e).appendChild(t)}insertBefore(e,t,r){e&&(xr(e)?e.content:e).insertBefore(t,r)}removeChild(e,t){e&&e.removeChild(t)}selectRootElement(e,t){let r="string"==typeof e?document.querySelector(e):e;if(!r)throw new Error(`The selector "${e}" did not match any elements`);return t||(r.textContent=""),r}parentNode(e){return e.parentNode}nextSibling(e){return e.nextSibling}setAttribute(e,t,r,o){if(o){t=o+":"+t;const u=na[o];u?e.setAttributeNS(u,t,r):e.setAttribute(t,r)}else e.setAttribute(t,r)}removeAttribute(e,t,r){if(r){const o=na[r];o?e.removeAttributeNS(o,t):e.removeAttribute(`${r}:${t}`)}else e.removeAttribute(t)}addClass(e,t){e.classList.add(t)}removeClass(e,t){e.classList.remove(t)}setStyle(e,t,r,o){o&(p.JOm.DashCase|p.JOm.Important)?e.style.setProperty(t,r,o&p.JOm.Important?"important":""):e.style[t]=r}removeStyle(e,t,r){r&p.JOm.DashCase?e.style.removeProperty(t):e.style[t]=""}setProperty(e,t,r){e[t]=r}setValue(e,t){e.nodeValue=t}listen(e,t,r){return"string"==typeof e?this.eventManager.addGlobalEventListener(e,t,Xs(r)):this.eventManager.addEventListener(e,t,Xs(r))}}function xr(n){return"TEMPLATE"===n.tagName&&void 0!==n.content}class lh extends Za{constructor(e,t,r,o){super(e),this.component=r;const u=is(o+"-"+r.id,r.styles);t.addStyles(u),this.contentAttr=function ra(n){return"_ngcontent-%COMP%".replace(Ts,n)}(o+"-"+r.id),this.hostAttr=function nc(n){return"_nghost-%COMP%".replace(Ts,n)}(o+"-"+r.id)}applyToHost(e){super.setAttribute(e,this.hostAttr,"")}createElement(e,t){const r=super.createElement(e,t);return super.setAttribute(r,this.contentAttr,""),r}}class Ss extends Za{constructor(e,t,r,o){super(e),this.sharedStylesHost=t,this.hostEl=r,this.shadowRoot=r.attachShadow({mode:"open"}),this.sharedStylesHost.addHost(this.shadowRoot);const u=is(o.id,o.styles);for(let l=0;l<u.length;l++){const g=document.createElement("style");g.textContent=u[l],this.shadowRoot.appendChild(g)}}nodeOrShadowRoot(e){return e===this.hostEl?this.shadowRoot:e}destroy(){this.sharedStylesHost.removeHost(this.shadowRoot)}appendChild(e,t){return super.appendChild(this.nodeOrShadowRoot(e),t)}insertBefore(e,t,r){return super.insertBefore(this.nodeOrShadowRoot(e),t,r)}removeChild(e,t){return super.removeChild(this.nodeOrShadowRoot(e),t)}parentNode(e){return this.nodeOrShadowRoot(super.parentNode(this.nodeOrShadowRoot(e)))}}let Co=(()=>{class n extends tc{constructor(t){super(t)}supports(t){return!0}addEventListener(t,r,o){return t.addEventListener(r,o,!1),()=>this.removeEventListener(t,r,o)}removeEventListener(t,r,o){return t.removeEventListener(r,o)}}return n.\u0275fac=function(t){return new(t||n)(p.LFG(ue))},n.\u0275prov=p.Yz7({token:n,factory:n.\u0275fac}),n})();const Ka=["alt","control","meta","shift"],Ya={"\b":"Backspace","\t":"Tab","\x7f":"Delete","\x1b":"Escape",Del:"Delete",Esc:"Escape",Left:"ArrowLeft",Right:"ArrowRight",Up:"ArrowUp",Down:"ArrowDown",Menu:"ContextMenu",Scroll:"ScrollLock",Win:"OS"},Dl={alt:n=>n.altKey,control:n=>n.ctrlKey,meta:n=>n.metaKey,shift:n=>n.shiftKey};let Qa=(()=>{class n extends tc{constructor(t){super(t)}supports(t){return null!=n.parseEventName(t)}addEventListener(t,r,o){const u=n.parseEventName(r),l=n.eventCallback(u.fullKey,o,this.manager.getZone());return this.manager.getZone().runOutsideAngular(()=>N().onAndCancel(t,u.domEventName,l))}static parseEventName(t){const r=t.toLowerCase().split("."),o=r.shift();if(0===r.length||"keydown"!==o&&"keyup"!==o)return null;const u=n._normalizeKey(r.pop());let l="",g=r.indexOf("code");if(g>-1&&(r.splice(g,1),l="code."),Ka.forEach(b=>{const S=r.indexOf(b);S>-1&&(r.splice(S,1),l+=b+".")}),l+=u,0!=r.length||0===u.length)return null;const _={};return _.domEventName=o,_.fullKey=l,_}static matchEventFullKeyCode(t,r){let o=Ya[t.key]||t.key,u="";return r.indexOf("code.")>-1&&(o=t.code,u="code."),!(null==o||!o)&&(o=o.toLowerCase()," "===o?o="space":"."===o&&(o="dot"),Ka.forEach(l=>{l!==o&&(0,Dl[l])(t)&&(u+=l+".")}),u+=o,u===r)}static eventCallback(t,r,o){return u=>{n.matchEventFullKeyCode(u,t)&&o.runGuarded(()=>r(u))}}static _normalizeKey(t){return"esc"===t?"escape":t}}return n.\u0275fac=function(t){return new(t||n)(p.LFG(ue))},n.\u0275prov=p.Yz7({token:n,factory:n.\u0275fac}),n})();const ri=(0,p.eFA)(p._c5,"browser",[{provide:p.Lbi,useValue:"browser"},{provide:p.g9A,useValue:function To(){bs.makeCurrent()},multi:!0},{provide:ue,useFactory:function bl(){return(0,p.RDi)(document),document},deps:[]}]),ss=new p.OlP(""),fh=[{provide:p.rWj,useClass:class $r{addToWindow(e){p.dqk.getAngularTestability=(r,o=!0)=>{const u=e.findTestabilityInTree(r,o);if(null==u)throw new Error("Could not find testability for element.");return u},p.dqk.getAllAngularTestabilities=()=>e.getAllTestabilities(),p.dqk.getAllAngularRootElements=()=>e.getAllRootElements(),p.dqk.frameworkStabilizers||(p.dqk.frameworkStabilizers=[]),p.dqk.frameworkStabilizers.push(r=>{const o=p.dqk.getAllAngularTestabilities();let u=o.length,l=!1;const g=function(_){l=l||_,u--,0==u&&r(l)};o.forEach(function(_){_.whenStable(g)})})}findTestabilityInTree(e,t,r){return null==t?null:e.getTestability(t)??(r?N().isShadowRoot(t)?this.findTestabilityInTree(e,t.host,!0):this.findTestabilityInTree(e,t.parentElement,!0):null)}},deps:[]},{provide:p.lri,useClass:p.dDg,deps:[p.R0b,p.eoX,p.rWj]},{provide:p.dDg,useClass:p.dDg,deps:[p.R0b,p.eoX,p.rWj]}],sc=[{provide:p.zSh,useValue:"root"},{provide:p.qLn,useFactory:function Ri(){return new p.qLn},deps:[]},{provide:Cs,useClass:Co,multi:!0,deps:[ue,p.R0b,p.Lbi]},{provide:Cs,useClass:Qa,multi:!0,deps:[ue]},{provide:eo,useClass:eo,deps:[ec,Ga,p.AFp]},{provide:p.FYo,useExisting:eo},{provide:Do,useExisting:Ga},{provide:Ga,useClass:Ga,deps:[ue]},{provide:ec,useClass:ec,deps:[Cs,p.R0b]},{provide:Zs,useClass:Rm,deps:[]},[]];let ia=(()=>{class n{constructor(t){}static withServerTransition(t){return{ngModule:n,providers:[{provide:p.AFp,useValue:t.appId},{provide:Il,useExisting:p.AFp},Wa]}}}return n.\u0275fac=function(t){return new(t||n)(p.LFG(ss,12))},n.\u0275mod=p.oAB({type:n}),n.\u0275inj=p.cJS({providers:[...sc,...fh],imports:[ns,p.hGG]}),n})(),So=(()=>{class n{constructor(t){this._doc=t}getTitle(){return this._doc.title}setTitle(t){this._doc.title=t||""}}return n.\u0275fac=function(t){return new(t||n)(p.LFG(ue))},n.\u0275prov=p.Yz7({token:n,factory:function(t){let r=null;return r=t?new t:function As(){return new So((0,p.LFG)(ue))}(),r},providedIn:"root"}),n})();typeof window<"u"&&window;var Zt=k(8996),no=k(7669);function Qe(...n){const e=(0,no.yG)(n);return(0,Zt.D)(n,e)}var fi=k(7579);class ii extends fi.x{constructor(e){super(),this._value=e}get value(){return this.getValue()}_subscribe(e){const t=super._subscribe(e);return!t.closed&&e.next(this._value),t}getValue(){const{hasError:e,thrownError:t,_value:r}=this;if(e)throw t;return this._throwIfClosed(),r}next(e){super.next(this._value=e)}}const Ro=(0,k(3888).d)(n=>function(){n(this),this.name="EmptyError",this.message="no elements in sequence"});var dr=k(9751);const{isArray:Ih}=Array,{getPrototypeOf:Ms,prototype:wh,keys:dc}=Object;var Ni=k(4671),_t=k(4004);const{isArray:D}=Array;var G=k(5403),ie=k(9672);function Me(...n){const e=(0,no.yG)(n),t=(0,no.jO)(n),{args:r,keys:o}=function aa(n){if(1===n.length){const e=n[0];if(Ih(e))return{args:e,keys:null};if(function hc(n){return n&&"object"==typeof n&&Ms(n)===wh}(e)){const t=dc(e);return{args:t.map(r=>e[r]),keys:t}}}return{args:n,keys:null}}(n);if(0===r.length)return(0,Zt.D)([],e);const u=new dr.y(function et(n,e,t=Ni.y){return r=>{rt(e,()=>{const{length:o}=n,u=new Array(o);let l=o,g=o;for(let _=0;_<o;_++)rt(e,()=>{const b=(0,Zt.D)(n[_],e);let S=!1;b.subscribe((0,G.x)(r,P=>{u[_]=P,S||(S=!0,g--),g||r.next(t(u.slice()))},()=>{--l||r.complete()}))},r)},r)}}(r,e,o?l=>function V(n,e){return n.reduce((t,r,o)=>(t[r]=e[o],t),{})}(o,l):Ni.y));return t?u.pipe(function x(n){return(0,_t.U)(e=>function C(n,e){return D(e)?n(...e):n(e)}(n,e))}(t)):u}function rt(n,e,t){n?(0,ie.f)(t,n,e):e()}var ot=k(8189);function St(...n){return function Gt(){return(0,ot.J)(1)}()((0,Zt.D)(n,(0,no.yG)(n)))}var _r=k(8421);function Bn(n){return new dr.y(e=>{(0,_r.Xf)(n()).subscribe(e)})}var nu=k(9635),ua=k(576);function zi(n,e){const t=(0,ua.m)(n)?n:()=>n,r=o=>o.error(t());return new dr.y(e?o=>e.schedule(r,0,o):r)}var $n=k(515),pi=k(727),hr=k(4482);function Eh(){return(0,hr.e)((n,e)=>{let t=null;n._refCount++;const r=(0,G.x)(e,void 0,void 0,void 0,()=>{if(!n||n._refCount<=0||0<--n._refCount)return void(t=null);const o=n._connection,u=t;t=null,o&&(!u||o===u)&&o.unsubscribe(),e.unsubscribe()});n.subscribe(r),r.closed||(t=n.connect())})}class fc extends dr.y{constructor(e,t){super(),this.source=e,this.subjectFactory=t,this._subject=null,this._refCount=0,this._connection=null,(0,hr.A)(e)&&(this.lift=e.lift)}_subscribe(e){return this.getSubject().subscribe(e)}getSubject(){const e=this._subject;return(!e||e.isStopped)&&(this._subject=this.subjectFactory()),this._subject}_teardown(){this._refCount=0;const{_connection:e}=this;this._subject=this._connection=null,e?.unsubscribe()}connect(){let e=this._connection;if(!e){e=this._connection=new pi.w0;const t=this.getSubject();e.add(this.source.subscribe((0,G.x)(t,void 0,()=>{this._teardown(),t.complete()},r=>{this._teardown(),t.error(r)},()=>this._teardown()))),e.closed&&(this._connection=null,e=pi.w0.EMPTY)}return e}refCount(){return Eh()(this)}}function Rr(n,e){return(0,hr.e)((t,r)=>{let o=null,u=0,l=!1;const g=()=>l&&!o&&r.complete();t.subscribe((0,G.x)(r,_=>{o?.unsubscribe();let b=0;const S=u++;(0,_r.Xf)(n(_,S)).subscribe(o=(0,G.x)(r,P=>r.next(e?e(_,P,S,b++):P),()=>{o=null,g()}))},()=>{l=!0,g()}))})}function ru(n){return n<=0?()=>$n.E:(0,hr.e)((e,t)=>{let r=0;e.subscribe((0,G.x)(t,o=>{++r<=n&&(t.next(o),n<=r&&t.complete())}))})}function xl(...n){const e=(0,no.yG)(n);return(0,hr.e)((t,r)=>{(e?St(n,t,e):St(n,t)).subscribe(r)})}function Wi(n,e){return(0,hr.e)((t,r)=>{let o=0;t.subscribe((0,G.x)(r,u=>n.call(e,u,o++)&&r.next(u)))})}var Ir=k(5577);function iu(n){return(0,hr.e)((e,t)=>{let r=!1;e.subscribe((0,G.x)(t,o=>{r=!0,t.next(o)},()=>{r||t.next(n),t.complete()}))})}function Om(n=H_){return(0,hr.e)((e,t)=>{let r=!1;e.subscribe((0,G.x)(t,o=>{r=!0,t.next(o)},()=>r?t.complete():t.error(n())))})}function H_(){return new Ro}function as(n,e){const t=arguments.length>=2;return r=>r.pipe(n?Wi((o,u)=>n(o,u,r)):Ni.y,ru(1),t?iu(e):Om(()=>new Ro))}function ca(n,e){return(0,ua.m)(e)?(0,Ir.z)(n,e,1):(0,Ir.z)(n,1)}var si=k(8505);function la(n){return(0,hr.e)((e,t)=>{let u,r=null,o=!1;r=e.subscribe((0,G.x)(t,void 0,void 0,l=>{u=(0,_r.Xf)(n(l,la(n)(e))),r?(r.unsubscribe(),r=null,u.subscribe(t)):o=!0})),o&&(r.unsubscribe(),r=null,u.subscribe(t))})}function z_(n,e,t,r,o){return(u,l)=>{let g=t,_=e,b=0;u.subscribe((0,G.x)(l,S=>{const P=b++;_=g?n(_,S,P):(g=!0,S),r&&l.next(_)},o&&(()=>{g&&l.next(_),l.complete()})))}}function su(n,e){return(0,hr.e)(z_(n,e,arguments.length>=2,!0))}function Dh(n){return n<=0?()=>$n.E:(0,hr.e)((e,t)=>{let r=[];e.subscribe((0,G.x)(t,o=>{r.push(o),n<r.length&&r.shift()},()=>{for(const o of r)t.next(o);t.complete()},void 0,()=>{r=null}))})}function bh(n,e){const t=arguments.length>=2;return r=>r.pipe(n?Wi((o,u)=>n(o,u,r)):Ni.y,Dh(1),t?iu(e):Om(()=>new Ro))}function Ml(n){return(0,hr.e)((e,t)=>{try{e.subscribe(t)}finally{t.add(n)}})}const Ht="primary",gi=Symbol("RouteTitle");class km{constructor(e){this.params=e||{}}has(e){return Object.prototype.hasOwnProperty.call(this.params,e)}get(e){if(this.has(e)){const t=this.params[e];return Array.isArray(t)?t[0]:t}return null}getAll(e){if(this.has(e)){const t=this.params[e];return Array.isArray(t)?t:[t]}return[]}get keys(){return Object.keys(this.params)}}function ou(n){return new km(n)}function Fm(n,e,t){const r=t.path.split("/");if(r.length>n.length||"full"===t.pathMatch&&(e.hasChildren()||r.length<n.length))return null;const o={};for(let u=0;u<r.length;u++){const l=r[u],g=n[u];if(l.startsWith(":"))o[l.substring(1)]=g;else if(l!==g.path)return null}return{consumed:n.slice(0,r.length),posParams:o}}function Gi(n,e){const t=n?Object.keys(n):void 0,r=e?Object.keys(e):void 0;if(!t||!r||t.length!=r.length)return!1;let o;for(let u=0;u<t.length;u++)if(o=t[u],!Nl(n[o],e[o]))return!1;return!0}function Nl(n,e){if(Array.isArray(n)&&Array.isArray(e)){if(n.length!==e.length)return!1;const t=[...n].sort(),r=[...e].sort();return t.every((o,u)=>r[u]===o)}return n===e}function vp(n){return Array.prototype.concat.apply([],n)}function Th(n){return n.length>0?n[n.length-1]:null}function fr(n,e){for(const t in n)n.hasOwnProperty(t)&&e(n[t],t)}function No(n){return(0,p.CqO)(n)?n:(0,p.QGY)(n)?(0,Zt.D)(Promise.resolve(n)):Qe(n)}const wr=!1,Pl={exact:function au(n,e,t){if(!A(n.segments,e.segments)||!Fl(n.segments,e.segments,t)||n.numberOfChildren!==e.numberOfChildren)return!1;for(const r in e.children)if(!n.children[r]||!au(n.children[r],e.children[r],t))return!1;return!0},subset:kl},Sh={exact:function jr(n,e){return Gi(n,e)},subset:function _p(n,e){return Object.keys(e).length<=Object.keys(n).length&&Object.keys(e).every(t=>Nl(n[t],e[t]))},ignored:()=>!0};function Ol(n,e,t){return Pl[t.paths](n.root,e.root,t.matrixParams)&&Sh[t.queryParams](n.queryParams,e.queryParams)&&!("exact"===t.fragment&&n.fragment!==e.fragment)}function kl(n,e,t){return Ip(n,e,e.segments,t)}function Ip(n,e,t,r){if(n.segments.length>t.length){const o=n.segments.slice(0,t.length);return!(!A(o,t)||e.hasChildren()||!Fl(o,t,r))}if(n.segments.length===t.length){if(!A(n.segments,t)||!Fl(n.segments,t,r))return!1;for(const o in e.children)if(!n.children[o]||!kl(n.children[o],e.children[o],r))return!1;return!0}{const o=t.slice(0,n.segments.length),u=t.slice(n.segments.length);return!!(A(n.segments,o)&&Fl(n.segments,o,r)&&n.children[Ht])&&Ip(n.children[Ht],e,u,r)}}function Fl(n,e,t){return e.every((r,o)=>Sh[t](n[o].parameters,r.parameters))}class v{constructor(e=new f([],{}),t={},r=null){this.root=e,this.queryParams=t,this.fragment=r}get queryParamMap(){return this._queryParamMap||(this._queryParamMap=ou(this.queryParams)),this._queryParamMap}toString(){return Xe.serialize(this)}}class f{constructor(e,t){this.segments=e,this.children=t,this.parent=null,fr(t,(r,o)=>r.parent=this)}hasChildren(){return this.numberOfChildren>0}get numberOfChildren(){return Object.keys(this.children).length}toString(){return at(this)}}class m{constructor(e,t){this.path=e,this.parameters=t}get parameterMap(){return this._parameterMap||(this._parameterMap=ou(this.parameters)),this._parameterMap}toString(){return Ll(this)}}function A(n,e){return n.length===e.length&&n.every((t,r)=>t.path===e[r].path)}let ee=(()=>{class n{}return n.\u0275fac=function(t){return new(t||n)},n.\u0275prov=p.Yz7({token:n,factory:function(){return new Ce},providedIn:"root"}),n})();class Ce{parse(e){const t=new bp(e);return new v(t.parseRootSegment(),t.parseQueryParams(),t.parseFragment())}serialize(e){const t=`/${Nt(e.root,!0)}`,r=function pc(n){const e=Object.keys(n).map(t=>{const r=n[t];return Array.isArray(r)?r.map(o=>`${oi(t)}=${oi(o)}`).join("&"):`${oi(t)}=${oi(r)}`}).filter(t=>!!t);return e.length?`?${e.join("&")}`:""}(e.queryParams);return`${t}${r}${"string"==typeof e.fragment?`#${function Rs(n){return encodeURI(n)}(e.fragment)}`:""}`}}const Xe=new Ce;function at(n){return n.segments.map(e=>Ll(e)).join("/")}function Nt(n,e){if(!n.hasChildren())return at(n);if(e){const t=n.children[Ht]?Nt(n.children[Ht],!1):"",r=[];return fr(n.children,(o,u)=>{u!==Ht&&r.push(`${u}:${Nt(o,!1)}`)}),r.length>0?`${t}(${r.join("//")})`:t}{const t=function O(n,e){let t=[];return fr(n.children,(r,o)=>{o===Ht&&(t=t.concat(e(r,o)))}),fr(n.children,(r,o)=>{o!==Ht&&(t=t.concat(e(r,o)))}),t}(n,(r,o)=>o===Ht?[Nt(n.children[Ht],!1)]:[`${o}:${Nt(r,!1)}`]);return 1===Object.keys(n.children).length&&null!=n.children[Ht]?`${at(n)}/${t[0]}`:`${at(n)}/(${t.join("//")})`}}function wn(n){return encodeURIComponent(n).replace(/%40/g,"@").replace(/%3A/gi,":").replace(/%24/g,"$").replace(/%2C/gi,",")}function oi(n){return wn(n).replace(/%3B/gi,";")}function da(n){return wn(n).replace(/\(/g,"%28").replace(/\)/g,"%29").replace(/%26/gi,"&")}function Ns(n){return decodeURIComponent(n)}function uu(n){return Ns(n.replace(/\+/g,"%20"))}function Ll(n){return`${da(n.path)}${function wp(n){return Object.keys(n).map(e=>`;${da(e)}=${da(n[e])}`).join("")}(n.parameters)}`}const Ep=/^[^\/()?;=#]+/;function gc(n){const e=n.match(Ep);return e?e[0]:""}const Ah=/^[^=?&#]+/,Um=/^[^&#]+/;class bp{constructor(e){this.url=e,this.remaining=e}parseRootSegment(){return this.consumeOptional("/"),""===this.remaining||this.peekStartsWith("?")||this.peekStartsWith("#")?new f([],{}):new f([],this.parseChildren())}parseQueryParams(){const e={};if(this.consumeOptional("?"))do{this.parseQueryParam(e)}while(this.consumeOptional("&"));return e}parseFragment(){return this.consumeOptional("#")?decodeURIComponent(this.remaining):null}parseChildren(){if(""===this.remaining)return{};this.consumeOptional("/");const e=[];for(this.peekStartsWith("(")||e.push(this.parseSegment());this.peekStartsWith("/")&&!this.peekStartsWith("//")&&!this.peekStartsWith("/(");)this.capture("/"),e.push(this.parseSegment());let t={};this.peekStartsWith("/(")&&(this.capture("/"),t=this.parseParens(!0));let r={};return this.peekStartsWith("(")&&(r=this.parseParens(!1)),(e.length>0||Object.keys(t).length>0)&&(r[Ht]=new f(e,t)),r}parseSegment(){const e=gc(this.remaining);if(""===e&&this.peekStartsWith(";"))throw new p.vHH(4009,wr);return this.capture(e),new m(Ns(e),this.parseMatrixParams())}parseMatrixParams(){const e={};for(;this.consumeOptional(";");)this.parseParam(e);return e}parseParam(e){const t=gc(this.remaining);if(!t)return;this.capture(t);let r="";if(this.consumeOptional("=")){const o=gc(this.remaining);o&&(r=o,this.capture(r))}e[Ns(t)]=Ns(r)}parseQueryParam(e){const t=function Dp(n){const e=n.match(Ah);return e?e[0]:""}(this.remaining);if(!t)return;this.capture(t);let r="";if(this.consumeOptional("=")){const l=function xh(n){const e=n.match(Um);return e?e[0]:""}(this.remaining);l&&(r=l,this.capture(r))}const o=uu(t),u=uu(r);if(e.hasOwnProperty(o)){let l=e[o];Array.isArray(l)||(l=[l],e[o]=l),l.push(u)}else e[o]=u}parseParens(e){const t={};for(this.capture("(");!this.consumeOptional(")")&&this.remaining.length>0;){const r=gc(this.remaining),o=this.remaining[r.length];if("/"!==o&&")"!==o&&";"!==o)throw new p.vHH(4010,wr);let u;r.indexOf(":")>-1?(u=r.slice(0,r.indexOf(":")),this.capture(u),this.capture(":")):e&&(u=Ht);const l=this.parseChildren();t[u]=1===Object.keys(l).length?l[Ht]:new f([],l),this.consumeOptional("//")}return t}peekStartsWith(e){return this.remaining.startsWith(e)}consumeOptional(e){return!!this.peekStartsWith(e)&&(this.remaining=this.remaining.substring(e.length),!0)}capture(e){if(!this.consumeOptional(e))throw new p.vHH(4011,wr)}}function Mh(n){return n.segments.length>0?new f([],{[Ht]:n}):n}function Rh(n){const e={};for(const r of Object.keys(n.children)){const u=Rh(n.children[r]);(u.segments.length>0||u.hasChildren())&&(e[r]=u)}return function Vm(n){if(1===n.numberOfChildren&&n.children[Ht]){const e=n.children[Ht];return new f(n.segments.concat(e.segments),e.children)}return n}(new f(n.segments,e))}function mc(n){return n instanceof v}function G_(n,e,t,r,o){if(0===t.length)return Ph(e.root,e.root,e.root,r,o);const u=function $m(n){if("string"==typeof n[0]&&1===n.length&&"/"===n[0])return new q_(!0,0,n);let e=0,t=!1;const r=n.reduce((o,u,l)=>{if("object"==typeof u&&null!=u){if(u.outlets){const g={};return fr(u.outlets,(_,b)=>{g[b]="string"==typeof _?_.split("/"):_}),[...o,{outlets:g}]}if(u.segmentPath)return[...o,u.segmentPath]}return"string"!=typeof u?[...o,u]:0===l?(u.split("/").forEach((g,_)=>{0==_&&"."===g||(0==_&&""===g?t=!0:".."===g?e++:""!=g&&o.push(g))}),o):[...o,u]},[]);return new q_(t,e,r)}(t);return u.toRoot()?Ph(e.root,e.root,new f([],{}),r,o):function l(_){const b=function jm(n,e,t,r){if(n.isAbsolute)return new vc(e.root,!0,0);if(-1===r)return new vc(t,t===e.root,0);return function Hm(n,e,t){let r=n,o=e,u=t;for(;u>o;){if(u-=o,r=r.parent,!r)throw new p.vHH(4005,!1);o=r.segments.length}return new vc(r,!1,o-u)}(t,r+(Ul(n.commands[0])?0:1),n.numberOfDoubleDots)}(u,e,n.snapshot?._urlSegment,_),S=b.processChildren?Bl(b.segmentGroup,b.index,u.commands):Vl(b.segmentGroup,b.index,u.commands);return Ph(e.root,b.segmentGroup,S,r,o)}(n.snapshot?._lastPathIndex)}function Ul(n){return"object"==typeof n&&null!=n&&!n.outlets&&!n.segmentPath}function Nh(n){return"object"==typeof n&&null!=n&&n.outlets}function Ph(n,e,t,r,o){let l,u={};r&&fr(r,(_,b)=>{u[b]=Array.isArray(_)?_.map(S=>`${S}`):`${_}`}),l=n===e?t:Oh(n,e,t);const g=Mh(Rh(l));return new v(g,u,o)}function Oh(n,e,t){const r={};return fr(n.children,(o,u)=>{r[u]=o===e?t:Oh(o,e,t)}),new f(n.segments,r)}class q_{constructor(e,t,r){if(this.isAbsolute=e,this.numberOfDoubleDots=t,this.commands=r,e&&r.length>0&&Ul(r[0]))throw new p.vHH(4003,!1);const o=r.find(Nh);if(o&&o!==Th(r))throw new p.vHH(4004,!1)}toRoot(){return this.isAbsolute&&1===this.commands.length&&"/"==this.commands[0]}}class vc{constructor(e,t,r){this.segmentGroup=e,this.processChildren=t,this.index=r}}function Vl(n,e,t){if(n||(n=new f([],{})),0===n.segments.length&&n.hasChildren())return Bl(n,e,t);const r=function zm(n,e,t){let r=0,o=e;const u={match:!1,pathIndex:0,commandIndex:0};for(;o<n.segments.length;){if(r>=t.length)return u;const l=n.segments[o],g=t[r];if(Nh(g))break;const _=`${g}`,b=r<t.length-1?t[r+1]:null;if(o>0&&void 0===_)break;if(_&&b&&"object"==typeof b&&void 0===b.outlets){if(!K_(_,b,l))return u;r+=2}else{if(!K_(_,{},l))return u;r++}o++}return{match:!0,pathIndex:o,commandIndex:r}}(n,e,t),o=t.slice(r.commandIndex);if(r.match&&r.pathIndex<n.segments.length){const u=new f(n.segments.slice(0,r.pathIndex),{});return u.children[Ht]=new f(n.segments.slice(r.pathIndex),n.children),Bl(u,0,o)}return r.match&&0===o.length?new f(n.segments,{}):r.match&&!n.hasChildren()?kh(n,e,t):r.match?Bl(n,0,o):kh(n,e,t)}function Bl(n,e,t){if(0===t.length)return new f(n.segments,{});{const r=function Cp(n){return Nh(n[0])?n[0].outlets:{[Ht]:n}}(t),o={};return fr(r,(u,l)=>{"string"==typeof u&&(u=[u]),null!==u&&(o[l]=Vl(n.children[l],e,u))}),fr(n.children,(u,l)=>{void 0===r[l]&&(o[l]=u)}),new f(n.segments,o)}}function kh(n,e,t){const r=n.segments.slice(0,e);let o=0;for(;o<t.length;){const u=t[o];if(Nh(u)){const _=Wm(u.outlets);return new f(r,_)}if(0===o&&Ul(t[0])){r.push(new m(n.segments[e].path,$l(t[0]))),o++;continue}const l=Nh(u)?u.outlets[Ht]:`${u}`,g=o<t.length-1?t[o+1]:null;l&&g&&Ul(g)?(r.push(new m(l,$l(g))),o+=2):(r.push(new m(l,{})),o++)}return new f(r,{})}function Wm(n){const e={};return fr(n,(t,r)=>{"string"==typeof t&&(t=[t]),null!==t&&(e[r]=kh(new f([],{}),0,t))}),e}function $l(n){const e={};return fr(n,(t,r)=>e[r]=`${t}`),e}function K_(n,e,t){return n==t.path&&Gi(e,t.parameters)}class Po{constructor(e,t){this.id=e,this.url=t}}class Gm extends Po{constructor(e,t,r="imperative",o=null){super(e,t),this.type=0,this.navigationTrigger=r,this.restoredState=o}toString(){return`NavigationStart(id: ${this.id}, url: '${this.url}')`}}class _c extends Po{constructor(e,t,r){super(e,t),this.urlAfterRedirects=r,this.type=1}toString(){return`NavigationEnd(id: ${this.id}, url: '${this.url}', urlAfterRedirects: '${this.urlAfterRedirects}')`}}class Tp extends Po{constructor(e,t,r,o){super(e,t),this.reason=r,this.code=o,this.type=2}toString(){return`NavigationCancel(id: ${this.id}, url: '${this.url}')`}}class qm extends Po{constructor(e,t,r,o){super(e,t),this.error=r,this.target=o,this.type=3}toString(){return`NavigationError(id: ${this.id}, url: '${this.url}', error: ${this.error})`}}class Y_ extends Po{constructor(e,t,r,o){super(e,t),this.urlAfterRedirects=r,this.state=o,this.type=4}toString(){return`RoutesRecognized(id: ${this.id}, url: '${this.url}', urlAfterRedirects: '${this.urlAfterRedirects}', state: ${this.state})`}}class Sp extends Po{constructor(e,t,r,o){super(e,t),this.urlAfterRedirects=r,this.state=o,this.type=7}toString(){return`GuardsCheckStart(id: ${this.id}, url: '${this.url}', urlAfterRedirects: '${this.urlAfterRedirects}', state: ${this.state})`}}class Zm extends Po{constructor(e,t,r,o,u){super(e,t),this.urlAfterRedirects=r,this.state=o,this.shouldActivate=u,this.type=8}toString(){return`GuardsCheckEnd(id: ${this.id}, url: '${this.url}', urlAfterRedirects: '${this.urlAfterRedirects}', state: ${this.state}, shouldActivate: ${this.shouldActivate})`}}class Ic extends Po{constructor(e,t,r,o){super(e,t),this.urlAfterRedirects=r,this.state=o,this.type=5}toString(){return`ResolveStart(id: ${this.id}, url: '${this.url}', urlAfterRedirects: '${this.urlAfterRedirects}', state: ${this.state})`}}class UE extends Po{constructor(e,t,r,o){super(e,t),this.urlAfterRedirects=r,this.state=o,this.type=6}toString(){return`ResolveEnd(id: ${this.id}, url: '${this.url}', urlAfterRedirects: '${this.urlAfterRedirects}', state: ${this.state})`}}class VE{constructor(e){this.route=e,this.type=9}toString(){return`RouteConfigLoadStart(path: ${this.route.path})`}}class GT{constructor(e){this.route=e,this.type=10}toString(){return`RouteConfigLoadEnd(path: ${this.route.path})`}}class BE{constructor(e){this.snapshot=e,this.type=11}toString(){return`ChildActivationStart(path: '${this.snapshot.routeConfig&&this.snapshot.routeConfig.path||""}')`}}class Km{constructor(e){this.snapshot=e,this.type=12}toString(){return`ChildActivationEnd(path: '${this.snapshot.routeConfig&&this.snapshot.routeConfig.path||""}')`}}class $E{constructor(e){this.snapshot=e,this.type=13}toString(){return`ActivationStart(path: '${this.snapshot.routeConfig&&this.snapshot.routeConfig.path||""}')`}}class Q_{constructor(e){this.snapshot=e,this.type=14}toString(){return`ActivationEnd(path: '${this.snapshot.routeConfig&&this.snapshot.routeConfig.path||""}')`}}class Fh{constructor(e,t,r){this.routerEvent=e,this.position=t,this.anchor=r,this.type=15}toString(){return`Scroll(anchor: '${this.anchor}', position: '${this.position?`${this.position[0]}, ${this.position[1]}`:null}')`}}let X_=(()=>{class n{createUrlTree(t,r,o,u,l,g){return G_(t||r.root,o,u,l,g)}}return n.\u0275fac=function(t){return new(t||n)},n.\u0275prov=p.Yz7({token:n,factory:n.\u0275fac}),n})(),J_=(()=>{class n{}return n.\u0275fac=function(t){return new(t||n)},n.\u0275prov=p.Yz7({token:n,factory:function(e){return X_.\u0275fac(e)},providedIn:"root"}),n})();class e0{constructor(e){this._root=e}get root(){return this._root.value}parent(e){const t=this.pathFromRoot(e);return t.length>1?t[t.length-2]:null}children(e){const t=Qm(e,this._root);return t?t.children.map(r=>r.value):[]}firstChild(e){const t=Qm(e,this._root);return t&&t.children.length>0?t.children[0].value:null}siblings(e){const t=Xm(e,this._root);return t.length<2?[]:t[t.length-2].children.map(o=>o.value).filter(o=>o!==e)}pathFromRoot(e){return Xm(e,this._root).map(t=>t.value)}}function Qm(n,e){if(n===e.value)return e;for(const t of e.children){const r=Qm(n,t);if(r)return r}return null}function Xm(n,e){if(n===e.value)return[e];for(const t of e.children){const r=Xm(n,t);if(r.length)return r.unshift(e),r}return[]}class ha{constructor(e,t){this.value=e,this.children=t}toString(){return`TreeNode(${this.value})`}}function jl(n){const e={};return n&&n.children.forEach(t=>e[t.value.outlet]=t),e}class fa extends e0{constructor(e,t){super(e),this.snapshot=t,Ap(this,e)}toString(){return this.snapshot.toString()}}function Hl(n,e){const t=function zE(n,e){const l=new Jm([],{},{},"",{},Ht,e,null,n.root,-1,{});return new GE("",new ha(l,[]))}(n,e),r=new ii([new m("",{})]),o=new ii({}),u=new ii({}),l=new ii({}),g=new ii(""),_=new Lh(r,o,l,g,u,Ht,e,t.root);return _.snapshot=t.root,new fa(new ha(_,[]),t)}class Lh{constructor(e,t,r,o,u,l,g,_){this.url=e,this.params=t,this.queryParams=r,this.fragment=o,this.data=u,this.outlet=l,this.component=g,this.title=this.data?.pipe((0,_t.U)(b=>b[gi]))??Qe(void 0),this._futureSnapshot=_}get routeConfig(){return this._futureSnapshot.routeConfig}get root(){return this._routerState.root}get parent(){return this._routerState.parent(this)}get firstChild(){return this._routerState.firstChild(this)}get children(){return this._routerState.children(this)}get pathFromRoot(){return this._routerState.pathFromRoot(this)}get paramMap(){return this._paramMap||(this._paramMap=this.params.pipe((0,_t.U)(e=>ou(e)))),this._paramMap}get queryParamMap(){return this._queryParamMap||(this._queryParamMap=this.queryParams.pipe((0,_t.U)(e=>ou(e)))),this._queryParamMap}toString(){return this.snapshot?this.snapshot.toString():`Future(${this._futureSnapshot})`}}function WE(n,e="emptyOnly"){const t=n.pathFromRoot;let r=0;if("always"!==e)for(r=t.length-1;r>=1;){const o=t[r],u=t[r-1];if(o.routeConfig&&""===o.routeConfig.path)r--;else{if(u.component)break;r--}}return function qT(n){return n.reduce((e,t)=>({params:{...e.params,...t.params},data:{...e.data,...t.data},resolve:{...t.data,...e.resolve,...t.routeConfig?.data,...t._resolvedData}}),{params:{},data:{},resolve:{}})}(t.slice(r))}class Jm{constructor(e,t,r,o,u,l,g,_,b,S,P){this.url=e,this.params=t,this.queryParams=r,this.fragment=o,this.data=u,this.outlet=l,this.component=g,this.routeConfig=_,this._urlSegment=b,this._lastPathIndex=S,this._resolve=P}get title(){return this.data?.[gi]}get root(){return this._routerState.root}get parent(){return this._routerState.parent(this)}get firstChild(){return this._routerState.firstChild(this)}get children(){return this._routerState.children(this)}get pathFromRoot(){return this._routerState.pathFromRoot(this)}get paramMap(){return this._paramMap||(this._paramMap=ou(this.params)),this._paramMap}get queryParamMap(){return this._queryParamMap||(this._queryParamMap=ou(this.queryParams)),this._queryParamMap}toString(){return`Route(url:'${this.url.map(r=>r.toString()).join("/")}', path:'${this.routeConfig?this.routeConfig.path:""}')`}}class GE extends e0{constructor(e,t){super(t),this.url=e,Ap(this,t)}toString(){return t0(this._root)}}function Ap(n,e){e.value._routerState=n,e.children.forEach(t=>Ap(n,t))}function t0(n){const e=n.children.length>0?` { ${n.children.map(t0).join(", ")} } `:"";return`${n.value}${e}`}function ey(n){if(n.snapshot){const e=n.snapshot,t=n._futureSnapshot;n.snapshot=t,Gi(e.queryParams,t.queryParams)||n.queryParams.next(t.queryParams),e.fragment!==t.fragment&&n.fragment.next(t.fragment),Gi(e.params,t.params)||n.params.next(t.params),function Rl(n,e){if(n.length!==e.length)return!1;for(let t=0;t<n.length;++t)if(!Gi(n[t],e[t]))return!1;return!0}(e.url,t.url)||n.url.next(t.url),Gi(e.data,t.data)||n.data.next(t.data)}else n.snapshot=n._futureSnapshot,n.data.next(n._futureSnapshot.data)}function ty(n,e){const t=Gi(n.params,e.params)&&function w(n,e){return A(n,e)&&n.every((t,r)=>Gi(t.parameters,e[r].parameters))}(n.url,e.url);return t&&!(!n.parent!=!e.parent)&&(!n.parent||ty(n.parent,e.parent))}function wc(n,e,t){if(t&&n.shouldReuseRoute(e.value,t.value.snapshot)){const r=t.value;r._futureSnapshot=e.value;const o=function pa(n,e,t){return e.children.map(r=>{for(const o of t.children)if(n.shouldReuseRoute(r.value,o.value.snapshot))return wc(n,r,o);return wc(n,r)})}(n,e,t);return new ha(r,o)}{if(n.shouldAttach(e.value)){const u=n.retrieve(e.value);if(null!==u){const l=u.route;return l.value._futureSnapshot=e.value,l.children=e.children.map(g=>wc(n,g)),l}}const r=function Uh(n){return new Lh(new ii(n.url),new ii(n.params),new ii(n.queryParams),new ii(n.fragment),new ii(n.data),n.outlet,n.component,n)}(e.value),o=e.children.map(u=>wc(n,u));return new ha(r,o)}}const xp="ngNavigationCancelingError";function ny(n,e){const{redirectTo:t,navigationBehaviorOptions:r}=mc(e)?{redirectTo:e,navigationBehaviorOptions:void 0}:e,o=ry(!1,0,e);return o.url=t,o.navigationBehaviorOptions=r,o}function ry(n,e,t){const r=new Error("NavigationCancelingError: "+(n||""));return r[xp]=!0,r.cancellationCode=e,t&&(r.url=t),r}function ZE(n){return KE(n)&&mc(n.url)}function KE(n){return n&&n[xp]}class ZT{constructor(){this.outlet=null,this.route=null,this.resolver=null,this.injector=null,this.children=new Ec,this.attachRef=null}}let Ec=(()=>{class n{constructor(){this.contexts=new Map}onChildOutletCreated(t,r){const o=this.getOrCreateContext(t);o.outlet=r,this.contexts.set(t,o)}onChildOutletDestroyed(t){const r=this.getContext(t);r&&(r.outlet=null,r.attachRef=null)}onOutletDeactivated(){const t=this.contexts;return this.contexts=new Map,t}onOutletReAttached(t){this.contexts=t}getOrCreateContext(t){let r=this.getContext(t);return r||(r=new ZT,this.contexts.set(t,r)),r}getContext(t){return this.contexts.get(t)||null}}return n.\u0275fac=function(t){return new(t||n)},n.\u0275prov=p.Yz7({token:n,factory:n.\u0275fac,providedIn:"root"}),n})();const zl=!1;let n0=(()=>{class n{constructor(){this.activated=null,this._activatedRoute=null,this.name=Ht,this.activateEvents=new p.vpe,this.deactivateEvents=new p.vpe,this.attachEvents=new p.vpe,this.detachEvents=new p.vpe,this.parentContexts=(0,p.f3M)(Ec),this.location=(0,p.f3M)(p.s_b),this.changeDetector=(0,p.f3M)(p.sBO),this.environmentInjector=(0,p.f3M)(p.lqb)}ngOnChanges(t){if(t.name){const{firstChange:r,previousValue:o}=t.name;if(r)return;this.isTrackedInParentContexts(o)&&(this.deactivate(),this.parentContexts.onChildOutletDestroyed(o)),this.initializeOutletWithName()}}ngOnDestroy(){this.isTrackedInParentContexts(this.name)&&this.parentContexts.onChildOutletDestroyed(this.name)}isTrackedInParentContexts(t){return this.parentContexts.getContext(t)?.outlet===this}ngOnInit(){this.initializeOutletWithName()}initializeOutletWithName(){if(this.parentContexts.onChildOutletCreated(this.name,this),this.activated)return;const t=this.parentContexts.getContext(this.name);t?.route&&(t.attachRef?this.attach(t.attachRef,t.route):this.activateWith(t.route,t.injector))}get isActivated(){return!!this.activated}get component(){if(!this.activated)throw new p.vHH(4012,zl);return this.activated.instance}get activatedRoute(){if(!this.activated)throw new p.vHH(4012,zl);return this._activatedRoute}get activatedRouteData(){return this._activatedRoute?this._activatedRoute.snapshot.data:{}}detach(){if(!this.activated)throw new p.vHH(4012,zl);this.location.detach();const t=this.activated;return this.activated=null,this._activatedRoute=null,this.detachEvents.emit(t.instance),t}attach(t,r){this.activated=t,this._activatedRoute=r,this.location.insert(t.hostView),this.attachEvents.emit(t.instance)}deactivate(){if(this.activated){const t=this.component;this.activated.destroy(),this.activated=null,this._activatedRoute=null,this.deactivateEvents.emit(t)}}activateWith(t,r){if(this.isActivated)throw new p.vHH(4013,zl);this._activatedRoute=t;const o=this.location,l=t.snapshot.component,g=this.parentContexts.getOrCreateContext(this.name).children,_=new KT(t,g,o.injector);if(r&&function r0(n){return!!n.resolveComponentFactory}(r)){const b=r.resolveComponentFactory(l);this.activated=o.createComponent(b,o.length,_)}else this.activated=o.createComponent(l,{index:o.length,injector:_,environmentInjector:r??this.environmentInjector});this.changeDetector.markForCheck(),this.activateEvents.emit(this.activated.instance)}}return n.\u0275fac=function(t){return new(t||n)},n.\u0275dir=p.lG2({type:n,selectors:[["router-outlet"]],inputs:{name:"name"},outputs:{activateEvents:"activate",deactivateEvents:"deactivate",attachEvents:"attach",detachEvents:"detach"},exportAs:["outlet"],standalone:!0,features:[p.TTD]}),n})();class KT{constructor(e,t,r){this.route=e,this.childContexts=t,this.parent=r}get(e,t){return e===Lh?this.route:e===Ec?this.childContexts:this.parent.get(e,t)}}let iy=(()=>{class n{}return n.\u0275fac=function(t){return new(t||n)},n.\u0275cmp=p.Xpm({type:n,selectors:[["ng-component"]],standalone:!0,features:[p.jDz],decls:1,vars:0,template:function(t,r){1&t&&p._UZ(0,"router-outlet")},dependencies:[n0],encapsulation:2}),n})();function s0(n,e){return n.providers&&!n._injector&&(n._injector=(0,p.MMx)(n.providers,e,`Route: ${n.path}`)),n._injector??e}function uy(n){const e=n.children&&n.children.map(uy),t=e?{...n,children:e}:{...n};return!t.component&&!t.loadComponent&&(e||t.loadChildren)&&t.outlet&&t.outlet!==Ht&&(t.component=iy),t}function Ps(n){return n.outlet||Ht}function Mp(n,e){const t=n.filter(r=>Ps(r)===e);return t.push(...n.filter(r=>Ps(r)!==e)),t}function Wl(n){if(!n)return null;if(n.routeConfig?._injector)return n.routeConfig._injector;for(let e=n.parent;e;e=e.parent){const t=e.routeConfig;if(t?._loadedInjector)return t._loadedInjector;if(t?._injector)return t._injector}return null}class JE{constructor(e,t,r,o){this.routeReuseStrategy=e,this.futureState=t,this.currState=r,this.forwardEvent=o}activate(e){const t=this.futureState._root,r=this.currState?this.currState._root:null;this.deactivateChildRoutes(t,r,e),ey(this.futureState.root),this.activateChildRoutes(t,r,e)}deactivateChildRoutes(e,t,r){const o=jl(t);e.children.forEach(u=>{const l=u.value.outlet;this.deactivateRoutes(u,o[l],r),delete o[l]}),fr(o,(u,l)=>{this.deactivateRouteAndItsChildren(u,r)})}deactivateRoutes(e,t,r){const o=e.value,u=t?t.value:null;if(o===u)if(o.component){const l=r.getContext(o.outlet);l&&this.deactivateChildRoutes(e,t,l.children)}else this.deactivateChildRoutes(e,t,r);else u&&this.deactivateRouteAndItsChildren(t,r)}deactivateRouteAndItsChildren(e,t){e.value.component&&this.routeReuseStrategy.shouldDetach(e.value.snapshot)?this.detachAndStoreRouteSubtree(e,t):this.deactivateRouteAndOutlet(e,t)}detachAndStoreRouteSubtree(e,t){const r=t.getContext(e.value.outlet),o=r&&e.value.component?r.children:t,u=jl(e);for(const l of Object.keys(u))this.deactivateRouteAndItsChildren(u[l],o);if(r&&r.outlet){const l=r.outlet.detach(),g=r.children.onOutletDeactivated();this.routeReuseStrategy.store(e.value.snapshot,{componentRef:l,route:e,contexts:g})}}deactivateRouteAndOutlet(e,t){const r=t.getContext(e.value.outlet),o=r&&e.value.component?r.children:t,u=jl(e);for(const l of Object.keys(u))this.deactivateRouteAndItsChildren(u[l],o);r&&r.outlet&&(r.outlet.deactivate(),r.children.onOutletDeactivated(),r.attachRef=null,r.resolver=null,r.route=null)}activateChildRoutes(e,t,r){const o=jl(t);e.children.forEach(u=>{this.activateRoutes(u,o[u.value.outlet],r),this.forwardEvent(new Q_(u.value.snapshot))}),e.children.length&&this.forwardEvent(new Km(e.value.snapshot))}activateRoutes(e,t,r){const o=e.value,u=t?t.value:null;if(ey(o),o===u)if(o.component){const l=r.getOrCreateContext(o.outlet);this.activateChildRoutes(e,t,l.children)}else this.activateChildRoutes(e,t,r);else if(o.component){const l=r.getOrCreateContext(o.outlet);if(this.routeReuseStrategy.shouldAttach(o.snapshot)){const g=this.routeReuseStrategy.retrieve(o.snapshot);this.routeReuseStrategy.store(o.snapshot,null),l.children.onOutletReAttached(g.contexts),l.attachRef=g.componentRef,l.route=g.route.value,l.outlet&&l.outlet.attach(g.componentRef,g.route.value),ey(g.route.value),this.activateChildRoutes(e,null,l.children)}else{const g=Wl(o.snapshot),_=g?.get(p._Vd)??null;l.attachRef=null,l.route=o,l.resolver=_,l.injector=g,l.outlet&&l.outlet.activateWith(o,l.injector),this.activateChildRoutes(e,null,l.children)}}else this.activateChildRoutes(e,null,r)}}class o0{constructor(e){this.path=e,this.route=this.path[this.path.length-1]}}class Rp{constructor(e,t){this.component=e,this.route=t}}function a0(n,e,t){const r=n._root;return ga(r,e?e._root:null,t,[r.value])}function Vh(n,e){const t=Symbol(),r=e.get(n,t);return r===t?"function"!=typeof n||(0,p.Z0I)(n)?e.get(n):n:r}function ga(n,e,t,r,o={canDeactivateChecks:[],canActivateChecks:[]}){const u=jl(e);return n.children.forEach(l=>{(function cy(n,e,t,r,o={canDeactivateChecks:[],canActivateChecks:[]}){const u=n.value,l=e?e.value:null,g=t?t.getContext(n.value.outlet):null;if(l&&u.routeConfig===l.routeConfig){const _=function u0(n,e,t){if("function"==typeof t)return t(n,e);switch(t){case"pathParamsChange":return!A(n.url,e.url);case"pathParamsOrQueryParamsChange":return!A(n.url,e.url)||!Gi(n.queryParams,e.queryParams);case"always":return!0;case"paramsOrQueryParamsChange":return!ty(n,e)||!Gi(n.queryParams,e.queryParams);default:return!ty(n,e)}}(l,u,u.routeConfig.runGuardsAndResolvers);_?o.canActivateChecks.push(new o0(r)):(u.data=l.data,u._resolvedData=l._resolvedData),ga(n,e,u.component?g?g.children:null:t,r,o),_&&g&&g.outlet&&g.outlet.isActivated&&o.canDeactivateChecks.push(new Rp(g.outlet.component,l))}else l&&Gl(e,g,o),o.canActivateChecks.push(new o0(r)),ga(n,null,u.component?g?g.children:null:t,r,o)})(l,u[l.value.outlet],t,r.concat([l.value]),o),delete u[l.value.outlet]}),fr(u,(l,g)=>Gl(l,t.getContext(g),o)),o}function Gl(n,e,t){const r=jl(n),o=n.value;fr(r,(u,l)=>{Gl(u,o.component?e?e.children.getContext(l):null:e,t)}),t.canDeactivateChecks.push(new Rp(o.component&&e&&e.outlet&&e.outlet.isActivated?e.outlet.component:null,o))}function ql(n){return"function"==typeof n}function Bh(n){return n instanceof Ro||"EmptyError"===n?.name}const $h=Symbol("INITIAL_VALUE");function Dc(){return Rr(n=>Me(n.map(e=>e.pipe(ru(1),xl($h)))).pipe((0,_t.U)(e=>{for(const t of e)if(!0!==t){if(t===$h)return $h;if(!1===t||t instanceof v)return t}return!0}),Wi(e=>e!==$h),ru(1)))}function Op(n){return(0,nu.z)((0,si.b)(e=>{if(mc(e))throw ny(0,e)}),(0,_t.U)(e=>!0===e))}const fy={matched:!1,consumedSegments:[],remainingSegments:[],parameters:{},positionalParamSegments:{}};function py(n,e,t,r,o){const u=cu(n,e,t);return u.matched?function sD(n,e,t,r){const o=e.canMatch;return o&&0!==o.length?Qe(o.map(l=>{const g=Vh(l,n);return No(function JT(n){return n&&ql(n.canMatch)}(g)?g.canMatch(e,t):n.runInContext(()=>g(e,t)))})).pipe(Dc(),Op()):Qe(!0)}(r=s0(e,r),e,t).pipe((0,_t.U)(l=>!0===l?u:{...fy})):Qe(u)}function cu(n,e,t){if(""===e.path)return"full"===e.pathMatch&&(n.hasChildren()||t.length>0)?{...fy}:{matched:!0,consumedSegments:[],remainingSegments:t,parameters:{},positionalParamSegments:{}};const o=(e.matcher||Fm)(t,n,e);if(!o)return{...fy};const u={};fr(o.posParams,(g,_)=>{u[_]=g.path});const l=o.consumed.length>0?{...u,...o.consumed[o.consumed.length-1].parameters}:u;return{matched:!0,consumedSegments:o.consumed,remainingSegments:t.slice(o.consumed.length),parameters:l,positionalParamSegments:o.posParams??{}}}function kp(n,e,t,r){if(t.length>0&&function gy(n,e,t){return t.some(r=>jh(n,e,r)&&Ps(r)!==Ht)}(n,t,r)){const u=new f(e,function aD(n,e,t,r){const o={};o[Ht]=r,r._sourceSegment=n,r._segmentIndexShift=e.length;for(const u of t)if(""===u.path&&Ps(u)!==Ht){const l=new f([],{});l._sourceSegment=n,l._segmentIndexShift=e.length,o[Ps(u)]=l}return o}(n,e,r,new f(t,n.children)));return u._sourceSegment=n,u._segmentIndexShift=e.length,{segmentGroup:u,slicedSegments:[]}}if(0===t.length&&function uD(n,e,t){return t.some(r=>jh(n,e,r))}(n,t,r)){const u=new f(n.segments,function oD(n,e,t,r,o){const u={};for(const l of r)if(jh(n,t,l)&&!o[Ps(l)]){const g=new f([],{});g._sourceSegment=n,g._segmentIndexShift=e.length,u[Ps(l)]=g}return{...o,...u}}(n,e,t,r,n.children));return u._sourceSegment=n,u._segmentIndexShift=e.length,{segmentGroup:u,slicedSegments:t}}const o=new f(n.segments,n.children);return o._sourceSegment=n,o._segmentIndexShift=e.length,{segmentGroup:o,slicedSegments:t}}function jh(n,e,t){return(!(n.hasChildren()||e.length>0)||"full"!==t.pathMatch)&&""===t.path}function f0(n,e,t,r){return!!(Ps(n)===r||r!==Ht&&jh(e,t,n))&&("**"===n.path||cu(e,n,t).matched)}function my(n,e,t){return 0===e.length&&!n.children[t]}const yy=!1;class Fp{constructor(e){this.segmentGroup=e||null}}class Zl{constructor(e){this.urlTree=e}}function Hh(n){return zi(new Fp(n))}function Tc(n){return zi(new Zl(n))}class lD{constructor(e,t,r,o,u){this.injector=e,this.configLoader=t,this.urlSerializer=r,this.urlTree=o,this.config=u,this.allowRedirects=!0}apply(){const e=kp(this.urlTree.root,[],[],this.config).segmentGroup,t=new f(e.segments,e.children);return this.expandSegmentGroup(this.injector,this.config,t,Ht).pipe((0,_t.U)(u=>this.createUrlTree(Rh(u),this.urlTree.queryParams,this.urlTree.fragment))).pipe(la(u=>{if(u instanceof Zl)return this.allowRedirects=!1,this.match(u.urlTree);throw u instanceof Fp?this.noMatchError(u):u}))}match(e){return this.expandSegmentGroup(this.injector,this.config,e.root,Ht).pipe((0,_t.U)(o=>this.createUrlTree(Rh(o),e.queryParams,e.fragment))).pipe(la(o=>{throw o instanceof Fp?this.noMatchError(o):o}))}noMatchError(e){return new p.vHH(4002,yy)}createUrlTree(e,t,r){const o=Mh(e);return new v(o,t,r)}expandSegmentGroup(e,t,r,o){return 0===r.segments.length&&r.hasChildren()?this.expandChildren(e,t,r).pipe((0,_t.U)(u=>new f([],u))):this.expandSegment(e,r,t,r.segments,o,!0)}expandChildren(e,t,r){const o=[];for(const u of Object.keys(r.children))"primary"===u?o.unshift(u):o.push(u);return(0,Zt.D)(o).pipe(ca(u=>{const l=r.children[u],g=Mp(t,u);return this.expandSegmentGroup(e,g,l,u).pipe((0,_t.U)(_=>({segment:_,outlet:u})))}),su((u,l)=>(u[l.outlet]=l.segment,u),{}),bh())}expandSegment(e,t,r,o,u,l){return(0,Zt.D)(r).pipe(ca(g=>this.expandSegmentAgainstRoute(e,t,r,g,o,u,l).pipe(la(b=>{if(b instanceof Fp)return Qe(null);throw b}))),as(g=>!!g),la((g,_)=>{if(Bh(g))return my(t,o,u)?Qe(new f([],{})):Hh(t);throw g}))}expandSegmentAgainstRoute(e,t,r,o,u,l,g){return f0(o,t,u,l)?void 0===o.redirectTo?this.matchSegmentAgainstRoute(e,t,o,u,l):g&&this.allowRedirects?this.expandSegmentAgainstRouteUsingRedirect(e,t,r,o,u,l):Hh(t):Hh(t)}expandSegmentAgainstRouteUsingRedirect(e,t,r,o,u,l){return"**"===o.path?this.expandWildCardWithParamsAgainstRouteUsingRedirect(e,r,o,l):this.expandRegularSegmentAgainstRouteUsingRedirect(e,t,r,o,u,l)}expandWildCardWithParamsAgainstRouteUsingRedirect(e,t,r,o){const u=this.applyRedirectCommands([],r.redirectTo,{});return r.redirectTo.startsWith("/")?Tc(u):this.lineralizeSegments(r,u).pipe((0,Ir.z)(l=>{const g=new f(l,{});return this.expandSegment(e,g,t,l,o,!1)}))}expandRegularSegmentAgainstRouteUsingRedirect(e,t,r,o,u,l){const{matched:g,consumedSegments:_,remainingSegments:b,positionalParamSegments:S}=cu(t,o,u);if(!g)return Hh(t);const P=this.applyRedirectCommands(_,o.redirectTo,S);return o.redirectTo.startsWith("/")?Tc(P):this.lineralizeSegments(o,P).pipe((0,Ir.z)(W=>this.expandSegment(e,t,r,W.concat(b),l,!1)))}matchSegmentAgainstRoute(e,t,r,o,u){return"**"===r.path?(e=s0(r,e),r.loadChildren?(r._loadedRoutes?Qe({routes:r._loadedRoutes,injector:r._loadedInjector}):this.configLoader.loadChildren(e,r)).pipe((0,_t.U)(g=>(r._loadedRoutes=g.routes,r._loadedInjector=g.injector,new f(o,{})))):Qe(new f(o,{}))):py(t,r,o,e).pipe(Rr(({matched:l,consumedSegments:g,remainingSegments:_})=>l?this.getChildConfig(e=r._injector??e,r,o).pipe((0,Ir.z)(S=>{const P=S.injector??e,W=S.routes,{segmentGroup:J,slicedSegments:oe}=kp(t,g,_,W),ke=new f(J.segments,J.children);if(0===oe.length&&ke.hasChildren())return this.expandChildren(P,W,ke).pipe((0,_t.U)(Lt=>new f(g,Lt)));if(0===W.length&&0===oe.length)return Qe(new f(g,{}));const je=Ps(r)===u;return this.expandSegment(P,ke,W,oe,je?Ht:u,!0).pipe((0,_t.U)(zt=>new f(g.concat(zt.segments),zt.children)))})):Hh(t)))}getChildConfig(e,t,r){return t.children?Qe({routes:t.children,injector:e}):t.loadChildren?void 0!==t._loadedRoutes?Qe({routes:t._loadedRoutes,injector:t._loadedInjector}):function h0(n,e,t,r){const o=e.canLoad;return void 0===o||0===o.length?Qe(!0):Qe(o.map(l=>{const g=Vh(l,n);return No(function tD(n){return n&&ql(n.canLoad)}(g)?g.canLoad(e,t):n.runInContext(()=>g(e,t)))})).pipe(Dc(),Op())}(e,t,r).pipe((0,Ir.z)(o=>o?this.configLoader.loadChildren(e,t).pipe((0,si.b)(u=>{t._loadedRoutes=u.routes,t._loadedInjector=u.injector})):function cD(n){return zi(ry(yy,3))}())):Qe({routes:[],injector:e})}lineralizeSegments(e,t){let r=[],o=t.root;for(;;){if(r=r.concat(o.segments),0===o.numberOfChildren)return Qe(r);if(o.numberOfChildren>1||!o.children[Ht])return zi(new p.vHH(4e3,yy));o=o.children[Ht]}}applyRedirectCommands(e,t,r){return this.applyRedirectCreateUrlTree(t,this.urlSerializer.parse(t),e,r)}applyRedirectCreateUrlTree(e,t,r,o){const u=this.createSegmentGroup(e,t.root,r,o);return new v(u,this.createQueryParams(t.queryParams,this.urlTree.queryParams),t.fragment)}createQueryParams(e,t){const r={};return fr(e,(o,u)=>{if("string"==typeof o&&o.startsWith(":")){const g=o.substring(1);r[u]=t[g]}else r[u]=o}),r}createSegmentGroup(e,t,r,o){const u=this.createSegments(e,t.segments,r,o);let l={};return fr(t.children,(g,_)=>{l[_]=this.createSegmentGroup(e,g,r,o)}),new f(u,l)}createSegments(e,t,r,o){return t.map(u=>u.path.startsWith(":")?this.findPosParam(e,u,o):this.findOrReturn(u,r))}findPosParam(e,t,r){const o=r[t.path.substring(1)];if(!o)throw new p.vHH(4001,yy);return o}findOrReturn(e,t){let r=0;for(const o of t){if(o.path===e.path)return t.splice(r),o;r++}return e}}class m0{}class _y{constructor(e,t,r,o,u,l,g){this.injector=e,this.rootComponentType=t,this.config=r,this.urlTree=o,this.url=u,this.paramsInheritanceStrategy=l,this.urlSerializer=g}recognize(){const e=kp(this.urlTree.root,[],[],this.config.filter(t=>void 0===t.redirectTo)).segmentGroup;return this.processSegmentGroup(this.injector,this.config,e,Ht).pipe((0,_t.U)(t=>{if(null===t)return null;const r=new Jm([],Object.freeze({}),Object.freeze({...this.urlTree.queryParams}),this.urlTree.fragment,{},Ht,this.rootComponentType,null,this.urlTree.root,-1,{}),o=new ha(r,t),u=new GE(this.url,o);return this.inheritParamsAndData(u._root),u}))}inheritParamsAndData(e){const t=e.value,r=WE(t,this.paramsInheritanceStrategy);t.params=Object.freeze(r.params),t.data=Object.freeze(r.data),e.children.forEach(o=>this.inheritParamsAndData(o))}processSegmentGroup(e,t,r,o){return 0===r.segments.length&&r.hasChildren()?this.processChildren(e,t,r):this.processSegment(e,t,r,r.segments,o)}processChildren(e,t,r){return(0,Zt.D)(Object.keys(r.children)).pipe(ca(o=>{const u=r.children[o],l=Mp(t,o);return this.processSegmentGroup(e,l,u,o)}),su((o,u)=>o&&u?(o.push(...u),o):null),function Ch(n,e=!1){return(0,hr.e)((t,r)=>{let o=0;t.subscribe((0,G.x)(r,u=>{const l=n(u,o++);(l||e)&&r.next(u),!l&&r.complete()}))})}(o=>null!==o),iu(null),bh(),(0,_t.U)(o=>{if(null===o)return null;const u=v0(o);return function hD(n){n.sort((e,t)=>e.value.outlet===Ht?-1:t.value.outlet===Ht?1:e.value.outlet.localeCompare(t.value.outlet))}(u),u}))}processSegment(e,t,r,o,u){return(0,Zt.D)(t).pipe(ca(l=>this.processSegmentAgainstRoute(l._injector??e,l,r,o,u)),as(l=>!!l),la(l=>{if(Bh(l))return my(r,o,u)?Qe([]):Qe(null);throw l}))}processSegmentAgainstRoute(e,t,r,o,u){if(t.redirectTo||!f0(t,r,o,u))return Qe(null);let l;if("**"===t.path){const g=o.length>0?Th(o).parameters:{},_=I0(r)+o.length;l=Qe({snapshot:new Jm(o,g,Object.freeze({...this.urlTree.queryParams}),this.urlTree.fragment,w0(t),Ps(t),t.component??t._loadedComponent??null,t,_0(r),_,E0(t)),consumedSegments:[],remainingSegments:[]})}else l=py(r,t,o,e).pipe((0,_t.U)(({matched:g,consumedSegments:_,remainingSegments:b,parameters:S})=>{if(!g)return null;const P=I0(r)+_.length;return{snapshot:new Jm(_,S,Object.freeze({...this.urlTree.queryParams}),this.urlTree.fragment,w0(t),Ps(t),t.component??t._loadedComponent??null,t,_0(r),P,E0(t)),consumedSegments:_,remainingSegments:b}}));return l.pipe(Rr(g=>{if(null===g)return Qe(null);const{snapshot:_,consumedSegments:b,remainingSegments:S}=g;e=t._injector??e;const P=t._loadedInjector??e,W=function Iy(n){return n.children?n.children:n.loadChildren?n._loadedRoutes:[]}(t),{segmentGroup:J,slicedSegments:oe}=kp(r,b,S,W.filter(je=>void 0===je.redirectTo));if(0===oe.length&&J.hasChildren())return this.processChildren(P,W,J).pipe((0,_t.U)(je=>null===je?null:[new ha(_,je)]));if(0===W.length&&0===oe.length)return Qe([new ha(_,[])]);const ke=Ps(t)===u;return this.processSegment(P,W,J,oe,ke?Ht:u).pipe((0,_t.U)(je=>null===je?null:[new ha(_,je)]))}))}}function Wh(n){const e=n.value.routeConfig;return e&&""===e.path&&void 0===e.redirectTo}function v0(n){const e=[],t=new Set;for(const r of n){if(!Wh(r)){e.push(r);continue}const o=e.find(u=>r.value.routeConfig===u.value.routeConfig);void 0!==o?(o.children.push(...r.children),t.add(o)):e.push(r)}for(const r of t){const o=v0(r.children);e.push(new ha(r.value,o))}return e.filter(r=>!t.has(r))}function _0(n){let e=n;for(;e._sourceSegment;)e=e._sourceSegment;return e}function I0(n){let e=n,t=e._segmentIndexShift??0;for(;e._sourceSegment;)e=e._sourceSegment,t+=e._segmentIndexShift??0;return t-1}function w0(n){return n.data||{}}function E0(n){return n.resolve||{}}function wy(n){return"string"==typeof n.title||null===n.title}function D0(n){return Rr(e=>{const t=n(e);return t?(0,Zt.D)(t).pipe((0,_t.U)(()=>e)):Qe(e)})}const Yl=new p.OlP("ROUTES");let Lp=(()=>{class n{constructor(t,r){this.injector=t,this.compiler=r,this.componentLoaders=new WeakMap,this.childrenLoaders=new WeakMap}loadComponent(t){if(this.componentLoaders.get(t))return this.componentLoaders.get(t);if(t._loadedComponent)return Qe(t._loadedComponent);this.onLoadStartListener&&this.onLoadStartListener(t);const r=No(t.loadComponent()).pipe((0,_t.U)(C0),(0,si.b)(u=>{this.onLoadEndListener&&this.onLoadEndListener(t),t._loadedComponent=u}),Ml(()=>{this.componentLoaders.delete(t)})),o=new fc(r,()=>new fi.x).pipe(Eh());return this.componentLoaders.set(t,o),o}loadChildren(t,r){if(this.childrenLoaders.get(r))return this.childrenLoaders.get(r);if(r._loadedRoutes)return Qe({routes:r._loadedRoutes,injector:r._loadedInjector});this.onLoadStartListener&&this.onLoadStartListener(r);const u=this.loadModuleFactoryOrRoutes(r.loadChildren).pipe((0,_t.U)(g=>{this.onLoadEndListener&&this.onLoadEndListener(r);let _,b,S=!1;Array.isArray(g)?b=g:(_=g.create(t).injector,b=vp(_.get(Yl,[],p.XFs.Self|p.XFs.Optional)));return{routes:b.map(uy),injector:_}}),Ml(()=>{this.childrenLoaders.delete(r)})),l=new fc(u,()=>new fi.x).pipe(Eh());return this.childrenLoaders.set(r,l),l}loadModuleFactoryOrRoutes(t){return No(t()).pipe((0,_t.U)(C0),(0,Ir.z)(o=>o instanceof p.YKP||Array.isArray(o)?Qe(o):(0,Zt.D)(this.compiler.compileModuleAsync(o))))}}return n.\u0275fac=function(t){return new(t||n)(p.LFG(p.zs3),p.LFG(p.Sil))},n.\u0275prov=p.Yz7({token:n,factory:n.\u0275fac,providedIn:"root"}),n})();function C0(n){return function mD(n){return n&&"object"==typeof n&&"default"in n}(n)?n.default:n}let Dy=(()=>{class n{constructor(){this.currentNavigation=null,this.lastSuccessfulNavigation=null,this.events=new fi.x,this.configLoader=(0,p.f3M)(Lp),this.environmentInjector=(0,p.f3M)(p.lqb),this.urlSerializer=(0,p.f3M)(ee),this.rootContexts=(0,p.f3M)(Ec),this.navigationId=0,this.configLoader.onLoadEndListener=o=>this.events.next(new GT(o)),this.configLoader.onLoadStartListener=o=>this.events.next(new VE(o))}get hasRequestedNavigation(){return 0!==this.navigationId}complete(){this.transitions?.complete()}handleNavigationRequest(t){const r=++this.navigationId;this.transitions?.next({...this.transitions.value,...t,id:r})}setupNavigations(t){return this.transitions=new ii({id:0,targetPageId:0,currentUrlTree:t.currentUrlTree,currentRawUrl:t.currentUrlTree,extractedUrl:t.urlHandlingStrategy.extract(t.currentUrlTree),urlAfterRedirects:t.urlHandlingStrategy.extract(t.currentUrlTree),rawUrl:t.currentUrlTree,extras:{},resolve:null,reject:null,promise:Promise.resolve(!0),source:"imperative",restoredState:null,currentSnapshot:t.routerState.snapshot,targetSnapshot:null,currentRouterState:t.routerState,targetRouterState:null,guards:{canActivateChecks:[],canDeactivateChecks:[]},guardsResult:null}),this.transitions.pipe(Wi(r=>0!==r.id),(0,_t.U)(r=>({...r,extractedUrl:t.urlHandlingStrategy.extract(r.rawUrl)})),Rr(r=>{let o=!1,u=!1;return Qe(r).pipe((0,si.b)(l=>{this.currentNavigation={id:l.id,initialUrl:l.rawUrl,extractedUrl:l.extractedUrl,trigger:l.source,extras:l.extras,previousNavigation:this.lastSuccessfulNavigation?{...this.lastSuccessfulNavigation,previousNavigation:null}:null}}),Rr(l=>{const g=t.browserUrlTree.toString(),_=!t.navigated||l.extractedUrl.toString()!==g||g!==t.currentUrlTree.toString();if(("reload"===t.onSameUrlNavigation||_)&&t.urlHandlingStrategy.shouldProcessUrl(l.rawUrl))return by(l.source)&&(t.browserUrlTree=l.extractedUrl),Qe(l).pipe(Rr(S=>{const P=this.transitions?.getValue();return this.events.next(new Gm(S.id,this.urlSerializer.serialize(S.extractedUrl),S.source,S.restoredState)),P!==this.transitions?.getValue()?$n.E:Promise.resolve(S)}),function dD(n,e,t,r){return Rr(o=>function p0(n,e,t,r,o){return new lD(n,e,t,r,o).apply()}(n,e,t,o.extractedUrl,r).pipe((0,_t.U)(u=>({...o,urlAfterRedirects:u}))))}(this.environmentInjector,this.configLoader,this.urlSerializer,t.config),(0,si.b)(S=>{this.currentNavigation={...this.currentNavigation,finalUrl:S.urlAfterRedirects},r.urlAfterRedirects=S.urlAfterRedirects}),function Kl(n,e,t,r,o){return(0,Ir.z)(u=>function vy(n,e,t,r,o,u,l="emptyOnly"){return new _y(n,e,t,r,o,l,u).recognize().pipe(Rr(g=>null===g?function y0(n){return new dr.y(e=>e.error(n))}(new m0):Qe(g)))}(n,e,t,u.urlAfterRedirects,r.serialize(u.urlAfterRedirects),r,o).pipe((0,_t.U)(l=>({...u,targetSnapshot:l}))))}(this.environmentInjector,t.rootComponentType,t.config,this.urlSerializer,t.paramsInheritanceStrategy),(0,si.b)(S=>{if(r.targetSnapshot=S.targetSnapshot,"eager"===t.urlUpdateStrategy){if(!S.extras.skipLocationChange){const W=t.urlHandlingStrategy.merge(S.urlAfterRedirects,S.rawUrl);t.setBrowserUrl(W,S)}t.browserUrlTree=S.urlAfterRedirects}const P=new Y_(S.id,this.urlSerializer.serialize(S.extractedUrl),this.urlSerializer.serialize(S.urlAfterRedirects),S.targetSnapshot);this.events.next(P)}));if(_&&t.rawUrlTree&&t.urlHandlingStrategy.shouldProcessUrl(t.rawUrlTree)){const{id:P,extractedUrl:W,source:J,restoredState:oe,extras:ke}=l,je=new Gm(P,this.urlSerializer.serialize(W),J,oe);this.events.next(je);const vt=Hl(W,t.rootComponentType).snapshot;return Qe(r={...l,targetSnapshot:vt,urlAfterRedirects:W,extras:{...ke,skipLocationChange:!1,replaceUrl:!1}})}return t.rawUrlTree=l.rawUrl,l.resolve(null),$n.E}),(0,si.b)(l=>{const g=new Sp(l.id,this.urlSerializer.serialize(l.extractedUrl),this.urlSerializer.serialize(l.urlAfterRedirects),l.targetSnapshot);this.events.next(g)}),(0,_t.U)(l=>r={...l,guards:a0(l.targetSnapshot,l.currentSnapshot,this.rootContexts)}),function bc(n,e){return(0,Ir.z)(t=>{const{targetSnapshot:r,currentSnapshot:o,guards:{canActivateChecks:u,canDeactivateChecks:l}}=t;return 0===l.length&&0===u.length?Qe({...t,guardsResult:!0}):function rD(n,e,t,r){return(0,Zt.D)(n).pipe((0,Ir.z)(o=>function Cc(n,e,t,r,o){const u=e&&e.routeConfig?e.routeConfig.canDeactivate:null;return u&&0!==u.length?Qe(u.map(g=>{const _=Wl(e)??o,b=Vh(g,_);return No(function ly(n){return n&&ql(n.canDeactivate)}(b)?b.canDeactivate(n,e,t,r):_.runInContext(()=>b(n,e,t,r))).pipe(as())})).pipe(Dc()):Qe(!0)}(o.component,o.route,t,e,r)),as(o=>!0!==o,!0))}(l,r,o,n).pipe((0,Ir.z)(g=>g&&function eD(n){return"boolean"==typeof n}(g)?function dy(n,e,t,r){return(0,Zt.D)(e).pipe(ca(o=>St(function iD(n,e){return null!==n&&e&&e(new BE(n)),Qe(!0)}(o.route.parent,r),function Np(n,e){return null!==n&&e&&e(new $E(n)),Qe(!0)}(o.route,r),function Pp(n,e,t){const r=e[e.length-1],u=e.slice(0,e.length-1).reverse().map(l=>function XT(n){const e=n.routeConfig?n.routeConfig.canActivateChild:null;return e&&0!==e.length?{node:n,guards:e}:null}(l)).filter(l=>null!==l).map(l=>Bn(()=>Qe(l.guards.map(_=>{const b=Wl(l.node)??t,S=Vh(_,b);return No(function l0(n){return n&&ql(n.canActivateChild)}(S)?S.canActivateChild(r,n):b.runInContext(()=>S(r,n))).pipe(as())})).pipe(Dc())));return Qe(u).pipe(Dc())}(n,o.path,t),function hy(n,e,t){const r=e.routeConfig?e.routeConfig.canActivate:null;if(!r||0===r.length)return Qe(!0);const o=r.map(u=>Bn(()=>{const l=Wl(e)??t,g=Vh(u,l);return No(function c0(n){return n&&ql(n.canActivate)}(g)?g.canActivate(e,n):l.runInContext(()=>g(e,n))).pipe(as())}));return Qe(o).pipe(Dc())}(n,o.route,t))),as(o=>!0!==o,!0))}(r,u,n,e):Qe(g)),(0,_t.U)(g=>({...t,guardsResult:g})))})}(this.environmentInjector,l=>this.events.next(l)),(0,si.b)(l=>{if(r.guardsResult=l.guardsResult,mc(l.guardsResult))throw ny(0,l.guardsResult);const g=new Zm(l.id,this.urlSerializer.serialize(l.extractedUrl),this.urlSerializer.serialize(l.urlAfterRedirects),l.targetSnapshot,!!l.guardsResult);this.events.next(g)}),Wi(l=>!!l.guardsResult||(t.restoreHistory(l),this.cancelNavigationTransition(l,"",3,t),!1)),D0(l=>{if(l.guards.canActivateChecks.length)return Qe(l).pipe((0,si.b)(g=>{const _=new Ic(g.id,this.urlSerializer.serialize(g.extractedUrl),this.urlSerializer.serialize(g.urlAfterRedirects),g.targetSnapshot);this.events.next(_)}),Rr(g=>{let _=!1;return Qe(g).pipe(function ma(n,e){return(0,Ir.z)(t=>{const{targetSnapshot:r,guards:{canActivateChecks:o}}=t;if(!o.length)return Qe(t);let u=0;return(0,Zt.D)(o).pipe(ca(l=>function pD(n,e,t,r){const o=n.routeConfig,u=n._resolve;return void 0!==o?.title&&!wy(o)&&(u[gi]=o.title),function gD(n,e,t,r){const o=function tS(n){return[...Object.keys(n),...Object.getOwnPropertySymbols(n)]}(n);if(0===o.length)return Qe({});const u={};return(0,Zt.D)(o).pipe((0,Ir.z)(l=>function nS(n,e,t,r){const o=Wl(e)??r,u=Vh(n,o);return No(u.resolve?u.resolve(e,t):o.runInContext(()=>u(e,t)))}(n[l],e,t,r).pipe(as(),(0,si.b)(g=>{u[l]=g}))),Dh(1),function yp(n){return(0,_t.U)(()=>n)}(u),la(l=>Bh(l)?$n.E:zi(l)))}(u,n,e,r).pipe((0,_t.U)(l=>(n._resolvedData=l,n.data=WE(n,t).resolve,o&&wy(o)&&(n.data[gi]=o.title),null)))}(l.route,r,n,e)),(0,si.b)(()=>u++),Dh(1),(0,Ir.z)(l=>u===o.length?Qe(t):$n.E))})}(t.paramsInheritanceStrategy,this.environmentInjector),(0,si.b)({next:()=>_=!0,complete:()=>{_||(t.restoreHistory(g),this.cancelNavigationTransition(g,"",2,t))}}))}),(0,si.b)(g=>{const _=new UE(g.id,this.urlSerializer.serialize(g.extractedUrl),this.urlSerializer.serialize(g.urlAfterRedirects),g.targetSnapshot);this.events.next(_)}))}),D0(l=>{const g=_=>{const b=[];_.routeConfig?.loadComponent&&!_.routeConfig._loadedComponent&&b.push(this.configLoader.loadComponent(_.routeConfig).pipe((0,si.b)(S=>{_.component=S}),(0,_t.U)(()=>{})));for(const S of _.children)b.push(...g(S));return b};return Me(g(l.targetSnapshot.root)).pipe(iu(),ru(1))}),D0(()=>t.afterPreactivation()),(0,_t.U)(l=>{const g=function qE(n,e,t){const r=wc(n,e._root,t?t._root:void 0);return new fa(r,e)}(t.routeReuseStrategy,l.targetSnapshot,l.currentRouterState);return r={...l,targetRouterState:g}}),(0,si.b)(l=>{t.currentUrlTree=l.urlAfterRedirects,t.rawUrlTree=t.urlHandlingStrategy.merge(l.urlAfterRedirects,l.rawUrl),t.routerState=l.targetRouterState,"deferred"===t.urlUpdateStrategy&&(l.extras.skipLocationChange||t.setBrowserUrl(t.rawUrlTree,l),t.browserUrlTree=l.urlAfterRedirects)}),((n,e,t)=>(0,_t.U)(r=>(new JE(e,r.targetRouterState,r.currentRouterState,t).activate(n),r)))(this.rootContexts,t.routeReuseStrategy,l=>this.events.next(l)),(0,si.b)({next:l=>{o=!0,this.lastSuccessfulNavigation=this.currentNavigation,t.navigated=!0,this.events.next(new _c(l.id,this.urlSerializer.serialize(l.extractedUrl),this.urlSerializer.serialize(t.currentUrlTree))),t.titleStrategy?.updateTitle(l.targetRouterState.snapshot),l.resolve(!0)},complete:()=>{o=!0}}),Ml(()=>{o||u||this.cancelNavigationTransition(r,"",1,t),this.currentNavigation?.id===r.id&&(this.currentNavigation=null)}),la(l=>{if(u=!0,KE(l)){ZE(l)||(t.navigated=!0,t.restoreHistory(r,!0));const g=new Tp(r.id,this.urlSerializer.serialize(r.extractedUrl),l.message,l.cancellationCode);if(this.events.next(g),ZE(l)){const _=t.urlHandlingStrategy.merge(l.url,t.rawUrlTree),b={skipLocationChange:r.extras.skipLocationChange,replaceUrl:"eager"===t.urlUpdateStrategy||by(r.source)};t.scheduleNavigation(_,"imperative",null,b,{resolve:r.resolve,reject:r.reject,promise:r.promise})}else r.resolve(!1)}else{t.restoreHistory(r,!0);const g=new qm(r.id,this.urlSerializer.serialize(r.extractedUrl),l,r.targetSnapshot??void 0);this.events.next(g);try{r.resolve(t.errorHandler(l))}catch(_){r.reject(_)}}return $n.E}))}))}cancelNavigationTransition(t,r,o,u){const l=new Tp(t.id,this.urlSerializer.serialize(t.extractedUrl),r,o);this.events.next(l),t.resolve(!1)}}return n.\u0275fac=function(t){return new(t||n)},n.\u0275prov=p.Yz7({token:n,factory:n.\u0275fac,providedIn:"root"}),n})();function by(n){return"imperative"!==n}let T0=(()=>{class n{buildTitle(t){let r,o=t.root;for(;void 0!==o;)r=this.getResolvedTitleForRoute(o)??r,o=o.children.find(u=>u.outlet===Ht);return r}getResolvedTitleForRoute(t){return t.data[gi]}}return n.\u0275fac=function(t){return new(t||n)},n.\u0275prov=p.Yz7({token:n,factory:function(){return(0,p.f3M)(yD)},providedIn:"root"}),n})(),yD=(()=>{class n extends T0{constructor(t){super(),this.title=t}updateTitle(t){const r=this.buildTitle(t);void 0!==r&&this.title.setTitle(r)}}return n.\u0275fac=function(t){return new(t||n)(p.LFG(So))},n.\u0275prov=p.Yz7({token:n,factory:n.\u0275fac,providedIn:"root"}),n})(),vD=(()=>{class n{}return n.\u0275fac=function(t){return new(t||n)},n.\u0275prov=p.Yz7({token:n,factory:function(){return(0,p.f3M)(S0)},providedIn:"root"}),n})();class _D{shouldDetach(e){return!1}store(e,t){}shouldAttach(e){return!1}retrieve(e){return null}shouldReuseRoute(e,t){return e.routeConfig===t.routeConfig}}let S0=(()=>{class n extends _D{}return n.\u0275fac=function(){let e;return function(r){return(e||(e=p.n5z(n)))(r||n)}}(),n.\u0275prov=p.Yz7({token:n,factory:n.\u0275fac,providedIn:"root"}),n})();const Up=new p.OlP("",{providedIn:"root",factory:()=>({})});let wD=(()=>{class n{}return n.\u0275fac=function(t){return new(t||n)},n.\u0275prov=p.Yz7({token:n,factory:function(){return(0,p.f3M)(Bt)},providedIn:"root"}),n})(),Bt=(()=>{class n{shouldProcessUrl(t){return!0}extract(t){return t}merge(t,r){return t}}return n.\u0275fac=function(t){return new(t||n)},n.\u0275prov=p.Yz7({token:n,factory:n.\u0275fac,providedIn:"root"}),n})();function A0(n){throw n}function x0(n,e,t){return e.parse("/")}const ED={paths:"exact",fragment:"ignored",matrixParams:"ignored",queryParams:"exact"},DD={paths:"subset",fragment:"ignored",matrixParams:"ignored",queryParams:"subset"};let qi=(()=>{class n{constructor(){this.disposed=!1,this.currentPageId=0,this.console=(0,p.f3M)(p.c2e),this.isNgZoneEnabled=!1,this.options=(0,p.f3M)(Up,{optional:!0})||{},this.errorHandler=this.options.errorHandler||A0,this.malformedUriErrorHandler=this.options.malformedUriErrorHandler||x0,this.navigated=!1,this.lastSuccessfulId=-1,this.afterPreactivation=()=>Qe(void 0),this.urlHandlingStrategy=(0,p.f3M)(wD),this.routeReuseStrategy=(0,p.f3M)(vD),this.urlCreationStrategy=(0,p.f3M)(J_),this.titleStrategy=(0,p.f3M)(T0),this.onSameUrlNavigation=this.options.onSameUrlNavigation||"ignore",this.paramsInheritanceStrategy=this.options.paramsInheritanceStrategy||"emptyOnly",this.urlUpdateStrategy=this.options.urlUpdateStrategy||"deferred",this.canceledNavigationResolution=this.options.canceledNavigationResolution||"replace",this.config=vp((0,p.f3M)(Yl,{optional:!0})??[]),this.navigationTransitions=(0,p.f3M)(Dy),this.urlSerializer=(0,p.f3M)(ee),this.location=(0,p.f3M)(Re),this.rootComponentType=null,this.isNgZoneEnabled=(0,p.f3M)(p.R0b)instanceof p.R0b&&p.R0b.isInAngularZone(),this.resetConfig(this.config),this.currentUrlTree=new v,this.rawUrlTree=this.currentUrlTree,this.browserUrlTree=this.currentUrlTree,this.routerState=Hl(this.currentUrlTree,this.rootComponentType),this.navigationTransitions.setupNavigations(this).subscribe(t=>{this.lastSuccessfulId=t.id,this.currentPageId=t.targetPageId},t=>{this.console.warn(`Unhandled Navigation Error: ${t}`)})}get navigationId(){return this.navigationTransitions.navigationId}get browserPageId(){return this.location.getState()?.\u0275routerPageId}get events(){return this.navigationTransitions.events}resetRootComponentType(t){this.rootComponentType=t,this.routerState.root.component=this.rootComponentType}initialNavigation(){this.setUpLocationChangeListener(),this.navigationTransitions.hasRequestedNavigation||this.navigateByUrl(this.location.path(!0),{replaceUrl:!0})}setUpLocationChangeListener(){this.locationSubscription||(this.locationSubscription=this.location.subscribe(t=>{const r="popstate"===t.type?"popstate":"hashchange";"popstate"===r&&setTimeout(()=>{const o={replaceUrl:!0},u=t.state?.navigationId?t.state:null;if(t.state){const g={...t.state};delete g.navigationId,delete g.\u0275routerPageId,0!==Object.keys(g).length&&(o.state=g)}const l=this.parseUrl(t.url);this.scheduleNavigation(l,r,u,o)},0)}))}get url(){return this.serializeUrl(this.currentUrlTree)}getCurrentNavigation(){return this.navigationTransitions.currentNavigation}resetConfig(t){this.config=t.map(uy),this.navigated=!1,this.lastSuccessfulId=-1}ngOnDestroy(){this.dispose()}dispose(){this.navigationTransitions.complete(),this.locationSubscription&&(this.locationSubscription.unsubscribe(),this.locationSubscription=void 0),this.disposed=!0}createUrlTree(t,r={}){const{relativeTo:o,queryParams:u,fragment:l,queryParamsHandling:g,preserveFragment:_}=r,b=_?this.currentUrlTree.fragment:l;let S=null;switch(g){case"merge":S={...this.currentUrlTree.queryParams,...u};break;case"preserve":S=this.currentUrlTree.queryParams;break;default:S=u||null}return null!==S&&(S=this.removeEmptyProps(S)),this.urlCreationStrategy.createUrlTree(o,this.routerState,this.currentUrlTree,t,S,b??null)}navigateByUrl(t,r={skipLocationChange:!1}){const o=mc(t)?t:this.parseUrl(t),u=this.urlHandlingStrategy.merge(o,this.rawUrlTree);return this.scheduleNavigation(u,"imperative",null,r)}navigate(t,r={skipLocationChange:!1}){return function bD(n){for(let e=0;e<n.length;e++){if(null==n[e])throw new p.vHH(4008,!1)}}(t),this.navigateByUrl(this.createUrlTree(t,r),r)}serializeUrl(t){return this.urlSerializer.serialize(t)}parseUrl(t){let r;try{r=this.urlSerializer.parse(t)}catch(o){r=this.malformedUriErrorHandler(o,this.urlSerializer,t)}return r}isActive(t,r){let o;if(o=!0===r?{...ED}:!1===r?{...DD}:r,mc(t))return Ol(this.currentUrlTree,t,o);const u=this.parseUrl(t);return Ol(this.currentUrlTree,u,o)}removeEmptyProps(t){return Object.keys(t).reduce((r,o)=>{const u=t[o];return null!=u&&(r[o]=u),r},{})}scheduleNavigation(t,r,o,u,l){if(this.disposed)return Promise.resolve(!1);let g,_,b,S;return l?(g=l.resolve,_=l.reject,b=l.promise):b=new Promise((P,W)=>{g=P,_=W}),"computed"===this.canceledNavigationResolution?(0===this.currentPageId&&(o=this.location.getState()),S=o&&o.\u0275routerPageId?o.\u0275routerPageId:u.replaceUrl||u.skipLocationChange?this.browserPageId??0:(this.browserPageId??0)+1):S=0,this.navigationTransitions.handleNavigationRequest({targetPageId:S,source:r,restoredState:o,currentUrlTree:this.currentUrlTree,currentRawUrl:this.currentUrlTree,rawUrl:t,extras:u,resolve:g,reject:_,promise:b,currentSnapshot:this.routerState.snapshot,currentRouterState:this.routerState}),b.catch(P=>Promise.reject(P))}setBrowserUrl(t,r){const o=this.urlSerializer.serialize(t),u={...r.extras.state,...this.generateNgRouterState(r.id,r.targetPageId)};this.location.isCurrentPathEqualTo(o)||r.extras.replaceUrl?this.location.replaceState(o,"",u):this.location.go(o,"",u)}restoreHistory(t,r=!1){if("computed"===this.canceledNavigationResolution){const o=this.currentPageId-t.targetPageId;"popstate"!==t.source&&"eager"!==this.urlUpdateStrategy&&this.currentUrlTree!==this.getCurrentNavigation()?.finalUrl||0===o?this.currentUrlTree===this.getCurrentNavigation()?.finalUrl&&0===o&&(this.resetState(t),this.browserUrlTree=t.currentUrlTree,this.resetUrlToCurrentUrlTree()):this.location.historyGo(o)}else"replace"===this.canceledNavigationResolution&&(r&&this.resetState(t),this.resetUrlToCurrentUrlTree())}resetState(t){this.routerState=t.currentRouterState,this.currentUrlTree=t.currentUrlTree,this.rawUrlTree=this.urlHandlingStrategy.merge(this.currentUrlTree,t.rawUrl)}resetUrlToCurrentUrlTree(){this.location.replaceState(this.urlSerializer.serialize(this.rawUrlTree),"",this.generateNgRouterState(this.lastSuccessfulId,this.currentPageId))}generateNgRouterState(t,r){return"computed"===this.canceledNavigationResolution?{navigationId:t,\u0275routerPageId:r}:{navigationId:t}}}return n.\u0275fac=function(t){return new(t||n)},n.\u0275prov=p.Yz7({token:n,factory:n.\u0275fac,providedIn:"root"}),n})(),Ql=(()=>{class n{constructor(t,r,o,u,l,g){this.router=t,this.route=r,this.tabIndexAttribute=o,this.renderer=u,this.el=l,this.locationStrategy=g,this._preserveFragment=!1,this._skipLocationChange=!1,this._replaceUrl=!1,this.href=null,this.commands=null,this.onChanges=new fi.x;const _=l.nativeElement.tagName;this.isAnchorElement="A"===_||"AREA"===_,this.isAnchorElement?this.subscription=t.events.subscribe(b=>{b instanceof _c&&this.updateHref()}):this.setTabIndexIfNotOnNativeEl("0")}set preserveFragment(t){this._preserveFragment=(0,p.D6c)(t)}get preserveFragment(){return this._preserveFragment}set skipLocationChange(t){this._skipLocationChange=(0,p.D6c)(t)}get skipLocationChange(){return this._skipLocationChange}set replaceUrl(t){this._replaceUrl=(0,p.D6c)(t)}get replaceUrl(){return this._replaceUrl}setTabIndexIfNotOnNativeEl(t){null!=this.tabIndexAttribute||this.isAnchorElement||this.applyAttributeValue("tabindex",t)}ngOnChanges(t){this.isAnchorElement&&this.updateHref(),this.onChanges.next(this)}set routerLink(t){null!=t?(this.commands=Array.isArray(t)?t:[t],this.setTabIndexIfNotOnNativeEl("0")):(this.commands=null,this.setTabIndexIfNotOnNativeEl(null))}onClick(t,r,o,u,l){return!!(null===this.urlTree||this.isAnchorElement&&(0!==t||r||o||u||l||"string"==typeof this.target&&"_self"!=this.target))||(this.router.navigateByUrl(this.urlTree,{skipLocationChange:this.skipLocationChange,replaceUrl:this.replaceUrl,state:this.state}),!this.isAnchorElement)}ngOnDestroy(){this.subscription?.unsubscribe()}updateHref(){this.href=null!==this.urlTree&&this.locationStrategy?this.locationStrategy?.prepareExternalUrl(this.router.serializeUrl(this.urlTree)):null;const t=null===this.href?null:(0,p.P3R)(this.href,this.el.nativeElement.tagName.toLowerCase(),"href");this.applyAttributeValue("href",t)}applyAttributeValue(t,r){const o=this.renderer,u=this.el.nativeElement;null!==r?o.setAttribute(u,t,r):o.removeAttribute(u,t)}get urlTree(){return null===this.commands?null:this.router.createUrlTree(this.commands,{relativeTo:void 0!==this.relativeTo?this.relativeTo:this.route,queryParams:this.queryParams,fragment:this.fragment,queryParamsHandling:this.queryParamsHandling,preserveFragment:this.preserveFragment})}}return n.\u0275fac=function(t){return new(t||n)(p.Y36(qi),p.Y36(Lh),p.$8M("tabindex"),p.Y36(p.Qsj),p.Y36(p.SBq),p.Y36(nt))},n.\u0275dir=p.lG2({type:n,selectors:[["","routerLink",""]],hostVars:1,hostBindings:function(t,r){1&t&&p.NdJ("click",function(u){return r.onClick(u.button,u.ctrlKey,u.shiftKey,u.altKey,u.metaKey)}),2&t&&p.uIk("target",r.target)},inputs:{target:"target",queryParams:"queryParams",fragment:"fragment",queryParamsHandling:"queryParamsHandling",state:"state",relativeTo:"relativeTo",preserveFragment:"preserveFragment",skipLocationChange:"skipLocationChange",replaceUrl:"replaceUrl",routerLink:"routerLink"},standalone:!0,features:[p.TTD]}),n})();class SD{}let Sc=(()=>{class n{constructor(t,r,o,u,l){this.router=t,this.injector=o,this.preloadingStrategy=u,this.loader=l}setUpPreloading(){this.subscription=this.router.events.pipe(Wi(t=>t instanceof _c),ca(()=>this.preload())).subscribe(()=>{})}preload(){return this.processRoutes(this.injector,this.router.config)}ngOnDestroy(){this.subscription&&this.subscription.unsubscribe()}processRoutes(t,r){const o=[];for(const u of r){u.providers&&!u._injector&&(u._injector=(0,p.MMx)(u.providers,t,`Route: ${u.path}`));const l=u._injector??t,g=u._loadedInjector??l;u.loadChildren&&!u._loadedRoutes&&void 0===u.canLoad||u.loadComponent&&!u._loadedComponent?o.push(this.preloadConfig(l,u)):(u.children||u._loadedRoutes)&&o.push(this.processRoutes(g,u.children??u._loadedRoutes))}return(0,Zt.D)(o).pipe((0,ot.J)())}preloadConfig(t,r){return this.preloadingStrategy.preload(r,()=>{let o;o=r.loadChildren&&void 0===r.canLoad?this.loader.loadChildren(t,r):Qe(null);const u=o.pipe((0,Ir.z)(l=>null===l?Qe(void 0):(r._loadedRoutes=l.routes,r._loadedInjector=l.injector,this.processRoutes(l.injector??t,l.routes))));if(r.loadComponent&&!r._loadedComponent){const l=this.loader.loadComponent(r);return(0,Zt.D)([u,l]).pipe((0,ot.J)())}return u})}}return n.\u0275fac=function(t){return new(t||n)(p.LFG(qi),p.LFG(p.Sil),p.LFG(p.lqb),p.LFG(SD),p.LFG(Lp))},n.\u0275prov=p.Yz7({token:n,factory:n.\u0275fac,providedIn:"root"}),n})();const Ty=new p.OlP("");let Vp=(()=>{class n{constructor(t,r,o,u,l={}){this.urlSerializer=t,this.transitions=r,this.viewportScroller=o,this.zone=u,this.options=l,this.lastId=0,this.lastSource="imperative",this.restoredId=0,this.store={},l.scrollPositionRestoration=l.scrollPositionRestoration||"disabled",l.anchorScrolling=l.anchorScrolling||"disabled"}init(){"disabled"!==this.options.scrollPositionRestoration&&this.viewportScroller.setHistoryScrollRestoration("manual"),this.routerEventsSubscription=this.createScrollEvents(),this.scrollEventsSubscription=this.consumeScrollEvents()}createScrollEvents(){return this.transitions.events.subscribe(t=>{t instanceof Gm?(this.store[this.lastId]=this.viewportScroller.getScrollPosition(),this.lastSource=t.navigationTrigger,this.restoredId=t.restoredState?t.restoredState.navigationId:0):t instanceof _c&&(this.lastId=t.id,this.scheduleScrollEvent(t,this.urlSerializer.parse(t.urlAfterRedirects).fragment))})}consumeScrollEvents(){return this.transitions.events.subscribe(t=>{t instanceof Fh&&(t.position?"top"===this.options.scrollPositionRestoration?this.viewportScroller.scrollToPosition([0,0]):"enabled"===this.options.scrollPositionRestoration&&this.viewportScroller.scrollToPosition(t.position):t.anchor&&"enabled"===this.options.anchorScrolling?this.viewportScroller.scrollToAnchor(t.anchor):"disabled"!==this.options.scrollPositionRestoration&&this.viewportScroller.scrollToPosition([0,0]))})}scheduleScrollEvent(t,r){this.zone.runOutsideAngular(()=>{setTimeout(()=>{this.zone.run(()=>{this.transitions.events.next(new Fh(t,"popstate"===this.lastSource?this.store[this.restoredId]:null,r))})},0)})}ngOnDestroy(){this.routerEventsSubscription?.unsubscribe(),this.scrollEventsSubscription?.unsubscribe()}}return n.\u0275fac=function(t){p.$Z()},n.\u0275prov=p.Yz7({token:n,factory:n.\u0275fac}),n})();function Gh(n,e){return{\u0275kind:n,\u0275providers:e}}function R0(){const n=(0,p.f3M)(p.zs3);return e=>{const t=n.get(p.z2F);if(e!==t.components[0])return;const r=n.get(qi),o=n.get(Ac);1===n.get(Sy)&&r.initialNavigation(),n.get(Ay,null,p.XFs.Optional)?.setUpPreloading(),n.get(Ty,null,p.XFs.Optional)?.init(),r.resetRootComponentType(t.componentTypes[0]),o.closed||(o.next(),o.unsubscribe())}}const Ac=new p.OlP("",{factory:()=>new fi.x}),Sy=new p.OlP("",{providedIn:"root",factory:()=>1});const Ay=new p.OlP("");function OD(n){return Gh(0,[{provide:Ay,useExisting:Sc},{provide:SD,useExisting:n}])}const P0=new p.OlP("ROUTER_FORROOT_GUARD"),O0=[Re,{provide:ee,useClass:Ce},qi,Ec,{provide:Lh,useFactory:function MD(n){return n.routerState.root},deps:[qi]},Lp,[]];function kD(){return new p.PXZ("Router",qi)}let xy=(()=>{class n{constructor(t){}static forRoot(t,r){return{ngModule:n,providers:[O0,[],{provide:Yl,multi:!0,useValue:t},{provide:P0,useFactory:Ry,deps:[[qi,new p.FiY,new p.tp0]]},{provide:Up,useValue:r||{}},r?.useHash?{provide:nt,useClass:we}:{provide:nt,useClass:Ee},{provide:Ty,useFactory:()=>{const n=(0,p.f3M)(Ws),e=(0,p.f3M)(p.R0b),t=(0,p.f3M)(Up),r=(0,p.f3M)(Dy),o=(0,p.f3M)(ee);return t.scrollOffset&&n.setOffset(t.scrollOffset),new Vp(o,r,n,e,t)}},r?.preloadingStrategy?OD(r.preloadingStrategy).\u0275providers:[],{provide:p.PXZ,multi:!0,useFactory:kD},r?.initialNavigation?FD(r):[],[{provide:LD,useFactory:R0},{provide:p.tb,multi:!0,useExisting:LD}]]}}static forChild(t){return{ngModule:n,providers:[{provide:Yl,multi:!0,useValue:t}]}}}return n.\u0275fac=function(t){return new(t||n)(p.LFG(P0,8))},n.\u0275mod=p.oAB({type:n}),n.\u0275inj=p.cJS({imports:[iy]}),n})();function Ry(n){return"guarded"}function FD(n){return["disabled"===n.initialNavigation?Gh(3,[{provide:p.ip1,multi:!0,useFactory:()=>{const e=(0,p.f3M)(qi);return()=>{e.setUpLocationChangeListener()}}},{provide:Sy,useValue:2}]).\u0275providers:[],"enabledBlocking"===n.initialNavigation?Gh(2,[{provide:Sy,useValue:0},{provide:p.ip1,multi:!0,deps:[p.zs3],useFactory:e=>{const t=e.get(pe,Promise.resolve());return()=>t.then(()=>new Promise(o=>{const u=e.get(qi),l=e.get(Ac);(function r(o){e.get(qi).events.pipe(Wi(l=>l instanceof _c||l instanceof Tp||l instanceof qm),(0,_t.U)(l=>l instanceof _c||l instanceof Tp&&(0===l.code||1===l.code)&&null),Wi(l=>null!==l),ru(1)).subscribe(()=>{o()})})(()=>{o(!0)}),u.afterPreactivation=()=>(o(!0),l.closed?Qe(void 0):l),u.initialNavigation()}))}}]).\u0275providers:[]]}const LD=new p.OlP(""),Zh=()=>{const n=localStorage.getItem("cart");return n?JSON.parse(n):[]};class Kh{constructor(){this.cartCount=0}ngOnInit(){this.cartCount=Zh().length,setInterval(()=>{this.cartCount=Zh().length},500)}updatedCount(e){console.log(e)}}Kh.\u0275fac=function(e){return new(e||Kh)},Kh.\u0275cmp=p.Xpm({type:Kh,selectors:[["app-hear"]],decls:13,vars:1,consts:[[1,"navbar","shadow","sm",2,"background-color","pink"],[1,"navbar-brand","align-item-center","d-flex"],[1,"fas","fa-shipping-fast"],[2,"color","white"],[1,"form-group"],["type","text","placeholder","Search item",1,"searchInput",2,"border-color","pink"],[1,"fas","fa-search","search-icon"],["routerLink","cart",1,"btn"],[1,"fas","fa-cart-plus",2,"font-size","20px"],[1,"badge","bg-danger",2,"font-size","5"]],template:function(e,t){1&e&&(p.TgZ(0,"header")(1,"div",0)(2,"div",1),p._UZ(3,"i",2),p.TgZ(4,"strong",3),p._uU(5,"Kid'sStop"),p.qZA(),p.TgZ(6,"div",4),p._UZ(7,"input",5),p.qZA(),p._UZ(8,"span",6),p.qZA(),p.TgZ(9,"button",7),p._UZ(10,"i",8),p.TgZ(11,"div",9),p._uU(12),p.qZA()()()()),2&e&&(p.xp6(12),p.Oqu(t.cartCount))},dependencies:[Ql],styles:[".searchInput[_ngcontent-%COMP%]{border-radius:5px;width:400px;margin-left:20px}.search-icon[_ngcontent-%COMP%]{position:absolute;z-index:10;right:61%;top:22px;color:gray}.fa-shipping-fast[_ngcontent-%COMP%]{font-size:34px;color:#fff;padding-right:16px;padding-left:18px}"]});class Jl{}Jl.\u0275fac=function(e){return new(e||Jl)},Jl.\u0275cmp=p.Xpm({type:Jl,selectors:[["app-footer"]],decls:33,vars:0,consts:[[1,"container"],[1,"row"],[1,"col-md-2"],[1,"col-md-4",2,"margin-left","220px"],[1,"list-unstyled"],[1,"col-md-4"],["href","#"]],template:function(e,t){1&e&&(p.TgZ(0,"footer")(1,"div",0)(2,"div",1)(3,"div",2)(4,"h5"),p._uU(5,"About Us"),p.qZA(),p.TgZ(6,"p"),p._uU(7,"We sell fashion dresses, jewelry and other accessories for kids. We committed to supply 100% quality product to our customers."),p.qZA()(),p.TgZ(8,"div",3)(9,"h5"),p._uU(10,"Contact Us"),p.qZA(),p.TgZ(11,"ul",4)(12,"li"),p._uU(13,"Email: sirriryisa@gmail.com"),p.qZA(),p.TgZ(14,"li"),p._uU(15,"Phone: +233 (0554356056)"),p.qZA(),p.TgZ(16,"li"),p._uU(17,"Whatsapp: +237 (652636242)"),p.qZA(),p.TgZ(18,"li"),p._uU(19,"Address: Accra, Ghana"),p.qZA()()(),p.TgZ(20,"div",5)(21,"h5"),p._uU(22,"Connect with Us"),p.qZA(),p.TgZ(23,"ul",4)(24,"li")(25,"a",6),p._uU(26,"Facebook"),p.qZA()(),p.TgZ(27,"li")(28,"a",6),p._uU(29,"Twitter"),p.qZA()(),p.TgZ(30,"li")(31,"a",6),p._uU(32,"Instagram"),p.qZA()()()()()()())},styles:["footer[_ngcontent-%COMP%]{background-color:gray;padding:1rem 0;color:#fff;position:relative;bottom:0;width:100%}h5[_ngcontent-%COMP%]{color:pink}.list-unstyled[_ngcontent-%COMP%]   li[_ngcontent-%COMP%]   a[_ngcontent-%COMP%]{color:#fff}"]});class du{}du.\u0275fac=function(e){return new(e||du)},du.\u0275cmp=p.Xpm({type:du,selectors:[["app-root"]],decls:3,vars:0,template:function(e,t){1&e&&p._UZ(0,"app-hear")(1,"router-outlet")(2,"app-footer")},dependencies:[n0,Kh,Jl]});var ed=k(4986),yn=k(2122);function xc(){return(0,hr.e)((n,e)=>{let t,r=!1;n.subscribe((0,G.x)(e,o=>{const u=t;t=o,r&&e.next([u,o]),r=!0}))})}function $p(n,e){return n===e}var ft,Zi=k(2011),Py=(k(9568),k(3942)),ve=k(5861),Oo=k(9681),td=k(4859),hu=k(1877),an=k(2090),L0=typeof globalThis<"u"?globalThis:typeof window<"u"?window:typeof global<"u"?global:typeof self<"u"?self:{},ya={},jp=jp||{},kt=L0||self;function Hp(){}function mi(n){var e=typeof n;return"array"==(e="object"!=e?e:n?Array.isArray(n)?"array":e:"null")||"object"==e&&"number"==typeof n.length}function nd(n){var e=typeof n;return"object"==e&&null!=n||"function"==e}var U0="closure_uid_"+(1e9*Math.random()>>>0),Oy=0;function V0(n,e,t){return n.call.apply(n.bind,arguments)}function $D(n,e,t){if(!n)throw Error();if(2<arguments.length){var r=Array.prototype.slice.call(arguments,2);return function(){var o=Array.prototype.slice.call(arguments);return Array.prototype.unshift.apply(o,r),n.apply(e,o)}}return function(){return n.apply(e,arguments)}}function yi(n,e,t){return(yi=Function.prototype.bind&&-1!=Function.prototype.bind.toString().indexOf("native code")?V0:$D).apply(null,arguments)}function zp(n,e){var t=Array.prototype.slice.call(arguments,1);return function(){var r=t.slice();return r.push.apply(r,arguments),n.apply(this,r)}}function Hr(n,e){function t(){}t.prototype=e.prototype,n.X=e.prototype,n.prototype=new t,n.prototype.constructor=n,n.Wb=function(r,o,u){for(var l=Array(arguments.length-2),g=2;g<arguments.length;g++)l[g-2]=arguments[g];return e.prototype[o].apply(r,l)}}function fu(){this.s=this.s,this.o=this.o}fu.prototype.s=!1,fu.prototype.na=function(){!this.s&&(this.s=!0,this.M(),0)&&function BD(n){Object.prototype.hasOwnProperty.call(n,U0)&&n[U0]||(n[U0]=++Oy)}(this)},fu.prototype.M=function(){if(this.o)for(;this.o.length;)this.o.shift()()};const Wp=Array.prototype.indexOf?function(n,e){return Array.prototype.indexOf.call(n,e,void 0)}:function(n,e){if("string"==typeof n)return"string"!=typeof e||1!=e.length?-1:n.indexOf(e,0);for(let t=0;t<n.length;t++)if(t in n&&n[t]===e)return t;return-1};function ky(n){const e=n.length;if(0<e){const t=Array(e);for(let r=0;r<e;r++)t[r]=n[r];return t}return[]}function B0(n,e){for(let t=1;t<arguments.length;t++){const r=arguments[t];if(mi(r)){const o=n.length||0,u=r.length||0;n.length=o+u;for(let l=0;l<u;l++)n[o+l]=r[l]}else n.push(r)}}function vi(n,e){this.type=n,this.g=this.target=e,this.defaultPrevented=!1}vi.prototype.h=function(){this.defaultPrevented=!0};var HD=function(){if(!kt.addEventListener||!Object.defineProperty)return!1;var n=!1,e=Object.defineProperty({},"passive",{get:function(){n=!0}});try{kt.addEventListener("test",Hp,e),kt.removeEventListener("test",Hp,e)}catch{}return n}();function Gp(n){return/^[\s\xa0]*$/.test(n)}var ro=String.prototype.trim?function(n){return n.trim()}:function(n){return/^[\s\xa0]*([\s\S]*?)[\s\xa0]*$/.exec(n)[1]};function Yh(n,e){return n<e?-1:n>e?1:0}function qp(){var n=kt.navigator;return n&&(n=n.userAgent)?n:""}function ko(n){return-1!=qp().indexOf(n)}function Zp(n){return Zp[" "](n),n}Zp[" "]=Hp;var Mc,n,WD=ko("Opera"),rd=ko("Trident")||ko("MSIE"),Kp=ko("Edge"),Fy=Kp||rd,$0=ko("Gecko")&&!(-1!=qp().toLowerCase().indexOf("webkit")&&!ko("Edge"))&&!(ko("Trident")||ko("MSIE"))&&!ko("Edge"),Yp=-1!=qp().toLowerCase().indexOf("webkit")&&!ko("Edge");function Qp(){var n=kt.document;return n?n.documentMode:void 0}e:{var j0="",Qh=(n=qp(),$0?/rv:([^\);]+)(\)|;)/.exec(n):Kp?/Edge\/([\d\.]+)/.exec(n):rd?/\b(?:MSIE|rv)[: ]([^\);]+)(\)|;)/.exec(n):Yp?/WebKit\/(\S+)/.exec(n):WD?/(?:Version)[ \/]?(\S+)/.exec(n):void 0);if(Qh&&(j0=Qh?Qh[1]:""),rd){var H0=Qp();if(null!=H0&&H0>parseFloat(j0)){Mc=String(H0);break e}}Mc=j0}var z0={};var Uy=kt.document&&rd&&(Qp()||parseInt(Mc,10))||void 0;function us(n,e){if(vi.call(this,n?n.type:""),this.relatedTarget=this.g=this.target=null,this.button=this.screenY=this.screenX=this.clientY=this.clientX=0,this.key="",this.metaKey=this.shiftKey=this.altKey=this.ctrlKey=!1,this.state=null,this.pointerId=0,this.pointerType="",this.i=null,n){var t=this.type=n.type,r=n.changedTouches&&n.changedTouches.length?n.changedTouches[0]:null;if(this.target=n.target||n.srcElement,this.g=e,e=n.relatedTarget){if($0){e:{try{Zp(e.nodeName);var o=!0;break e}catch{}o=!1}o||(e=null)}}else"mouseover"==t?e=n.fromElement:"mouseout"==t&&(e=n.toElement);this.relatedTarget=e,r?(this.clientX=void 0!==r.clientX?r.clientX:r.pageX,this.clientY=void 0!==r.clientY?r.clientY:r.pageY,this.screenX=r.screenX||0,this.screenY=r.screenY||0):(this.clientX=void 0!==n.clientX?n.clientX:n.pageX,this.clientY=void 0!==n.clientY?n.clientY:n.pageY,this.screenX=n.screenX||0,this.screenY=n.screenY||0),this.button=n.button,this.key=n.key||"",this.ctrlKey=n.ctrlKey,this.altKey=n.altKey,this.shiftKey=n.shiftKey,this.metaKey=n.metaKey,this.pointerId=n.pointerId||0,this.pointerType="string"==typeof n.pointerType?n.pointerType:Jp[n.pointerType]||"",this.state=n.state,this.i=n,n.defaultPrevented&&us.X.h.call(this)}}Hr(us,vi);var Jp={2:"touch",3:"pen",4:"mouse"};us.prototype.h=function(){us.X.h.call(this);var n=this.i;n.preventDefault?n.preventDefault():n.returnValue=!1};var pu="closure_listenable_"+(1e6*Math.random()|0),Xh=0;function GD(n,e,t,r,o){this.listener=n,this.proxy=null,this.src=e,this.type=t,this.capture=!!r,this.ha=o,this.key=++Xh,this.ba=this.ea=!1}function Jh(n){n.ba=!0,n.listener=null,n.proxy=null,n.src=null,n.ha=null}function eg(n,e,t){for(const r in n)e.call(t,n[r],r,n)}function G0(n){const e={};for(const t in n)e[t]=n[t];return e}const q0="constructor hasOwnProperty isPrototypeOf propertyIsEnumerable toLocaleString toString valueOf".split(" ");function id(n,e){let t,r;for(let o=1;o<arguments.length;o++){for(t in r=arguments[o],r)n[t]=r[t];for(let u=0;u<q0.length;u++)t=q0[u],Object.prototype.hasOwnProperty.call(r,t)&&(n[t]=r[t])}}function tg(n){this.src=n,this.g={},this.h=0}function Z0(n,e){var t=e.type;if(t in n.g){var u,r=n.g[t],o=Wp(r,e);(u=0<=o)&&Array.prototype.splice.call(r,o,1),u&&(Jh(e),0==n.g[t].length&&(delete n.g[t],n.h--))}}function Vy(n,e,t,r){for(var o=0;o<n.length;++o){var u=n[o];if(!u.ba&&u.listener==e&&u.capture==!!t&&u.ha==r)return o}return-1}tg.prototype.add=function(n,e,t,r,o){var u=n.toString();(n=this.g[u])||(n=this.g[u]=[],this.h++);var l=Vy(n,e,r,o);return-1<l?(e=n[l],t||(e.ea=!1)):((e=new GD(e,this.src,u,!!r,o)).ea=t,n.push(e)),e};var By="closure_lm_"+(1e6*Math.random()|0),$y={};function K0(n,e,t,r,o){if(r&&r.once)return Q0(n,e,t,r,o);if(Array.isArray(e)){for(var u=0;u<e.length;u++)K0(n,e[u],t,r,o);return null}return t=Gy(t),n&&n[pu]?n.N(e,t,nd(r)?!!r.capture:!!r,o):Y0(n,e,t,!1,r,o)}function Y0(n,e,t,r,o,u){if(!e)throw Error("Invalid event type");var l=nd(o)?!!o.capture:!!o,g=zy(n);if(g||(n[By]=g=new tg(n)),(t=g.add(e,t,r,l,u)).proxy)return t;if(r=function qD(){const e=Hy;return function n(t){return e.call(n.src,n.listener,t)}}(),t.proxy=r,r.src=n,r.listener=t,n.addEventListener)HD||(o=l),void 0===o&&(o=!1),n.addEventListener(e.toString(),r,o);else if(n.attachEvent)n.attachEvent(X0(e.toString()),r);else{if(!n.addListener||!n.removeListener)throw Error("addEventListener and attachEvent are unavailable.");n.addListener(r)}return t}function Q0(n,e,t,r,o){if(Array.isArray(e)){for(var u=0;u<e.length;u++)Q0(n,e[u],t,r,o);return null}return t=Gy(t),n&&n[pu]?n.O(e,t,nd(r)?!!r.capture:!!r,o):Y0(n,e,t,!0,r,o)}function jy(n,e,t,r,o){if(Array.isArray(e))for(var u=0;u<e.length;u++)jy(n,e[u],t,r,o);else r=nd(r)?!!r.capture:!!r,t=Gy(t),n&&n[pu]?(n=n.i,(e=String(e).toString())in n.g&&-1<(t=Vy(u=n.g[e],t,r,o))&&(Jh(u[t]),Array.prototype.splice.call(u,t,1),0==u.length&&(delete n.g[e],n.h--))):n&&(n=zy(n))&&(e=n.g[e.toString()],n=-1,e&&(n=Vy(e,t,r,o)),(t=-1<n?e[n]:null)&&ng(t))}function ng(n){if("number"!=typeof n&&n&&!n.ba){var e=n.src;if(e&&e[pu])Z0(e.i,n);else{var t=n.type,r=n.proxy;e.removeEventListener?e.removeEventListener(t,r,n.capture):e.detachEvent?e.detachEvent(X0(t),r):e.addListener&&e.removeListener&&e.removeListener(r),(t=zy(e))?(Z0(t,n),0==t.h&&(t.src=null,e[By]=null)):Jh(n)}}}function X0(n){return n in $y?$y[n]:$y[n]="on"+n}function Hy(n,e){if(n.ba)n=!0;else{e=new us(e,this);var t=n.listener,r=n.ha||n.src;n.ea&&ng(n),n=t.call(r,e)}return n}function zy(n){return(n=n[By])instanceof tg?n:null}var Wy="__closure_events_fn_"+(1e9*Math.random()>>>0);function Gy(n){return"function"==typeof n?n:(n[Wy]||(n[Wy]=function(e){return n.handleEvent(e)}),n[Wy])}function zr(){fu.call(this),this.i=new tg(this),this.P=this,this.I=null}function ai(n,e){var t,r=n.I;if(r)for(t=[];r;r=r.I)t.push(r);if(n=n.P,r=e.type||e,"string"==typeof e)e=new vi(e,n);else if(e instanceof vi)e.target=e.target||n;else{var o=e;id(e=new vi(r,n),o)}if(o=!0,t)for(var u=t.length-1;0<=u;u--){var l=e.g=t[u];o=rg(l,r,!0,e)&&o}if(o=rg(l=e.g=n,r,!0,e)&&o,o=rg(l,r,!1,e)&&o,t)for(u=0;u<t.length;u++)o=rg(l=e.g=t[u],r,!1,e)&&o}function rg(n,e,t,r){if(!(e=n.i.g[String(e)]))return!0;e=e.concat();for(var o=!0,u=0;u<e.length;++u){var l=e[u];if(l&&!l.ba&&l.capture==t){var g=l.listener,_=l.ha||l.src;l.ea&&Z0(n.i,l),o=!1!==g.call(_,r)&&o}}return o&&!r.defaultPrevented}Hr(zr,fu),zr.prototype[pu]=!0,zr.prototype.removeEventListener=function(n,e,t,r){jy(this,n,e,t,r)},zr.prototype.M=function(){if(zr.X.M.call(this),this.i){var e,n=this.i;for(e in n.g){for(var t=n.g[e],r=0;r<t.length;r++)Jh(t[r]);delete n.g[e],n.h--}}this.I=null},zr.prototype.N=function(n,e,t,r){return this.i.add(String(n),e,!1,t,r)},zr.prototype.O=function(n,e,t,r){return this.i.add(String(n),e,!0,t,r)};var qy=kt.JSON.stringify;function J0(){var n=rI;let e=null;return n.g&&(e=n.g,n.g=n.g.next,n.g||(n.h=null),e.next=null),e}var va,tI=new class{constructor(n,e){this.i=n,this.j=e,this.h=0,this.g=null}get(){let n;return 0<this.h?(this.h--,n=this.g,this.g=n.next,n.next=null):n=this.i(),n}}(()=>new aS,n=>n.reset());class aS{constructor(){this.next=this.g=this.h=null}set(e,t){this.h=e,this.g=t,this.next=null}reset(){this.next=this.g=this.h=null}}function nI(n){kt.setTimeout(()=>{throw n},0)}function ef(n,e){va||function uS(){var n=kt.Promise.resolve(void 0);va=function(){n.then(ZD)}}(),Rc||(va(),Rc=!0),rI.add(n,e)}var Rc=!1,rI=new class eI{constructor(){this.h=this.g=null}add(e,t){const r=tI.get();r.set(e,t),this.h?this.h.next=r:this.g=r,this.h=r}};function ZD(){for(var n;n=J0();){try{n.h.call(n.g)}catch(t){nI(t)}var e=tI;e.j(n),100>e.h&&(e.h++,n.next=e.g,e.g=n)}Rc=!1}function sd(n,e){zr.call(this),this.h=n||1,this.g=e||kt,this.j=yi(this.lb,this),this.l=Date.now()}function Zy(n){n.ca=!1,n.R&&(n.g.clearTimeout(n.R),n.R=null)}function ks(n,e,t){if("function"==typeof n)t&&(n=yi(n,t));else{if(!n||"function"!=typeof n.handleEvent)throw Error("Invalid listener argument");n=yi(n.handleEvent,n)}return 2147483647<Number(e)?-1:kt.setTimeout(n,e||0)}function od(n){n.g=ks(()=>{n.g=null,n.i&&(n.i=!1,od(n))},n.j);const e=n.h;n.h=null,n.m.apply(null,e)}Hr(sd,zr),(ft=sd.prototype).ca=!1,ft.R=null,ft.lb=function(){if(this.ca){var n=Date.now()-this.l;0<n&&n<.8*this.h?this.R=this.g.setTimeout(this.j,this.h-n):(this.R&&(this.g.clearTimeout(this.R),this.R=null),ai(this,"tick"),this.ca&&(Zy(this),this.start()))}},ft.start=function(){this.ca=!0,this.R||(this.R=this.g.setTimeout(this.j,this.h),this.l=Date.now())},ft.M=function(){sd.X.M.call(this),Zy(this),delete this.g};class _i extends fu{constructor(e,t){super(),this.m=e,this.j=t,this.h=null,this.i=!1,this.g=null}l(e){this.h=arguments,this.g?this.i=!0:od(this)}M(){super.M(),this.g&&(kt.clearTimeout(this.g),this.g=null,this.i=!1,this.h=null)}}function io(n){fu.call(this),this.h=n,this.g={}}Hr(io,fu);var tf=[];function cs(n,e,t,r){Array.isArray(t)||(t&&(tf[0]=t.toString()),t=tf);for(var o=0;o<t.length;o++){var u=K0(e,t[o],r||n.handleEvent,!1,n.h||n);if(!u)break;n.g[u.key]=u}}function ig(n){eg(n.g,function(e,t){this.g.hasOwnProperty(t)&&ng(e)},n),n.g={}}function _a(){this.g=!0}function so(n,e,t,r){n.info(function(){return"XMLHTTP TEXT ("+e+"): "+function ld(n,e){if(!n.g)return e;if(!e)return null;try{var t=JSON.parse(e);if(t)for(n=0;n<t.length;n++)if(Array.isArray(t[n])){var r=t[n];if(!(2>r.length)){var o=r[1];if(Array.isArray(o)&&!(1>o.length)){var u=o[0];if("noop"!=u&&"stop"!=u&&"close"!=u)for(var l=1;l<o.length;l++)o[l]=""}}}return qy(t)}catch{return e}}(n,t)+(r?" "+r:"")})}io.prototype.M=function(){io.X.M.call(this),ig(this)},io.prototype.handleEvent=function(){throw Error("EventHandler.handleEvent not implemented")},_a.prototype.Aa=function(){this.g=!1},_a.prototype.info=function(){};var Fs={},Nc=null;function Ia(){return Nc=Nc||new zr}function Ky(n){vi.call(this,Fs.Pa,n)}function dd(n){const e=Ia();ai(e,new Ky(e))}function Yy(n,e){vi.call(this,Fs.STAT_EVENT,n),this.stat=e}function Ii(n){const e=Ia();ai(e,new Yy(e,n))}function Qy(n,e){vi.call(this,Fs.Qa,n),this.size=e}function hd(n,e){if("function"!=typeof n)throw Error("Fn must not be null and must be a function");return kt.setTimeout(function(){n()},e)}Fs.Pa="serverreachability",Hr(Ky,vi),Fs.STAT_EVENT="statevent",Hr(Yy,vi),Fs.Qa="timingevent",Hr(Qy,vi);var nf={NO_ERROR:0,mb:1,zb:2,yb:3,tb:4,xb:5,Ab:6,Ma:7,TIMEOUT:8,Db:9},Xy={rb:"complete",Nb:"success",Na:"error",Ma:"abort",Fb:"ready",Gb:"readystatechange",TIMEOUT:"timeout",Bb:"incrementaldata",Eb:"progress",ub:"downloadprogress",Vb:"uploadprogress"};function sg(){}function sI(){}sg.prototype.h=null;var rf,fd={OPEN:"a",qb:"b",Na:"c",Cb:"d"};function Jy(){vi.call(this,"d")}function ev(){vi.call(this,"c")}function pd(){}function sf(n,e,t,r){this.l=n,this.j=e,this.m=t,this.U=r||1,this.S=new io(this),this.O=og,this.T=new sd(n=Fy?125:void 0),this.H=null,this.i=!1,this.s=this.A=this.v=this.K=this.F=this.V=this.B=null,this.D=[],this.g=null,this.C=0,this.o=this.u=null,this.Y=-1,this.I=!1,this.N=0,this.L=null,this.$=this.J=this.Z=this.P=!1,this.h=new af}function af(){this.i=null,this.g="",this.h=!1}Hr(Jy,vi),Hr(ev,vi),Hr(pd,sg),pd.prototype.g=function(){return new XMLHttpRequest},pd.prototype.i=function(){return{}},rf=new pd;var og=45e3,uf={},ag={};function gd(n,e,t){n.K=1,n.v=df(Fo(e)),n.s=t,n.P=!0,cf(n,null)}function cf(n,e){n.F=Date.now(),md(n),n.A=Fo(n.v);var t=n.A,r=n.U;Array.isArray(r)||(r=[String(r)]),dg(t.i,"t",r),n.C=0,t=n.l.H,n.h=new af,n.g=EI(n.l,t?e:null,!n.s),0<n.N&&(n.L=new _i(yi(n.La,n,n.g),n.N)),cs(n.S,n.g,"readystatechange",n.ib),e=n.H?G0(n.H):{},n.s?(n.u||(n.u="POST"),e["Content-Type"]="application/x-www-form-urlencoded",n.g.da(n.A,n.u,n.s,e)):(n.u="GET",n.g.da(n.A,n.u,null,e)),dd(),function ad(n,e,t,r,o,u){n.info(function(){if(n.g)if(u)for(var l="",g=u.split("&"),_=0;_<g.length;_++){var b=g[_].split("=");if(1<b.length){var S=b[0];b=b[1];var P=S.split("_");l=2<=P.length&&"type"==P[1]?l+(S+"=")+b+"&":l+(S+"=redacted&")}}else l=null;else l=u;return"XMLHTTP REQ ("+r+") [attempt "+o+"]: "+e+"\n"+t+"\n"+l})}(n.j,n.u,n.A,n.m,n.U,n.s)}function tv(n){return!!n.g&&"GET"==n.u&&2!=n.K&&n.l.Da}function nv(n,e,t){let o,r=!0;for(;!n.I&&n.C<t.length;){if(o=rv(n,t),o==ag){4==e&&(n.o=4,Ii(14),r=!1),so(n.j,n.m,null,"[Incomplete Response]");break}if(o==uf){n.o=4,Ii(15),so(n.j,n.m,t,"[Invalid Chunk]"),r=!1;break}so(n.j,n.m,o,null),ug(n,o)}tv(n)&&o!=ag&&o!=uf&&(n.h.g="",n.C=0),4!=e||0!=t.length||n.h.h||(n.o=1,Ii(16),r=!1),n.i=n.i&&r,r?0<t.length&&!n.$&&(n.$=!0,(e=n.l).g==n&&e.$&&!e.K&&(e.j.info("Great, no buffering proxy detected. Bytes received: "+t.length),_g(e),e.K=!0,Ii(11))):(so(n.j,n.m,t,"[Invalid Chunked Response]"),Pc(n),vd(n))}function rv(n,e){var t=n.C,r=e.indexOf("\n",t);return-1==r?ag:(t=Number(e.substring(t,r)),isNaN(t)?uf:(r+=1)+t>e.length?ag:(e=e.substr(r,t),n.C=r+t,e))}function md(n){n.V=Date.now()+n.O,iv(n,n.O)}function iv(n,e){if(null!=n.B)throw Error("WatchDog timer not null");n.B=hd(yi(n.gb,n),e)}function yd(n){n.B&&(kt.clearTimeout(n.B),n.B=null)}function vd(n){0==n.l.G||n.I||Iv(n.l,n)}function Pc(n){yd(n);var e=n.L;e&&"function"==typeof e.na&&e.na(),n.L=null,Zy(n.T),ig(n.S),n.g&&(e=n.g,n.g=null,e.abort(),e.na())}function ug(n,e){try{var t=n.l;if(0!=t.G&&(t.g==n||hg(t.h,n)))if(!n.J&&hg(t.h,n)&&3==t.G){try{var r=t.Fa.g.parse(e)}catch{r=null}if(Array.isArray(r)&&3==r.length){var o=r;if(0==o[0]){e:if(!t.u){if(t.g){if(!(t.g.F+3e3<n.F))break e;vf(t),mf(t)}vg(t),Ii(18)}}else t.Ba=o[1],0<t.Ba-t.T&&37500>o[2]&&t.L&&0==t.A&&!t.v&&(t.v=hd(yi(t.cb,t),6e3));if(1>=Dr(t.h)&&t.ja){try{t.ja()}catch{}t.ja=void 0}}else mu(t,11)}else if((n.J||t.g==n)&&vf(t),!Gp(e))for(o=t.Fa.g.parse(e),e=0;e<o.length;e++){let b=o[e];if(t.T=b[0],b=b[1],2==t.G)if("c"==b[0]){t.I=b[1],t.ka=b[2];const S=b[3];null!=S&&(t.ma=S,t.j.info("VER="+t.ma));const P=b[4];null!=P&&(t.Ca=P,t.j.info("SVER="+t.Ca));const W=b[5];null!=W&&"number"==typeof W&&0<W&&(t.J=r=1.5*W,t.j.info("backChannelRequestTimeoutMs_="+r)),r=t;const J=n.g;if(J){const oe=J.g?J.g.getResponseHeader("X-Client-Wire-Protocol"):null;if(oe){var u=r.h;u.g||-1==oe.indexOf("spdy")&&-1==oe.indexOf("quic")&&-1==oe.indexOf("h2")||(u.j=u.l,u.g=new Set,u.h&&(uv(u,u.h),u.h=null))}if(r.D){const ke=J.g?J.g.getResponseHeader("X-HTTP-Session-Id"):null;ke&&(r.za=ke,xn(r.F,r.D,ke))}}t.G=3,t.l&&t.l.xa(),t.$&&(t.P=Date.now()-n.F,t.j.info("Handshake RTT: "+t.P+"ms"));var l=n;if((r=t).sa=wI(r,r.H?r.ka:null,r.V),l.J){pI(r.h,l);var g=l,_=r.J;_&&g.setTimeout(_),g.B&&(yd(g),md(g)),r.g=l}else yf(r);0<t.i.length&&Lc(t)}else"stop"!=b[0]&&"close"!=b[0]||mu(t,7);else 3==t.G&&("stop"==b[0]||"close"==b[0]?"stop"==b[0]?mu(t,7):mv(t):"noop"!=b[0]&&t.l&&t.l.wa(b),t.A=0)}dd()}catch{}}function sv(n,e){if(n.forEach&&"function"==typeof n.forEach)n.forEach(e,void 0);else if(mi(n)||"string"==typeof n)Array.prototype.forEach.call(n,e,void 0);else for(var t=function aI(n){if(n.oa&&"function"==typeof n.oa)return n.oa();if(!n.W||"function"!=typeof n.W){if(typeof Map<"u"&&n instanceof Map)return Array.from(n.keys());if(!(typeof Set<"u"&&n instanceof Set)){if(mi(n)||"string"==typeof n){var e=[];n=n.length;for(var t=0;t<n;t++)e.push(t);return e}e=[],t=0;for(const r in n)e[t++]=r;return e}}}(n),r=function oI(n){if(n.W&&"function"==typeof n.W)return n.W();if(typeof Map<"u"&&n instanceof Map||typeof Set<"u"&&n instanceof Set)return Array.from(n.values());if("string"==typeof n)return n.split("");if(mi(n)){for(var e=[],t=n.length,r=0;r<t;r++)e.push(n[r]);return e}for(r in e=[],t=0,n)e[t++]=n[r];return e}(n),o=r.length,u=0;u<o;u++)e.call(void 0,r[u],t&&t[u],n)}(ft=sf.prototype).setTimeout=function(n){this.O=n},ft.ib=function(n){n=n.target;const e=this.L;e&&3==wa(n)?e.l():this.La(n)},ft.La=function(n){try{if(n==this.g)e:{const S=wa(this.g);var e=this.g.Ea();if(this.g.aa(),!(3>S)&&(3!=S||Fy||this.g&&(this.h.h||this.g.fa()||II(this.g)))){this.I||4!=S||7==e||dd(),yd(this);var t=this.g.aa();this.Y=t;t:if(tv(this)){var r=II(this.g);n="";var o=r.length,u=4==wa(this.g);if(!this.h.i){if(typeof TextDecoder>"u"){Pc(this),vd(this);var l="";break t}this.h.i=new kt.TextDecoder}for(e=0;e<o;e++)this.h.h=!0,n+=this.h.i.decode(r[e],{stream:u&&e==o-1});r.splice(0,o),this.h.g+=n,this.C=0,l=this.h.g}else l=this.g.fa();if(this.i=200==t,function ud(n,e,t,r,o,u,l){n.info(function(){return"XMLHTTP RESP ("+r+") [ attempt "+o+"]: "+e+"\n"+t+"\n"+u+" "+l})}(this.j,this.u,this.A,this.m,this.U,S,t),this.i){if(this.Z&&!this.J){t:{if(this.g){var g,_=this.g;if((g=_.g?_.g.getResponseHeader("X-HTTP-Initial-Response"):null)&&!Gp(g)){var b=g;break t}}b=null}if(!(t=b)){this.i=!1,this.o=3,Ii(12),Pc(this),vd(this);break e}so(this.j,this.m,t,"Initial handshake response via X-HTTP-Initial-Response"),this.J=!0,ug(this,t)}this.P?(nv(this,S,l),Fy&&this.i&&3==S&&(cs(this.S,this.T,"tick",this.hb),this.T.start())):(so(this.j,this.m,l,null),ug(this,l)),4==S&&Pc(this),this.i&&!this.I&&(4==S?Iv(this.l,this):(this.i=!1,md(this)))}else 400==t&&0<l.indexOf("Unknown SID")?(this.o=3,Ii(12)):(this.o=0,Ii(13)),Pc(this),vd(this)}}}catch{}},ft.hb=function(){if(this.g){var n=wa(this.g),e=this.g.fa();this.C<e.length&&(yd(this),nv(this,n,e),this.i&&4!=n&&md(this))}},ft.cancel=function(){this.I=!0,Pc(this)},ft.gb=function(){this.B=null;const n=Date.now();0<=n-this.V?(function cd(n,e){n.info(function(){return"TIMEOUT: "+e})}(this.j,this.A),2!=this.K&&(dd(),Ii(17)),Pc(this),this.o=2,vd(this)):iv(this,this.V-n)};var uI=RegExp("^(?:([^:/?#.]+):)?(?://(?:([^\\\\/?#]*)@)?([^\\\\/?#]*?)(?::([0-9]+))?(?=[\\\\/?#]|$))?([^?#]+)?(?:\\?([^#]*))?(?:#([\\s\\S]*))?$");function Oc(n,e){if(this.g=this.s=this.j="",this.m=null,this.o=this.l="",this.h=!1,n instanceof Oc){this.h=void 0!==e?e:n.h,_d(this,n.j),this.s=n.s,this.g=n.g,lf(this,n.m),this.l=n.l,e=n.i;var t=new kc;t.i=e.i,e.g&&(t.g=new Map(e.g),t.h=e.h),ov(this,t),this.o=n.o}else n&&(t=String(n).match(uI))?(this.h=!!e,_d(this,t[1]||"",!0),this.s=Id(t[2]||""),this.g=Id(t[3]||"",!0),lf(this,t[4]),this.l=Id(t[5]||"",!0),ov(this,t[6]||"",!0),this.o=Id(t[7]||"")):(this.h=!!e,this.i=new kc(null,this.h))}function Fo(n){return new Oc(n)}function _d(n,e,t){n.j=t?Id(e,!0):e,n.j&&(n.j=n.j.replace(/:$/,""))}function lf(n,e){if(e){if(e=Number(e),isNaN(e)||0>e)throw Error("Bad port number "+e);n.m=e}else n.m=null}function ov(n,e,t){e instanceof kc?(n.i=e,function cS(n,e){e&&!n.j&&(Ki(n),n.i=null,n.g.forEach(function(t,r){var o=r.toLowerCase();r!=o&&(lg(this,r),dg(this,o,t))},n)),n.j=e}(n.i,n.h)):(t||(e=wd(e,YD)),n.i=new kc(e,n.h))}function xn(n,e,t){n.i.set(e,t)}function df(n){return xn(n,"zx",Math.floor(2147483648*Math.random()).toString(36)+Math.abs(Math.floor(2147483648*Math.random())^Date.now()).toString(36)),n}function Id(n,e){return n?e?decodeURI(n.replace(/%25/g,"%2525")):decodeURIComponent(n):""}function wd(n,e,t){return"string"==typeof n?(n=encodeURI(n).replace(e,cI),t&&(n=n.replace(/%25([0-9a-fA-F]{2})/g,"%$1")),n):null}function cI(n){return"%"+((n=n.charCodeAt(0))>>4&15).toString(16)+(15&n).toString(16)}Oc.prototype.toString=function(){var n=[],e=this.j;e&&n.push(wd(e,av,!0),":");var t=this.g;return(t||"file"==e)&&(n.push("//"),(e=this.s)&&n.push(wd(e,av,!0),"@"),n.push(encodeURIComponent(String(t)).replace(/%25([0-9a-fA-F]{2})/g,"%$1")),null!=(t=this.m)&&n.push(":",String(t))),(t=this.l)&&(this.g&&"/"!=t.charAt(0)&&n.push("/"),n.push(wd(t,"/"==t.charAt(0)?gu:cg,!0))),(t=this.i.toString())&&n.push("?",t),(t=this.o)&&n.push("#",wd(t,QD)),n.join("")};var av=/[#\/\?@]/g,cg=/[#\?:]/g,gu=/[#\?]/g,YD=/[#\?@]/g,QD=/#/g;function kc(n,e){this.h=this.g=null,this.i=n||null,this.j=!!e}function Ki(n){n.g||(n.g=new Map,n.h=0,n.i&&function KD(n,e){if(n){n=n.split("&");for(var t=0;t<n.length;t++){var r=n[t].indexOf("="),o=null;if(0<=r){var u=n[t].substring(0,r);o=n[t].substring(r+1)}else u=n[t];e(u,o?decodeURIComponent(o.replace(/\+/g," ")):"")}}}(n.i,function(e,t){n.add(decodeURIComponent(e.replace(/\+/g," ")),t)}))}function lg(n,e){Ki(n),e=hf(n,e),n.g.has(e)&&(n.i=null,n.h-=n.g.get(e).length,n.g.delete(e))}function lI(n,e){return Ki(n),e=hf(n,e),n.g.has(e)}function dg(n,e,t){lg(n,e),0<t.length&&(n.i=null,n.g.set(hf(n,e),ky(t)),n.h+=t.length)}function hf(n,e){return e=String(e),n.j&&(e=e.toLowerCase()),e}function dI(n){this.l=n||hI,n=kt.PerformanceNavigationTiming?0<(n=kt.performance.getEntriesByType("navigation")).length&&("hq"==n[0].nextHopProtocol||"h2"==n[0].nextHopProtocol):!!(kt.g&&kt.g.Ga&&kt.g.Ga()&&kt.g.Ga().$b),this.j=n?this.l:1,this.g=null,1<this.j&&(this.g=new Set),this.h=null,this.i=[]}(ft=kc.prototype).add=function(n,e){Ki(this),this.i=null,n=hf(this,n);var t=this.g.get(n);return t||this.g.set(n,t=[]),t.push(e),this.h+=1,this},ft.forEach=function(n,e){Ki(this),this.g.forEach(function(t,r){t.forEach(function(o){n.call(e,o,r,this)},this)},this)},ft.oa=function(){Ki(this);const n=Array.from(this.g.values()),e=Array.from(this.g.keys()),t=[];for(let r=0;r<e.length;r++){const o=n[r];for(let u=0;u<o.length;u++)t.push(e[r])}return t},ft.W=function(n){Ki(this);let e=[];if("string"==typeof n)lI(this,n)&&(e=e.concat(this.g.get(hf(this,n))));else{n=Array.from(this.g.values());for(let t=0;t<n.length;t++)e=e.concat(n[t])}return e},ft.set=function(n,e){return Ki(this),this.i=null,lI(this,n=hf(this,n))&&(this.h-=this.g.get(n).length),this.g.set(n,[e]),this.h+=1,this},ft.get=function(n,e){return n&&0<(n=this.W(n)).length?String(n[0]):e},ft.toString=function(){if(this.i)return this.i;if(!this.g)return"";const n=[],e=Array.from(this.g.keys());for(var t=0;t<e.length;t++){var r=e[t];const u=encodeURIComponent(String(r)),l=this.W(r);for(r=0;r<l.length;r++){var o=u;""!==l[r]&&(o+="="+encodeURIComponent(String(l[r]))),n.push(o)}}return this.i=n.join("&")};var hI=10;function fI(n){return!!n.h||!!n.g&&n.g.size>=n.j}function Dr(n){return n.h?1:n.g?n.g.size:0}function hg(n,e){return n.h?n.h==e:!!n.g&&n.g.has(e)}function uv(n,e){n.g?n.g.add(e):n.h=e}function pI(n,e){n.h&&n.h==e?n.h=null:n.g&&n.g.has(e)&&n.g.delete(e)}function cv(n){if(null!=n.h)return n.i.concat(n.h.D);if(null!=n.g&&0!==n.g.size){let e=n.i;for(const t of n.g.values())e=e.concat(t.D);return e}return ky(n.i)}function lv(){}function gI(){this.g=new lv}function mI(n,e,t){const r=t||"";try{sv(n,function(o,u){let l=o;nd(o)&&(l=qy(o)),e.push(r+u+"="+encodeURIComponent(l))})}catch(o){throw e.push(r+"type="+encodeURIComponent("_badmap")),o}}function fg(n,e,t,r,o){try{e.onload=null,e.onerror=null,e.onabort=null,e.ontimeout=null,o(r)}catch{}}function ff(n){this.l=n.ac||null,this.j=n.jb||!1}function pf(n,e){zr.call(this),this.D=n,this.u=e,this.m=void 0,this.readyState=dv,this.status=0,this.responseType=this.responseText=this.response=this.statusText="",this.onreadystatechange=null,this.v=new Headers,this.h=null,this.C="GET",this.B="",this.g=!1,this.A=this.j=this.l=null}dI.prototype.cancel=function(){if(this.i=cv(this),this.h)this.h.cancel(),this.h=null;else if(this.g&&0!==this.g.size){for(const n of this.g.values())n.cancel();this.g.clear()}},lv.prototype.stringify=function(n){return kt.JSON.stringify(n,void 0)},lv.prototype.parse=function(n){return kt.JSON.parse(n,void 0)},Hr(ff,sg),ff.prototype.g=function(){return new pf(this.l,this.j)},ff.prototype.i=function(n){return function(){return n}}({}),Hr(pf,zr);var dv=0;function hv(n){n.j.read().then(n.Ta.bind(n)).catch(n.ga.bind(n))}function pg(n){n.readyState=4,n.l=null,n.j=null,n.A=null,Dd(n)}function Dd(n){n.onreadystatechange&&n.onreadystatechange.call(n)}(ft=pf.prototype).open=function(n,e){if(this.readyState!=dv)throw this.abort(),Error("Error reopening a connection");this.C=n,this.B=e,this.readyState=1,Dd(this)},ft.send=function(n){if(1!=this.readyState)throw this.abort(),Error("need to call open() first. ");this.g=!0;const e={headers:this.v,method:this.C,credentials:this.m,cache:void 0};n&&(e.body=n),(this.D||kt).fetch(new Request(this.B,e)).then(this.Wa.bind(this),this.ga.bind(this))},ft.abort=function(){this.response=this.responseText="",this.v=new Headers,this.status=0,this.j&&this.j.cancel("Request was aborted.").catch(()=>{}),1<=this.readyState&&this.g&&4!=this.readyState&&(this.g=!1,pg(this)),this.readyState=dv},ft.Wa=function(n){if(this.g&&(this.l=n,this.h||(this.status=this.l.status,this.statusText=this.l.statusText,this.h=n.headers,this.readyState=2,Dd(this)),this.g&&(this.readyState=3,Dd(this),this.g)))if("arraybuffer"===this.responseType)n.arrayBuffer().then(this.Ua.bind(this),this.ga.bind(this));else if(typeof kt.ReadableStream<"u"&&"body"in n){if(this.j=n.body.getReader(),this.u){if(this.responseType)throw Error('responseType must be empty for "streamBinaryChunks" mode responses.');this.response=[]}else this.response=this.responseText="",this.A=new TextDecoder;hv(this)}else n.text().then(this.Va.bind(this),this.ga.bind(this))},ft.Ta=function(n){if(this.g){if(this.u&&n.value)this.response.push(n.value);else if(!this.u){var e=n.value?n.value:new Uint8Array(0);(e=this.A.decode(e,{stream:!n.done}))&&(this.response=this.responseText+=e)}n.done?pg(this):Dd(this),3==this.readyState&&hv(this)}},ft.Va=function(n){this.g&&(this.response=this.responseText=n,pg(this))},ft.Ua=function(n){this.g&&(this.response=n,pg(this))},ft.ga=function(){this.g&&pg(this)},ft.setRequestHeader=function(n,e){this.v.append(n,e)},ft.getResponseHeader=function(n){return this.h&&this.h.get(n.toLowerCase())||""},ft.getAllResponseHeaders=function(){if(!this.h)return"";const n=[],e=this.h.entries();for(var t=e.next();!t.done;)n.push((t=t.value)[0]+": "+t[1]),t=e.next();return n.join("\r\n")},Object.defineProperty(pf.prototype,"withCredentials",{get:function(){return"include"===this.m},set:function(n){this.m=n?"include":"same-origin"}});var yI=kt.JSON.parse;function dn(n){zr.call(this),this.headers=new Map,this.u=n||null,this.h=!1,this.C=this.g=null,this.H="",this.m=0,this.j="",this.l=this.F=this.v=this.D=!1,this.B=0,this.A=null,this.J=vI,this.K=this.L=!1}Hr(dn,zr);var vI="",JD=/^https?$/i,Lo=["POST","PUT"];function Ls(n,e){n.h=!1,n.g&&(n.l=!0,n.g.abort(),n.l=!1),n.j=e,n.m=5,fv(n),gg(n)}function fv(n){n.D||(n.D=!0,ai(n,"complete"),ai(n,"error"))}function pv(n){if(n.h&&typeof jp<"u"&&(!n.C[1]||4!=wa(n)||2!=n.aa()))if(n.v&&4==wa(n))ks(n.Ha,0,n);else if(ai(n,"readystatechange"),4==wa(n)){n.h=!1;try{const g=n.aa();e:switch(g){case 200:case 201:case 202:case 204:case 206:case 304:case 1223:var e=!0;break e;default:e=!1}var t;if(!(t=e)){var r;if(r=0===g){var o=String(n.H).match(uI)[1]||null;if(!o&&kt.self&&kt.self.location){var u=kt.self.location.protocol;o=u.substr(0,u.length-1)}r=!JD.test(o?o.toLowerCase():"")}t=r}if(t)ai(n,"complete"),ai(n,"success");else{n.m=6;try{var l=2<wa(n)?n.g.statusText:""}catch{l=""}n.j=l+" ["+n.aa()+"]",fv(n)}}finally{gg(n)}}}function gg(n,e){if(n.g){_I(n);const t=n.g,r=n.C[0]?Hp:null;n.g=null,n.C=null,e||ai(n,"ready");try{t.onreadystatechange=r}catch{}}}function _I(n){n.g&&n.K&&(n.g.ontimeout=null),n.A&&(kt.clearTimeout(n.A),n.A=null)}function wa(n){return n.g?n.g.readyState:0}function II(n){try{if(!n.g)return null;if("response"in n.g)return n.g.response;switch(n.J){case vI:case"text":return n.g.responseText;case"arraybuffer":if("mozResponseArrayBuffer"in n.g)return n.g.mozResponseArrayBuffer}return null}catch{return null}}function mg(n){let e="";return eg(n,function(t,r){e+=r,e+=":",e+=t,e+="\r\n"}),e}function Fc(n,e,t){e:{for(r in t){var r=!1;break e}r=!0}r||(t=mg(t),"string"==typeof n?null!=t&&encodeURIComponent(String(t)):xn(n,e,t))}function gf(n,e,t){return t&&t.internalChannelParams&&t.internalChannelParams[n]||e}function gv(n){this.Ca=0,this.i=[],this.j=new _a,this.ka=this.sa=this.F=this.V=this.g=this.za=this.D=this.ia=this.o=this.S=this.s=null,this.ab=this.U=0,this.Za=gf("failFast",!1,n),this.L=this.v=this.u=this.m=this.l=null,this.Y=!0,this.pa=this.Ba=this.T=-1,this.Z=this.A=this.C=0,this.Xa=gf("baseRetryDelayMs",5e3,n),this.bb=gf("retryDelaySeedMs",1e4,n),this.$a=gf("forwardChannelMaxRetries",2,n),this.ta=gf("forwardChannelRequestTimeoutMs",2e4,n),this.ra=n&&n.xmlHttpFactory||void 0,this.Da=n&&n.Zb||!1,this.J=void 0,this.H=n&&n.supportsCrossDomainXhr||!1,this.I="",this.h=new dI(n&&n.concurrentRequestLimit),this.Fa=new gI,this.O=n&&n.fastHandshake||!1,this.N=n&&n.encodeInitMessageHeaders||!1,this.O&&this.N&&(this.N=!1),this.Ya=n&&n.Xb||!1,n&&n.Aa&&this.j.Aa(),n&&n.forceLongPolling&&(this.Y=!1),this.$=!this.O&&this.Y&&n&&n.detectBufferingProxy||!1,this.ja=void 0,this.P=0,this.K=!1,this.la=this.B=null}function mv(n){if(yv(n),3==n.G){var e=n.U++,t=Fo(n.F);xn(t,"SID",n.I),xn(t,"RID",e),xn(t,"TYPE","terminate"),bd(n,t),(e=new sf(n,n.j,e,void 0)).K=2,e.v=df(Fo(t)),t=!1,kt.navigator&&kt.navigator.sendBeacon&&(t=kt.navigator.sendBeacon(e.v.toString(),"")),!t&&kt.Image&&((new Image).src=e.v,t=!0),t||(e.g=EI(e.l,null),e.g.da(e.v)),e.F=Date.now(),md(e)}Ev(n)}function mf(n){n.g&&(_g(n),n.g.cancel(),n.g=null)}function yv(n){mf(n),n.u&&(kt.clearTimeout(n.u),n.u=null),vf(n),n.h.cancel(),n.m&&("number"==typeof n.m&&kt.clearTimeout(n.m),n.m=null)}function Lc(n){fI(n.h)||n.m||(n.m=!0,ef(n.Ja,n),n.C=0)}function vv(n,e){var t;t=e?e.m:n.U++;const r=Fo(n.F);xn(r,"SID",n.I),xn(r,"RID",t),xn(r,"AID",n.T),bd(n,r),n.o&&n.s&&Fc(r,n.o,n.s),t=new sf(n,n.j,t,n.C+1),null===n.o&&(t.H=n.s),e&&(n.i=e.D.concat(n.i)),e=yg(n,t,1e3),t.setTimeout(Math.round(.5*n.ta)+Math.round(.5*n.ta*Math.random())),uv(n.h,t),gd(t,r,e)}function bd(n,e){n.ia&&eg(n.ia,function(t,r){xn(e,r,t)}),n.l&&sv({},function(t,r){xn(e,r,t)})}function yg(n,e,t){t=Math.min(n.i.length,t);var r=n.l?yi(n.l.Ra,n.l,n):null;e:{var o=n.i;let u=-1;for(;;){const l=["count="+t];-1==u?0<t?(u=o[0].h,l.push("ofs="+u)):u=0:l.push("ofs="+u);let g=!0;for(let _=0;_<t;_++){let b=o[_].h;const S=o[_].g;if(b-=u,0>b)u=Math.max(0,o[_].h-100),g=!1;else try{mI(S,l,"req"+b+"_")}catch{r&&r(S)}}if(g){r=l.join("&");break e}}}return n=n.i.splice(0,t),e.D=n,r}function yf(n){n.g||n.u||(n.Z=1,ef(n.Ia,n),n.A=0)}function vg(n){return!(n.g||n.u||3<=n.A||(n.Z++,n.u=hd(yi(n.Ia,n),wv(n,n.A)),n.A++,0))}function _g(n){null!=n.B&&(kt.clearTimeout(n.B),n.B=null)}function _v(n){n.g=new sf(n,n.j,"rpc",n.Z),null===n.o&&(n.g.H=n.s),n.g.N=0;var e=Fo(n.sa);xn(e,"RID","rpc"),xn(e,"SID",n.I),xn(e,"CI",n.L?"0":"1"),xn(e,"AID",n.T),xn(e,"TYPE","xmlhttp"),bd(n,e),n.o&&n.s&&Fc(e,n.o,n.s),n.J&&n.g.setTimeout(n.J);var t=n.g;n=n.ka,t.K=1,t.v=df(Fo(e)),t.s=null,t.P=!0,cf(t,n)}function vf(n){null!=n.v&&(kt.clearTimeout(n.v),n.v=null)}function Iv(n,e){var t=null;if(n.g==e){vf(n),_g(n),n.g=null;var r=2}else{if(!hg(n.h,e))return;t=e.D,pI(n.h,e),r=1}if(0!=n.G)if(n.pa=e.Y,e.i)if(1==r){t=e.s?e.s.length:0,e=Date.now()-e.F;var o=n.C;ai(r=Ia(),new Qy(r,t)),Lc(n)}else yf(n);else if(3==(o=e.o)||0==o&&0<n.pa||!(1==r&&function eb(n,e){return!(Dr(n.h)>=n.h.j-(n.m?1:0)||(n.m?(n.i=e.D.concat(n.i),0):1==n.G||2==n.G||n.C>=(n.Za?0:n.$a)||(n.m=hd(yi(n.Ja,n,e),wv(n,n.C)),n.C++,0)))}(n,e)||2==r&&vg(n)))switch(t&&0<t.length&&(e=n.h,e.i=e.i.concat(t)),o){case 1:mu(n,5);break;case 4:mu(n,10);break;case 3:mu(n,6);break;default:mu(n,2)}}function wv(n,e){let t=n.Xa+Math.floor(Math.random()*n.bb);return n.l||(t*=2),t*e}function mu(n,e){if(n.j.info("Error code "+e),2==e){var t=null;n.l&&(t=null);var r=yi(n.kb,n);t||(t=new Oc("//www.google.com/images/cleardot.gif"),kt.location&&"http"==kt.location.protocol||_d(t,"https"),df(t)),function Ed(n,e){const t=new _a;if(kt.Image){const r=new Image;r.onload=zp(fg,t,r,"TestLoadImage: loaded",!0,e),r.onerror=zp(fg,t,r,"TestLoadImage: error",!1,e),r.onabort=zp(fg,t,r,"TestLoadImage: abort",!1,e),r.ontimeout=zp(fg,t,r,"TestLoadImage: timeout",!1,e),kt.setTimeout(function(){r.ontimeout&&r.ontimeout()},1e4),r.src=n}else e(!1)}(t.toString(),r)}else Ii(2);n.G=0,n.l&&n.l.va(e),Ev(n),yv(n)}function Ev(n){if(n.G=0,n.la=[],n.l){const e=cv(n.h);(0!=e.length||0!=n.i.length)&&(B0(n.la,e),B0(n.la,n.i),n.h.i.length=0,ky(n.i),n.i.length=0),n.l.ua()}}function wI(n,e,t){var r=t instanceof Oc?Fo(t):new Oc(t,void 0);if(""!=r.g)e&&(r.g=e+"."+r.g),lf(r,r.m);else{var o=kt.location;r=o.protocol,e=e?e+"."+o.hostname:o.hostname,o=+o.port;var u=new Oc(null,void 0);r&&_d(u,r),e&&(u.g=e),o&&lf(u,o),t&&(u.l=t),r=u}return e=n.za,(t=n.D)&&e&&xn(r,t,e),xn(r,"VER",n.ma),bd(n,r),r}function EI(n,e,t){if(e&&!n.H)throw Error("Can't create secondary domain capable XhrIo object.");return(e=new dn(t&&n.Da&&!n.ra?new ff({jb:!0}):n.ra)).Ka(n.H),e}function DI(){}function Ig(){if(rd&&!(10<=Number(Uy)))throw Error("Environmental error: no available transport.")}function ls(n,e){zr.call(this),this.g=new gv(e),this.l=n,this.h=e&&e.messageUrlParams||null,n=e&&e.messageHeaders||null,e&&e.clientProtocolHeaderRequired&&(n?n["X-Client-Protocol"]="webchannel":n={"X-Client-Protocol":"webchannel"}),this.g.s=n,n=e&&e.initMessageHeaders||null,e&&e.messageContentType&&(n?n["X-WebChannel-Content-Type"]=e.messageContentType:n={"X-WebChannel-Content-Type":e.messageContentType}),e&&e.ya&&(n?n["X-WebChannel-Client-Profile"]=e.ya:n={"X-WebChannel-Client-Profile":e.ya}),this.g.S=n,(n=e&&e.Yb)&&!Gp(n)&&(this.g.o=n),this.A=e&&e.supportsCrossDomainXhr||!1,this.v=e&&e.sendRawJson||!1,(e=e&&e.httpSessionIdParam)&&!Gp(e)&&(this.g.D=e,null!==(n=this.h)&&e in n&&e in(n=this.h)&&delete n[e]),this.j=new Cd(this)}function bI(n){Jy.call(this);var e=n.__sm__;if(e){e:{for(const t in e){n=t;break e}n=void 0}(this.i=n)&&(n=this.i,e=null!==e&&n in e?e[n]:void 0),this.data=e}else this.data=n}function CI(){ev.call(this),this.status=1}function Cd(n){this.g=n}(ft=dn.prototype).Ka=function(n){this.L=n},ft.da=function(n,e,t,r){if(this.g)throw Error("[goog.net.XhrIo] Object is active with another request="+this.H+"; newUri="+n);e=e?e.toUpperCase():"GET",this.H=n,this.j="",this.m=0,this.D=!1,this.h=!0,this.g=this.u?this.u.g():rf.g(),this.C=function iI(n){return n.h||(n.h=n.i())}(this.u?this.u:rf),this.g.onreadystatechange=yi(this.Ha,this);try{this.F=!0,this.g.open(e,String(n),!0),this.F=!1}catch(u){return void Ls(this,u)}if(n=t||"",t=new Map(this.headers),r)if(Object.getPrototypeOf(r)===Object.prototype)for(var o in r)t.set(o,r[o]);else{if("function"!=typeof r.keys||"function"!=typeof r.get)throw Error("Unknown input type for opt_headers: "+String(r));for(const u of r.keys())t.set(u,r.get(u))}r=Array.from(t.keys()).find(u=>"content-type"==u.toLowerCase()),o=kt.FormData&&n instanceof kt.FormData,!(0<=Wp(Lo,e))||r||o||t.set("Content-Type","application/x-www-form-urlencoded;charset=utf-8");for(const[u,l]of t)this.g.setRequestHeader(u,l);this.J&&(this.g.responseType=this.J),"withCredentials"in this.g&&this.g.withCredentials!==this.L&&(this.g.withCredentials=this.L);try{_I(this),0<this.B&&((this.K=function oo(n){return rd&&function W0(){return function zD(n){var e=z0;return Object.prototype.hasOwnProperty.call(e,9)?e[9]:e[9]=n(9)}(function(){let n=0;const e=ro(String(Mc)).split("."),t=ro("9").split("."),r=Math.max(e.length,t.length);for(let l=0;0==n&&l<r;l++){var o=e[l]||"",u=t[l]||"";do{if(o=/(\d*)(\D*)(.*)/.exec(o)||["","","",""],u=/(\d*)(\D*)(.*)/.exec(u)||["","","",""],0==o[0].length&&0==u[0].length)break;n=Yh(0==o[1].length?0:parseInt(o[1],10),0==u[1].length?0:parseInt(u[1],10))||Yh(0==o[2].length,0==u[2].length)||Yh(o[2],u[2]),o=o[3],u=u[3]}while(0==n)}return 0<=n})}()&&"number"==typeof n.timeout&&void 0!==n.ontimeout}(this.g))?(this.g.timeout=this.B,this.g.ontimeout=yi(this.qa,this)):this.A=ks(this.qa,this.B,this)),this.v=!0,this.g.send(n),this.v=!1}catch(u){Ls(this,u)}},ft.qa=function(){typeof jp<"u"&&this.g&&(this.j="Timed out after "+this.B+"ms, aborting",this.m=8,ai(this,"timeout"),this.abort(8))},ft.abort=function(n){this.g&&this.h&&(this.h=!1,this.l=!0,this.g.abort(),this.l=!1,this.m=n||7,ai(this,"complete"),ai(this,"abort"),gg(this))},ft.M=function(){this.g&&(this.h&&(this.h=!1,this.l=!0,this.g.abort(),this.l=!1),gg(this,!0)),dn.X.M.call(this)},ft.Ha=function(){this.s||(this.F||this.v||this.l?pv(this):this.fb())},ft.fb=function(){pv(this)},ft.aa=function(){try{return 2<wa(this)?this.g.status:-1}catch{return-1}},ft.fa=function(){try{return this.g?this.g.responseText:""}catch{return""}},ft.Sa=function(n){if(this.g){var e=this.g.responseText;return n&&0==e.indexOf(n)&&(e=e.substring(n.length)),yI(e)}},ft.Ea=function(){return this.m},ft.Oa=function(){return"string"==typeof this.j?this.j:String(this.j)},(ft=gv.prototype).ma=8,ft.G=1,ft.Ja=function(n){if(this.m)if(this.m=null,1==this.G){if(!n){this.U=Math.floor(1e5*Math.random()),n=this.U++;const o=new sf(this,this.j,n,void 0);let u=this.s;if(this.S&&(u?(u=G0(u),id(u,this.S)):u=this.S),null!==this.o||this.N||(o.H=u,u=null),this.O)e:{for(var e=0,t=0;t<this.i.length;t++){var r=this.i[t];if(void 0===(r="__data__"in r.g&&"string"==typeof(r=r.g.__data__)?r.length:void 0))break;if(4096<(e+=r)){e=t;break e}if(4096===e||t===this.i.length-1){e=t+1;break e}}e=1e3}else e=1e3;e=yg(this,o,e),xn(t=Fo(this.F),"RID",n),xn(t,"CVER",22),this.D&&xn(t,"X-HTTP-Session-Id",this.D),bd(this,t),u&&(this.N?e="headers="+encodeURIComponent(String(mg(u)))+"&"+e:this.o&&Fc(t,this.o,u)),uv(this.h,o),this.Ya&&xn(t,"TYPE","init"),this.O?(xn(t,"$req",e),xn(t,"SID","null"),o.Z=!0,gd(o,t,null)):gd(o,t,e),this.G=2}}else 3==this.G&&(n?vv(this,n):0==this.i.length||fI(this.h)||vv(this))},ft.Ia=function(){if(this.u=null,_v(this),this.$&&!(this.K||null==this.g||0>=this.P)){var n=2*this.P;this.j.info("BP detection timer enabled: "+n),this.B=hd(yi(this.eb,this),n)}},ft.eb=function(){this.B&&(this.B=null,this.j.info("BP detection timeout reached."),this.j.info("Buffering proxy detected and switch to long-polling!"),this.L=!1,this.K=!0,Ii(10),mf(this),_v(this))},ft.cb=function(){null!=this.v&&(this.v=null,mf(this),vg(this),Ii(19))},ft.kb=function(n){n?(this.j.info("Successfully pinged google.com"),Ii(2)):(this.j.info("Failed to ping google.com"),Ii(1))},(ft=DI.prototype).xa=function(){},ft.wa=function(){},ft.va=function(){},ft.ua=function(){},ft.Ra=function(){},Ig.prototype.g=function(n,e){return new ls(n,e)},Hr(ls,zr),ls.prototype.m=function(){this.g.l=this.j,this.A&&(this.g.H=!0);var n=this.g,e=this.l,t=this.h||void 0;Ii(0),n.V=e,n.ia=t||{},n.L=n.Y,n.F=wI(n,null,n.V),Lc(n)},ls.prototype.close=function(){mv(this.g)},ls.prototype.u=function(n){var e=this.g;if("string"==typeof n){var t={};t.__data__=n,n=t}else this.v&&((t={}).__data__=qy(n),n=t);e.i.push(new class{constructor(n,e){this.h=n,this.g=e}}(e.ab++,n)),3==e.G&&Lc(e)},ls.prototype.M=function(){this.g.l=null,delete this.j,mv(this.g),delete this.g,ls.X.M.call(this)},Hr(bI,Jy),Hr(CI,ev),Hr(Cd,DI),Cd.prototype.xa=function(){ai(this.g,"a")},Cd.prototype.wa=function(n){ai(this.g,new bI(n))},Cd.prototype.va=function(n){ai(this.g,new CI)},Cd.prototype.ua=function(){ai(this.g,"b")},Ig.prototype.createWebChannel=Ig.prototype.g,ls.prototype.send=ls.prototype.u,ls.prototype.open=ls.prototype.m,ls.prototype.close=ls.prototype.close,nf.NO_ERROR=0,nf.TIMEOUT=8,nf.HTTP_ERROR=6,Xy.COMPLETE="complete",sI.EventType=fd,fd.OPEN="a",fd.CLOSE="b",fd.ERROR="c",fd.MESSAGE="d",zr.prototype.listen=zr.prototype.N,dn.prototype.listenOnce=dn.prototype.O,dn.prototype.getLastError=dn.prototype.Oa,dn.prototype.getLastErrorCode=dn.prototype.Ea,dn.prototype.getStatus=dn.prototype.aa,dn.prototype.getResponseJson=dn.prototype.Sa,dn.prototype.getResponseText=dn.prototype.fa,dn.prototype.send=dn.prototype.da,dn.prototype.setWithCredentials=dn.prototype.Ka;var tb=ya.createWebChannelTransport=function(){return new Ig},nb=ya.getStatEventTarget=function(){return Ia()},Dv=ya.ErrorCode=nf,rb=ya.EventType=Xy,ib=ya.Event=Fs,TI=ya.Stat={sb:0,vb:1,wb:2,Pb:3,Ub:4,Rb:5,Sb:6,Qb:7,Ob:8,Tb:9,PROXY:10,NOPROXY:11,Mb:12,Ib:13,Jb:14,Hb:15,Kb:16,Lb:17,ob:18,nb:19,pb:20},sb=ya.FetchXmlHttpFactory=ff,wg=ya.WebChannel=sI,ob=ya.XhrIo=dn;const SI="@firebase/firestore";class Nr{constructor(e){this.uid=e}isAuthenticated(){return null!=this.uid}toKey(){return this.isAuthenticated()?"uid:"+this.uid:"anonymous-user"}isEqual(e){return e.uid===this.uid}}Nr.UNAUTHENTICATED=new Nr(null),Nr.GOOGLE_CREDENTIALS=new Nr("google-credentials-uid"),Nr.FIRST_PARTY=new Nr("first-party-uid"),Nr.MOCK_USER=new Nr("mock-user");let Uc="9.15.0";const Ea=new hu.Yd("@firebase/firestore");function Eg(){return Ea.logLevel}function Ve(n,...e){if(Ea.logLevel<=hu.in.DEBUG){const t=e.map(Dg);Ea.debug(`Firestore (${Uc}): ${n}`,...t)}}function er(n,...e){if(Ea.logLevel<=hu.in.ERROR){const t=e.map(Dg);Ea.error(`Firestore (${Uc}): ${n}`,...t)}}function yu(n,...e){if(Ea.logLevel<=hu.in.WARN){const t=e.map(Dg);Ea.warn(`Firestore (${Uc}): ${n}`,...t)}}function Dg(n){if("string"==typeof n)return n;try{return JSON.stringify(n)}catch{return n}}function tt(n="Unexpected state"){const e=`FIRESTORE (${Uc}) INTERNAL ASSERTION FAILED: `+n;throw er(e),new Error(e)}function ct(n,e){n||tt()}function Ze(n,e){return n}const fe={OK:"ok",CANCELLED:"cancelled",UNKNOWN:"unknown",INVALID_ARGUMENT:"invalid-argument",DEADLINE_EXCEEDED:"deadline-exceeded",NOT_FOUND:"not-found",ALREADY_EXISTS:"already-exists",PERMISSION_DENIED:"permission-denied",UNAUTHENTICATED:"unauthenticated",RESOURCE_EXHAUSTED:"resource-exhausted",FAILED_PRECONDITION:"failed-precondition",ABORTED:"aborted",OUT_OF_RANGE:"out-of-range",UNIMPLEMENTED:"unimplemented",INTERNAL:"internal",UNAVAILABLE:"unavailable",DATA_LOSS:"data-loss"};class Te extends an.ZR{constructor(e,t){super(e,t),this.code=e,this.message=t,this.toString=()=>`${this.name}: [code=${this.code}]: ${this.message}`}}class Wr{constructor(){this.promise=new Promise((e,t)=>{this.resolve=e,this.reject=t})}}class bg{constructor(e,t){this.user=t,this.type="OAuth",this.headers=new Map,this.headers.set("Authorization",`Bearer ${e}`)}}class lS{getToken(){return Promise.resolve(null)}invalidateToken(){}start(e,t){e.enqueueRetryable(()=>t(Nr.UNAUTHENTICATED))}shutdown(){}}class xI{constructor(e){this.token=e,this.changeListener=null}getToken(){return Promise.resolve(this.token)}invalidateToken(){}start(e,t){this.changeListener=t,e.enqueueRetryable(()=>t(this.token.user))}shutdown(){this.changeListener=null}}class MI{constructor(e){this.t=e,this.currentUser=Nr.UNAUTHENTICATED,this.i=0,this.forceRefresh=!1,this.auth=null}start(e,t){var r=this;let o=this.i;const u=b=>this.i!==o?(o=this.i,t(b)):Promise.resolve();let l=new Wr;this.o=()=>{this.i++,this.currentUser=this.u(),l.resolve(),l=new Wr,e.enqueueRetryable(()=>u(this.currentUser))};const g=()=>{const b=l;e.enqueueRetryable((0,ve.Z)(function*(){yield b.promise,yield u(r.currentUser)}))},_=b=>{Ve("FirebaseAuthCredentialsProvider","Auth detected"),this.auth=b,this.auth.addAuthTokenListener(this.o),g()};this.t.onInit(b=>_(b)),setTimeout(()=>{if(!this.auth){const b=this.t.getImmediate({optional:!0});b?_(b):(Ve("FirebaseAuthCredentialsProvider","Auth not yet detected"),l.resolve(),l=new Wr)}},0),g()}getToken(){const e=this.i,t=this.forceRefresh;return this.forceRefresh=!1,this.auth?this.auth.getToken(t).then(r=>this.i!==e?(Ve("FirebaseAuthCredentialsProvider","getToken aborted due to token change."),this.getToken()):r?(ct("string"==typeof r.accessToken),new bg(r.accessToken,this.currentUser)):null):Promise.resolve(null)}invalidateToken(){this.forceRefresh=!0}shutdown(){this.auth&&this.auth.removeAuthTokenListener(this.o)}u(){const e=this.auth&&this.auth.getUid();return ct(null===e||"string"==typeof e),new Nr(e)}}class dS{constructor(e,t,r,o){this.h=e,this.l=t,this.m=r,this.g=o,this.type="FirstParty",this.user=Nr.FIRST_PARTY,this.p=new Map}I(){return this.g?this.g():(ct(!("object"!=typeof this.h||null===this.h||!this.h.auth||!this.h.auth.getAuthHeaderValueForFirstParty)),this.h.auth.getAuthHeaderValueForFirstParty([]))}get headers(){this.p.set("X-Goog-AuthUser",this.l);const e=this.I();return e&&this.p.set("Authorization",e),this.m&&this.p.set("X-Goog-Iam-Authorization-Token",this.m),this.p}}class Dt{constructor(e,t,r,o){this.h=e,this.l=t,this.m=r,this.g=o}getToken(){return Promise.resolve(new dS(this.h,this.l,this.m,this.g))}start(e,t){e.enqueueRetryable(()=>t(Nr.FIRST_PARTY))}shutdown(){}invalidateToken(){}}class RI{constructor(e){this.value=e,this.type="AppCheck",this.headers=new Map,e&&e.length>0&&this.headers.set("x-firebase-appcheck",this.value)}}class ab{constructor(e){this.T=e,this.forceRefresh=!1,this.appCheck=null,this.A=null}start(e,t){const r=u=>{null!=u.error&&Ve("FirebaseAppCheckTokenProvider",`Error getting App Check token; using placeholder token instead. Error: ${u.error.message}`);const l=u.token!==this.A;return this.A=u.token,Ve("FirebaseAppCheckTokenProvider",`Received ${l?"new":"existing"} token.`),l?t(u.token):Promise.resolve()};this.o=u=>{e.enqueueRetryable(()=>r(u))};const o=u=>{Ve("FirebaseAppCheckTokenProvider","AppCheck detected"),this.appCheck=u,this.appCheck.addTokenListener(this.o)};this.T.onInit(u=>o(u)),setTimeout(()=>{if(!this.appCheck){const u=this.T.getImmediate({optional:!0});u?o(u):Ve("FirebaseAppCheckTokenProvider","AppCheck not yet detected")}},0)}getToken(){const e=this.forceRefresh;return this.forceRefresh=!1,this.appCheck?this.appCheck.getToken(e).then(t=>t?(ct("string"==typeof t.token),this.A=t.token,new RI(t.token)):null):Promise.resolve(null)}invalidateToken(){this.forceRefresh=!0}shutdown(){this.appCheck&&this.appCheck.removeTokenListener(this.o)}}function Td(n){const e=typeof self<"u"&&(self.crypto||self.msCrypto),t=new Uint8Array(n);if(e&&"function"==typeof e.getRandomValues)e.getRandomValues(t);else for(let r=0;r<n;r++)t[r]=Math.floor(256*Math.random());return t}class NI{static R(){const e="ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789",t=Math.floor(256/e.length)*e.length;let r="";for(;r.length<20;){const o=Td(40);for(let u=0;u<o.length;++u)r.length<20&&o[u]<t&&(r+=e.charAt(o[u]%e.length))}return r}}function Mt(n,e){return n<e?-1:n>e?1:0}function Da(n,e,t){return n.length===e.length&&n.every((r,o)=>t(r,e[o]))}function jn(n){return n+"\0"}class Hn{constructor(e,t){if(this.seconds=e,this.nanoseconds=t,t<0)throw new Te(fe.INVALID_ARGUMENT,"Timestamp nanoseconds out of range: "+t);if(t>=1e9)throw new Te(fe.INVALID_ARGUMENT,"Timestamp nanoseconds out of range: "+t);if(e<-62135596800)throw new Te(fe.INVALID_ARGUMENT,"Timestamp seconds out of range: "+e);if(e>=253402300800)throw new Te(fe.INVALID_ARGUMENT,"Timestamp seconds out of range: "+e)}static now(){return Hn.fromMillis(Date.now())}static fromDate(e){return Hn.fromMillis(e.getTime())}static fromMillis(e){const t=Math.floor(e/1e3),r=Math.floor(1e6*(e-1e3*t));return new Hn(t,r)}toDate(){return new Date(this.toMillis())}toMillis(){return 1e3*this.seconds+this.nanoseconds/1e6}_compareTo(e){return this.seconds===e.seconds?Mt(this.nanoseconds,e.nanoseconds):Mt(this.seconds,e.seconds)}isEqual(e){return e.seconds===this.seconds&&e.nanoseconds===this.nanoseconds}toString(){return"Timestamp(seconds="+this.seconds+", nanoseconds="+this.nanoseconds+")"}toJSON(){return{seconds:this.seconds,nanoseconds:this.nanoseconds}}valueOf(){return String(this.seconds- -62135596800).padStart(12,"0")+"."+String(this.nanoseconds).padStart(9,"0")}}class mt{constructor(e){this.timestamp=e}static fromTimestamp(e){return new mt(e)}static min(){return new mt(new Hn(0,0))}static max(){return new mt(new Hn(253402300799,999999999))}compareTo(e){return this.timestamp._compareTo(e.timestamp)}isEqual(e){return this.timestamp.isEqual(e.timestamp)}toMicroseconds(){return 1e6*this.timestamp.seconds+this.timestamp.nanoseconds/1e3}toString(){return"SnapshotVersion("+this.timestamp.toString()+")"}toTimestamp(){return this.timestamp}}class Sd{constructor(e,t,r){void 0===t?t=0:t>e.length&&tt(),void 0===r?r=e.length-t:r>e.length-t&&tt(),this.segments=e,this.offset=t,this.len=r}get length(){return this.len}isEqual(e){return 0===Sd.comparator(this,e)}child(e){const t=this.segments.slice(this.offset,this.limit());return e instanceof Sd?e.forEach(r=>{t.push(r)}):t.push(e),this.construct(t)}limit(){return this.offset+this.length}popFirst(e){return this.construct(this.segments,this.offset+(e=void 0===e?1:e),this.length-e)}popLast(){return this.construct(this.segments,this.offset,this.length-1)}firstSegment(){return this.segments[this.offset]}lastSegment(){return this.get(this.length-1)}get(e){return this.segments[this.offset+e]}isEmpty(){return 0===this.length}isPrefixOf(e){if(e.length<this.length)return!1;for(let t=0;t<this.length;t++)if(this.get(t)!==e.get(t))return!1;return!0}isImmediateParentOf(e){if(this.length+1!==e.length)return!1;for(let t=0;t<this.length;t++)if(this.get(t)!==e.get(t))return!1;return!0}forEach(e){for(let t=this.offset,r=this.limit();t<r;t++)e(this.segments[t])}toArray(){return this.segments.slice(this.offset,this.limit())}static comparator(e,t){const r=Math.min(e.length,t.length);for(let o=0;o<r;o++){const u=e.get(o),l=t.get(o);if(u<l)return-1;if(u>l)return 1}return e.length<t.length?-1:e.length>t.length?1:0}}class rn extends Sd{construct(e,t,r){return new rn(e,t,r)}canonicalString(){return this.toArray().join("/")}toString(){return this.canonicalString()}static fromString(...e){const t=[];for(const r of e){if(r.indexOf("//")>=0)throw new Te(fe.INVALID_ARGUMENT,`Invalid segment (${r}). Paths must not contain // in them.`);t.push(...r.split("/").filter(o=>o.length>0))}return new rn(t)}static emptyPath(){return new rn([])}}const PI=/^[_a-zA-Z][_a-zA-Z0-9]*$/;class zn extends Sd{construct(e,t,r){return new zn(e,t,r)}static isValidIdentifier(e){return PI.test(e)}canonicalString(){return this.toArray().map(e=>(e=e.replace(/\\/g,"\\\\").replace(/`/g,"\\`"),zn.isValidIdentifier(e)||(e="`"+e+"`"),e)).join(".")}toString(){return this.canonicalString()}isKeyField(){return 1===this.length&&"__name__"===this.get(0)}static keyField(){return new zn(["__name__"])}static fromServerFormat(e){const t=[];let r="",o=0;const u=()=>{if(0===r.length)throw new Te(fe.INVALID_ARGUMENT,`Invalid field path (${e}). Paths must not be empty, begin with '.', end with '.', or contain '..'`);t.push(r),r=""};let l=!1;for(;o<e.length;){const g=e[o];if("\\"===g){if(o+1===e.length)throw new Te(fe.INVALID_ARGUMENT,"Path has trailing escape character: "+e);const _=e[o+1];if("\\"!==_&&"."!==_&&"`"!==_)throw new Te(fe.INVALID_ARGUMENT,"Path has invalid escape sequence: "+e);r+=_,o+=2}else"`"===g?(l=!l,o++):"."!==g||l?(r+=g,o++):(u(),o++)}if(u(),l)throw new Te(fe.INVALID_ARGUMENT,"Unterminated ` in path: "+e);return new zn(t)}static emptyPath(){return new zn([])}}class Ge{constructor(e){this.path=e}static fromPath(e){return new Ge(rn.fromString(e))}static fromName(e){return new Ge(rn.fromString(e).popFirst(5))}static empty(){return new Ge(rn.emptyPath())}get collectionGroup(){return this.path.popLast().lastSegment()}hasCollectionId(e){return this.path.length>=2&&this.path.get(this.path.length-2)===e}getCollectionGroup(){return this.path.get(this.path.length-2)}getCollectionPath(){return this.path.popLast()}isEqual(e){return null!==e&&0===rn.comparator(this.path,e.path)}toString(){return this.path.toString()}static comparator(e,t){return rn.comparator(e.path,t.path)}static isDocumentKey(e){return e.length%2==0}static fromSegments(e){return new Ge(new rn(e.slice()))}}class _f{constructor(e,t,r,o){this.indexId=e,this.collectionGroup=t,this.fields=r,this.indexState=o}}function bv(n){return n.fields.find(e=>2===e.kind)}function Bc(n){return n.fields.filter(e=>2!==e.kind)}_f.UNKNOWN_ID=-1;class vu{constructor(e,t){this.fieldPath=e,this.kind=t}}class If{constructor(e,t){this.sequenceNumber=e,this.offset=t}static empty(){return new If(0,Yi.min())}}function OI(n,e){const t=n.toTimestamp().seconds,r=n.toTimestamp().nanoseconds+1,o=mt.fromTimestamp(1e9===r?new Hn(t+1,0):new Hn(t,r));return new Yi(o,Ge.empty(),e)}function wf(n){return new Yi(n.readTime,n.key,-1)}class Yi{constructor(e,t,r){this.readTime=e,this.documentKey=t,this.largestBatchId=r}static min(){return new Yi(mt.min(),Ge.empty(),-1)}static max(){return new Yi(mt.max(),Ge.empty(),-1)}}function Cg(n,e){let t=n.readTime.compareTo(e.readTime);return 0!==t?t:(t=Ge.comparator(n.documentKey,e.documentKey),0!==t?t:Mt(n.largestBatchId,e.largestBatchId))}const Cv="The current tab is not in the required state to perform this operation. It might be necessary to refresh the browser tab.";class kI{constructor(){this.onCommittedListeners=[]}addOnCommittedListener(e){this.onCommittedListeners.push(e)}raiseOnCommittedEvent(){this.onCommittedListeners.forEach(e=>e())}}function Us(n){return $c.apply(this,arguments)}function $c(){return $c=(0,ve.Z)(function*(n){if(n.code!==fe.FAILED_PRECONDITION||n.message!==Cv)throw n;Ve("LocalStore","Unexpectedly lost primary lease")}),$c.apply(this,arguments)}class le{constructor(e){this.nextCallback=null,this.catchCallback=null,this.result=void 0,this.error=void 0,this.isDone=!1,this.callbackAttached=!1,e(t=>{this.isDone=!0,this.result=t,this.nextCallback&&this.nextCallback(t)},t=>{this.isDone=!0,this.error=t,this.catchCallback&&this.catchCallback(t)})}catch(e){return this.next(void 0,e)}next(e,t){return this.callbackAttached&&tt(),this.callbackAttached=!0,this.isDone?this.error?this.wrapFailure(t,this.error):this.wrapSuccess(e,this.result):new le((r,o)=>{this.nextCallback=u=>{this.wrapSuccess(e,u).next(r,o)},this.catchCallback=u=>{this.wrapFailure(t,u).next(r,o)}})}toPromise(){return new Promise((e,t)=>{this.next(e,t)})}wrapUserFunction(e){try{const t=e();return t instanceof le?t:le.resolve(t)}catch(t){return le.reject(t)}}wrapSuccess(e,t){return e?this.wrapUserFunction(()=>e(t)):le.resolve(t)}wrapFailure(e,t){return e?this.wrapUserFunction(()=>e(t)):le.reject(t)}static resolve(e){return new le((t,r)=>{t(e)})}static reject(e){return new le((t,r)=>{r(e)})}static waitFor(e){return new le((t,r)=>{let o=0,u=0,l=!1;e.forEach(g=>{++o,g.next(()=>{++u,l&&u===o&&t()},_=>r(_))}),l=!0,u===o&&t()})}static or(e){let t=le.resolve(!1);for(const r of e)t=t.next(o=>o?le.resolve(o):r());return t}static forEach(e,t){const r=[];return e.forEach((o,u)=>{r.push(t.call(this,o,u))}),this.waitFor(r)}static mapArray(e,t){return new le((r,o)=>{const u=e.length,l=new Array(u);let g=0;for(let _=0;_<u;_++){const b=_;t(e[b]).next(S=>{l[b]=S,++g,g===u&&r(l)},S=>o(S))}})}static doWhile(e,t){return new le((r,o)=>{const u=()=>{!0===e()?t().next(()=>{u()},o):r()};u()})}}class Tg{constructor(e,t){this.action=e,this.transaction=t,this.aborted=!1,this.P=new Wr,this.transaction.oncomplete=()=>{this.P.resolve()},this.transaction.onabort=()=>{t.error?this.P.reject(new Ad(e,t.error)):this.P.resolve()},this.transaction.onerror=r=>{const o=Tv(r.target.error);this.P.reject(new Ad(e,o))}}static open(e,t,r,o){try{return new Tg(t,e.transaction(o,r))}catch(u){throw new Ad(t,u)}}get v(){return this.P.promise}abort(e){e&&this.P.reject(e),this.aborted||(Ve("SimpleDb","Aborting transaction:",e?e.message:"Client-initiated abort"),this.aborted=!0,this.transaction.abort())}V(){const e=this.transaction;this.aborted||"function"!=typeof e.commit||e.commit()}store(e){const t=this.transaction.objectStore(e);return new lb(t)}}class ao{constructor(e,t,r){this.name=e,this.version=t,this.S=r,12.2===ao.D((0,an.z$)())&&er("Firestore persistence suffers from a bug in iOS 12.2 Safari that may cause your app to stop working. See https://stackoverflow.com/q/56496296/110915 for details and a potential workaround.")}static delete(e){return Ve("SimpleDb","Removing database:",e),_u(window.indexedDB.deleteDatabase(e)).toPromise()}static C(){if(!(0,an.hl)())return!1;if(ao.N())return!0;const e=(0,an.z$)(),t=ao.D(e),r=0<t&&t<10,o=ao.k(e),u=0<o&&o<4.5;return!(e.indexOf("MSIE ")>0||e.indexOf("Trident/")>0||e.indexOf("Edge/")>0||r||u)}static N(){var e;return typeof process<"u"&&"YES"===(null===(e=process.env)||void 0===e?void 0:e.O)}static M(e,t){return e.store(t)}static D(e){const t=e.match(/i(?:phone|pad|pod) os ([\d_]+)/i),r=t?t[1].split("_").slice(0,2).join("."):"-1";return Number(r)}static k(e){const t=e.match(/Android ([\d.]+)/i),r=t?t[1].split(".").slice(0,2).join("."):"-1";return Number(r)}F(e){var t=this;return(0,ve.Z)(function*(){return t.db||(Ve("SimpleDb","Opening database:",t.name),t.db=yield new Promise((r,o)=>{const u=indexedDB.open(t.name,t.version);u.onsuccess=l=>{r(l.target.result)},u.onblocked=()=>{o(new Ad(e,"Cannot upgrade IndexedDB schema while another tab is open. Close all tabs that access Firestore and reload this page to proceed."))},u.onerror=l=>{const g=l.target.error;o("VersionError"===g.name?new Te(fe.FAILED_PRECONDITION,"A newer version of the Firestore SDK was previously used and so the persisted data is not compatible with the version of the SDK you are now using. The SDK will operate with persistence disabled. If you need persistence, please re-upgrade to a newer version of the SDK or else clear the persisted IndexedDB data for your app to start fresh."):"InvalidStateError"===g.name?new Te(fe.FAILED_PRECONDITION,"Unable to open an IndexedDB connection. This could be due to running in a private browsing session on a browser whose private browsing sessions do not support IndexedDB: "+g):new Ad(e,g))},u.onupgradeneeded=l=>{Ve("SimpleDb",'Database "'+t.name+'" requires upgrade from version:',l.oldVersion),t.S.$(l.target.result,u.transaction,l.oldVersion,t.version).next(()=>{Ve("SimpleDb","Database upgrade to version "+t.version+" complete")})}})),t.B&&(t.db.onversionchange=r=>t.B(r)),t.db})()}L(e){this.B=e,this.db&&(this.db.onversionchange=t=>e(t))}runTransaction(e,t,r,o){var u=this;return(0,ve.Z)(function*(){const l="readonly"===t;let g=0;for(;;){++g;try{u.db=yield u.F(e);const _=Tg.open(u.db,e,l?"readonly":"readwrite",r),b=o(_).next(S=>(_.V(),S)).catch(S=>(_.abort(S),le.reject(S))).toPromise();return b.catch(()=>{}),yield _.v,b}catch(_){const b=_,S="FirebaseError"!==b.name&&g<3;if(Ve("SimpleDb","Transaction failed with error:",b.message,"Retrying:",S),u.close(),!S)return Promise.reject(b)}}})()}close(){this.db&&this.db.close(),this.db=void 0}}class FI{constructor(e){this.q=e,this.U=!1,this.K=null}get isDone(){return this.U}get G(){return this.K}set cursor(e){this.q=e}done(){this.U=!0}j(e){this.K=e}delete(){return _u(this.q.delete())}}class Ad extends Te{constructor(e,t){super(fe.UNAVAILABLE,`IndexedDB transaction '${e}' failed: ${t}`),this.name="IndexedDbTransactionError"}}function ba(n){return"IndexedDbTransactionError"===n.name}class lb{constructor(e){this.store=e}put(e,t){let r;return void 0!==t?(Ve("SimpleDb","PUT",this.store.name,e,t),r=this.store.put(t,e)):(Ve("SimpleDb","PUT",this.store.name,"<auto-key>",e),r=this.store.put(e)),_u(r)}add(e){return Ve("SimpleDb","ADD",this.store.name,e,e),_u(this.store.add(e))}get(e){return _u(this.store.get(e)).next(t=>(void 0===t&&(t=null),Ve("SimpleDb","GET",this.store.name,e,t),t))}delete(e){return Ve("SimpleDb","DELETE",this.store.name,e),_u(this.store.delete(e))}count(){return Ve("SimpleDb","COUNT",this.store.name),_u(this.store.count())}W(e,t){const r=this.options(e,t);if(r.index||"function"!=typeof this.store.getAll){const o=this.cursor(r),u=[];return this.H(o,(l,g)=>{u.push(g)}).next(()=>u)}{const o=this.store.getAll(r.range);return new le((u,l)=>{o.onerror=g=>{l(g.target.error)},o.onsuccess=g=>{u(g.target.result)}})}}J(e,t){const r=this.store.getAll(e,null===t?void 0:t);return new le((o,u)=>{r.onerror=l=>{u(l.target.error)},r.onsuccess=l=>{o(l.target.result)}})}Y(e,t){Ve("SimpleDb","DELETE ALL",this.store.name);const r=this.options(e,t);r.X=!1;const o=this.cursor(r);return this.H(o,(u,l,g)=>g.delete())}Z(e,t){let r;t?r=e:(r={},t=e);const o=this.cursor(r);return this.H(o,t)}tt(e){const t=this.cursor({});return new le((r,o)=>{t.onerror=u=>{const l=Tv(u.target.error);o(l)},t.onsuccess=u=>{const l=u.target.result;l?e(l.primaryKey,l.value).next(g=>{g?l.continue():r()}):r()}})}H(e,t){const r=[];return new le((o,u)=>{e.onerror=l=>{u(l.target.error)},e.onsuccess=l=>{const g=l.target.result;if(!g)return void o();const _=new FI(g),b=t(g.primaryKey,g.value,_);if(b instanceof le){const S=b.catch(P=>(_.done(),le.reject(P)));r.push(S)}_.isDone?o():null===_.G?g.continue():g.continue(_.G)}}).next(()=>le.waitFor(r))}options(e,t){let r;return void 0!==e&&("string"==typeof e?r=e:t=e),{index:r,range:t}}cursor(e){let t="next";if(e.reverse&&(t="prev"),e.index){const r=this.store.index(e.index);return e.X?r.openKeyCursor(e.range,t):r.openCursor(e.range,t)}return this.store.openCursor(e.range,t)}}function _u(n){return new le((e,t)=>{n.onsuccess=r=>{e(r.target.result)},n.onerror=r=>{const o=Tv(r.target.error);t(o)}})}let LI=!1;function Tv(n){const e=ao.D((0,an.z$)());if(e>=12.2&&e<13){const t="An internal error was encountered in the Indexed Database server";if(n.message.indexOf(t)>=0){const r=new Te("internal",`IOS_INDEXEDDB_BUG1: IndexedDb has thrown '${t}'. This is likely due to an unavoidable bug in iOS. See https://stackoverflow.com/q/56496296/110915 for details and a potential workaround.`);return LI||(LI=!0,setTimeout(()=>{throw r},0)),r}}return n}class fS{constructor(e,t){this.asyncQueue=e,this.et=t,this.task=null}start(){this.nt(15e3)}stop(){this.task&&(this.task.cancel(),this.task=null)}get started(){return null!==this.task}nt(e){var t=this;Ve("IndexBackiller",`Scheduled in ${e}ms`),this.task=this.asyncQueue.enqueueAfterDelay("index_backfill",e,(0,ve.Z)(function*(){t.task=null;try{Ve("IndexBackiller",`Documents written: ${yield t.et.st()}`)}catch(r){ba(r)?Ve("IndexBackiller","Ignoring IndexedDB error during index backfill: ",r):yield Us(r)}yield t.nt(6e4)}))}}class pS{constructor(e,t){this.localStore=e,this.persistence=t}st(e=50){var t=this;return(0,ve.Z)(function*(){return t.persistence.runTransaction("Backfill Indexes","readwrite-primary",r=>t.it(r,e))})()}it(e,t){const r=new Set;let o=t,u=!0;return le.doWhile(()=>!0===u&&o>0,()=>this.localStore.indexManager.getNextCollectionGroupToUpdate(e).next(l=>{if(null!==l&&!r.has(l))return Ve("IndexBackiller",`Processing collection: ${l}`),this.rt(e,l,o).next(g=>{o-=g,r.add(l)});u=!1})).next(()=>t-o)}rt(e,t,r){return this.localStore.indexManager.getMinOffsetFromCollectionGroup(e,t).next(o=>this.localStore.localDocuments.getNextDocuments(e,t,o,r).next(u=>{const l=u.changes;return this.localStore.indexManager.updateIndexEntries(e,l).next(()=>this.ot(o,u)).next(g=>(Ve("IndexBackiller",`Updating offset: ${g}`),this.localStore.indexManager.updateCollectionGroup(e,t,g))).next(()=>l.size)}))}ot(e,t){let r=e;return t.changes.forEach((o,u)=>{const l=wf(u);Cg(l,r)>0&&(r=l)}),new Yi(r.readTime,r.documentKey,Math.max(t.batchId,e.largestBatchId))}}let Vs=(()=>{class n{constructor(t,r){this.previousValue=t,r&&(r.sequenceNumberHandler=o=>this.ut(o),this.ct=o=>r.writeSequenceNumber(o))}ut(t){return this.previousValue=Math.max(t,this.previousValue),this.previousValue}next(){const t=++this.previousValue;return this.ct&&this.ct(t),t}}return n.at=-1,n})();class gS{constructor(e,t,r,o,u,l,g,_){this.databaseId=e,this.appId=t,this.persistenceKey=r,this.host=o,this.ssl=u,this.forceLongPolling=l,this.autoDetectLongPolling=g,this.useFetchStreams=_}}class jc{constructor(e,t){this.projectId=e,this.database=t||"(default)"}static empty(){return new jc("","")}get isDefaultDatabase(){return"(default)"===this.database}isEqual(e){return e instanceof jc&&e.projectId===this.projectId&&e.database===this.database}}function db(n){let e=0;for(const t in n)Object.prototype.hasOwnProperty.call(n,t)&&e++;return e}function Iu(n,e){for(const t in n)Object.prototype.hasOwnProperty.call(n,t)&&e(t,n[t])}function Ef(n){for(const e in n)if(Object.prototype.hasOwnProperty.call(n,e))return!1;return!0}function Df(n){return null==n}function bf(n){return 0===n&&1/n==-1/0}function Sv(n){return"number"==typeof n&&Number.isInteger(n)&&!bf(n)&&n<=Number.MAX_SAFE_INTEGER&&n>=Number.MIN_SAFE_INTEGER}class Pr{constructor(e){this.binaryString=e}static fromBase64String(e){const t=atob(e);return new Pr(t)}static fromUint8Array(e){const t=function(r){let o="";for(let u=0;u<r.length;++u)o+=String.fromCharCode(r[u]);return o}(e);return new Pr(t)}[Symbol.iterator](){let e=0;return{next:()=>e<this.binaryString.length?{value:this.binaryString.charCodeAt(e++),done:!1}:{value:void 0,done:!0}}}toBase64(){return btoa(this.binaryString)}toUint8Array(){return function(e){const t=new Uint8Array(e.length);for(let r=0;r<e.length;r++)t[r]=e.charCodeAt(r);return t}(this.binaryString)}approximateByteSize(){return 2*this.binaryString.length}compareTo(e){return Mt(this.binaryString,e.binaryString)}isEqual(e){return this.binaryString===e.binaryString}}Pr.EMPTY_BYTE_STRING=new Pr("");const hb=new RegExp(/^\d{4}-\d\d-\d\dT\d\d:\d\d:\d\d(?:\.(\d+))?Z$/);function wu(n){if(ct(!!n),"string"==typeof n){let e=0;const t=hb.exec(n);if(ct(!!t),t[1]){let o=t[1];o=(o+"000000000").substr(0,9),e=Number(o)}const r=new Date(n);return{seconds:Math.floor(r.getTime()/1e3),nanos:e}}return{seconds:tr(n.seconds),nanos:tr(n.nanos)}}function tr(n){return"number"==typeof n?n:"string"==typeof n?Number(n):0}function Hc(n){return"string"==typeof n?Pr.fromBase64String(n):Pr.fromUint8Array(n)}function Sg(n){var e,t;return"server_timestamp"===(null===(t=((null===(e=n?.mapValue)||void 0===e?void 0:e.fields)||{}).__type__)||void 0===t?void 0:t.stringValue)}function UI(n){const e=n.mapValue.fields.__previous_value__;return Sg(e)?UI(e):e}function Tf(n){const e=wu(n.mapValue.fields.__local_write_time__.timestampValue);return new Hn(e.seconds,e.nanos)}const Bs={mapValue:{fields:{__type__:{stringValue:"__max__"}}}},Ag={nullValue:"NULL_VALUE"};function Eu(n){return"nullValue"in n?0:"booleanValue"in n?1:"integerValue"in n||"doubleValue"in n?2:"timestampValue"in n?3:"stringValue"in n?5:"bytesValue"in n?6:"referenceValue"in n?7:"geoPointValue"in n?8:"arrayValue"in n?9:"mapValue"in n?Sg(n)?4:$I(n)?9007199254740991:10:tt()}function Uo(n,e){if(n===e)return!0;const t=Eu(n);if(t!==Eu(e))return!1;switch(t){case 0:case 9007199254740991:return!0;case 1:return n.booleanValue===e.booleanValue;case 4:return Tf(n).isEqual(Tf(e));case 3:return function(r,o){if("string"==typeof r.timestampValue&&"string"==typeof o.timestampValue&&r.timestampValue.length===o.timestampValue.length)return r.timestampValue===o.timestampValue;const u=wu(r.timestampValue),l=wu(o.timestampValue);return u.seconds===l.seconds&&u.nanos===l.nanos}(n,e);case 5:return n.stringValue===e.stringValue;case 6:return o=e,Hc(n.bytesValue).isEqual(Hc(o.bytesValue));case 7:return n.referenceValue===e.referenceValue;case 8:return function(r,o){return tr(r.geoPointValue.latitude)===tr(o.geoPointValue.latitude)&&tr(r.geoPointValue.longitude)===tr(o.geoPointValue.longitude)}(n,e);case 2:return function(r,o){if("integerValue"in r&&"integerValue"in o)return tr(r.integerValue)===tr(o.integerValue);if("doubleValue"in r&&"doubleValue"in o){const u=tr(r.doubleValue),l=tr(o.doubleValue);return u===l?bf(u)===bf(l):isNaN(u)&&isNaN(l)}return!1}(n,e);case 9:return Da(n.arrayValue.values||[],e.arrayValue.values||[],Uo);case 10:return function(r,o){const u=r.mapValue.fields||{},l=o.mapValue.fields||{};if(db(u)!==db(l))return!1;for(const g in u)if(u.hasOwnProperty(g)&&(void 0===l[g]||!Uo(u[g],l[g])))return!1;return!0}(n,e);default:return tt()}var o}function xd(n,e){return void 0!==(n.values||[]).find(t=>Uo(t,e))}function Du(n,e){if(n===e)return 0;const t=Eu(n),r=Eu(e);if(t!==r)return Mt(t,r);switch(t){case 0:case 9007199254740991:return 0;case 1:return Mt(n.booleanValue,e.booleanValue);case 2:return function(o,u){const l=tr(o.integerValue||o.doubleValue),g=tr(u.integerValue||u.doubleValue);return l<g?-1:l>g?1:l===g?0:isNaN(l)?isNaN(g)?0:-1:1}(n,e);case 3:return Av(n.timestampValue,e.timestampValue);case 4:return Av(Tf(n),Tf(e));case 5:return Mt(n.stringValue,e.stringValue);case 6:return function(o,u){const l=Hc(o),g=Hc(u);return l.compareTo(g)}(n.bytesValue,e.bytesValue);case 7:return function(o,u){const l=o.split("/"),g=u.split("/");for(let _=0;_<l.length&&_<g.length;_++){const b=Mt(l[_],g[_]);if(0!==b)return b}return Mt(l.length,g.length)}(n.referenceValue,e.referenceValue);case 8:return function(o,u){const l=Mt(tr(o.latitude),tr(u.latitude));return 0!==l?l:Mt(tr(o.longitude),tr(u.longitude))}(n.geoPointValue,e.geoPointValue);case 9:return function(o,u){const l=o.values||[],g=u.values||[];for(let _=0;_<l.length&&_<g.length;++_){const b=Du(l[_],g[_]);if(b)return b}return Mt(l.length,g.length)}(n.arrayValue,e.arrayValue);case 10:return function(o,u){if(o===Bs.mapValue&&u===Bs.mapValue)return 0;if(o===Bs.mapValue)return 1;if(u===Bs.mapValue)return-1;const l=o.fields||{},g=Object.keys(l),_=u.fields||{},b=Object.keys(_);g.sort(),b.sort();for(let S=0;S<g.length&&S<b.length;++S){const P=Mt(g[S],b[S]);if(0!==P)return P;const W=Du(l[g[S]],_[b[S]]);if(0!==W)return W}return Mt(g.length,b.length)}(n.mapValue,e.mapValue);default:throw tt()}}function Av(n,e){if("string"==typeof n&&"string"==typeof e&&n.length===e.length)return Mt(n,e);const t=wu(n),r=wu(e),o=Mt(t.seconds,r.seconds);return 0!==o?o:Mt(t.nanos,r.nanos)}function Md(n){return Sf(n)}function Sf(n){return"nullValue"in n?"null":"booleanValue"in n?""+n.booleanValue:"integerValue"in n?""+n.integerValue:"doubleValue"in n?""+n.doubleValue:"timestampValue"in n?function(r){const o=wu(r);return`time(${o.seconds},${o.nanos})`}(n.timestampValue):"stringValue"in n?n.stringValue:"bytesValue"in n?Hc(n.bytesValue).toBase64():"referenceValue"in n?Ge.fromName(n.referenceValue).toString():"geoPointValue"in n?`geo(${(e=n.geoPointValue).latitude},${e.longitude})`:"arrayValue"in n?function(r){let o="[",u=!0;for(const l of r.values||[])u?u=!1:o+=",",o+=Sf(l);return o+"]"}(n.arrayValue):"mapValue"in n?function(r){const o=Object.keys(r.fields||{}).sort();let u="{",l=!0;for(const g of o)l?l=!1:u+=",",u+=`${g}:${Sf(r.fields[g])}`;return u+"}"}(n.mapValue):tt();var e}function zc(n,e){return{referenceValue:`projects/${n.projectId}/databases/${n.database}/documents/${e.path.canonicalString()}`}}function xg(n){return!!n&&"integerValue"in n}function Rd(n){return!!n&&"arrayValue"in n}function VI(n){return!!n&&"nullValue"in n}function BI(n){return!!n&&"doubleValue"in n&&isNaN(Number(n.doubleValue))}function Mg(n){return!!n&&"mapValue"in n}function Wc(n){if(n.geoPointValue)return{geoPointValue:Object.assign({},n.geoPointValue)};if(n.timestampValue&&"object"==typeof n.timestampValue)return{timestampValue:Object.assign({},n.timestampValue)};if(n.mapValue){const e={mapValue:{fields:{}}};return Iu(n.mapValue.fields,(t,r)=>e.mapValue.fields[t]=Wc(r)),e}if(n.arrayValue){const e={arrayValue:{values:[]}};for(let t=0;t<(n.arrayValue.values||[]).length;++t)e.arrayValue.values[t]=Wc(n.arrayValue.values[t]);return e}return Object.assign({},n)}function $I(n){return"__max__"===(((n.mapValue||{}).fields||{}).__type__||{}).stringValue}function jI(n){return"nullValue"in n?Ag:"booleanValue"in n?{booleanValue:!1}:"integerValue"in n||"doubleValue"in n?{doubleValue:NaN}:"timestampValue"in n?{timestampValue:{seconds:Number.MIN_SAFE_INTEGER}}:"stringValue"in n?{stringValue:""}:"bytesValue"in n?{bytesValue:""}:"referenceValue"in n?zc(jc.empty(),Ge.empty()):"geoPointValue"in n?{geoPointValue:{latitude:-90,longitude:-180}}:"arrayValue"in n?{arrayValue:{}}:"mapValue"in n?{mapValue:{}}:tt()}function fb(n){return"nullValue"in n?{booleanValue:!1}:"booleanValue"in n?{doubleValue:NaN}:"integerValue"in n||"doubleValue"in n?{timestampValue:{seconds:Number.MIN_SAFE_INTEGER}}:"timestampValue"in n?{stringValue:""}:"stringValue"in n?{bytesValue:""}:"bytesValue"in n?zc(jc.empty(),Ge.empty()):"referenceValue"in n?{geoPointValue:{latitude:-90,longitude:-180}}:"geoPointValue"in n?{arrayValue:{}}:"arrayValue"in n?{mapValue:{}}:"mapValue"in n?Bs:tt()}function HI(n,e){const t=Du(n.value,e.value);return 0!==t?t:n.inclusive&&!e.inclusive?-1:!n.inclusive&&e.inclusive?1:0}function zI(n,e){const t=Du(n.value,e.value);return 0!==t?t:n.inclusive&&!e.inclusive?1:!n.inclusive&&e.inclusive?-1:0}class bu{constructor(e,t){this.position=e,this.inclusive=t}}function WI(n,e,t){let r=0;for(let o=0;o<n.position.length;o++){const u=e[o],l=n.position[o];if(r=u.field.isKeyField()?Ge.comparator(Ge.fromName(l.referenceValue),t.key):Du(l,t.data.field(u.field)),"desc"===u.dir&&(r*=-1),0!==r)break}return r}function GI(n,e){if(null===n)return null===e;if(null===e||n.inclusive!==e.inclusive||n.position.length!==e.position.length)return!1;for(let t=0;t<n.position.length;t++)if(!Uo(n.position[t],e.position[t]))return!1;return!0}class qI{}class tn extends qI{constructor(e,t,r){super(),this.field=e,this.op=t,this.value=r}static create(e,t,r){return e.isKeyField()?"in"===t||"not-in"===t?this.createKeyFieldInFilter(e,t,r):new Rv(e,t,r):"array-contains"===t?new pb(e,r):"in"===t?new Ng(e,r):"not-in"===t?new gb(e,r):"array-contains-any"===t?new mb(e,r):new tn(e,t,r)}static createKeyFieldInFilter(e,t,r){return"in"===t?new XI(e,r):new Nv(e,r)}matches(e){const t=e.data.field(this.field);return"!="===this.op?null!==t&&this.matchesComparison(Du(t,this.value)):null!==t&&Eu(this.value)===Eu(t)&&this.matchesComparison(Du(t,this.value))}matchesComparison(e){switch(this.op){case"<":return e<0;case"<=":return e<=0;case"==":return 0===e;case"!=":return 0!==e;case">":return e>0;case">=":return e>=0;default:return tt()}}isInequality(){return["<","<=",">",">=","!=","not-in"].indexOf(this.op)>=0}getFlattenedFilters(){return[this]}getFilters(){return[this]}getFirstInequalityField(){return this.isInequality()?this.field:null}}class fn extends qI{constructor(e,t){super(),this.filters=e,this.op=t,this.ht=null}static create(e,t){return new fn(e,t)}matches(e){return Gc(this)?void 0===this.filters.find(t=>!t.matches(e)):void 0!==this.filters.find(t=>t.matches(e))}getFlattenedFilters(){return null!==this.ht||(this.ht=this.filters.reduce((e,t)=>e.concat(t.getFlattenedFilters()),[])),this.ht}getFilters(){return Object.assign([],this.filters)}getFirstInequalityField(){const e=this.lt(t=>t.isInequality());return null!==e?e.field:null}lt(e){for(const t of this.getFlattenedFilters())if(e(t))return t;return null}}function Gc(n){return"and"===n.op}function xv(n){return"or"===n.op}function ZI(n){return Mv(n)&&Gc(n)}function Mv(n){for(const e of n.filters)if(e instanceof fn)return!1;return!0}function KI(n){if(n instanceof tn)return n.field.canonicalString()+n.op.toString()+Md(n.value);{const e=n.filters.map(t=>KI(t)).join(",");return`${n.op}(${e})`}}function YI(n,e){return n instanceof tn?(t=n,(r=e)instanceof tn&&t.op===r.op&&t.field.isEqual(r.field)&&Uo(t.value,r.value)):n instanceof fn?function(t,r){return r instanceof fn&&t.op===r.op&&t.filters.length===r.filters.length&&t.filters.reduce((o,u,l)=>o&&YI(u,r.filters[l]),!0)}(n,e):void tt();var t,r}function QI(n,e){const t=n.filters.concat(e);return fn.create(t,n.op)}function Rg(n){return n instanceof tn?`${(e=n).field.canonicalString()} ${e.op} ${Md(e.value)}`:n instanceof fn?function(e){return e.op.toString()+" {"+e.getFilters().map(Rg).join(" ,")+"}"}(n):"Filter";var e}class Rv extends tn{constructor(e,t,r){super(e,t,r),this.key=Ge.fromName(r.referenceValue)}matches(e){const t=Ge.comparator(e.key,this.key);return this.matchesComparison(t)}}class XI extends tn{constructor(e,t){super(e,"in",t),this.keys=JI(0,t)}matches(e){return this.keys.some(t=>t.isEqual(e.key))}}class Nv extends tn{constructor(e,t){super(e,"not-in",t),this.keys=JI(0,t)}matches(e){return!this.keys.some(t=>t.isEqual(e.key))}}function JI(n,e){var t;return((null===(t=e.arrayValue)||void 0===t?void 0:t.values)||[]).map(r=>Ge.fromName(r.referenceValue))}class pb extends tn{constructor(e,t){super(e,"array-contains",t)}matches(e){const t=e.data.field(this.field);return Rd(t)&&xd(t.arrayValue,this.value)}}class Ng extends tn{constructor(e,t){super(e,"in",t)}matches(e){const t=e.data.field(this.field);return null!==t&&xd(this.value.arrayValue,t)}}class gb extends tn{constructor(e,t){super(e,"not-in",t)}matches(e){if(xd(this.value.arrayValue,{nullValue:"NULL_VALUE"}))return!1;const t=e.data.field(this.field);return null!==t&&!xd(this.value.arrayValue,t)}}class mb extends tn{constructor(e,t){super(e,"array-contains-any",t)}matches(e){const t=e.data.field(this.field);return!(!Rd(t)||!t.arrayValue.values)&&t.arrayValue.values.some(r=>xd(this.value.arrayValue,r))}}class uo{constructor(e,t="asc"){this.field=e,this.dir=t}}function ew(n,e){return n.dir===e.dir&&n.field.isEqual(e.field)}class nr{constructor(e,t){this.comparator=e,this.root=t||Gr.EMPTY}insert(e,t){return new nr(this.comparator,this.root.insert(e,t,this.comparator).copy(null,null,Gr.BLACK,null,null))}remove(e){return new nr(this.comparator,this.root.remove(e,this.comparator).copy(null,null,Gr.BLACK,null,null))}get(e){let t=this.root;for(;!t.isEmpty();){const r=this.comparator(e,t.key);if(0===r)return t.value;r<0?t=t.left:r>0&&(t=t.right)}return null}indexOf(e){let t=0,r=this.root;for(;!r.isEmpty();){const o=this.comparator(e,r.key);if(0===o)return t+r.left.size;o<0?r=r.left:(t+=r.left.size+1,r=r.right)}return-1}isEmpty(){return this.root.isEmpty()}get size(){return this.root.size}minKey(){return this.root.minKey()}maxKey(){return this.root.maxKey()}inorderTraversal(e){return this.root.inorderTraversal(e)}forEach(e){this.inorderTraversal((t,r)=>(e(t,r),!1))}toString(){const e=[];return this.inorderTraversal((t,r)=>(e.push(`${t}:${r}`),!1)),`{${e.join(", ")}}`}reverseTraversal(e){return this.root.reverseTraversal(e)}getIterator(){return new Pv(this.root,null,this.comparator,!1)}getIteratorFrom(e){return new Pv(this.root,e,this.comparator,!1)}getReverseIterator(){return new Pv(this.root,null,this.comparator,!0)}getReverseIteratorFrom(e){return new Pv(this.root,e,this.comparator,!0)}}class Pv{constructor(e,t,r,o){this.isReverse=o,this.nodeStack=[];let u=1;for(;!e.isEmpty();)if(u=t?r(e.key,t):1,t&&o&&(u*=-1),u<0)e=this.isReverse?e.left:e.right;else{if(0===u){this.nodeStack.push(e);break}this.nodeStack.push(e),e=this.isReverse?e.right:e.left}}getNext(){let e=this.nodeStack.pop();const t={key:e.key,value:e.value};if(this.isReverse)for(e=e.left;!e.isEmpty();)this.nodeStack.push(e),e=e.right;else for(e=e.right;!e.isEmpty();)this.nodeStack.push(e),e=e.left;return t}hasNext(){return this.nodeStack.length>0}peek(){if(0===this.nodeStack.length)return null;const e=this.nodeStack[this.nodeStack.length-1];return{key:e.key,value:e.value}}}class Gr{constructor(e,t,r,o,u){this.key=e,this.value=t,this.color=r??Gr.RED,this.left=o??Gr.EMPTY,this.right=u??Gr.EMPTY,this.size=this.left.size+1+this.right.size}copy(e,t,r,o,u){return new Gr(e??this.key,t??this.value,r??this.color,o??this.left,u??this.right)}isEmpty(){return!1}inorderTraversal(e){return this.left.inorderTraversal(e)||e(this.key,this.value)||this.right.inorderTraversal(e)}reverseTraversal(e){return this.right.reverseTraversal(e)||e(this.key,this.value)||this.left.reverseTraversal(e)}min(){return this.left.isEmpty()?this:this.left.min()}minKey(){return this.min().key}maxKey(){return this.right.isEmpty()?this.key:this.right.maxKey()}insert(e,t,r){let o=this;const u=r(e,o.key);return o=u<0?o.copy(null,null,null,o.left.insert(e,t,r),null):0===u?o.copy(null,t,null,null,null):o.copy(null,null,null,null,o.right.insert(e,t,r)),o.fixUp()}removeMin(){if(this.left.isEmpty())return Gr.EMPTY;let e=this;return e.left.isRed()||e.left.left.isRed()||(e=e.moveRedLeft()),e=e.copy(null,null,null,e.left.removeMin(),null),e.fixUp()}remove(e,t){let r,o=this;if(t(e,o.key)<0)o.left.isEmpty()||o.left.isRed()||o.left.left.isRed()||(o=o.moveRedLeft()),o=o.copy(null,null,null,o.left.remove(e,t),null);else{if(o.left.isRed()&&(o=o.rotateRight()),o.right.isEmpty()||o.right.isRed()||o.right.left.isRed()||(o=o.moveRedRight()),0===t(e,o.key)){if(o.right.isEmpty())return Gr.EMPTY;r=o.right.min(),o=o.copy(r.key,r.value,null,null,o.right.removeMin())}o=o.copy(null,null,null,null,o.right.remove(e,t))}return o.fixUp()}isRed(){return this.color}fixUp(){let e=this;return e.right.isRed()&&!e.left.isRed()&&(e=e.rotateLeft()),e.left.isRed()&&e.left.left.isRed()&&(e=e.rotateRight()),e.left.isRed()&&e.right.isRed()&&(e=e.colorFlip()),e}moveRedLeft(){let e=this.colorFlip();return e.right.left.isRed()&&(e=e.copy(null,null,null,null,e.right.rotateRight()),e=e.rotateLeft(),e=e.colorFlip()),e}moveRedRight(){let e=this.colorFlip();return e.left.left.isRed()&&(e=e.rotateRight(),e=e.colorFlip()),e}rotateLeft(){const e=this.copy(null,null,Gr.RED,null,this.right.left);return this.right.copy(null,null,this.color,e,null)}rotateRight(){const e=this.copy(null,null,Gr.RED,this.left.right,null);return this.left.copy(null,null,this.color,null,e)}colorFlip(){const e=this.left.copy(null,null,!this.left.color,null,null),t=this.right.copy(null,null,!this.right.color,null,null);return this.copy(null,null,!this.color,e,t)}checkMaxDepth(){const e=this.check();return Math.pow(2,e)<=this.size+1}check(){if(this.isRed()&&this.left.isRed()||this.right.isRed())throw tt();const e=this.left.check();if(e!==this.right.check())throw tt();return e+(this.isRed()?0:1)}}Gr.EMPTY=null,Gr.RED=!0,Gr.BLACK=!1,Gr.EMPTY=new class{constructor(){this.size=0}get key(){throw tt()}get value(){throw tt()}get color(){throw tt()}get left(){throw tt()}get right(){throw tt()}copy(n,e,t,r,o){return this}insert(n,e,t){return new Gr(n,e)}remove(n,e){return this}isEmpty(){return!0}inorderTraversal(n){return!1}reverseTraversal(n){return!1}minKey(){return null}maxKey(){return null}isRed(){return!1}checkMaxDepth(){return!0}check(){return 0}};class pn{constructor(e){this.comparator=e,this.data=new nr(this.comparator)}has(e){return null!==this.data.get(e)}first(){return this.data.minKey()}last(){return this.data.maxKey()}get size(){return this.data.size}indexOf(e){return this.data.indexOf(e)}forEach(e){this.data.inorderTraversal((t,r)=>(e(t),!1))}forEachInRange(e,t){const r=this.data.getIteratorFrom(e[0]);for(;r.hasNext();){const o=r.getNext();if(this.comparator(o.key,e[1])>=0)return;t(o.key)}}forEachWhile(e,t){let r;for(r=void 0!==t?this.data.getIteratorFrom(t):this.data.getIterator();r.hasNext();)if(!e(r.getNext().key))return}firstAfterOrEqual(e){const t=this.data.getIteratorFrom(e);return t.hasNext()?t.getNext().key:null}getIterator(){return new tw(this.data.getIterator())}getIteratorFrom(e){return new tw(this.data.getIteratorFrom(e))}add(e){return this.copy(this.data.remove(e).insert(e,!0))}delete(e){return this.has(e)?this.copy(this.data.remove(e)):this}isEmpty(){return this.data.isEmpty()}unionWith(e){let t=this;return t.size<e.size&&(t=e,e=this),e.forEach(r=>{t=t.add(r)}),t}isEqual(e){if(!(e instanceof pn)||this.size!==e.size)return!1;const t=this.data.getIterator(),r=e.data.getIterator();for(;t.hasNext();){const o=t.getNext().key,u=r.getNext().key;if(0!==this.comparator(o,u))return!1}return!0}toArray(){const e=[];return this.forEach(t=>{e.push(t)}),e}toString(){const e=[];return this.forEach(t=>e.push(t)),"SortedSet("+e.toString()+")"}copy(e){const t=new pn(this.comparator);return t.data=e,t}}class tw{constructor(e){this.iter=e}getNext(){return this.iter.getNext().key}hasNext(){return this.iter.hasNext()}}function Cu(n){return n.hasNext()?n.getNext():void 0}class ds{constructor(e){this.fields=e,e.sort(zn.comparator)}static empty(){return new ds([])}unionWith(e){let t=new pn(zn.comparator);for(const r of this.fields)t=t.add(r);for(const r of e)t=t.add(r);return new ds(t.toArray())}covers(e){for(const t of this.fields)if(t.isPrefixOf(e))return!0;return!1}isEqual(e){return Da(this.fields,e.fields,(t,r)=>t.isEqual(r))}}class qr{constructor(e){this.value=e}static empty(){return new qr({mapValue:{}})}field(e){if(e.isEmpty())return this.value;{let t=this.value;for(let r=0;r<e.length-1;++r)if(t=(t.mapValue.fields||{})[e.get(r)],!Mg(t))return null;return t=(t.mapValue.fields||{})[e.lastSegment()],t||null}}set(e,t){this.getFieldsMap(e.popLast())[e.lastSegment()]=Wc(t)}setAll(e){let t=zn.emptyPath(),r={},o=[];e.forEach((l,g)=>{if(!t.isImmediateParentOf(g)){const _=this.getFieldsMap(t);this.applyChanges(_,r,o),r={},o=[],t=g.popLast()}l?r[g.lastSegment()]=Wc(l):o.push(g.lastSegment())});const u=this.getFieldsMap(t);this.applyChanges(u,r,o)}delete(e){const t=this.field(e.popLast());Mg(t)&&t.mapValue.fields&&delete t.mapValue.fields[e.lastSegment()]}isEqual(e){return Uo(this.value,e.value)}getFieldsMap(e){let t=this.value;t.mapValue.fields||(t.mapValue={fields:{}});for(let r=0;r<e.length;++r){let o=t.mapValue.fields[e.get(r)];Mg(o)&&o.mapValue.fields||(o={mapValue:{fields:{}}},t.mapValue.fields[e.get(r)]=o),t=o}return t.mapValue.fields}applyChanges(e,t,r){Iu(t,(o,u)=>e[o]=u);for(const o of r)delete e[o]}clone(){return new qr(Wc(this.value))}}function Pg(n){const e=[];return Iu(n.fields,(t,r)=>{const o=new zn([t]);if(Mg(r)){const u=Pg(r.mapValue).fields;if(0===u.length)e.push(o);else for(const l of u)e.push(o.child(l))}else e.push(o)}),new ds(e)}class Cn{constructor(e,t,r,o,u,l,g){this.key=e,this.documentType=t,this.version=r,this.readTime=o,this.createTime=u,this.data=l,this.documentState=g}static newInvalidDocument(e){return new Cn(e,0,mt.min(),mt.min(),mt.min(),qr.empty(),0)}static newFoundDocument(e,t,r,o){return new Cn(e,1,t,mt.min(),r,o,0)}static newNoDocument(e,t){return new Cn(e,2,t,mt.min(),mt.min(),qr.empty(),0)}static newUnknownDocument(e,t){return new Cn(e,3,t,mt.min(),mt.min(),qr.empty(),2)}convertToFoundDocument(e,t){return!this.createTime.isEqual(mt.min())||2!==this.documentType&&0!==this.documentType||(this.createTime=e),this.version=e,this.documentType=1,this.data=t,this.documentState=0,this}convertToNoDocument(e){return this.version=e,this.documentType=2,this.data=qr.empty(),this.documentState=0,this}convertToUnknownDocument(e){return this.version=e,this.documentType=3,this.data=qr.empty(),this.documentState=2,this}setHasCommittedMutations(){return this.documentState=2,this}setHasLocalMutations(){return this.documentState=1,this.version=mt.min(),this}setReadTime(e){return this.readTime=e,this}get hasLocalMutations(){return 1===this.documentState}get hasCommittedMutations(){return 2===this.documentState}get hasPendingWrites(){return this.hasLocalMutations||this.hasCommittedMutations}isValidDocument(){return 0!==this.documentType}isFoundDocument(){return 1===this.documentType}isNoDocument(){return 2===this.documentType}isUnknownDocument(){return 3===this.documentType}isEqual(e){return e instanceof Cn&&this.key.isEqual(e.key)&&this.version.isEqual(e.version)&&this.documentType===e.documentType&&this.documentState===e.documentState&&this.data.isEqual(e.data)}mutableCopy(){return new Cn(this.key,this.documentType,this.version,this.readTime,this.createTime,this.data.clone(),this.documentState)}toString(){return`Document(${this.key}, ${this.version}, ${JSON.stringify(this.data.value)}, {createTime: ${this.createTime}}), {documentType: ${this.documentType}}), {documentState: ${this.documentState}})`}}class nw{constructor(e,t=null,r=[],o=[],u=null,l=null,g=null){this.path=e,this.collectionGroup=t,this.orderBy=r,this.filters=o,this.limit=u,this.startAt=l,this.endAt=g,this.ft=null}}function Og(n,e=null,t=[],r=[],o=null,u=null,l=null){return new nw(n,e,t,r,o,u,l)}function Tu(n){const e=Ze(n);if(null===e.ft){let t=e.path.canonicalString();null!==e.collectionGroup&&(t+="|cg:"+e.collectionGroup),t+="|f:",t+=e.filters.map(r=>KI(r)).join(","),t+="|ob:",t+=e.orderBy.map(r=>{return(o=r).field.canonicalString()+o.dir;var o}).join(","),Df(e.limit)||(t+="|l:",t+=e.limit),e.startAt&&(t+="|lb:",t+=e.startAt.inclusive?"b:":"a:",t+=e.startAt.position.map(r=>Md(r)).join(",")),e.endAt&&(t+="|ub:",t+=e.endAt.inclusive?"a:":"b:",t+=e.endAt.position.map(r=>Md(r)).join(",")),e.ft=t}return e.ft}function Af(n,e){if(n.limit!==e.limit||n.orderBy.length!==e.orderBy.length)return!1;for(let t=0;t<n.orderBy.length;t++)if(!ew(n.orderBy[t],e.orderBy[t]))return!1;if(n.filters.length!==e.filters.length)return!1;for(let t=0;t<n.filters.length;t++)if(!YI(n.filters[t],e.filters[t]))return!1;return n.collectionGroup===e.collectionGroup&&!!n.path.isEqual(e.path)&&!!GI(n.startAt,e.startAt)&&GI(n.endAt,e.endAt)}function kg(n){return Ge.isDocumentKey(n.path)&&null===n.collectionGroup&&0===n.filters.length}function Fg(n,e){return n.filters.filter(t=>t instanceof tn&&t.field.isEqual(e))}function rw(n,e,t){let r=Ag,o=!0;for(const u of Fg(n,e)){let l=Ag,g=!0;switch(u.op){case"<":case"<=":l=jI(u.value);break;case"==":case"in":case">=":l=u.value;break;case">":l=u.value,g=!1;break;case"!=":case"not-in":l=Ag}HI({value:r,inclusive:o},{value:l,inclusive:g})<0&&(r=l,o=g)}if(null!==t)for(let u=0;u<n.orderBy.length;++u)if(n.orderBy[u].field.isEqual(e)){const l=t.position[u];HI({value:r,inclusive:o},{value:l,inclusive:t.inclusive})<0&&(r=l,o=t.inclusive);break}return{value:r,inclusive:o}}function Ov(n,e,t){let r=Bs,o=!0;for(const u of Fg(n,e)){let l=Bs,g=!0;switch(u.op){case">=":case">":l=fb(u.value),g=!1;break;case"==":case"in":case"<=":l=u.value;break;case"<":l=u.value,g=!1;break;case"!=":case"not-in":l=Bs}zI({value:r,inclusive:o},{value:l,inclusive:g})>0&&(r=l,o=g)}if(null!==t)for(let u=0;u<n.orderBy.length;++u)if(n.orderBy[u].field.isEqual(e)){const l=t.position[u];zI({value:r,inclusive:o},{value:l,inclusive:t.inclusive})>0&&(r=l,o=t.inclusive);break}return{value:r,inclusive:o}}class Su{constructor(e,t=null,r=[],o=[],u=null,l="F",g=null,_=null){this.path=e,this.collectionGroup=t,this.explicitOrderBy=r,this.filters=o,this.limit=u,this.limitType=l,this.startAt=g,this.endAt=_,this.dt=null,this._t=null}}function kv(n,e,t,r,o,u,l,g){return new Su(n,e,t,r,o,u,l,g)}function Nd(n){return new Su(n)}function iw(n){return 0===n.filters.length&&null===n.limit&&null==n.startAt&&null==n.endAt&&(0===n.explicitOrderBy.length||1===n.explicitOrderBy.length&&n.explicitOrderBy[0].field.isKeyField())}function sw(n){return n.explicitOrderBy.length>0?n.explicitOrderBy[0].field:null}function Lg(n){for(const e of n.filters){const t=e.getFirstInequalityField();if(null!==t)return t}return null}function Fv(n){return null!==n.collectionGroup}function qc(n){const e=Ze(n);if(null===e.dt){e.dt=[];const t=Lg(e),r=sw(e);if(null!==t&&null===r)t.isKeyField()||e.dt.push(new uo(t)),e.dt.push(new uo(zn.keyField(),"asc"));else{let o=!1;for(const u of e.explicitOrderBy)e.dt.push(u),u.field.isKeyField()&&(o=!0);if(!o){const u=e.explicitOrderBy.length>0?e.explicitOrderBy[e.explicitOrderBy.length-1].dir:"asc";e.dt.push(new uo(zn.keyField(),u))}}}return e.dt}function Pi(n){const e=Ze(n);if(!e._t)if("F"===e.limitType)e._t=Og(e.path,e.collectionGroup,qc(e),e.filters,e.limit,e.startAt,e.endAt);else{const t=[];for(const u of qc(e))t.push(new uo(u.field,"desc"===u.dir?"asc":"desc"));const r=e.endAt?new bu(e.endAt.position,e.endAt.inclusive):null,o=e.startAt?new bu(e.startAt.position,e.startAt.inclusive):null;e._t=Og(e.path,e.collectionGroup,t,e.filters,e.limit,r,o)}return e._t}function Lv(n,e){e.getFirstInequalityField(),Lg(n);const t=n.filters.concat([e]);return new Su(n.path,n.collectionGroup,n.explicitOrderBy.slice(),t,n.limit,n.limitType,n.startAt,n.endAt)}function Ug(n,e,t){return new Su(n.path,n.collectionGroup,n.explicitOrderBy.slice(),n.filters.slice(),e,t,n.startAt,n.endAt)}function xf(n,e){return Af(Pi(n),Pi(e))&&n.limitType===e.limitType}function ow(n){return`${Tu(Pi(n))}|lt:${n.limitType}`}function Uv(n){return`Query(target=${function(e){let t=e.path.canonicalString();return null!==e.collectionGroup&&(t+=" collectionGroup="+e.collectionGroup),e.filters.length>0&&(t+=`, filters: [${e.filters.map(r=>Rg(r)).join(", ")}]`),Df(e.limit)||(t+=", limit: "+e.limit),e.orderBy.length>0&&(t+=`, orderBy: [${e.orderBy.map(r=>{return`${(o=r).field.canonicalString()} (${o.dir})`;var o}).join(", ")}]`),e.startAt&&(t+=", startAt: ",t+=e.startAt.inclusive?"b:":"a:",t+=e.startAt.position.map(r=>Md(r)).join(",")),e.endAt&&(t+=", endAt: ",t+=e.endAt.inclusive?"a:":"b:",t+=e.endAt.position.map(r=>Md(r)).join(",")),`Target(${t})`}(Pi(n))}; limitType=${n.limitType})`}function Vv(n,e){return e.isFoundDocument()&&function(t,r){const o=r.key.path;return null!==t.collectionGroup?r.key.hasCollectionId(t.collectionGroup)&&t.path.isPrefixOf(o):Ge.isDocumentKey(t.path)?t.path.isEqual(o):t.path.isImmediateParentOf(o)}(n,e)&&function(t,r){for(const o of qc(t))if(!o.field.isKeyField()&&null===r.data.field(o.field))return!1;return!0}(n,e)&&function(t,r){for(const o of t.filters)if(!o.matches(r))return!1;return!0}(n,e)&&(r=e,!((t=n).startAt&&!function(o,u,l){const g=WI(o,u,l);return o.inclusive?g<=0:g<0}(t.startAt,qc(t),r)||t.endAt&&!function(o,u,l){const g=WI(o,u,l);return o.inclusive?g>=0:g>0}(t.endAt,qc(t),r)));var t,r}function aw(n){return n.collectionGroup||(n.path.length%2==1?n.path.lastSegment():n.path.get(n.path.length-2))}function uw(n){return(e,t)=>{let r=!1;for(const o of qc(n)){const u=Mf(o,e,t);if(0!==u)return u;r=r||o.field.isKeyField()}return 0}}function Mf(n,e,t){const r=n.field.isKeyField()?Ge.comparator(e.key,t.key):function(o,u,l){const g=u.data.field(o),_=l.data.field(o);return null!==g&&null!==_?Du(g,_):tt()}(n.field,e,t);switch(n.dir){case"asc":return r;case"desc":return-1*r;default:return tt()}}function Bv(n,e){if(n.wt){if(isNaN(e))return{doubleValue:"NaN"};if(e===1/0)return{doubleValue:"Infinity"};if(e===-1/0)return{doubleValue:"-Infinity"}}return{doubleValue:bf(e)?"-0":e}}function $v(n){return{integerValue:""+n}}function jv(n,e){return Sv(e)?$v(e):Bv(n,e)}class Rf{constructor(){this._=void 0}}function cw(n,e,t){return n instanceof Nf?function(r,o){const u={fields:{__type__:{stringValue:"server_timestamp"},__local_write_time__:{timestampValue:{seconds:r.seconds,nanos:r.nanoseconds}}}};return o&&(u.fields.__previous_value__=o),{mapValue:u}}(t,e):n instanceof Au?hw(n,e):n instanceof Zc?fw(n,e):function(r,o){const u=dw(r,o),l=Od(u)+Od(r.gt);return xg(u)&&xg(r.gt)?$v(l):Bv(r.yt,l)}(n,e)}function lw(n,e,t){return n instanceof Au?hw(n,e):n instanceof Zc?fw(n,e):t}function dw(n,e){return n instanceof Pd?xg(t=e)||(r=t)&&"doubleValue"in r?e:{integerValue:0}:null;var r,t}class Nf extends Rf{}class Au extends Rf{constructor(e){super(),this.elements=e}}function hw(n,e){const t=pw(e);for(const r of n.elements)t.some(o=>Uo(o,r))||t.push(r);return{arrayValue:{values:t}}}class Zc extends Rf{constructor(e){super(),this.elements=e}}function fw(n,e){let t=pw(e);for(const r of n.elements)t=t.filter(o=>!Uo(o,r));return{arrayValue:{values:t}}}class Pd extends Rf{constructor(e,t){super(),this.yt=e,this.gt=t}}function Od(n){return tr(n.integerValue||n.doubleValue)}function pw(n){return Rd(n)&&n.arrayValue.values?n.arrayValue.values.slice():[]}class Kc{constructor(e,t){this.field=e,this.transform=t}}class yb{constructor(e,t){this.version=e,this.transformResults=t}}class Tn{constructor(e,t){this.updateTime=e,this.exists=t}static none(){return new Tn}static exists(e){return new Tn(void 0,e)}static updateTime(e){return new Tn(e)}get isNone(){return void 0===this.updateTime&&void 0===this.exists}isEqual(e){return this.exists===e.exists&&(this.updateTime?!!e.updateTime&&this.updateTime.isEqual(e.updateTime):!e.updateTime)}}function xu(n,e){return void 0!==n.updateTime?e.isFoundDocument()&&e.version.isEqual(n.updateTime):void 0===n.exists||n.exists===e.isFoundDocument()}class Vg{}function gw(n,e){if(!n.hasLocalMutations||e&&0===e.fields.length)return null;if(null===e)return n.isNoDocument()?new Ru(n.key,Tn.none()):new kd(n.key,n.data,Tn.none());{const t=n.data,r=qr.empty();let o=new pn(zn.comparator);for(let u of e.fields)if(!o.has(u)){let l=t.field(u);null===l&&u.length>1&&(u=u.popLast(),l=t.field(u)),null===l?r.delete(u):r.set(u,l),o=o.add(u)}return new Bo(n.key,r,new ds(o.toArray()),Tn.none())}}function vb(n,e,t){n instanceof kd?function(r,o,u){const l=r.value.clone(),g=$g(r.fieldTransforms,o,u.transformResults);l.setAll(g),o.convertToFoundDocument(u.version,l).setHasCommittedMutations()}(n,e,t):n instanceof Bo?function(r,o,u){if(!xu(r.precondition,o))return void o.convertToUnknownDocument(u.version);const l=$g(r.fieldTransforms,o,u.transformResults),g=o.data;g.setAll(Hv(r)),g.setAll(l),o.convertToFoundDocument(u.version,g).setHasCommittedMutations()}(n,e,t):e.convertToNoDocument(t.version).setHasCommittedMutations()}function Mu(n,e,t,r){return n instanceof kd?function(o,u,l,g){if(!xu(o.precondition,u))return l;const _=o.value.clone(),b=zv(o.fieldTransforms,g,u);return _.setAll(b),u.convertToFoundDocument(u.version,_).setHasLocalMutations(),null}(n,e,t,r):n instanceof Bo?function(o,u,l,g){if(!xu(o.precondition,u))return l;const _=zv(o.fieldTransforms,g,u),b=u.data;return b.setAll(Hv(o)),b.setAll(_),u.convertToFoundDocument(u.version,b).setHasLocalMutations(),null===l?null:l.unionWith(o.fieldMask.fields).unionWith(o.fieldTransforms.map(S=>S.field))}(n,e,t,r):(l=t,xu(n.precondition,u=e)?(u.convertToNoDocument(u.version).setHasLocalMutations(),null):l);var u,l}function Bg(n,e){let t=null;for(const r of n.fieldTransforms){const o=e.data.field(r.field),u=dw(r.transform,o||null);null!=u&&(null===t&&(t=qr.empty()),t.set(r.field,u))}return t||null}function mw(n,e){return n.type===e.type&&!!n.key.isEqual(e.key)&&!!n.precondition.isEqual(e.precondition)&&(r=e.fieldTransforms,!!(void 0===(t=n.fieldTransforms)&&void 0===r||t&&r&&Da(t,r,(o,u)=>function Vo(n,e){return n.field.isEqual(e.field)&&(r=e.transform,(t=n.transform)instanceof Au&&r instanceof Au||t instanceof Zc&&r instanceof Zc?Da(t.elements,r.elements,Uo):t instanceof Pd&&r instanceof Pd?Uo(t.gt,r.gt):t instanceof Nf&&r instanceof Nf);var t,r}(o,u))))&&(0===n.type?n.value.isEqual(e.value):1!==n.type||n.data.isEqual(e.data)&&n.fieldMask.isEqual(e.fieldMask));var t,r}class kd extends Vg{constructor(e,t,r,o=[]){super(),this.key=e,this.value=t,this.precondition=r,this.fieldTransforms=o,this.type=0}getFieldMask(){return null}}class Bo extends Vg{constructor(e,t,r,o,u=[]){super(),this.key=e,this.data=t,this.fieldMask=r,this.precondition=o,this.fieldTransforms=u,this.type=1}getFieldMask(){return this.fieldMask}}function Hv(n){const e=new Map;return n.fieldMask.fields.forEach(t=>{if(!t.isEmpty()){const r=n.data.field(t);e.set(t,r)}}),e}function $g(n,e,t){const r=new Map;ct(n.length===t.length);for(let o=0;o<t.length;o++){const u=n[o],l=u.transform,g=e.data.field(u.field);r.set(u.field,lw(l,g,t[o]))}return r}function zv(n,e,t){const r=new Map;for(const o of n){const u=o.transform,l=t.data.field(o.field);r.set(o.field,cw(u,l,e))}return r}class Ru extends Vg{constructor(e,t){super(),this.key=e,this.precondition=t,this.type=2,this.fieldTransforms=[]}getFieldMask(){return null}}class Pf extends Vg{constructor(e,t){super(),this.key=e,this.precondition=t,this.type=3,this.fieldTransforms=[]}getFieldMask(){return null}}class yw{constructor(e){this.count=e}}var rr,nn;function vw(n){switch(n){default:return tt();case fe.CANCELLED:case fe.UNKNOWN:case fe.DEADLINE_EXCEEDED:case fe.RESOURCE_EXHAUSTED:case fe.INTERNAL:case fe.UNAVAILABLE:case fe.UNAUTHENTICATED:return!1;case fe.INVALID_ARGUMENT:case fe.NOT_FOUND:case fe.ALREADY_EXISTS:case fe.PERMISSION_DENIED:case fe.FAILED_PRECONDITION:case fe.ABORTED:case fe.OUT_OF_RANGE:case fe.UNIMPLEMENTED:case fe.DATA_LOSS:return!0}}function _w(n){if(void 0===n)return er("GRPC error has no .code"),fe.UNKNOWN;switch(n){case rr.OK:return fe.OK;case rr.CANCELLED:return fe.CANCELLED;case rr.UNKNOWN:return fe.UNKNOWN;case rr.DEADLINE_EXCEEDED:return fe.DEADLINE_EXCEEDED;case rr.RESOURCE_EXHAUSTED:return fe.RESOURCE_EXHAUSTED;case rr.INTERNAL:return fe.INTERNAL;case rr.UNAVAILABLE:return fe.UNAVAILABLE;case rr.UNAUTHENTICATED:return fe.UNAUTHENTICATED;case rr.INVALID_ARGUMENT:return fe.INVALID_ARGUMENT;case rr.NOT_FOUND:return fe.NOT_FOUND;case rr.ALREADY_EXISTS:return fe.ALREADY_EXISTS;case rr.PERMISSION_DENIED:return fe.PERMISSION_DENIED;case rr.FAILED_PRECONDITION:return fe.FAILED_PRECONDITION;case rr.ABORTED:return fe.ABORTED;case rr.OUT_OF_RANGE:return fe.OUT_OF_RANGE;case rr.UNIMPLEMENTED:return fe.UNIMPLEMENTED;case rr.DATA_LOSS:return fe.DATA_LOSS;default:return tt()}}(nn=rr||(rr={}))[nn.OK=0]="OK",nn[nn.CANCELLED=1]="CANCELLED",nn[nn.UNKNOWN=2]="UNKNOWN",nn[nn.INVALID_ARGUMENT=3]="INVALID_ARGUMENT",nn[nn.DEADLINE_EXCEEDED=4]="DEADLINE_EXCEEDED",nn[nn.NOT_FOUND=5]="NOT_FOUND",nn[nn.ALREADY_EXISTS=6]="ALREADY_EXISTS",nn[nn.PERMISSION_DENIED=7]="PERMISSION_DENIED",nn[nn.UNAUTHENTICATED=16]="UNAUTHENTICATED",nn[nn.RESOURCE_EXHAUSTED=8]="RESOURCE_EXHAUSTED",nn[nn.FAILED_PRECONDITION=9]="FAILED_PRECONDITION",nn[nn.ABORTED=10]="ABORTED",nn[nn.OUT_OF_RANGE=11]="OUT_OF_RANGE",nn[nn.UNIMPLEMENTED=12]="UNIMPLEMENTED",nn[nn.INTERNAL=13]="INTERNAL",nn[nn.UNAVAILABLE=14]="UNAVAILABLE",nn[nn.DATA_LOSS=15]="DATA_LOSS";class Nu{constructor(e,t){this.mapKeyFn=e,this.equalsFn=t,this.inner={},this.innerSize=0}get(e){const t=this.mapKeyFn(e),r=this.inner[t];if(void 0!==r)for(const[o,u]of r)if(this.equalsFn(o,e))return u}has(e){return void 0!==this.get(e)}set(e,t){const r=this.mapKeyFn(e),o=this.inner[r];if(void 0===o)return this.inner[r]=[[e,t]],void this.innerSize++;for(let u=0;u<o.length;u++)if(this.equalsFn(o[u][0],e))return void(o[u]=[e,t]);o.push([e,t]),this.innerSize++}delete(e){const t=this.mapKeyFn(e),r=this.inner[t];if(void 0===r)return!1;for(let o=0;o<r.length;o++)if(this.equalsFn(r[o][0],e))return 1===r.length?delete this.inner[t]:r.splice(o,1),this.innerSize--,!0;return!1}forEach(e){Iu(this.inner,(t,r)=>{for(const[o,u]of r)e(o,u)})}isEmpty(){return Ef(this.inner)}size(){return this.innerSize}}const _b=new nr(Ge.comparator);function Oi(){return _b}const jg=new nr(Ge.comparator);function Fd(...n){let e=jg;for(const t of n)e=e.insert(t.key,t);return e}function Iw(n){let e=jg;return n.forEach((t,r)=>e=e.insert(t,r.overlayedDocument)),e}function co(){return Of()}function Wv(){return Of()}function Of(){return new Nu(n=>n.toString(),(n,e)=>n.isEqual(e))}const ww=new nr(Ge.comparator),Ew=new pn(Ge.comparator);function qt(...n){let e=Ew;for(const t of n)e=e.add(t);return e}const Dw=new pn(Mt);function Hg(){return Dw}class Or{constructor(e,t,r,o,u){this.snapshotVersion=e,this.targetChanges=t,this.targetMismatches=r,this.documentUpdates=o,this.resolvedLimboDocuments=u}static createSynthesizedRemoteEventForCurrentChange(e,t,r){const o=new Map;return o.set(e,$o.createSynthesizedTargetChangeForCurrentChange(e,t,r)),new Or(mt.min(),o,Hg(),Oi(),qt())}}class $o{constructor(e,t,r,o,u){this.resumeToken=e,this.current=t,this.addedDocuments=r,this.modifiedDocuments=o,this.removedDocuments=u}static createSynthesizedTargetChangeForCurrentChange(e,t,r){return new $o(r,t,qt(),qt(),qt())}}class zg{constructor(e,t,r,o){this.It=e,this.removedTargetIds=t,this.key=r,this.Tt=o}}class bw{constructor(e,t){this.targetId=e,this.Et=t}}class Ib{constructor(e,t,r=Pr.EMPTY_BYTE_STRING,o=null){this.state=e,this.targetIds=t,this.resumeToken=r,this.cause=o}}class wb{constructor(){this.At=0,this.Rt=Ld(),this.bt=Pr.EMPTY_BYTE_STRING,this.Pt=!1,this.vt=!0}get current(){return this.Pt}get resumeToken(){return this.bt}get Vt(){return 0!==this.At}get St(){return this.vt}Dt(e){e.approximateByteSize()>0&&(this.vt=!0,this.bt=e)}Ct(){let e=qt(),t=qt(),r=qt();return this.Rt.forEach((o,u)=>{switch(u){case 0:e=e.add(o);break;case 2:t=t.add(o);break;case 1:r=r.add(o);break;default:tt()}}),new $o(this.bt,this.Pt,e,t,r)}xt(){this.vt=!1,this.Rt=Ld()}Nt(e,t){this.vt=!0,this.Rt=this.Rt.insert(e,t)}kt(e){this.vt=!0,this.Rt=this.Rt.remove(e)}Ot(){this.At+=1}Mt(){this.At-=1}Ft(){this.vt=!0,this.Pt=!0}}class Cw{constructor(e){this.$t=e,this.Bt=new Map,this.Lt=Oi(),this.qt=Gv(),this.Ut=new pn(Mt)}Kt(e){for(const t of e.It)e.Tt&&e.Tt.isFoundDocument()?this.Gt(t,e.Tt):this.Qt(t,e.key,e.Tt);for(const t of e.removedTargetIds)this.Qt(t,e.key,e.Tt)}jt(e){this.forEachTarget(e,t=>{const r=this.Wt(t);switch(e.state){case 0:this.zt(t)&&r.Dt(e.resumeToken);break;case 1:r.Mt(),r.Vt||r.xt(),r.Dt(e.resumeToken);break;case 2:r.Mt(),r.Vt||this.removeTarget(t);break;case 3:this.zt(t)&&(r.Ft(),r.Dt(e.resumeToken));break;case 4:this.zt(t)&&(this.Ht(t),r.Dt(e.resumeToken));break;default:tt()}})}forEachTarget(e,t){e.targetIds.length>0?e.targetIds.forEach(t):this.Bt.forEach((r,o)=>{this.zt(o)&&t(o)})}Jt(e){const t=e.targetId,r=e.Et.count,o=this.Yt(t);if(o){const u=o.target;if(kg(u))if(0===r){const l=new Ge(u.path);this.Qt(t,l,Cn.newNoDocument(l,mt.min()))}else ct(1===r);else this.Xt(t)!==r&&(this.Ht(t),this.Ut=this.Ut.add(t))}}Zt(e){const t=new Map;this.Bt.forEach((u,l)=>{const g=this.Yt(l);if(g){if(u.current&&kg(g.target)){const _=new Ge(g.target.path);null!==this.Lt.get(_)||this.te(l,_)||this.Qt(l,_,Cn.newNoDocument(_,e))}u.St&&(t.set(l,u.Ct()),u.xt())}});let r=qt();this.qt.forEach((u,l)=>{let g=!0;l.forEachWhile(_=>{const b=this.Yt(_);return!b||2===b.purpose||(g=!1,!1)}),g&&(r=r.add(u))}),this.Lt.forEach((u,l)=>l.setReadTime(e));const o=new Or(e,t,this.Ut,this.Lt,r);return this.Lt=Oi(),this.qt=Gv(),this.Ut=new pn(Mt),o}Gt(e,t){if(!this.zt(e))return;const r=this.te(e,t.key)?2:0;this.Wt(e).Nt(t.key,r),this.Lt=this.Lt.insert(t.key,t),this.qt=this.qt.insert(t.key,this.ee(t.key).add(e))}Qt(e,t,r){if(!this.zt(e))return;const o=this.Wt(e);this.te(e,t)?o.Nt(t,1):o.kt(t),this.qt=this.qt.insert(t,this.ee(t).delete(e)),r&&(this.Lt=this.Lt.insert(t,r))}removeTarget(e){this.Bt.delete(e)}Xt(e){const t=this.Wt(e).Ct();return this.$t.getRemoteKeysForTarget(e).size+t.addedDocuments.size-t.removedDocuments.size}Ot(e){this.Wt(e).Ot()}Wt(e){let t=this.Bt.get(e);return t||(t=new wb,this.Bt.set(e,t)),t}ee(e){let t=this.qt.get(e);return t||(t=new pn(Mt),this.qt=this.qt.insert(e,t)),t}zt(e){const t=null!==this.Yt(e);return t||Ve("WatchChangeAggregator","Detected inactive target",e),t}Yt(e){const t=this.Bt.get(e);return t&&t.Vt?null:this.$t.ne(e)}Ht(e){this.Bt.set(e,new wb),this.$t.getRemoteKeysForTarget(e).forEach(t=>{this.Qt(e,t,null)})}te(e,t){return this.$t.getRemoteKeysForTarget(e).has(t)}}function Gv(){return new nr(Ge.comparator)}function Ld(){return new nr(Ge.comparator)}const Eb={asc:"ASCENDING",desc:"DESCENDING"},qv={"<":"LESS_THAN","<=":"LESS_THAN_OR_EQUAL",">":"GREATER_THAN",">=":"GREATER_THAN_OR_EQUAL","==":"EQUAL","!=":"NOT_EQUAL","array-contains":"ARRAY_CONTAINS",in:"IN","not-in":"NOT_IN","array-contains-any":"ARRAY_CONTAINS_ANY"},Db={and:"AND",or:"OR"};class Tw{constructor(e,t){this.databaseId=e,this.wt=t}}function Ud(n,e){return n.wt?`${new Date(1e3*e.seconds).toISOString().replace(/\.\d*/,"").replace("Z","")}.${("000000000"+e.nanoseconds).slice(-9)}Z`:{seconds:""+e.seconds,nanos:e.nanoseconds}}function Sw(n,e){return n.wt?e.toBase64():e.toUint8Array()}function bb(n,e){return Ud(n,e.toTimestamp())}function Wn(n){return ct(!!n),mt.fromTimestamp(function(e){const t=wu(e);return new Hn(t.seconds,t.nanos)}(n))}function Wg(n,e){return(t=n,new rn(["projects",t.projectId,"databases",t.database])).child("documents").child(e).canonicalString();var t}function Zv(n){const e=rn.fromString(n);return ct(n_(e)),e}function Pu(n,e){return Wg(n.databaseId,e.path)}function $s(n,e){const t=Zv(e);if(t.get(1)!==n.databaseId.projectId)throw new Te(fe.INVALID_ARGUMENT,"Tried to deserialize key from different project: "+t.get(1)+" vs "+n.databaseId.projectId);if(t.get(3)!==n.databaseId.database)throw new Te(fe.INVALID_ARGUMENT,"Tried to deserialize key from different database: "+t.get(3)+" vs "+n.databaseId.database);return new Ge(Yv(t))}function Aw(n,e){return Wg(n.databaseId,e)}function Kv(n){const e=Zv(n);return 4===e.length?rn.emptyPath():Yv(e)}function kf(n){return new rn(["projects",n.databaseId.projectId,"databases",n.databaseId.database]).canonicalString()}function Yv(n){return ct(n.length>4&&"documents"===n.get(4)),n.popFirst(5)}function Yc(n,e,t){return{name:Pu(n,e),fields:t.value.mapValue.fields}}function xw(n,e,t){const r=$s(n,e.name),o=Wn(e.updateTime),u=e.createTime?Wn(e.createTime):mt.min(),l=new qr({mapValue:{fields:e.fields}}),g=Cn.newFoundDocument(r,o,u,l);return t&&g.setHasCommittedMutations(),t?g.setHasCommittedMutations():g}function Gg(n,e){let t;if(e instanceof kd)t={update:Yc(n,e.key,e.value)};else if(e instanceof Ru)t={delete:Pu(n,e.key)};else if(e instanceof Bo)t={update:Yc(n,e.key,e.data),updateMask:Tb(e.fieldMask)};else{if(!(e instanceof Pf))return tt();t={verify:Pu(n,e.key)}}return e.fieldTransforms.length>0&&(t.updateTransforms=e.fieldTransforms.map(r=>function(o,u){const l=u.transform;if(l instanceof Nf)return{fieldPath:u.field.canonicalString(),setToServerValue:"REQUEST_TIME"};if(l instanceof Au)return{fieldPath:u.field.canonicalString(),appendMissingElements:{values:l.elements}};if(l instanceof Zc)return{fieldPath:u.field.canonicalString(),removeAllFromArray:{values:l.elements}};if(l instanceof Pd)return{fieldPath:u.field.canonicalString(),increment:l.gt};throw tt()}(0,r))),e.precondition.isNone||(t.currentDocument=void 0!==(o=e.precondition).updateTime?{updateTime:bb(n,o.updateTime)}:void 0!==o.exists?{exists:o.exists}:tt()),t;var o}function Xv(n,e){const t=e.currentDocument?void 0!==(o=e.currentDocument).updateTime?Tn.updateTime(Wn(o.updateTime)):void 0!==o.exists?Tn.exists(o.exists):Tn.none():Tn.none(),r=e.updateTransforms?e.updateTransforms.map(o=>function(u,l){let g=null;"setToServerValue"in l?(ct("REQUEST_TIME"===l.setToServerValue),g=new Nf):"appendMissingElements"in l?g=new Au(l.appendMissingElements.values||[]):"removeAllFromArray"in l?g=new Zc(l.removeAllFromArray.values||[]):"increment"in l?g=new Pd(u,l.increment):tt();const _=zn.fromServerFormat(l.fieldPath);return new Kc(_,g)}(n,o)):[];var o;if(e.update){const o=$s(n,e.update.name),u=new qr({mapValue:{fields:e.update.fields}});if(e.updateMask){const l=new ds((e.updateMask.fieldPaths||[]).map(b=>zn.fromServerFormat(b)));return new Bo(o,u,l,t,r)}return new kd(o,u,t,r)}if(e.delete){const o=$s(n,e.delete);return new Ru(o,t)}if(e.verify){const o=$s(n,e.verify);return new Pf(o,t)}return tt()}function Rw(n,e){return{documents:[Aw(n,e.path)]}}function Jv(n,e){const t={structuredQuery:{}},r=e.path;null!==e.collectionGroup?(t.parent=Aw(n,r),t.structuredQuery.from=[{collectionId:e.collectionGroup,allDescendants:!0}]):(t.parent=Aw(n,r.popLast()),t.structuredQuery.from=[{collectionId:r.lastSegment()}]);const o=function(_){if(0!==_.length)return t_(fn.create(_,"and"))}(e.filters);o&&(t.structuredQuery.where=o);const u=function(_){if(0!==_.length)return _.map(b=>{return{field:Vd((S=b).field),direction:Cb(S.dir)};var S})}(e.orderBy);u&&(t.structuredQuery.orderBy=u);const l=(b=e.limit,n.wt||Df(b)?b:{value:b});var b,g,_;return null!==l&&(t.structuredQuery.limit=l),e.startAt&&(t.structuredQuery.startAt={before:(g=e.startAt).inclusive,values:g.position}),e.endAt&&(t.structuredQuery.endAt={before:!(_=e.endAt).inclusive,values:_.position}),t}function Nw(n){let e=Kv(n.parent);const t=n.structuredQuery,r=t.from?t.from.length:0;let o=null;if(r>0){ct(1===r);const S=t.from[0];S.allDescendants?o=S.collectionId:e=e.child(S.collectionId)}let u=[];t.where&&(u=function(S){const P=e_(S);return P instanceof fn&&ZI(P)?P.getFilters():[P]}(t.where));let l=[];t.orderBy&&(l=t.orderBy.map(S=>{return new uo(Bd((P=S).field),function(W){switch(W){case"ASCENDING":return"asc";case"DESCENDING":return"desc";default:return}}(P.direction));var P}));let g=null;t.limit&&(g=function(S){let P;return P="object"==typeof S?S.value:S,Df(P)?null:P}(t.limit));let _=null;var S;t.startAt&&(_=new bu((S=t.startAt).values||[],!!S.before));let b=null;return t.endAt&&(b=function(S){return new bu(S.values||[],!S.before)}(t.endAt)),kv(e,o,l,u,g,"F",_,b)}function e_(n){return void 0!==n.unaryFilter?function(e){switch(e.unaryFilter.op){case"IS_NAN":const t=Bd(e.unaryFilter.field);return tn.create(t,"==",{doubleValue:NaN});case"IS_NULL":const r=Bd(e.unaryFilter.field);return tn.create(r,"==",{nullValue:"NULL_VALUE"});case"IS_NOT_NAN":const o=Bd(e.unaryFilter.field);return tn.create(o,"!=",{doubleValue:NaN});case"IS_NOT_NULL":const u=Bd(e.unaryFilter.field);return tn.create(u,"!=",{nullValue:"NULL_VALUE"});default:return tt()}}(n):void 0!==n.fieldFilter?tn.create(Bd((e=n).fieldFilter.field),function(t){switch(t){case"EQUAL":return"==";case"NOT_EQUAL":return"!=";case"GREATER_THAN":return">";case"GREATER_THAN_OR_EQUAL":return">=";case"LESS_THAN":return"<";case"LESS_THAN_OR_EQUAL":return"<=";case"ARRAY_CONTAINS":return"array-contains";case"IN":return"in";case"NOT_IN":return"not-in";case"ARRAY_CONTAINS_ANY":return"array-contains-any";default:return tt()}}(e.fieldFilter.op),e.fieldFilter.value):void 0!==n.compositeFilter?function(e){return fn.create(e.compositeFilter.filters.map(t=>e_(t)),function(t){switch(t){case"AND":return"and";case"OR":return"or";default:return tt()}}(e.compositeFilter.op))}(n):tt();var e}function Cb(n){return Eb[n]}function Ow(n){return qv[n]}function kw(n){return Db[n]}function Vd(n){return{fieldPath:n.canonicalString()}}function Bd(n){return zn.fromServerFormat(n.fieldPath)}function t_(n){return n instanceof tn?function(e){if("=="===e.op){if(BI(e.value))return{unaryFilter:{field:Vd(e.field),op:"IS_NAN"}};if(VI(e.value))return{unaryFilter:{field:Vd(e.field),op:"IS_NULL"}}}else if("!="===e.op){if(BI(e.value))return{unaryFilter:{field:Vd(e.field),op:"IS_NOT_NAN"}};if(VI(e.value))return{unaryFilter:{field:Vd(e.field),op:"IS_NOT_NULL"}}}return{fieldFilter:{field:Vd(e.field),op:Ow(e.op),value:e.value}}}(n):n instanceof fn?function(e){const t=e.getFilters().map(r=>t_(r));return 1===t.length?t[0]:{compositeFilter:{op:kw(e.op),filters:t}}}(n):tt()}function Tb(n){const e=[];return n.fields.forEach(t=>e.push(t.canonicalString())),{fieldPaths:e}}function n_(n){return n.length>=4&&"projects"===n.get(0)&&"databases"===n.get(2)}function wi(n){let e="";for(let t=0;t<n.length;t++)e.length>0&&(e=r_(e)),e=Fw(n.get(t),e);return r_(e)}function Fw(n,e){let t=e;const r=n.length;for(let o=0;o<r;o++){const u=n.charAt(o);switch(u){case"\0":t+="\x01\x10";break;case"\x01":t+="\x01\x11";break;default:t+=u}}return t}function r_(n){return n+"\x01\x01"}function jo(n){const e=n.length;if(ct(e>=2),2===e)return ct("\x01"===n.charAt(0)&&"\x01"===n.charAt(1)),rn.emptyPath();const t=e-2,r=[];let o="";for(let u=0;u<e;){const l=n.indexOf("\x01",u);switch((l<0||l>t)&&tt(),n.charAt(l+1)){case"\x01":const g=n.substring(u,l);let _;0===o.length?_=g:(o+=g,_=o,o=""),r.push(_);break;case"\x10":o+=n.substring(u,l),o+="\0";break;case"\x11":o+=n.substring(u,l+1);break;default:tt()}u=l+2}return new rn(r)}const Lw=["userId","batchId"];function i_(n,e){return[n,wi(e)]}function s_(n,e,t){return[n,wi(e),t]}const yS={},vS=["prefixPath","collectionGroup","readTime","documentId"],_S=["prefixPath","collectionGroup","documentId"],IS=["collectionGroup","readTime","prefixPath","documentId"],wS=["canonicalId","targetId"],ES=["targetId","path"],DS=["path","targetId"],bS=["collectionId","parent"],qg=["indexId","uid"],CS=["uid","sequenceNumber"],Uw=["indexId","uid","arrayValue","directionalValue","orderedDocumentKey","documentKey"],Zg=["indexId","uid","orderedDocumentKey"],Vw=["userId","collectionPath","documentId"],Bw=["userId","collectionPath","largestBatchId"],TS=["userId","collectionGroup","largestBatchId"],Kg=["mutationQueues","mutations","documentMutations","remoteDocuments","targets","owner","targetGlobal","targetDocuments","clientMetadata","remoteDocumentGlobal","collectionParents","bundles","namedQueries"],$w=[...Kg,"documentOverlays"],jw=["mutationQueues","mutations","documentMutations","remoteDocumentsV14","targets","owner","targetGlobal","targetDocuments","clientMetadata","remoteDocumentGlobal","collectionParents","bundles","namedQueries","documentOverlays"],o_=jw,SS=[...o_,"indexConfiguration","indexState","indexEntries"];class Hw extends kI{constructor(e,t){super(),this.se=e,this.currentSequenceNumber=t}}function Zr(n,e){const t=Ze(n);return ao.M(t.se,e)}class a_{constructor(e,t,r,o){this.batchId=e,this.localWriteTime=t,this.baseMutations=r,this.mutations=o}applyToRemoteDocument(e,t){const r=t.mutationResults;for(let o=0;o<this.mutations.length;o++){const u=this.mutations[o];u.key.isEqual(e.key)&&vb(u,e,r[o])}}applyToLocalView(e,t){for(const r of this.baseMutations)r.key.isEqual(e.key)&&(t=Mu(r,e,t,this.localWriteTime));for(const r of this.mutations)r.key.isEqual(e.key)&&(t=Mu(r,e,t,this.localWriteTime));return t}applyToLocalDocumentSet(e,t){const r=Wv();return this.mutations.forEach(o=>{const u=e.get(o.key),l=u.overlayedDocument;let g=this.applyToLocalView(l,u.mutatedFields);g=t.has(o.key)?null:g;const _=gw(l,g);null!==_&&r.set(o.key,_),l.isValidDocument()||l.convertToNoDocument(mt.min())}),r}keys(){return this.mutations.reduce((e,t)=>e.add(t.key),qt())}isEqual(e){return this.batchId===e.batchId&&Da(this.mutations,e.mutations,(t,r)=>mw(t,r))&&Da(this.baseMutations,e.baseMutations,(t,r)=>mw(t,r))}}class $d{constructor(e,t,r,o){this.batch=e,this.commitVersion=t,this.mutationResults=r,this.docVersions=o}static from(e,t,r){ct(e.mutations.length===r.length);let o=ww;const u=e.mutations;for(let l=0;l<u.length;l++)o=o.insert(u[l].key,r[l].version);return new $d(e,t,r,o)}}class u_{constructor(e,t){this.largestBatchId=e,this.mutation=t}getKey(){return this.mutation.key}isEqual(e){return null!==e&&this.mutation===e.mutation}toString(){return`Overlay{\n      largestBatchId: ${this.largestBatchId},\n      mutation: ${this.mutation.toString()}\n    }`}}class Qc{constructor(e,t,r,o,u=mt.min(),l=mt.min(),g=Pr.EMPTY_BYTE_STRING){this.target=e,this.targetId=t,this.purpose=r,this.sequenceNumber=o,this.snapshotVersion=u,this.lastLimboFreeSnapshotVersion=l,this.resumeToken=g}withSequenceNumber(e){return new Qc(this.target,this.targetId,this.purpose,e,this.snapshotVersion,this.lastLimboFreeSnapshotVersion,this.resumeToken)}withResumeToken(e,t){return new Qc(this.target,this.targetId,this.purpose,this.sequenceNumber,t,this.lastLimboFreeSnapshotVersion,e)}withLastLimboFreeSnapshotVersion(e){return new Qc(this.target,this.targetId,this.purpose,this.sequenceNumber,this.snapshotVersion,e,this.resumeToken)}}class Sb{constructor(e){this.ie=e}}function zw(n,e){const t=e.key,r={prefixPath:t.getCollectionPath().popLast().toArray(),collectionGroup:t.collectionGroup,documentId:t.path.lastSegment(),readTime:Yg(e.readTime),hasCommittedMutations:e.hasCommittedMutations};if(e.isFoundDocument())r.document={name:Pu(o=n.ie,(u=e).key),fields:u.data.value.mapValue.fields,updateTime:Ud(o,u.version.toTimestamp()),createTime:Ud(o,u.createTime.toTimestamp())};else if(e.isNoDocument())r.noDocument={path:t.path.toArray(),readTime:Xc(e.version)};else{if(!e.isUnknownDocument())return tt();r.unknownDocument={path:t.path.toArray(),version:Xc(e.version)}}var o,u;return r}function Yg(n){const e=n.toTimestamp();return[e.seconds,e.nanoseconds]}function Xc(n){const e=n.toTimestamp();return{seconds:e.seconds,nanoseconds:e.nanoseconds}}function jd(n){const e=new Hn(n.seconds,n.nanoseconds);return mt.fromTimestamp(e)}function Jc(n,e){const t=(e.baseMutations||[]).map(u=>Xv(n.ie,u));for(let u=0;u<e.mutations.length-1;++u){const l=e.mutations[u];u+1<e.mutations.length&&void 0!==e.mutations[u+1].transform&&(l.updateTransforms=e.mutations[u+1].transform.fieldTransforms,e.mutations.splice(u+1,1),++u)}const r=e.mutations.map(u=>Xv(n.ie,u)),o=Hn.fromMillis(e.localWriteTimeMs);return new a_(e.batchId,o,t,r)}function Hd(n){const e=jd(n.readTime),t=void 0!==n.lastLimboFreeSnapshotVersion?jd(n.lastLimboFreeSnapshotVersion):mt.min();let r;var o;return void 0!==n.query.documents?(ct(1===(o=n.query).documents.length),r=Pi(Nd(Kv(o.documents[0])))):r=Pi(Nw(n.query)),new Qc(r,n.targetId,0,n.lastListenSequenceNumber,e,t,Pr.fromBase64String(n.resumeToken))}function c_(n,e){const t=Xc(e.snapshotVersion),r=Xc(e.lastLimboFreeSnapshotVersion);let o;o=kg(e.target)?Rw(n.ie,e.target):Jv(n.ie,e.target);const u=e.resumeToken.toBase64();return{targetId:e.targetId,canonicalId:Tu(e.target),readTime:t,resumeToken:u,lastListenSequenceNumber:e.sequenceNumber,lastLimboFreeSnapshotVersion:r,query:o}}function Ww(n){const e=Nw({parent:n.parent,structuredQuery:n.structuredQuery});return"LAST"===n.limitType?Ug(e,e.limit,"L"):e}function hs(n,e){return new u_(e.largestBatchId,Xv(n.ie,e.overlayMutation))}function Gw(n,e){const t=e.path.lastSegment();return[n,wi(e.path.popLast()),t]}function Qg(n,e,t,r){return{indexId:n,uid:e.uid||"",sequenceNumber:t,readTime:Xc(r.readTime),documentKey:wi(r.documentKey.path),largestBatchId:r.largestBatchId}}class Ab{getBundleMetadata(e,t){return xb(e).get(t).next(r=>{if(r)return{id:(o=r).bundleId,createTime:jd(o.createTime),version:o.version};var o})}saveBundleMetadata(e,t){return xb(e).put({bundleId:(r=t).id,createTime:Xc(Wn(r.createTime)),version:r.version});var r}getNamedQuery(e,t){return fs(e).get(t).next(r=>{if(r)return{name:(o=r).name,query:Ww(o.bundledQuery),readTime:jd(o.readTime)};var o})}saveNamedQuery(e,t){return fs(e).put({name:(r=t).name,readTime:Xc(Wn(r.readTime)),bundledQuery:r.bundledQuery});var r}}function xb(n){return Zr(n,"bundles")}function fs(n){return Zr(n,"namedQueries")}class Xg{constructor(e,t){this.yt=e,this.userId=t}static re(e,t){return new Xg(e,t.uid||"")}getOverlay(e,t){return el(e).get(Gw(this.userId,t)).next(r=>r?hs(this.yt,r):null)}getOverlays(e,t){const r=co();return le.forEach(t,o=>this.getOverlay(e,o).next(u=>{null!==u&&r.set(o,u)})).next(()=>r)}saveOverlays(e,t,r){const o=[];return r.forEach((u,l)=>{const g=new u_(t,l);o.push(this.oe(e,g))}),le.waitFor(o)}removeOverlaysForBatchId(e,t,r){const o=new Set;t.forEach(l=>o.add(wi(l.getCollectionPath())));const u=[];return o.forEach(l=>{const g=IDBKeyRange.bound([this.userId,l,r],[this.userId,l,r+1],!1,!0);u.push(el(e).Y("collectionPathOverlayIndex",g))}),le.waitFor(u)}getOverlaysForCollection(e,t,r){const o=co(),u=wi(t),l=IDBKeyRange.bound([this.userId,u,r],[this.userId,u,Number.POSITIVE_INFINITY],!0);return el(e).W("collectionPathOverlayIndex",l).next(g=>{for(const _ of g){const b=hs(this.yt,_);o.set(b.getKey(),b)}return o})}getOverlaysForCollectionGroup(e,t,r,o){const u=co();let l;const g=IDBKeyRange.bound([this.userId,t,r],[this.userId,t,Number.POSITIVE_INFINITY],!0);return el(e).Z({index:"collectionGroupOverlayIndex",range:g},(_,b,S)=>{const P=hs(this.yt,b);u.size()<o||P.largestBatchId===l?(u.set(P.getKey(),P),l=P.largestBatchId):S.done()}).next(()=>u)}oe(e,t){return el(e).put(function(r,o,u){const[l,g,_]=Gw(o,u.mutation.key);return{userId:o,collectionPath:g,documentId:_,collectionGroup:u.mutation.key.getCollectionGroup(),largestBatchId:u.largestBatchId,overlayMutation:Gg(r.ie,u.mutation)}}(this.yt,this.userId,t))}}function el(n){return Zr(n,"documentOverlays")}class tl{constructor(){}ue(e,t){this.ce(e,t),t.ae()}ce(e,t){if("nullValue"in e)this.he(t,5);else if("booleanValue"in e)this.he(t,10),t.le(e.booleanValue?1:0);else if("integerValue"in e)this.he(t,15),t.le(tr(e.integerValue));else if("doubleValue"in e){const r=tr(e.doubleValue);isNaN(r)?this.he(t,13):(this.he(t,15),bf(r)?t.le(0):t.le(r))}else if("timestampValue"in e){const r=e.timestampValue;this.he(t,20),"string"==typeof r?t.fe(r):(t.fe(`${r.seconds||""}`),t.le(r.nanos||0))}else if("stringValue"in e)this.de(e.stringValue,t),this._e(t);else if("bytesValue"in e)this.he(t,30),t.we(Hc(e.bytesValue)),this._e(t);else if("referenceValue"in e)this.me(e.referenceValue,t);else if("geoPointValue"in e){const r=e.geoPointValue;this.he(t,45),t.le(r.latitude||0),t.le(r.longitude||0)}else"mapValue"in e?$I(e)?this.he(t,Number.MAX_SAFE_INTEGER):(this.ge(e.mapValue,t),this._e(t)):"arrayValue"in e?(this.ye(e.arrayValue,t),this._e(t)):tt()}de(e,t){this.he(t,25),this.pe(e,t)}pe(e,t){t.fe(e)}ge(e,t){const r=e.fields||{};this.he(t,55);for(const o of Object.keys(r))this.de(o,t),this.ce(r[o],t)}ye(e,t){const r=e.values||[];this.he(t,50);for(const o of r)this.ce(o,t)}me(e,t){this.he(t,37),Ge.fromName(e).path.forEach(r=>{this.he(t,60),this.pe(r,t)})}he(e,t){e.le(t)}_e(e){e.le(2)}}function Mb(n){if(0===n)return 8;let e=0;return n>>4==0&&(e+=4,n<<=4),n>>6==0&&(e+=2,n<<=2),n>>7==0&&(e+=1),e}function Jg(n){const e=64-function(t){let r=0;for(let o=0;o<8;++o){const u=Mb(255&t[o]);if(r+=u,8!==u)break}return r}(n);return Math.ceil(e/8)}tl.Ie=new tl;class qw{constructor(){this.buffer=new Uint8Array(1024),this.position=0}Te(e){const t=e[Symbol.iterator]();let r=t.next();for(;!r.done;)this.Ee(r.value),r=t.next();this.Ae()}Re(e){const t=e[Symbol.iterator]();let r=t.next();for(;!r.done;)this.be(r.value),r=t.next();this.Pe()}ve(e){for(const t of e){const r=t.charCodeAt(0);if(r<128)this.Ee(r);else if(r<2048)this.Ee(960|r>>>6),this.Ee(128|63&r);else if(t<"\ud800"||"\udbff"<t)this.Ee(480|r>>>12),this.Ee(128|63&r>>>6),this.Ee(128|63&r);else{const o=t.codePointAt(0);this.Ee(240|o>>>18),this.Ee(128|63&o>>>12),this.Ee(128|63&o>>>6),this.Ee(128|63&o)}}this.Ae()}Ve(e){for(const t of e){const r=t.charCodeAt(0);if(r<128)this.be(r);else if(r<2048)this.be(960|r>>>6),this.be(128|63&r);else if(t<"\ud800"||"\udbff"<t)this.be(480|r>>>12),this.be(128|63&r>>>6),this.be(128|63&r);else{const o=t.codePointAt(0);this.be(240|o>>>18),this.be(128|63&o>>>12),this.be(128|63&o>>>6),this.be(128|63&o)}}this.Pe()}Se(e){const t=this.De(e),r=Jg(t);this.Ce(1+r),this.buffer[this.position++]=255&r;for(let o=t.length-r;o<t.length;++o)this.buffer[this.position++]=255&t[o]}xe(e){const t=this.De(e),r=Jg(t);this.Ce(1+r),this.buffer[this.position++]=~(255&r);for(let o=t.length-r;o<t.length;++o)this.buffer[this.position++]=~(255&t[o])}Ne(){this.ke(255),this.ke(255)}Oe(){this.Me(255),this.Me(255)}reset(){this.position=0}seed(e){this.Ce(e.length),this.buffer.set(e,this.position),this.position+=e.length}Fe(){return this.buffer.slice(0,this.position)}De(e){const t=function(o){const u=new DataView(new ArrayBuffer(8));return u.setFloat64(0,o,!1),new Uint8Array(u.buffer)}(e),r=0!=(128&t[0]);t[0]^=r?255:128;for(let o=1;o<t.length;++o)t[o]^=r?255:0;return t}Ee(e){const t=255&e;0===t?(this.ke(0),this.ke(255)):255===t?(this.ke(255),this.ke(0)):this.ke(t)}be(e){const t=255&e;0===t?(this.Me(0),this.Me(255)):255===t?(this.Me(255),this.Me(0)):this.Me(e)}Ae(){this.ke(0),this.ke(1)}Pe(){this.Me(0),this.Me(1)}ke(e){this.Ce(1),this.buffer[this.position++]=e}Me(e){this.Ce(1),this.buffer[this.position++]=~e}Ce(e){const t=e+this.position;if(t<=this.buffer.length)return;let r=2*this.buffer.length;r<t&&(r=t);const o=new Uint8Array(r);o.set(this.buffer),this.buffer=o}}class Zw{constructor(e){this.$e=e}we(e){this.$e.Te(e)}fe(e){this.$e.ve(e)}le(e){this.$e.Se(e)}ae(){this.$e.Ne()}}class Rb{constructor(e){this.$e=e}we(e){this.$e.Re(e)}fe(e){this.$e.Ve(e)}le(e){this.$e.xe(e)}ae(){this.$e.Oe()}}class zd{constructor(){this.$e=new qw,this.Be=new Zw(this.$e),this.Le=new Rb(this.$e)}seed(e){this.$e.seed(e)}qe(e){return 0===e?this.Be:this.Le}Fe(){return this.$e.Fe()}reset(){this.$e.reset()}}class Ou{constructor(e,t,r,o){this.indexId=e,this.documentKey=t,this.arrayValue=r,this.directionalValue=o}Ue(){const e=this.directionalValue.length,t=0===e||255===this.directionalValue[e-1]?e+1:e,r=new Uint8Array(t);return r.set(this.directionalValue,0),t!==e?r.set([0],this.directionalValue.length):++r[r.length-1],new Ou(this.indexId,this.documentKey,this.arrayValue,r)}}function ku(n,e){let t=n.indexId-e.indexId;return 0!==t?t:(t=l_(n.arrayValue,e.arrayValue),0!==t?t:(t=l_(n.directionalValue,e.directionalValue),0!==t?t:Ge.comparator(n.documentKey,e.documentKey)))}function l_(n,e){for(let t=0;t<n.length&&t<e.length;++t){const r=n[t]-e[t];if(0!==r)return r}return n.length-e.length}class Nb{constructor(e){this.collectionId=null!=e.collectionGroup?e.collectionGroup:e.path.lastSegment(),this.Ke=e.orderBy,this.Ge=[];for(const t of e.filters){const r=t;r.isInequality()?this.Qe=r:this.Ge.push(r)}}je(e){ct(e.collectionGroup===this.collectionId);const t=bv(e);if(void 0!==t&&!this.We(t))return!1;const r=Bc(e);let o=0,u=0;for(;o<r.length&&this.We(r[o]);++o);if(o===r.length)return!0;if(void 0!==this.Qe){const l=r[o];if(!this.ze(this.Qe,l)||!this.He(this.Ke[u++],l))return!1;++o}for(;o<r.length;++o){const l=r[o];if(u>=this.Ke.length||!this.He(this.Ke[u++],l))return!1}return!0}We(e){for(const t of this.Ge)if(this.ze(t,e))return!0;return!1}ze(e,t){return!(void 0===e||!e.field.isEqual(t.fieldPath))&&2===t.kind==("array-contains"===e.op||"array-contains-any"===e.op)}He(e,t){return!!e.field.isEqual(t.fieldPath)&&(0===t.kind&&"asc"===e.dir||1===t.kind&&"desc"===e.dir)}}function em(n){var e,t;if(ct(n instanceof tn||n instanceof fn),n instanceof tn){if(n instanceof Ng){const o=(null===(t=null===(e=n.value.arrayValue)||void 0===e?void 0:e.values)||void 0===t?void 0:t.map(u=>tn.create(n.field,"==",u)))||[];return fn.create(o,"or")}return n}const r=n.filters.map(o=>em(o));return fn.create(r,n.op)}function Fu(n){if(0===n.getFilters().length)return[];const e=d_(em(n));return ct(Ho(e)),tm(e)||Ff(e)?[e]:e.getFilters()}function tm(n){return n instanceof tn}function Ff(n){return n instanceof fn&&ZI(n)}function Ho(n){return tm(n)||Ff(n)||function(e){if(e instanceof fn&&xv(e)){for(const t of e.getFilters())if(!tm(t)&&!Ff(t))return!1;return!0}return!1}(n)}function d_(n){if(ct(n instanceof tn||n instanceof fn),n instanceof tn)return n;if(1===n.filters.length)return d_(n.filters[0]);const e=n.filters.map(r=>d_(r));let t=fn.create(e,n.op);return t=nm(t),Ho(t)?t:(ct(t instanceof fn),ct(Gc(t)),ct(t.filters.length>1),t.filters.reduce((r,o)=>Kw(r,o)))}function Kw(n,e){let t;return ct(n instanceof tn||n instanceof fn),ct(e instanceof tn||e instanceof fn),t=n instanceof tn?e instanceof tn?fn.create([n,e],"and"):Yw(n,e):e instanceof tn?Yw(e,n):function(r,o){if(ct(r.filters.length>0&&o.filters.length>0),Gc(r)&&Gc(o))return QI(r,o.getFilters());const u=xv(r)?r:o,l=xv(r)?o:r,g=u.filters.map(_=>Kw(_,l));return fn.create(g,"or")}(n,e),nm(t)}function Yw(n,e){if(Gc(e))return QI(e,n.getFilters());{const t=e.filters.map(r=>Kw(n,r));return fn.create(t,"or")}}function nm(n){if(ct(n instanceof tn||n instanceof fn),n instanceof tn)return n;const e=n.getFilters();if(1===e.length)return nm(e[0]);if(Mv(n))return n;const t=e.map(o=>nm(o)),r=[];return t.forEach(o=>{o instanceof tn?r.push(o):o instanceof fn&&(o.op===n.op?r.push(...o.filters):r.push(o))}),1===r.length?r[0]:fn.create(r,n.op)}class Pb{constructor(){this.Je=new h_}addToCollectionParentIndex(e,t){return this.Je.add(t),le.resolve()}getCollectionParents(e,t){return le.resolve(this.Je.getEntries(t))}addFieldIndex(e,t){return le.resolve()}deleteFieldIndex(e,t){return le.resolve()}getDocumentsMatchingTarget(e,t){return le.resolve(null)}getIndexType(e,t){return le.resolve(0)}getFieldIndexes(e,t){return le.resolve([])}getNextCollectionGroupToUpdate(e){return le.resolve(null)}getMinOffset(e,t){return le.resolve(Yi.min())}getMinOffsetFromCollectionGroup(e,t){return le.resolve(Yi.min())}updateCollectionGroup(e,t,r){return le.resolve()}updateIndexEntries(e,t){return le.resolve()}}class h_{constructor(){this.index={}}add(e){const t=e.lastSegment(),r=e.popLast(),o=this.index[t]||new pn(rn.comparator),u=!o.has(r);return this.index[t]=o.add(r),u}has(e){const t=e.lastSegment(),r=e.popLast(),o=this.index[t];return o&&o.has(r)}getEntries(e){return(this.index[e]||new pn(rn.comparator)).toArray()}}const Lf=new Uint8Array(0);class xS{constructor(e,t){this.user=e,this.databaseId=t,this.Ye=new h_,this.Xe=new Nu(r=>Tu(r),(r,o)=>Af(r,o)),this.uid=e.uid||""}addToCollectionParentIndex(e,t){if(!this.Ye.has(t)){const r=t.lastSegment(),o=t.popLast();e.addOnCommittedListener(()=>{this.Ye.add(t)});const u={collectionId:r,parent:wi(o)};return f_(e).put(u)}return le.resolve()}getCollectionParents(e,t){const r=[],o=IDBKeyRange.bound([t,""],[jn(t),""],!1,!0);return f_(e).W(o).next(u=>{for(const l of u){if(l.collectionId!==t)break;r.push(jo(l.parent))}return r})}addFieldIndex(e,t){const r=Vf(e),o={indexId:(l=t).indexId,collectionGroup:l.collectionGroup,fields:l.fields.map(g=>[g.fieldPath.canonicalString(),g.kind])};var l;delete o.indexId;const u=r.add(o);if(t.indexState){const l=rm(e);return u.next(g=>{l.put(Qg(g,this.user,t.indexState.sequenceNumber,t.indexState.offset))})}return u.next()}deleteFieldIndex(e,t){const r=Vf(e),o=rm(e),u=Uf(e);return r.delete(t.indexId).next(()=>o.delete(IDBKeyRange.bound([t.indexId],[t.indexId+1],!1,!0))).next(()=>u.delete(IDBKeyRange.bound([t.indexId],[t.indexId+1],!1,!0)))}getDocumentsMatchingTarget(e,t){const r=Uf(e);let o=!0;const u=new Map;return le.forEach(this.Ze(t),l=>this.tn(e,l).next(g=>{o&&(o=!!g),u.set(l,g)})).next(()=>{if(o){let l=qt();const g=[];return le.forEach(u,(_,b)=>{var S;Ve("IndexedDbIndexManager",`Using index ${S=_,`id=${S.indexId}|cg=${S.collectionGroup}|f=${S.fields.map(Lt=>`${Lt.fieldPath}:${Lt.kind}`).join(",")}`} to execute ${Tu(t)}`);const P=function(Lt,Ut){const $t=bv(Ut);if(void 0===$t)return null;for(const Qt of Fg(Lt,$t.fieldPath))switch(Qt.op){case"array-contains-any":return Qt.value.arrayValue.values||[];case"array-contains":return[Qt.value]}return null}(b,_),W=function(Lt,Ut){const $t=new Map;for(const Qt of Bc(Ut))for(const ui of Fg(Lt,Qt.fieldPath))switch(ui.op){case"==":case"in":$t.set(Qt.fieldPath.canonicalString(),ui.value);break;case"not-in":case"!=":return $t.set(Qt.fieldPath.canonicalString(),ui.value),Array.from($t.values())}return null}(b,_),J=function(Lt,Ut){const $t=[];let Qt=!0;for(const ui of Bc(Ut)){const j_=0===ui.kind?rw(Lt,ui.fieldPath,Lt.startAt):Ov(Lt,ui.fieldPath,Lt.startAt);$t.push(j_.value),Qt&&(Qt=j_.inclusive)}return new bu($t,Qt)}(b,_),oe=function(Lt,Ut){const $t=[];let Qt=!0;for(const ui of Bc(Ut)){const j_=0===ui.kind?Ov(Lt,ui.fieldPath,Lt.endAt):rw(Lt,ui.fieldPath,Lt.endAt);$t.push(j_.value),Qt&&(Qt=j_.inclusive)}return new bu($t,Qt)}(b,_),ke=this.en(_,b,J),je=this.en(_,b,oe),vt=this.nn(_,b,W),zt=this.sn(_.indexId,P,ke,J.inclusive,je,oe.inclusive,vt);return le.forEach(zt,Lt=>r.J(Lt,t.limit).next(Ut=>{Ut.forEach($t=>{const Qt=Ge.fromSegments($t.documentKey);l.has(Qt)||(l=l.add(Qt),g.push(Qt))})}))}).next(()=>g)}return le.resolve(null)})}Ze(e){let t=this.Xe.get(e);return t||(t=0===e.filters.length?[e]:Fu(fn.create(e.filters,"and")).map(r=>Og(e.path,e.collectionGroup,e.orderBy,r.getFilters(),e.limit,e.startAt,e.endAt)),this.Xe.set(e,t),t)}sn(e,t,r,o,u,l,g){const _=(null!=t?t.length:1)*Math.max(r.length,u.length),b=_/(null!=t?t.length:1),S=[];for(let P=0;P<_;++P){const W=t?this.rn(t[P/b]):Lf,J=this.on(e,W,r[P%b],o),oe=this.un(e,W,u[P%b],l),ke=g.map(je=>this.on(e,W,je,!0));S.push(...this.createRange(J,oe,ke))}return S}on(e,t,r,o){const u=new Ou(e,Ge.empty(),t,r);return o?u:u.Ue()}un(e,t,r,o){const u=new Ou(e,Ge.empty(),t,r);return o?u.Ue():u}tn(e,t){const r=new Nb(t),o=null!=t.collectionGroup?t.collectionGroup:t.path.lastSegment();return this.getFieldIndexes(e,o).next(u=>{let l=null;for(const g of u)r.je(g)&&(!l||g.fields.length>l.fields.length)&&(l=g);return l})}getIndexType(e,t){let r=2;const o=this.Ze(t);return le.forEach(o,u=>this.tn(e,u).next(l=>{l?0!==r&&l.fields.length<function(g){let _=new pn(zn.comparator),b=!1;for(const S of g.filters)for(const P of S.getFlattenedFilters())P.field.isKeyField()||("array-contains"===P.op||"array-contains-any"===P.op?b=!0:_=_.add(P.field));for(const S of g.orderBy)S.field.isKeyField()||(_=_.add(S.field));return _.size+(b?1:0)}(u)&&(r=1):r=0})).next(()=>null!==t.limit&&o.length>1&&2===r?1:r)}cn(e,t){const r=new zd;for(const o of Bc(e)){const u=t.data.field(o.fieldPath);if(null==u)return null;const l=r.qe(o.kind);tl.Ie.ue(u,l)}return r.Fe()}rn(e){const t=new zd;return tl.Ie.ue(e,t.qe(0)),t.Fe()}an(e,t){const r=new zd;return tl.Ie.ue(zc(this.databaseId,t),r.qe(function(o){const u=Bc(o);return 0===u.length?0:u[u.length-1].kind}(e))),r.Fe()}nn(e,t,r){if(null===r)return[];let o=[];o.push(new zd);let u=0;for(const l of Bc(e)){const g=r[u++];for(const _ of o)if(this.hn(t,l.fieldPath)&&Rd(g))o=this.ln(o,l,g);else{const b=_.qe(l.kind);tl.Ie.ue(g,b)}}return this.fn(o)}en(e,t,r){return this.nn(e,t,r.position)}fn(e){const t=[];for(let r=0;r<e.length;++r)t[r]=e[r].Fe();return t}ln(e,t,r){const o=[...e],u=[];for(const l of r.arrayValue.values||[])for(const g of o){const _=new zd;_.seed(g.Fe()),tl.Ie.ue(l,_.qe(t.kind)),u.push(_)}return u}hn(e,t){return!!e.filters.find(r=>r instanceof tn&&r.field.isEqual(t)&&("in"===r.op||"not-in"===r.op))}getFieldIndexes(e,t){const r=Vf(e),o=rm(e);return(t?r.W("collectionGroupIndex",IDBKeyRange.bound(t,t)):r.W()).next(u=>{const l=[];return le.forEach(u,g=>o.get([g.indexId,this.uid]).next(_=>{l.push(function(b,S){const P=S?new If(S.sequenceNumber,new Yi(jd(S.readTime),new Ge(jo(S.documentKey)),S.largestBatchId)):If.empty(),W=b.fields.map(([J,oe])=>new vu(zn.fromServerFormat(J),oe));return new _f(b.indexId,b.collectionGroup,W,P)}(g,_))})).next(()=>l)})}getNextCollectionGroupToUpdate(e){return this.getFieldIndexes(e).next(t=>0===t.length?null:(t.sort((r,o)=>{const u=r.indexState.sequenceNumber-o.indexState.sequenceNumber;return 0!==u?u:Mt(r.collectionGroup,o.collectionGroup)}),t[0].collectionGroup))}updateCollectionGroup(e,t,r){const o=Vf(e),u=rm(e);return this.dn(e).next(l=>o.W("collectionGroupIndex",IDBKeyRange.bound(t,t)).next(g=>le.forEach(g,_=>u.put(Qg(_.indexId,this.user,l,r)))))}updateIndexEntries(e,t){const r=new Map;return le.forEach(t,(o,u)=>{const l=r.get(o.collectionGroup);return(l?le.resolve(l):this.getFieldIndexes(e,o.collectionGroup)).next(g=>(r.set(o.collectionGroup,g),le.forEach(g,_=>this._n(e,o,_).next(b=>{const S=this.wn(u,_);return b.isEqual(S)?le.resolve():this.mn(e,u,_,b,S)}))))})}gn(e,t,r,o){return Uf(e).put({indexId:o.indexId,uid:this.uid,arrayValue:o.arrayValue,directionalValue:o.directionalValue,orderedDocumentKey:this.an(r,t.key),documentKey:t.key.path.toArray()})}yn(e,t,r,o){return Uf(e).delete([o.indexId,this.uid,o.arrayValue,o.directionalValue,this.an(r,t.key),t.key.path.toArray()])}_n(e,t,r){const o=Uf(e);let u=new pn(ku);return o.Z({index:"documentKeyIndex",range:IDBKeyRange.only([r.indexId,this.uid,this.an(r,t)])},(l,g)=>{u=u.add(new Ou(r.indexId,t,g.arrayValue,g.directionalValue))}).next(()=>u)}wn(e,t){let r=new pn(ku);const o=this.cn(t,e);if(null==o)return r;const u=bv(t);if(null!=u){const l=e.data.field(u.fieldPath);if(Rd(l))for(const g of l.arrayValue.values||[])r=r.add(new Ou(t.indexId,e.key,this.rn(g),o))}else r=r.add(new Ou(t.indexId,e.key,Lf,o));return r}mn(e,t,r,o,u){Ve("IndexedDbIndexManager","Updating index entries for document '%s'",t.key);const l=[];return function(g,_,b,S,P){const W=g.getIterator(),J=_.getIterator();let oe=Cu(W),ke=Cu(J);for(;oe||ke;){let je=!1,vt=!1;if(oe&&ke){const zt=b(oe,ke);zt<0?vt=!0:zt>0&&(je=!0)}else null!=oe?vt=!0:je=!0;je?(S(ke),ke=Cu(J)):vt?(P(oe),oe=Cu(W)):(oe=Cu(W),ke=Cu(J))}}(o,u,ku,g=>{l.push(this.gn(e,t,r,g))},g=>{l.push(this.yn(e,t,r,g))}),le.waitFor(l)}dn(e){let t=1;return rm(e).Z({index:"sequenceNumberIndex",reverse:!0,range:IDBKeyRange.upperBound([this.uid,Number.MAX_SAFE_INTEGER])},(r,o,u)=>{u.done(),t=o.sequenceNumber+1}).next(()=>t)}createRange(e,t,r){r=r.sort((l,g)=>ku(l,g)).filter((l,g,_)=>!g||0!==ku(l,_[g-1]));const o=[];o.push(e);for(const l of r){const g=ku(l,e),_=ku(l,t);if(0===g)o[0]=e.Ue();else if(g>0&&_<0)o.push(l),o.push(l.Ue());else if(_>0)break}o.push(t);const u=[];for(let l=0;l<o.length;l+=2){if(this.pn(o[l],o[l+1]))return[];u.push(IDBKeyRange.bound([o[l].indexId,this.uid,o[l].arrayValue,o[l].directionalValue,Lf,[]],[o[l+1].indexId,this.uid,o[l+1].arrayValue,o[l+1].directionalValue,Lf,[]]))}return u}pn(e,t){return ku(e,t)>0}getMinOffsetFromCollectionGroup(e,t){return this.getFieldIndexes(e,t).next(im)}getMinOffset(e,t){return le.mapArray(this.Ze(t),r=>this.tn(e,r).next(o=>o||tt())).next(im)}}function f_(n){return Zr(n,"collectionParents")}function Uf(n){return Zr(n,"indexEntries")}function Vf(n){return Zr(n,"indexConfiguration")}function rm(n){return Zr(n,"indexState")}function im(n){ct(0!==n.length);let e=n[0].indexState.offset,t=e.largestBatchId;for(let r=1;r<n.length;r++){const o=n[r].indexState.offset;Cg(o,e)<0&&(e=o),t<o.largestBatchId&&(t=o.largestBatchId)}return new Yi(e.readTime,e.documentKey,t)}const p_={didRun:!1,sequenceNumbersCollected:0,targetsRemoved:0,documentsRemoved:0};class ki{constructor(e,t,r){this.cacheSizeCollectionThreshold=e,this.percentileToCollect=t,this.maximumSequenceNumbersToCollect=r}static withCacheSize(e){return new ki(e,ki.DEFAULT_COLLECTION_PERCENTILE,ki.DEFAULT_MAX_SEQUENCE_NUMBERS_TO_COLLECT)}}function g_(n,e,t){const r=n.store("mutations"),o=n.store("documentMutations"),u=[],l=IDBKeyRange.only(t.batchId);let g=0;const _=r.Z({range:l},(S,P,W)=>(g++,W.delete()));u.push(_.next(()=>{ct(1===g)}));const b=[];for(const S of t.mutations){const P=s_(e,S.key.path,t.batchId);u.push(o.delete(P)),b.push(S.key)}return le.waitFor(u).next(()=>b)}function Bf(n){if(!n)return 0;let e;if(n.document)e=n.document;else if(n.unknownDocument)e=n.unknownDocument;else{if(!n.noDocument)throw tt();e=n.noDocument}return JSON.stringify(e).length}ki.DEFAULT_COLLECTION_PERCENTILE=10,ki.DEFAULT_MAX_SEQUENCE_NUMBERS_TO_COLLECT=1e3,ki.DEFAULT=new ki(41943040,ki.DEFAULT_COLLECTION_PERCENTILE,ki.DEFAULT_MAX_SEQUENCE_NUMBERS_TO_COLLECT),ki.DISABLED=new ki(-1,0,0);class $f{constructor(e,t,r,o){this.userId=e,this.yt=t,this.indexManager=r,this.referenceDelegate=o,this.In={}}static re(e,t,r,o){ct(""!==e.uid);const u=e.isAuthenticated()?e.uid:"";return new $f(u,t,r,o)}checkEmpty(e){let t=!0;const r=IDBKeyRange.bound([this.userId,Number.NEGATIVE_INFINITY],[this.userId,Number.POSITIVE_INFINITY]);return lo(e).Z({index:"userMutationsIndex",range:r},(o,u,l)=>{t=!1,l.done()}).next(()=>t)}addMutationBatch(e,t,r,o){const u=nl(e),l=lo(e);return l.add({}).next(g=>{ct("number"==typeof g);const _=new a_(g,t,r,o),b=function(W,J,oe){const ke=oe.baseMutations.map(vt=>Gg(W.ie,vt)),je=oe.mutations.map(vt=>Gg(W.ie,vt));return{userId:J,batchId:oe.batchId,localWriteTimeMs:oe.localWriteTime.toMillis(),baseMutations:ke,mutations:je}}(this.yt,this.userId,_),S=[];let P=new pn((W,J)=>Mt(W.canonicalString(),J.canonicalString()));for(const W of o){const J=s_(this.userId,W.key.path,g);P=P.add(W.key.path.popLast()),S.push(l.put(b)),S.push(u.put(J,yS))}return P.forEach(W=>{S.push(this.indexManager.addToCollectionParentIndex(e,W))}),e.addOnCommittedListener(()=>{this.In[g]=_.keys()}),le.waitFor(S).next(()=>_)})}lookupMutationBatch(e,t){return lo(e).get(t).next(r=>r?(ct(r.userId===this.userId),Jc(this.yt,r)):null)}Tn(e,t){return this.In[t]?le.resolve(this.In[t]):this.lookupMutationBatch(e,t).next(r=>{if(r){const o=r.keys();return this.In[t]=o,o}return null})}getNextMutationBatchAfterBatchId(e,t){const r=t+1,o=IDBKeyRange.lowerBound([this.userId,r]);let u=null;return lo(e).Z({index:"userMutationsIndex",range:o},(l,g,_)=>{g.userId===this.userId&&(ct(g.batchId>=r),u=Jc(this.yt,g)),_.done()}).next(()=>u)}getHighestUnacknowledgedBatchId(e){const t=IDBKeyRange.upperBound([this.userId,Number.POSITIVE_INFINITY]);let r=-1;return lo(e).Z({index:"userMutationsIndex",range:t,reverse:!0},(o,u,l)=>{r=u.batchId,l.done()}).next(()=>r)}getAllMutationBatches(e){const t=IDBKeyRange.bound([this.userId,-1],[this.userId,Number.POSITIVE_INFINITY]);return lo(e).W("userMutationsIndex",t).next(r=>r.map(o=>Jc(this.yt,o)))}getAllMutationBatchesAffectingDocumentKey(e,t){const r=i_(this.userId,t.path),o=IDBKeyRange.lowerBound(r),u=[];return nl(e).Z({range:o},(l,g,_)=>{const[b,S,P]=l,W=jo(S);if(b===this.userId&&t.path.isEqual(W))return lo(e).get(P).next(J=>{if(!J)throw tt();ct(J.userId===this.userId),u.push(Jc(this.yt,J))});_.done()}).next(()=>u)}getAllMutationBatchesAffectingDocumentKeys(e,t){let r=new pn(Mt);const o=[];return t.forEach(u=>{const l=i_(this.userId,u.path),g=IDBKeyRange.lowerBound(l),_=nl(e).Z({range:g},(b,S,P)=>{const[W,J,oe]=b,ke=jo(J);W===this.userId&&u.path.isEqual(ke)?r=r.add(oe):P.done()});o.push(_)}),le.waitFor(o).next(()=>this.En(e,r))}getAllMutationBatchesAffectingQuery(e,t){const r=t.path,o=r.length+1,u=i_(this.userId,r),l=IDBKeyRange.lowerBound(u);let g=new pn(Mt);return nl(e).Z({range:l},(_,b,S)=>{const[P,W,J]=_,oe=jo(W);P===this.userId&&r.isPrefixOf(oe)?oe.length===o&&(g=g.add(J)):S.done()}).next(()=>this.En(e,g))}En(e,t){const r=[],o=[];return t.forEach(u=>{o.push(lo(e).get(u).next(l=>{if(null===l)throw tt();ct(l.userId===this.userId),r.push(Jc(this.yt,l))}))}),le.waitFor(o).next(()=>r)}removeMutationBatch(e,t){return g_(e.se,this.userId,t).next(r=>(e.addOnCommittedListener(()=>{this.An(t.batchId)}),le.forEach(r,o=>this.referenceDelegate.markPotentiallyOrphaned(e,o))))}An(e){delete this.In[e]}performConsistencyCheck(e){return this.checkEmpty(e).next(t=>{if(!t)return le.resolve();const r=IDBKeyRange.lowerBound([this.userId]),o=[];return nl(e).Z({range:r},(u,l,g)=>{if(u[0]===this.userId){const _=jo(u[1]);o.push(_)}else g.done()}).next(()=>{ct(0===o.length)})})}containsKey(e,t){return jf(e,this.userId,t)}Rn(e){return Qw(e).get(this.userId).next(t=>t||{userId:this.userId,lastAcknowledgedBatchId:-1,lastStreamToken:""})}}function jf(n,e,t){const r=i_(e,t.path),o=r[1],u=IDBKeyRange.lowerBound(r);let l=!1;return nl(n).Z({range:u,X:!0},(g,_,b)=>{const[S,P,W]=g;S===e&&P===o&&(l=!0),b.done()}).next(()=>l)}function lo(n){return Zr(n,"mutations")}function nl(n){return Zr(n,"documentMutations")}function Qw(n){return Zr(n,"mutationQueues")}class rl{constructor(e){this.bn=e}next(){return this.bn+=2,this.bn}static Pn(){return new rl(0)}static vn(){return new rl(-1)}}class MS{constructor(e,t){this.referenceDelegate=e,this.yt=t}allocateTargetId(e){return this.Vn(e).next(t=>{const r=new rl(t.highestTargetId);return t.highestTargetId=r.next(),this.Sn(e,t).next(()=>t.highestTargetId)})}getLastRemoteSnapshotVersion(e){return this.Vn(e).next(t=>mt.fromTimestamp(new Hn(t.lastRemoteSnapshotVersion.seconds,t.lastRemoteSnapshotVersion.nanoseconds)))}getHighestSequenceNumber(e){return this.Vn(e).next(t=>t.highestListenSequenceNumber)}setTargetsMetadata(e,t,r){return this.Vn(e).next(o=>(o.highestListenSequenceNumber=t,r&&(o.lastRemoteSnapshotVersion=r.toTimestamp()),t>o.highestListenSequenceNumber&&(o.highestListenSequenceNumber=t),this.Sn(e,o)))}addTargetData(e,t){return this.Dn(e,t).next(()=>this.Vn(e).next(r=>(r.targetCount+=1,this.Cn(t,r),this.Sn(e,r))))}updateTargetData(e,t){return this.Dn(e,t)}removeTargetData(e,t){return this.removeMatchingKeysForTargetId(e,t.targetId).next(()=>Hf(e).delete(t.targetId)).next(()=>this.Vn(e)).next(r=>(ct(r.targetCount>0),r.targetCount-=1,this.Sn(e,r)))}removeTargets(e,t,r){let o=0;const u=[];return Hf(e).Z((l,g)=>{const _=Hd(g);_.sequenceNumber<=t&&null===r.get(_.targetId)&&(o++,u.push(this.removeTargetData(e,_)))}).next(()=>le.waitFor(u)).next(()=>o)}forEachTarget(e,t){return Hf(e).Z((r,o)=>{const u=Hd(o);t(u)})}Vn(e){return Ob(e).get("targetGlobalKey").next(t=>(ct(null!==t),t))}Sn(e,t){return Ob(e).put("targetGlobalKey",t)}Dn(e,t){return Hf(e).put(c_(this.yt,t))}Cn(e,t){let r=!1;return e.targetId>t.highestTargetId&&(t.highestTargetId=e.targetId,r=!0),e.sequenceNumber>t.highestListenSequenceNumber&&(t.highestListenSequenceNumber=e.sequenceNumber,r=!0),r}getTargetCount(e){return this.Vn(e).next(t=>t.targetCount)}getTargetData(e,t){const r=Tu(t),o=IDBKeyRange.bound([r,Number.NEGATIVE_INFINITY],[r,Number.POSITIVE_INFINITY]);let u=null;return Hf(e).Z({range:o,index:"queryTargetsIndex"},(l,g,_)=>{const b=Hd(g);Af(t,b.target)&&(u=b,_.done())}).next(()=>u)}addMatchingKeys(e,t,r){const o=[],u=Ca(e);return t.forEach(l=>{const g=wi(l.path);o.push(u.put({targetId:r,path:g})),o.push(this.referenceDelegate.addReference(e,r,l))}),le.waitFor(o)}removeMatchingKeys(e,t,r){const o=Ca(e);return le.forEach(t,u=>{const l=wi(u.path);return le.waitFor([o.delete([r,l]),this.referenceDelegate.removeReference(e,r,u)])})}removeMatchingKeysForTargetId(e,t){const r=Ca(e),o=IDBKeyRange.bound([t],[t+1],!1,!0);return r.delete(o)}getMatchingKeysForTargetId(e,t){const r=IDBKeyRange.bound([t],[t+1],!1,!0),o=Ca(e);let u=qt();return o.Z({range:r,X:!0},(l,g,_)=>{const b=jo(l[1]),S=new Ge(b);u=u.add(S)}).next(()=>u)}containsKey(e,t){const r=wi(t.path),o=IDBKeyRange.bound([r],[jn(r)],!1,!0);let u=0;return Ca(e).Z({index:"documentTargetsIndex",X:!0,range:o},([l,g],_,b)=>{0!==l&&(u++,b.done())}).next(()=>u>0)}ne(e,t){return Hf(e).get(t).next(r=>r?Hd(r):null)}}function Hf(n){return Zr(n,"targets")}function Ob(n){return Zr(n,"targetGlobal")}function Ca(n){return Zr(n,"targetDocuments")}function Xw([n,e],[t,r]){const o=Mt(n,t);return 0===o?Mt(e,r):o}class kb{constructor(e){this.xn=e,this.buffer=new pn(Xw),this.Nn=0}kn(){return++this.Nn}On(e){const t=[e,this.kn()];if(this.buffer.size<this.xn)this.buffer=this.buffer.add(t);else{const r=this.buffer.last();Xw(t,r)<0&&(this.buffer=this.buffer.delete(r).add(t))}}get maxValue(){return this.buffer.last()[0]}}class Fb{constructor(e,t,r){this.garbageCollector=e,this.asyncQueue=t,this.localStore=r,this.Mn=null}start(){-1!==this.garbageCollector.params.cacheSizeCollectionThreshold&&this.Fn(6e4)}stop(){this.Mn&&(this.Mn.cancel(),this.Mn=null)}get started(){return null!==this.Mn}Fn(e){var t=this;Ve("LruGarbageCollector",`Garbage collection scheduled in ${e}ms`),this.Mn=this.asyncQueue.enqueueAfterDelay("lru_garbage_collection",e,(0,ve.Z)(function*(){t.Mn=null;try{yield t.localStore.collectGarbage(t.garbageCollector)}catch(r){ba(r)?Ve("LruGarbageCollector","Ignoring IndexedDB error during garbage collection: ",r):yield Us(r)}yield t.Fn(3e5)}))}}class RS{constructor(e,t){this.$n=e,this.params=t}calculateTargetCount(e,t){return this.$n.Bn(e).next(r=>Math.floor(t/100*r))}nthSequenceNumber(e,t){if(0===t)return le.resolve(Vs.at);const r=new kb(t);return this.$n.forEachTarget(e,o=>r.On(o.sequenceNumber)).next(()=>this.$n.Ln(e,o=>r.On(o))).next(()=>r.maxValue)}removeTargets(e,t,r){return this.$n.removeTargets(e,t,r)}removeOrphanedDocuments(e,t){return this.$n.removeOrphanedDocuments(e,t)}collect(e,t){return-1===this.params.cacheSizeCollectionThreshold?(Ve("LruGarbageCollector","Garbage collection skipped; disabled"),le.resolve(p_)):this.getCacheSize(e).next(r=>r<this.params.cacheSizeCollectionThreshold?(Ve("LruGarbageCollector",`Garbage collection skipped; Cache size ${r} is lower than threshold ${this.params.cacheSizeCollectionThreshold}`),p_):this.qn(e,t))}getCacheSize(e){return this.$n.getCacheSize(e)}qn(e,t){let r,o,u,l,g,_,b;const S=Date.now();return this.calculateTargetCount(e,this.params.percentileToCollect).next(P=>(P>this.params.maximumSequenceNumbersToCollect?(Ve("LruGarbageCollector",`Capping sequence numbers to collect down to the maximum of ${this.params.maximumSequenceNumbersToCollect} from ${P}`),o=this.params.maximumSequenceNumbersToCollect):o=P,l=Date.now(),this.nthSequenceNumber(e,o))).next(P=>(r=P,g=Date.now(),this.removeTargets(e,r,t))).next(P=>(u=P,_=Date.now(),this.removeOrphanedDocuments(e,r))).next(P=>(b=Date.now(),Eg()<=hu.in.DEBUG&&Ve("LruGarbageCollector",`LRU Garbage Collection\n\tCounted targets in ${l-S}ms\n\tDetermined least recently used ${o} in `+(g-l)+`ms\n\tRemoved ${u} targets in `+(_-g)+`ms\n\tRemoved ${P} documents in `+(b-_)+`ms\nTotal Duration: ${b-S}ms`),le.resolve({didRun:!0,sequenceNumbersCollected:o,targetsRemoved:u,documentsRemoved:P})))}}class NS{constructor(e,t){this.db=e,this.garbageCollector=new RS(this,t)}Bn(e){const t=this.Un(e);return this.db.getTargetCache().getTargetCount(e).next(r=>t.next(o=>r+o))}Un(e){let t=0;return this.Ln(e,r=>{t++}).next(()=>t)}forEachTarget(e,t){return this.db.getTargetCache().forEachTarget(e,t)}Ln(e,t){return this.Kn(e,(r,o)=>t(o))}addReference(e,t,r){return m_(e,r)}removeReference(e,t,r){return m_(e,r)}removeTargets(e,t,r){return this.db.getTargetCache().removeTargets(e,t,r)}markPotentiallyOrphaned(e,t){return m_(e,t)}Gn(e,t){return function(r,o){let u=!1;return Qw(r).tt(l=>jf(r,l,o).next(g=>(g&&(u=!0),le.resolve(!g)))).next(()=>u)}(e,t)}removeOrphanedDocuments(e,t){const r=this.db.getRemoteDocumentCache().newChangeBuffer(),o=[];let u=0;return this.Kn(e,(l,g)=>{if(g<=t){const _=this.Gn(e,l).next(b=>{if(!b)return u++,r.getEntry(e,l).next(()=>(r.removeEntry(l,mt.min()),Ca(e).delete([0,wi(l.path)])))});o.push(_)}}).next(()=>le.waitFor(o)).next(()=>r.apply(e)).next(()=>u)}removeTarget(e,t){const r=t.withSequenceNumber(e.currentSequenceNumber);return this.db.getTargetCache().updateTargetData(e,r)}updateLimboDocument(e,t){return m_(e,t)}Kn(e,t){const r=Ca(e);let o,u=Vs.at;return r.Z({index:"documentTargetsIndex"},([l,g],{path:_,sequenceNumber:b})=>{0===l?(u!==Vs.at&&t(new Ge(jo(o)),u),u=b,o=_):u=Vs.at}).next(()=>{u!==Vs.at&&t(new Ge(jo(o)),u)})}getCacheSize(e){return this.db.getRemoteDocumentCache().getSize(e)}}function m_(n,e){return Ca(n).put((r=n.currentSequenceNumber,{targetId:0,path:wi(e.path),sequenceNumber:r}));var r}class Lb{constructor(){this.changes=new Nu(e=>e.toString(),(e,t)=>e.isEqual(t)),this.changesApplied=!1}addEntry(e){this.assertNotApplied(),this.changes.set(e.key,e)}removeEntry(e,t){this.assertNotApplied(),this.changes.set(e,Cn.newInvalidDocument(e).setReadTime(t))}getEntry(e,t){this.assertNotApplied();const r=this.changes.get(t);return void 0!==r?le.resolve(r):this.getFromCache(e,t)}getEntries(e,t){return this.getAllFromCache(e,t)}apply(e){return this.assertNotApplied(),this.changesApplied=!0,this.applyChanges(e)}assertNotApplied(){}}class PS{constructor(e){this.yt=e}setIndexManager(e){this.indexManager=e}addEntry(e,t,r){return il(e).put(r)}removeEntry(e,t,r){return il(e).delete(function(o,u){const l=o.path.toArray();return[l.slice(0,l.length-2),l[l.length-2],Yg(u),l[l.length-1]]}(t,r))}updateMetadata(e,t){return this.getMetadata(e).next(r=>(r.byteSize+=t,this.Qn(e,r)))}getEntry(e,t){let r=Cn.newInvalidDocument(t);return il(e).Z({index:"documentKeyIndex",range:IDBKeyRange.only(Wd(t))},(o,u)=>{r=this.jn(t,u)}).next(()=>r)}Wn(e,t){let r={size:0,document:Cn.newInvalidDocument(t)};return il(e).Z({index:"documentKeyIndex",range:IDBKeyRange.only(Wd(t))},(o,u)=>{r={document:this.jn(t,u),size:Bf(u)}}).next(()=>r)}getEntries(e,t){let r=Oi();return this.zn(e,t,(o,u)=>{const l=this.jn(o,u);r=r.insert(o,l)}).next(()=>r)}Hn(e,t){let r=Oi(),o=new nr(Ge.comparator);return this.zn(e,t,(u,l)=>{const g=this.jn(u,l);r=r.insert(u,g),o=o.insert(u,Bf(l))}).next(()=>({documents:r,Jn:o}))}zn(e,t,r){if(t.isEmpty())return le.resolve();let o=new pn(y_);t.forEach(_=>o=o.add(_));const u=IDBKeyRange.bound(Wd(o.first()),Wd(o.last())),l=o.getIterator();let g=l.getNext();return il(e).Z({index:"documentKeyIndex",range:u},(_,b,S)=>{const P=Ge.fromSegments([...b.prefixPath,b.collectionGroup,b.documentId]);for(;g&&y_(g,P)<0;)r(g,null),g=l.getNext();g&&g.isEqual(P)&&(r(g,b),g=l.hasNext()?l.getNext():null),g?S.j(Wd(g)):S.done()}).next(()=>{for(;g;)r(g,null),g=l.hasNext()?l.getNext():null})}getAllFromCollection(e,t,r){const o=[t.popLast().toArray(),t.lastSegment(),Yg(r.readTime),r.documentKey.path.isEmpty()?"":r.documentKey.path.lastSegment()],u=[t.popLast().toArray(),t.lastSegment(),[Number.MAX_SAFE_INTEGER,Number.MAX_SAFE_INTEGER],""];return il(e).W(IDBKeyRange.bound(o,u,!0)).next(l=>{let g=Oi();for(const _ of l){const b=this.jn(Ge.fromSegments(_.prefixPath.concat(_.collectionGroup,_.documentId)),_);g=g.insert(b.key,b)}return g})}getAllFromCollectionGroup(e,t,r,o){let u=Oi();const l=Lu(t,r),g=Lu(t,Yi.max());return il(e).Z({index:"collectionGroupIndex",range:IDBKeyRange.bound(l,g,!0)},(_,b,S)=>{const P=this.jn(Ge.fromSegments(b.prefixPath.concat(b.collectionGroup,b.documentId)),b);u=u.insert(P.key,P),u.size===o&&S.done()}).next(()=>u)}newChangeBuffer(e){return new sm(this,!!e&&e.trackRemovals)}getSize(e){return this.getMetadata(e).next(t=>t.byteSize)}getMetadata(e){return eE(e).get("remoteDocumentGlobalKey").next(t=>(ct(!!t),t))}Qn(e,t){return eE(e).put("remoteDocumentGlobalKey",t)}jn(e,t){if(t){const r=function AS(n,e){let t;if(e.document)t=xw(n.ie,e.document,!!e.hasCommittedMutations);else if(e.noDocument){const r=Ge.fromSegments(e.noDocument.path),o=jd(e.noDocument.readTime);t=Cn.newNoDocument(r,o),e.hasCommittedMutations&&t.setHasCommittedMutations()}else{if(!e.unknownDocument)return tt();{const r=Ge.fromSegments(e.unknownDocument.path),o=jd(e.unknownDocument.version);t=Cn.newUnknownDocument(r,o)}}return e.readTime&&t.setReadTime(function(r){const o=new Hn(r[0],r[1]);return mt.fromTimestamp(o)}(e.readTime)),t}(this.yt,t);if(!r.isNoDocument()||!r.version.isEqual(mt.min()))return r}return Cn.newInvalidDocument(e)}}function Jw(n){return new PS(n)}class sm extends Lb{constructor(e,t){super(),this.Yn=e,this.trackRemovals=t,this.Xn=new Nu(r=>r.toString(),(r,o)=>r.isEqual(o))}applyChanges(e){const t=[];let r=0,o=new pn((u,l)=>Mt(u.canonicalString(),l.canonicalString()));return this.changes.forEach((u,l)=>{const g=this.Xn.get(u);if(t.push(this.Yn.removeEntry(e,u,g.readTime)),l.isValidDocument()){const _=zw(this.Yn.yt,l);o=o.add(u.path.popLast());const b=Bf(_);r+=b-g.size,t.push(this.Yn.addEntry(e,u,_))}else if(r-=g.size,this.trackRemovals){const _=zw(this.Yn.yt,l.convertToNoDocument(mt.min()));t.push(this.Yn.addEntry(e,u,_))}}),o.forEach(u=>{t.push(this.Yn.indexManager.addToCollectionParentIndex(e,u))}),t.push(this.Yn.updateMetadata(e,r)),le.waitFor(t)}getFromCache(e,t){return this.Yn.Wn(e,t).next(r=>(this.Xn.set(t,{size:r.size,readTime:r.document.readTime}),r.document))}getAllFromCache(e,t){return this.Yn.Hn(e,t).next(({documents:r,Jn:o})=>(o.forEach((u,l)=>{this.Xn.set(u,{size:l,readTime:r.get(u).readTime})}),r))}}function eE(n){return Zr(n,"remoteDocumentGlobal")}function il(n){return Zr(n,"remoteDocumentsV14")}function Wd(n){const e=n.path.toArray();return[e.slice(0,e.length-2),e[e.length-2],e[e.length-1]]}function Lu(n,e){const t=e.documentKey.path.toArray();return[n,Yg(e.readTime),t.slice(0,t.length-2),t.length>0?t[t.length-1]:""]}function y_(n,e){const t=n.path.toArray(),r=e.path.toArray();let o=0;for(let u=0;u<t.length-2&&u<r.length-2;++u)if(o=Mt(t[u],r[u]),o)return o;return o=Mt(t.length,r.length),o||(o=Mt(t[t.length-2],r[r.length-2]),o||Mt(t[t.length-1],r[r.length-1]))}class v_{constructor(e,t){this.overlayedDocument=e,this.mutatedFields=t}}class om{constructor(e,t,r,o){this.remoteDocumentCache=e,this.mutationQueue=t,this.documentOverlayCache=r,this.indexManager=o}getDocument(e,t){let r=null;return this.documentOverlayCache.getOverlay(e,t).next(o=>(r=o,this.remoteDocumentCache.getEntry(e,t))).next(o=>(null!==r&&Mu(r.mutation,o,ds.empty(),Hn.now()),o))}getDocuments(e,t){return this.remoteDocumentCache.getEntries(e,t).next(r=>this.getLocalViewOfDocuments(e,r,qt()).next(()=>r))}getLocalViewOfDocuments(e,t,r=qt()){const o=co();return this.populateOverlays(e,o,t).next(()=>this.computeViews(e,t,o,r).next(u=>{let l=Fd();return u.forEach((g,_)=>{l=l.insert(g,_.overlayedDocument)}),l}))}getOverlayedDocuments(e,t){const r=co();return this.populateOverlays(e,r,t).next(()=>this.computeViews(e,t,r,qt()))}populateOverlays(e,t,r){const o=[];return r.forEach(u=>{t.has(u)||o.push(u)}),this.documentOverlayCache.getOverlays(e,o).next(u=>{u.forEach((l,g)=>{t.set(l,g)})})}computeViews(e,t,r,o){let u=Oi();const l=Of(),g=Of();return t.forEach((_,b)=>{const S=r.get(b.key);o.has(b.key)&&(void 0===S||S.mutation instanceof Bo)?u=u.insert(b.key,b):void 0!==S&&(l.set(b.key,S.mutation.getFieldMask()),Mu(S.mutation,b,S.mutation.getFieldMask(),Hn.now()))}),this.recalculateAndSaveOverlays(e,u).next(_=>(_.forEach((b,S)=>l.set(b,S)),t.forEach((b,S)=>{var P;return g.set(b,new v_(S,null!==(P=l.get(b))&&void 0!==P?P:null))}),g))}recalculateAndSaveOverlays(e,t){const r=Of();let o=new nr((l,g)=>l-g),u=qt();return this.mutationQueue.getAllMutationBatchesAffectingDocumentKeys(e,t).next(l=>{for(const g of l)g.keys().forEach(_=>{const b=t.get(_);if(null===b)return;let S=r.get(_)||ds.empty();S=g.applyToLocalView(b,S),r.set(_,S);const P=(o.get(g.batchId)||qt()).add(_);o=o.insert(g.batchId,P)})}).next(()=>{const l=[],g=o.getReverseIterator();for(;g.hasNext();){const _=g.getNext(),b=_.key,S=_.value,P=Wv();S.forEach(W=>{if(!u.has(W)){const J=gw(t.get(W),r.get(W));null!==J&&P.set(W,J),u=u.add(W)}}),l.push(this.documentOverlayCache.saveOverlays(e,b,P))}return le.waitFor(l)}).next(()=>r)}recalculateAndSaveOverlaysForDocumentKeys(e,t){return this.remoteDocumentCache.getEntries(e,t).next(r=>this.recalculateAndSaveOverlays(e,r))}getDocumentsMatchingQuery(e,t,r){return Ge.isDocumentKey((o=t).path)&&null===o.collectionGroup&&0===o.filters.length?this.getDocumentsMatchingDocumentQuery(e,t.path):Fv(t)?this.getDocumentsMatchingCollectionGroupQuery(e,t,r):this.getDocumentsMatchingCollectionQuery(e,t,r);var o}getNextDocuments(e,t,r,o){return this.remoteDocumentCache.getAllFromCollectionGroup(e,t,r,o).next(u=>{const l=o-u.size>0?this.documentOverlayCache.getOverlaysForCollectionGroup(e,t,r.largestBatchId,o-u.size):le.resolve(co());let g=-1,_=u;return l.next(b=>le.forEach(b,(S,P)=>(g<P.largestBatchId&&(g=P.largestBatchId),u.get(S)?le.resolve():this.remoteDocumentCache.getEntry(e,S).next(W=>{_=_.insert(S,W)}))).next(()=>this.populateOverlays(e,b,u)).next(()=>this.computeViews(e,_,b,qt())).next(S=>({batchId:g,changes:Iw(S)})))})}getDocumentsMatchingDocumentQuery(e,t){return this.getDocument(e,new Ge(t)).next(r=>{let o=Fd();return r.isFoundDocument()&&(o=o.insert(r.key,r)),o})}getDocumentsMatchingCollectionGroupQuery(e,t,r){const o=t.collectionGroup;let u=Fd();return this.indexManager.getCollectionParents(e,o).next(l=>le.forEach(l,g=>{const _=(b=t,S=g.child(o),new Su(S,null,b.explicitOrderBy.slice(),b.filters.slice(),b.limit,b.limitType,b.startAt,b.endAt));var b,S;return this.getDocumentsMatchingCollectionQuery(e,_,r).next(b=>{b.forEach((S,P)=>{u=u.insert(S,P)})})}).next(()=>u))}getDocumentsMatchingCollectionQuery(e,t,r){let o;return this.remoteDocumentCache.getAllFromCollection(e,t.path,r).next(u=>(o=u,this.documentOverlayCache.getOverlaysForCollection(e,t.path,r.largestBatchId))).next(u=>{u.forEach((g,_)=>{const b=_.getKey();null===o.get(b)&&(o=o.insert(b,Cn.newInvalidDocument(b)))});let l=Fd();return o.forEach((g,_)=>{const b=u.get(g);void 0!==b&&Mu(b.mutation,_,ds.empty(),Hn.now()),Vv(t,_)&&(l=l.insert(g,_))}),l})}}class Ub{constructor(e){this.yt=e,this.Zn=new Map,this.ts=new Map}getBundleMetadata(e,t){return le.resolve(this.Zn.get(t))}saveBundleMetadata(e,t){var r;return this.Zn.set(t.id,{id:(r=t).id,version:r.version,createTime:Wn(r.createTime)}),le.resolve()}getNamedQuery(e,t){return le.resolve(this.ts.get(t))}saveNamedQuery(e,t){return this.ts.set(t.name,{name:(r=t).name,query:Ww(r.bundledQuery),readTime:Wn(r.readTime)}),le.resolve();var r}}class __{constructor(){this.overlays=new nr(Ge.comparator),this.es=new Map}getOverlay(e,t){return le.resolve(this.overlays.get(t))}getOverlays(e,t){const r=co();return le.forEach(t,o=>this.getOverlay(e,o).next(u=>{null!==u&&r.set(o,u)})).next(()=>r)}saveOverlays(e,t,r){return r.forEach((o,u)=>{this.oe(e,t,u)}),le.resolve()}removeOverlaysForBatchId(e,t,r){const o=this.es.get(r);return void 0!==o&&(o.forEach(u=>this.overlays=this.overlays.remove(u)),this.es.delete(r)),le.resolve()}getOverlaysForCollection(e,t,r){const o=co(),u=t.length+1,l=new Ge(t.child("")),g=this.overlays.getIteratorFrom(l);for(;g.hasNext();){const _=g.getNext().value,b=_.getKey();if(!t.isPrefixOf(b.path))break;b.path.length===u&&_.largestBatchId>r&&o.set(_.getKey(),_)}return le.resolve(o)}getOverlaysForCollectionGroup(e,t,r,o){let u=new nr((b,S)=>b-S);const l=this.overlays.getIterator();for(;l.hasNext();){const b=l.getNext().value;if(b.getKey().getCollectionGroup()===t&&b.largestBatchId>r){let S=u.get(b.largestBatchId);null===S&&(S=co(),u=u.insert(b.largestBatchId,S)),S.set(b.getKey(),b)}}const g=co(),_=u.getIterator();for(;_.hasNext()&&(_.getNext().value.forEach((b,S)=>g.set(b,S)),!(g.size()>=o)););return le.resolve(g)}oe(e,t,r){const o=this.overlays.get(r.key);if(null!==o){const l=this.es.get(o.largestBatchId).delete(r.key);this.es.set(o.largestBatchId,l)}this.overlays=this.overlays.insert(r.key,new u_(t,r));let u=this.es.get(t);void 0===u&&(u=qt(),this.es.set(t,u)),this.es.set(t,u.add(r.key))}}class zf{constructor(){this.ns=new pn(pr.ss),this.rs=new pn(pr.os)}isEmpty(){return this.ns.isEmpty()}addReference(e,t){const r=new pr(e,t);this.ns=this.ns.add(r),this.rs=this.rs.add(r)}us(e,t){e.forEach(r=>this.addReference(r,t))}removeReference(e,t){this.cs(new pr(e,t))}hs(e,t){e.forEach(r=>this.removeReference(r,t))}ls(e){const t=new Ge(new rn([])),r=new pr(t,e),o=new pr(t,e+1),u=[];return this.rs.forEachInRange([r,o],l=>{this.cs(l),u.push(l.key)}),u}fs(){this.ns.forEach(e=>this.cs(e))}cs(e){this.ns=this.ns.delete(e),this.rs=this.rs.delete(e)}ds(e){const t=new Ge(new rn([])),r=new pr(t,e),o=new pr(t,e+1);let u=qt();return this.rs.forEachInRange([r,o],l=>{u=u.add(l.key)}),u}containsKey(e){const t=new pr(e,0),r=this.ns.firstAfterOrEqual(t);return null!==r&&e.isEqual(r.key)}}class pr{constructor(e,t){this.key=e,this._s=t}static ss(e,t){return Ge.comparator(e.key,t.key)||Mt(e._s,t._s)}static os(e,t){return Mt(e._s,t._s)||Ge.comparator(e.key,t.key)}}class OS{constructor(e,t){this.indexManager=e,this.referenceDelegate=t,this.mutationQueue=[],this.ws=1,this.gs=new pn(pr.ss)}checkEmpty(e){return le.resolve(0===this.mutationQueue.length)}addMutationBatch(e,t,r,o){const u=this.ws;this.ws++;const l=new a_(u,t,r,o);this.mutationQueue.push(l);for(const g of o)this.gs=this.gs.add(new pr(g.key,u)),this.indexManager.addToCollectionParentIndex(e,g.key.path.popLast());return le.resolve(l)}lookupMutationBatch(e,t){return le.resolve(this.ys(t))}getNextMutationBatchAfterBatchId(e,t){const o=this.ps(t+1),u=o<0?0:o;return le.resolve(this.mutationQueue.length>u?this.mutationQueue[u]:null)}getHighestUnacknowledgedBatchId(){return le.resolve(0===this.mutationQueue.length?-1:this.ws-1)}getAllMutationBatches(e){return le.resolve(this.mutationQueue.slice())}getAllMutationBatchesAffectingDocumentKey(e,t){const r=new pr(t,0),o=new pr(t,Number.POSITIVE_INFINITY),u=[];return this.gs.forEachInRange([r,o],l=>{const g=this.ys(l._s);u.push(g)}),le.resolve(u)}getAllMutationBatchesAffectingDocumentKeys(e,t){let r=new pn(Mt);return t.forEach(o=>{const u=new pr(o,0),l=new pr(o,Number.POSITIVE_INFINITY);this.gs.forEachInRange([u,l],g=>{r=r.add(g._s)})}),le.resolve(this.Is(r))}getAllMutationBatchesAffectingQuery(e,t){const r=t.path,o=r.length+1;let u=r;Ge.isDocumentKey(u)||(u=u.child(""));const l=new pr(new Ge(u),0);let g=new pn(Mt);return this.gs.forEachWhile(_=>{const b=_.key.path;return!!r.isPrefixOf(b)&&(b.length===o&&(g=g.add(_._s)),!0)},l),le.resolve(this.Is(g))}Is(e){const t=[];return e.forEach(r=>{const o=this.ys(r);null!==o&&t.push(o)}),t}removeMutationBatch(e,t){ct(0===this.Ts(t.batchId,"removed")),this.mutationQueue.shift();let r=this.gs;return le.forEach(t.mutations,o=>{const u=new pr(o.key,t.batchId);return r=r.delete(u),this.referenceDelegate.markPotentiallyOrphaned(e,o.key)}).next(()=>{this.gs=r})}An(e){}containsKey(e,t){const r=new pr(t,0),o=this.gs.firstAfterOrEqual(r);return le.resolve(t.isEqual(o&&o.key))}performConsistencyCheck(e){return le.resolve()}Ts(e,t){return this.ps(e)}ps(e){return 0===this.mutationQueue.length?0:e-this.mutationQueue[0].batchId}ys(e){const t=this.ps(e);return t<0||t>=this.mutationQueue.length?null:this.mutationQueue[t]}}class kS{constructor(e){this.Es=e,this.docs=new nr(Ge.comparator),this.size=0}setIndexManager(e){this.indexManager=e}addEntry(e,t){const r=t.key,o=this.docs.get(r),u=o?o.size:0,l=this.Es(t);return this.docs=this.docs.insert(r,{document:t.mutableCopy(),size:l}),this.size+=l-u,this.indexManager.addToCollectionParentIndex(e,r.path.popLast())}removeEntry(e){const t=this.docs.get(e);t&&(this.docs=this.docs.remove(e),this.size-=t.size)}getEntry(e,t){const r=this.docs.get(t);return le.resolve(r?r.document.mutableCopy():Cn.newInvalidDocument(t))}getEntries(e,t){let r=Oi();return t.forEach(o=>{const u=this.docs.get(o);r=r.insert(o,u?u.document.mutableCopy():Cn.newInvalidDocument(o))}),le.resolve(r)}getAllFromCollection(e,t,r){let o=Oi();const u=new Ge(t.child("")),l=this.docs.getIteratorFrom(u);for(;l.hasNext();){const{key:g,value:{document:_}}=l.getNext();if(!t.isPrefixOf(g.path))break;g.path.length>t.length+1||Cg(wf(_),r)<=0||(o=o.insert(_.key,_.mutableCopy()))}return le.resolve(o)}getAllFromCollectionGroup(e,t,r,o){tt()}As(e,t){return le.forEach(this.docs,r=>t(r))}newChangeBuffer(e){return new FS(this)}getSize(e){return le.resolve(this.size)}}class FS extends Lb{constructor(e){super(),this.Yn=e}applyChanges(e){const t=[];return this.changes.forEach((r,o)=>{o.isValidDocument()?t.push(this.Yn.addEntry(e,o)):this.Yn.removeEntry(r)}),le.waitFor(t)}getFromCache(e,t){return this.Yn.getEntry(e,t)}getAllFromCache(e,t){return this.Yn.getEntries(e,t)}}class LS{constructor(e){this.persistence=e,this.Rs=new Nu(t=>Tu(t),Af),this.lastRemoteSnapshotVersion=mt.min(),this.highestTargetId=0,this.bs=0,this.Ps=new zf,this.targetCount=0,this.vs=rl.Pn()}forEachTarget(e,t){return this.Rs.forEach((r,o)=>t(o)),le.resolve()}getLastRemoteSnapshotVersion(e){return le.resolve(this.lastRemoteSnapshotVersion)}getHighestSequenceNumber(e){return le.resolve(this.bs)}allocateTargetId(e){return this.highestTargetId=this.vs.next(),le.resolve(this.highestTargetId)}setTargetsMetadata(e,t,r){return r&&(this.lastRemoteSnapshotVersion=r),t>this.bs&&(this.bs=t),le.resolve()}Dn(e){this.Rs.set(e.target,e);const t=e.targetId;t>this.highestTargetId&&(this.vs=new rl(t),this.highestTargetId=t),e.sequenceNumber>this.bs&&(this.bs=e.sequenceNumber)}addTargetData(e,t){return this.Dn(t),this.targetCount+=1,le.resolve()}updateTargetData(e,t){return this.Dn(t),le.resolve()}removeTargetData(e,t){return this.Rs.delete(t.target),this.Ps.ls(t.targetId),this.targetCount-=1,le.resolve()}removeTargets(e,t,r){let o=0;const u=[];return this.Rs.forEach((l,g)=>{g.sequenceNumber<=t&&null===r.get(g.targetId)&&(this.Rs.delete(l),u.push(this.removeMatchingKeysForTargetId(e,g.targetId)),o++)}),le.waitFor(u).next(()=>o)}getTargetCount(e){return le.resolve(this.targetCount)}getTargetData(e,t){const r=this.Rs.get(t)||null;return le.resolve(r)}addMatchingKeys(e,t,r){return this.Ps.us(t,r),le.resolve()}removeMatchingKeys(e,t,r){this.Ps.hs(t,r);const o=this.persistence.referenceDelegate,u=[];return o&&t.forEach(l=>{u.push(o.markPotentiallyOrphaned(e,l))}),le.waitFor(u)}removeMatchingKeysForTargetId(e,t){return this.Ps.ls(t),le.resolve()}getMatchingKeysForTargetId(e,t){const r=this.Ps.ds(t);return le.resolve(r)}containsKey(e,t){return le.resolve(this.Ps.containsKey(t))}}class I_{constructor(e,t){this.Vs={},this.overlays={},this.Ss=new Vs(0),this.Ds=!1,this.Ds=!0,this.referenceDelegate=e(this),this.Cs=new LS(this),this.indexManager=new Pb,this.remoteDocumentCache=new kS(r=>this.referenceDelegate.xs(r)),this.yt=new Sb(t),this.Ns=new Ub(this.yt)}start(){return Promise.resolve()}shutdown(){return this.Ds=!1,Promise.resolve()}get started(){return this.Ds}setDatabaseDeletedListener(){}setNetworkEnabled(){}getIndexManager(e){return this.indexManager}getDocumentOverlayCache(e){let t=this.overlays[e.toKey()];return t||(t=new __,this.overlays[e.toKey()]=t),t}getMutationQueue(e,t){let r=this.Vs[e.toKey()];return r||(r=new OS(t,this.referenceDelegate),this.Vs[e.toKey()]=r),r}getTargetCache(){return this.Cs}getRemoteDocumentCache(){return this.remoteDocumentCache}getBundleCache(){return this.Ns}runTransaction(e,t,r){Ve("MemoryPersistence","Starting transaction:",e);const o=new Vb(this.Ss.next());return this.referenceDelegate.ks(),r(o).next(u=>this.referenceDelegate.Os(o).next(()=>u)).toPromise().then(u=>(o.raiseOnCommittedEvent(),u))}Ms(e,t){return le.or(Object.values(this.Vs).map(r=>()=>r.containsKey(e,t)))}}class Vb extends kI{constructor(e){super(),this.currentSequenceNumber=e}}class am{constructor(e){this.persistence=e,this.Fs=new zf,this.$s=null}static Bs(e){return new am(e)}get Ls(){if(this.$s)return this.$s;throw tt()}addReference(e,t,r){return this.Fs.addReference(r,t),this.Ls.delete(r.toString()),le.resolve()}removeReference(e,t,r){return this.Fs.removeReference(r,t),this.Ls.add(r.toString()),le.resolve()}markPotentiallyOrphaned(e,t){return this.Ls.add(t.toString()),le.resolve()}removeTarget(e,t){this.Fs.ls(t.targetId).forEach(o=>this.Ls.add(o.toString()));const r=this.persistence.getTargetCache();return r.getMatchingKeysForTargetId(e,t.targetId).next(o=>{o.forEach(u=>this.Ls.add(u.toString()))}).next(()=>r.removeTargetData(e,t))}ks(){this.$s=new Set}Os(e){const t=this.persistence.getRemoteDocumentCache().newChangeBuffer();return le.forEach(this.Ls,r=>{const o=Ge.fromPath(r);return this.qs(e,o).next(u=>{u||t.removeEntry(o,mt.min())})}).next(()=>(this.$s=null,t.apply(e)))}updateLimboDocument(e,t){return this.qs(e,t).next(r=>{r?this.Ls.delete(t.toString()):this.Ls.add(t.toString())})}xs(e){return 0}qs(e,t){return le.or([()=>le.resolve(this.Fs.containsKey(t)),()=>this.persistence.getTargetCache().containsKey(e,t),()=>this.persistence.Ms(e,t)])}}class Bb{constructor(e){this.yt=e}$(e,t,r,o){const u=new Tg("createOrUpgrade",t);var g;r<1&&o>=1&&(e.createObjectStore("owner"),(g=e).createObjectStore("mutationQueues",{keyPath:"userId"}),g.createObjectStore("mutations",{keyPath:"batchId",autoIncrement:!0}).createIndex("userMutationsIndex",Lw,{unique:!0}),g.createObjectStore("documentMutations"),tE(e),function(g){g.createObjectStore("remoteDocuments")}(e));let l=le.resolve();return r<3&&o>=3&&(0!==r&&(function(g){g.deleteObjectStore("targetDocuments"),g.deleteObjectStore("targets"),g.deleteObjectStore("targetGlobal")}(e),tE(e)),l=l.next(()=>function(g){const _=g.store("targetGlobal"),b={highestTargetId:0,highestListenSequenceNumber:0,lastRemoteSnapshotVersion:mt.min().toTimestamp(),targetCount:0};return _.put("targetGlobalKey",b)}(u))),r<4&&o>=4&&(0!==r&&(l=l.next(()=>function(g,_){return _.store("mutations").W().next(b=>{g.deleteObjectStore("mutations"),g.createObjectStore("mutations",{keyPath:"batchId",autoIncrement:!0}).createIndex("userMutationsIndex",Lw,{unique:!0});const S=_.store("mutations"),P=b.map(W=>S.put(W));return le.waitFor(P)})}(e,u))),l=l.next(()=>{!function(g){g.createObjectStore("clientMetadata",{keyPath:"clientId"})}(e)})),r<5&&o>=5&&(l=l.next(()=>this.Us(u))),r<6&&o>=6&&(l=l.next(()=>(function(g){g.createObjectStore("remoteDocumentGlobal")}(e),this.Ks(u)))),r<7&&o>=7&&(l=l.next(()=>this.Gs(u))),r<8&&o>=8&&(l=l.next(()=>this.Qs(e,u))),r<9&&o>=9&&(l=l.next(()=>{!function(g){g.objectStoreNames.contains("remoteDocumentChanges")&&g.deleteObjectStore("remoteDocumentChanges")}(e)})),r<10&&o>=10&&(l=l.next(()=>this.js(u))),r<11&&o>=11&&(l=l.next(()=>{(function(g){g.createObjectStore("bundles",{keyPath:"bundleId"})})(e),function(g){g.createObjectStore("namedQueries",{keyPath:"name"})}(e)})),r<12&&o>=12&&(l=l.next(()=>{!function(g){const _=g.createObjectStore("documentOverlays",{keyPath:Vw});_.createIndex("collectionPathOverlayIndex",Bw,{unique:!1}),_.createIndex("collectionGroupOverlayIndex",TS,{unique:!1})}(e)})),r<13&&o>=13&&(l=l.next(()=>function(g){const _=g.createObjectStore("remoteDocumentsV14",{keyPath:vS});_.createIndex("documentKeyIndex",_S),_.createIndex("collectionGroupIndex",IS)}(e)).next(()=>this.Ws(e,u)).next(()=>e.deleteObjectStore("remoteDocuments"))),r<14&&o>=14&&(l=l.next(()=>this.zs(e,u))),r<15&&o>=15&&(l=l.next(()=>function(g){g.createObjectStore("indexConfiguration",{keyPath:"indexId",autoIncrement:!0}).createIndex("collectionGroupIndex","collectionGroup",{unique:!1}),g.createObjectStore("indexState",{keyPath:qg}).createIndex("sequenceNumberIndex",CS,{unique:!1}),g.createObjectStore("indexEntries",{keyPath:Uw}).createIndex("documentKeyIndex",Zg,{unique:!1})}(e))),l}Ks(e){let t=0;return e.store("remoteDocuments").Z((r,o)=>{t+=Bf(o)}).next(()=>{const r={byteSize:t};return e.store("remoteDocumentGlobal").put("remoteDocumentGlobalKey",r)})}Us(e){const t=e.store("mutationQueues"),r=e.store("mutations");return t.W().next(o=>le.forEach(o,u=>{const l=IDBKeyRange.bound([u.userId,-1],[u.userId,u.lastAcknowledgedBatchId]);return r.W("userMutationsIndex",l).next(g=>le.forEach(g,_=>{ct(_.userId===u.userId);const b=Jc(this.yt,_);return g_(e,u.userId,b).next(()=>{})}))}))}Gs(e){const t=e.store("targetDocuments"),r=e.store("remoteDocuments");return e.store("targetGlobal").get("targetGlobalKey").next(o=>{const u=[];return r.Z((l,g)=>{const _=new rn(l),b=[0,wi(_)];u.push(t.get(b).next(S=>S?le.resolve():t.put({targetId:0,path:wi(_),sequenceNumber:o.highestListenSequenceNumber})))}).next(()=>le.waitFor(u))})}Qs(e,t){e.createObjectStore("collectionParents",{keyPath:bS});const r=t.store("collectionParents"),o=new h_,u=l=>{if(o.add(l)){const g=l.lastSegment(),_=l.popLast();return r.put({collectionId:g,parent:wi(_)})}};return t.store("remoteDocuments").Z({X:!0},(l,g)=>{const _=new rn(l);return u(_.popLast())}).next(()=>t.store("documentMutations").Z({X:!0},([l,g,_],b)=>{const S=jo(g);return u(S.popLast())}))}js(e){const t=e.store("targets");return t.Z((r,o)=>{const u=Hd(o),l=c_(this.yt,u);return t.put(l)})}Ws(e,t){const r=t.store("remoteDocuments"),o=[];return r.Z((u,l)=>{const g=t.store("remoteDocumentsV14"),_=(b=l,b.document?new Ge(rn.fromString(b.document.name).popFirst(5)):b.noDocument?Ge.fromSegments(b.noDocument.path):b.unknownDocument?Ge.fromSegments(b.unknownDocument.path):tt()).path.toArray();var b;const S={prefixPath:_.slice(0,_.length-2),collectionGroup:_[_.length-2],documentId:_[_.length-1],readTime:l.readTime||[0,0],unknownDocument:l.unknownDocument,noDocument:l.noDocument,document:l.document,hasCommittedMutations:!!l.hasCommittedMutations};o.push(g.put(S))}).next(()=>le.waitFor(o))}zs(e,t){const r=t.store("mutations"),o=Jw(this.yt),u=new I_(am.Bs,this.yt.ie);return r.W().next(l=>{const g=new Map;return l.forEach(_=>{var b;let S=null!==(b=g.get(_.userId))&&void 0!==b?b:qt();Jc(this.yt,_).keys().forEach(P=>S=S.add(P)),g.set(_.userId,S)}),le.forEach(g,(_,b)=>{const S=new Nr(b),P=Xg.re(this.yt,S),W=u.getIndexManager(S),J=$f.re(S,this.yt,W,u.referenceDelegate);return new om(o,J,P,W).recalculateAndSaveOverlaysForDocumentKeys(new Hw(t,Vs.at),_).next()})})}}function tE(n){n.createObjectStore("targetDocuments",{keyPath:ES}).createIndex("documentTargetsIndex",DS,{unique:!0}),n.createObjectStore("targets",{keyPath:"targetId"}).createIndex("queryTargetsIndex",wS,{unique:!0}),n.createObjectStore("targetGlobal")}const um="Failed to obtain exclusive access to the persistence layer. To allow shared access, multi-tab synchronization has to be enabled in all tabs. If you are using `experimentalForceOwningTab:true`, make sure that only one tab has persistence enabled at any given time.";class cm{constructor(e,t,r,o,u,l,g,_,b,S,P=15){if(this.allowTabSynchronization=e,this.persistenceKey=t,this.clientId=r,this.Hs=u,this.window=l,this.document=g,this.Js=b,this.Ys=S,this.Xs=P,this.Ss=null,this.Ds=!1,this.isPrimary=!1,this.networkEnabled=!0,this.Zs=null,this.inForeground=!1,this.ti=null,this.ei=null,this.ni=Number.NEGATIVE_INFINITY,this.si=W=>Promise.resolve(),!cm.C())throw new Te(fe.UNIMPLEMENTED,"This platform is either missing IndexedDB or is known to have an incomplete implementation. Offline persistence has been disabled.");this.referenceDelegate=new NS(this,o),this.ii=t+"main",this.yt=new Sb(_),this.ri=new ao(this.ii,this.Xs,new Bb(this.yt)),this.Cs=new MS(this.referenceDelegate,this.yt),this.remoteDocumentCache=Jw(this.yt),this.Ns=new Ab,this.window&&this.window.localStorage?this.oi=this.window.localStorage:(this.oi=null,!1===S&&er("IndexedDbPersistence","LocalStorage is unavailable. As a result, persistence may not work reliably. In particular enablePersistence() could fail immediately after refreshing the page."))}start(){return this.ui().then(()=>{if(!this.isPrimary&&!this.allowTabSynchronization)throw new Te(fe.FAILED_PRECONDITION,um);return this.ci(),this.ai(),this.hi(),this.runTransaction("getHighestListenSequenceNumber","readonly",e=>this.Cs.getHighestSequenceNumber(e))}).then(e=>{this.Ss=new Vs(e,this.Js)}).then(()=>{this.Ds=!0}).catch(e=>(this.ri&&this.ri.close(),Promise.reject(e)))}li(e){var t=this;return this.si=function(){var r=(0,ve.Z)(function*(o){if(t.started)return e(o)});return function(o){return r.apply(this,arguments)}}(),e(this.isPrimary)}setDatabaseDeletedListener(e){this.ri.L(function(){var t=(0,ve.Z)(function*(r){null===r.newVersion&&(yield e())});return function(r){return t.apply(this,arguments)}}())}setNetworkEnabled(e){var t=this;this.networkEnabled!==e&&(this.networkEnabled=e,this.Hs.enqueueAndForget((0,ve.Z)(function*(){t.started&&(yield t.ui())})))}ui(){return this.runTransaction("updateClientMetadataAndTryBecomePrimary","readwrite",e=>lm(e).put({clientId:this.clientId,updateTimeMs:Date.now(),networkEnabled:this.networkEnabled,inForeground:this.inForeground}).next(()=>{if(this.isPrimary)return this.fi(e).next(t=>{t||(this.isPrimary=!1,this.Hs.enqueueRetryable(()=>this.si(!1)))})}).next(()=>this.di(e)).next(t=>this.isPrimary&&!t?this._i(e).next(()=>!1):!!t&&this.wi(e).next(()=>!0))).catch(e=>{if(ba(e))return Ve("IndexedDbPersistence","Failed to extend owner lease: ",e),this.isPrimary;if(!this.allowTabSynchronization)throw e;return Ve("IndexedDbPersistence","Releasing owner lease after error during lease refresh",e),!1}).then(e=>{this.isPrimary!==e&&this.Hs.enqueueRetryable(()=>this.si(e)),this.isPrimary=e})}fi(e){return Gd(e).get("owner").next(t=>le.resolve(this.mi(t)))}gi(e){return lm(e).delete(this.clientId)}yi(){var e=this;return(0,ve.Z)(function*(){if(e.isPrimary&&!e.pi(e.ni,18e5)){e.ni=Date.now();const t=yield e.runTransaction("maybeGarbageCollectMultiClientState","readwrite-primary",r=>{const o=Zr(r,"clientMetadata");return o.W().next(u=>{const l=e.Ii(u,18e5),g=u.filter(_=>-1===l.indexOf(_));return le.forEach(g,_=>o.delete(_.clientId)).next(()=>g)})}).catch(()=>[]);if(e.oi)for(const r of t)e.oi.removeItem(e.Ti(r.clientId))}})()}hi(){this.ei=this.Hs.enqueueAfterDelay("client_metadata_refresh",4e3,()=>this.ui().then(()=>this.yi()).then(()=>this.hi()))}mi(e){return!!e&&e.ownerId===this.clientId}di(e){return this.Ys?le.resolve(!0):Gd(e).get("owner").next(t=>{if(null!==t&&this.pi(t.leaseTimestampMs,5e3)&&!this.Ei(t.ownerId)){if(this.mi(t)&&this.networkEnabled)return!0;if(!this.mi(t)){if(!t.allowTabSynchronization)throw new Te(fe.FAILED_PRECONDITION,um);return!1}}return!(!this.networkEnabled||!this.inForeground)||lm(e).W().next(r=>void 0===this.Ii(r,5e3).find(o=>{if(this.clientId!==o.clientId){const l=!this.inForeground&&o.inForeground,g=this.networkEnabled===o.networkEnabled;if(!this.networkEnabled&&o.networkEnabled||l&&g)return!0}return!1}))}).next(t=>(this.isPrimary!==t&&Ve("IndexedDbPersistence",`Client ${t?"is":"is not"} eligible for a primary lease.`),t))}shutdown(){var e=this;return(0,ve.Z)(function*(){e.Ds=!1,e.Ai(),e.ei&&(e.ei.cancel(),e.ei=null),e.Ri(),e.bi(),yield e.ri.runTransaction("shutdown","readwrite",["owner","clientMetadata"],t=>{const r=new Hw(t,Vs.at);return e._i(r).next(()=>e.gi(r))}),e.ri.close(),e.Pi()})()}Ii(e,t){return e.filter(r=>this.pi(r.updateTimeMs,t)&&!this.Ei(r.clientId))}vi(){return this.runTransaction("getActiveClients","readonly",e=>lm(e).W().next(t=>this.Ii(t,18e5).map(r=>r.clientId)))}get started(){return this.Ds}getMutationQueue(e,t){return $f.re(e,this.yt,t,this.referenceDelegate)}getTargetCache(){return this.Cs}getRemoteDocumentCache(){return this.remoteDocumentCache}getIndexManager(e){return new xS(e,this.yt.ie.databaseId)}getDocumentOverlayCache(e){return Xg.re(this.yt,e)}getBundleCache(){return this.Ns}runTransaction(e,t,r){Ve("IndexedDbPersistence","Starting transaction:",e);const o="readonly"===t?"readonly":"readwrite",u=15===(l=this.Xs)?SS:14===l?o_:13===l?jw:12===l?$w:11===l?Kg:void tt();var l;let g;return this.ri.runTransaction(e,o,u,_=>(g=new Hw(_,this.Ss?this.Ss.next():Vs.at),"readwrite-primary"===t?this.fi(g).next(b=>!!b||this.di(g)).next(b=>{if(!b)throw er(`Failed to obtain primary lease for action '${e}'.`),this.isPrimary=!1,this.Hs.enqueueRetryable(()=>this.si(!1)),new Te(fe.FAILED_PRECONDITION,Cv);return r(g)}).next(b=>this.wi(g).next(()=>b)):this.Vi(g).next(()=>r(g)))).then(_=>(g.raiseOnCommittedEvent(),_))}Vi(e){return Gd(e).get("owner").next(t=>{if(null!==t&&this.pi(t.leaseTimestampMs,5e3)&&!this.Ei(t.ownerId)&&!this.mi(t)&&!(this.Ys||this.allowTabSynchronization&&t.allowTabSynchronization))throw new Te(fe.FAILED_PRECONDITION,um)})}wi(e){const t={ownerId:this.clientId,allowTabSynchronization:this.allowTabSynchronization,leaseTimestampMs:Date.now()};return Gd(e).put("owner",t)}static C(){return ao.C()}_i(e){const t=Gd(e);return t.get("owner").next(r=>this.mi(r)?(Ve("IndexedDbPersistence","Releasing primary lease."),t.delete("owner")):le.resolve())}pi(e,t){const r=Date.now();return!(e<r-t||e>r&&(er(`Detected an update time that is in the future: ${e} > ${r}`),1))}ci(){null!==this.document&&"function"==typeof this.document.addEventListener&&(this.ti=()=>{this.Hs.enqueueAndForget(()=>(this.inForeground="visible"===this.document.visibilityState,this.ui()))},this.document.addEventListener("visibilitychange",this.ti),this.inForeground="visible"===this.document.visibilityState)}Ri(){this.ti&&(this.document.removeEventListener("visibilitychange",this.ti),this.ti=null)}ai(){var e;"function"==typeof(null===(e=this.window)||void 0===e?void 0:e.addEventListener)&&(this.Zs=()=>{this.Ai(),(0,an.G6)()&&navigator.appVersion.match(/Version\/1[45]/)&&this.Hs.enterRestrictedMode(!0),this.Hs.enqueueAndForget(()=>this.shutdown())},this.window.addEventListener("pagehide",this.Zs))}bi(){this.Zs&&(this.window.removeEventListener("pagehide",this.Zs),this.Zs=null)}Ei(e){var t;try{const r=null!==(null===(t=this.oi)||void 0===t?void 0:t.getItem(this.Ti(e)));return Ve("IndexedDbPersistence",`Client '${e}' ${r?"is":"is not"} zombied in LocalStorage`),r}catch(r){return er("IndexedDbPersistence","Failed to get zombied client id.",r),!1}}Ai(){if(this.oi)try{this.oi.setItem(this.Ti(this.clientId),String(Date.now()))}catch(e){er("Failed to set zombie client id.",e)}}Pi(){if(this.oi)try{this.oi.removeItem(this.Ti(this.clientId))}catch{}}Ti(e){return`firestore_zombie_${this.persistenceKey}_${e}`}}function Gd(n){return Zr(n,"owner")}function lm(n){return Zr(n,"clientMetadata")}function w_(n,e){let t=n.projectId;return n.isDefaultDatabase||(t+="."+n.database),"firestore/"+e+"/"+t+"/"}class dm{constructor(e,t,r,o){this.targetId=e,this.fromCache=t,this.Si=r,this.Di=o}static Ci(e,t){let r=qt(),o=qt();for(const u of t.docChanges)switch(u.type){case 0:r=r.add(u.doc.key);break;case 1:o=o.add(u.doc.key)}return new dm(e,t.fromCache,r,o)}}class hm{constructor(){this.xi=!1}initialize(e,t){this.Ni=e,this.indexManager=t,this.xi=!0}getDocumentsMatchingQuery(e,t,r,o){return this.ki(e,t).next(u=>u||this.Oi(e,t,o,r)).next(u=>u||this.Mi(e,t))}ki(e,t){if(iw(t))return le.resolve(null);let r=Pi(t);return this.indexManager.getIndexType(e,r).next(o=>0===o?null:(null!==t.limit&&1===o&&(t=Ug(t,null,"F"),r=Pi(t)),this.indexManager.getDocumentsMatchingTarget(e,r).next(u=>{const l=qt(...u);return this.Ni.getDocuments(e,l).next(g=>this.indexManager.getMinOffset(e,r).next(_=>{const b=this.Fi(t,g);return this.$i(t,b,l,_.readTime)?this.ki(e,Ug(t,null,"F")):this.Bi(e,b,t,_)}))})))}Oi(e,t,r,o){return iw(t)||o.isEqual(mt.min())?this.Mi(e,t):this.Ni.getDocuments(e,r).next(u=>{const l=this.Fi(t,u);return this.$i(t,l,r,o)?this.Mi(e,t):(Eg()<=hu.in.DEBUG&&Ve("QueryEngine","Re-using previous result from %s to execute query: %s",o.toString(),Uv(t)),this.Bi(e,l,t,OI(o,-1)))})}Fi(e,t){let r=new pn(uw(e));return t.forEach((o,u)=>{Vv(e,u)&&(r=r.add(u))}),r}$i(e,t,r,o){if(null===e.limit)return!1;if(r.size!==t.size)return!0;const u="F"===e.limitType?t.last():t.first();return!!u&&(u.hasPendingWrites||u.version.compareTo(o)>0)}Mi(e,t){return Eg()<=hu.in.DEBUG&&Ve("QueryEngine","Using full collection scan to execute query:",Uv(t)),this.Ni.getDocumentsMatchingQuery(e,t,Yi.min())}Bi(e,t,r,o){return this.Ni.getDocumentsMatchingQuery(e,r,o).next(u=>(t.forEach(l=>{u=u.insert(l.key,l)}),u))}}class US{constructor(e,t,r,o){this.persistence=e,this.Li=t,this.yt=o,this.qi=new nr(Mt),this.Ui=new Nu(u=>Tu(u),Af),this.Ki=new Map,this.Gi=e.getRemoteDocumentCache(),this.Cs=e.getTargetCache(),this.Ns=e.getBundleCache(),this.Qi(r)}Qi(e){this.documentOverlayCache=this.persistence.getDocumentOverlayCache(e),this.indexManager=this.persistence.getIndexManager(e),this.mutationQueue=this.persistence.getMutationQueue(e,this.indexManager),this.localDocuments=new om(this.Gi,this.mutationQueue,this.documentOverlayCache,this.indexManager),this.Gi.setIndexManager(this.indexManager),this.Li.initialize(this.localDocuments,this.indexManager)}collectGarbage(e){return this.persistence.runTransaction("Collect garbage","readwrite-primary",t=>e.collect(t,this.qi))}}function E_(n,e,t,r){return new US(n,e,t,r)}function fm(n,e){return D_.apply(this,arguments)}function D_(){return D_=(0,ve.Z)(function*(n,e){const t=Ze(n);return yield t.persistence.runTransaction("Handle user change","readonly",r=>{let o;return t.mutationQueue.getAllMutationBatches(r).next(u=>(o=u,t.Qi(e),t.mutationQueue.getAllMutationBatches(r))).next(u=>{const l=[],g=[];let _=qt();for(const b of o){l.push(b.batchId);for(const S of b.mutations)_=_.add(S.key)}for(const b of u){g.push(b.batchId);for(const S of b.mutations)_=_.add(S.key)}return t.localDocuments.getDocuments(r,_).next(b=>({ji:b,removedBatchIds:l,addedBatchIds:g}))})})}),D_.apply(this,arguments)}function $b(n,e){const t=Ze(n);return t.persistence.runTransaction("Acknowledge batch","readwrite-primary",r=>{const o=e.batch.keys(),u=t.Gi.newChangeBuffer({trackRemovals:!0});return function(l,g,_,b){const S=_.batch,P=S.keys();let W=le.resolve();return P.forEach(J=>{W=W.next(()=>b.getEntry(g,J)).next(oe=>{const ke=_.docVersions.get(J);ct(null!==ke),oe.version.compareTo(ke)<0&&(S.applyToRemoteDocument(oe,_),oe.isValidDocument()&&(oe.setReadTime(_.commitVersion),b.addEntry(oe)))})}),W.next(()=>l.mutationQueue.removeMutationBatch(g,S))}(t,r,e,u).next(()=>u.apply(r)).next(()=>t.mutationQueue.performConsistencyCheck(r)).next(()=>t.documentOverlayCache.removeOverlaysForBatchId(r,o,e.batch.batchId)).next(()=>t.localDocuments.recalculateAndSaveOverlaysForDocumentKeys(r,function(l){let g=qt();for(let _=0;_<l.mutationResults.length;++_)l.mutationResults[_].transformResults.length>0&&(g=g.add(l.batch.mutations[_].key));return g}(e))).next(()=>t.localDocuments.getDocuments(r,o))})}function jb(n){const e=Ze(n);return e.persistence.runTransaction("Get last remote snapshot version","readonly",t=>e.Cs.getLastRemoteSnapshotVersion(t))}function VS(n,e){const t=Ze(n),r=e.snapshotVersion;let o=t.qi;return t.persistence.runTransaction("Apply remote event","readwrite-primary",u=>{const l=t.Gi.newChangeBuffer({trackRemovals:!0});o=t.qi;const g=[];e.targetChanges.forEach((S,P)=>{const W=o.get(P);if(!W)return;g.push(t.Cs.removeMatchingKeys(u,S.removedDocuments,P).next(()=>t.Cs.addMatchingKeys(u,S.addedDocuments,P)));let J=W.withSequenceNumber(u.currentSequenceNumber);var oe,ke,je;e.targetMismatches.has(P)?J=J.withResumeToken(Pr.EMPTY_BYTE_STRING,mt.min()).withLastLimboFreeSnapshotVersion(mt.min()):S.resumeToken.approximateByteSize()>0&&(J=J.withResumeToken(S.resumeToken,r)),o=o.insert(P,J),ke=J,je=S,(0===(oe=W).resumeToken.approximateByteSize()||ke.snapshotVersion.toMicroseconds()-oe.snapshotVersion.toMicroseconds()>=3e8||je.addedDocuments.size+je.modifiedDocuments.size+je.removedDocuments.size>0)&&g.push(t.Cs.updateTargetData(u,J))});let _=Oi(),b=qt();if(e.documentUpdates.forEach(S=>{e.resolvedLimboDocuments.has(S)&&g.push(t.persistence.referenceDelegate.updateLimboDocument(u,S))}),g.push(nE(u,l,e.documentUpdates).next(S=>{_=S.Wi,b=S.zi})),!r.isEqual(mt.min())){const S=t.Cs.getLastRemoteSnapshotVersion(u).next(P=>t.Cs.setTargetsMetadata(u,u.currentSequenceNumber,r));g.push(S)}return le.waitFor(g).next(()=>l.apply(u)).next(()=>t.localDocuments.getLocalViewOfDocuments(u,_,b)).next(()=>_)}).then(u=>(t.qi=o,u))}function nE(n,e,t){let r=qt(),o=qt();return t.forEach(u=>r=r.add(u)),e.getEntries(n,r).next(u=>{let l=Oi();return t.forEach((g,_)=>{const b=u.get(g);_.isFoundDocument()!==b.isFoundDocument()&&(o=o.add(g)),_.isNoDocument()&&_.version.isEqual(mt.min())?(e.removeEntry(g,_.readTime),l=l.insert(g,_)):!b.isValidDocument()||_.version.compareTo(b.version)>0||0===_.version.compareTo(b.version)&&b.hasPendingWrites?(e.addEntry(_),l=l.insert(g,_)):Ve("LocalStore","Ignoring outdated watch update for ",g,". Current version:",b.version," Watch version:",_.version)}),{Wi:l,zi:o}})}function Hb(n,e){const t=Ze(n);return t.persistence.runTransaction("Get next mutation batch","readonly",r=>(void 0===e&&(e=-1),t.mutationQueue.getNextMutationBatchAfterBatchId(r,e)))}function qd(n,e){const t=Ze(n);return t.persistence.runTransaction("Allocate target","readwrite",r=>{let o;return t.Cs.getTargetData(r,e).next(u=>u?(o=u,le.resolve(o)):t.Cs.allocateTargetId(r).next(l=>(o=new Qc(e,l,0,r.currentSequenceNumber),t.Cs.addTargetData(r,o).next(()=>o))))}).then(r=>{const o=t.qi.get(r.targetId);return(null===o||r.snapshotVersion.compareTo(o.snapshotVersion)>0)&&(t.qi=t.qi.insert(r.targetId,r),t.Ui.set(e,r.targetId)),r})}function Wf(n,e,t){return rE.apply(this,arguments)}function rE(){return rE=(0,ve.Z)(function*(n,e,t){const r=Ze(n),o=r.qi.get(e),u=t?"readwrite":"readwrite-primary";try{t||(yield r.persistence.runTransaction("Release target",u,l=>r.persistence.referenceDelegate.removeTarget(l,o)))}catch(l){if(!ba(l))throw l;Ve("LocalStore",`Failed to update sequence numbers for target ${e}: ${l}`)}r.qi=r.qi.remove(e),r.Ui.delete(o.target)}),rE.apply(this,arguments)}function b_(n,e,t){const r=Ze(n);let o=mt.min(),u=qt();return r.persistence.runTransaction("Execute query","readonly",l=>function(g,_,b){const S=Ze(g),P=S.Ui.get(b);return void 0!==P?le.resolve(S.qi.get(P)):S.Cs.getTargetData(_,b)}(r,l,Pi(e)).next(g=>{if(g)return o=g.lastLimboFreeSnapshotVersion,r.Cs.getMatchingKeysForTargetId(l,g.targetId).next(_=>{u=_})}).next(()=>r.Li.getDocumentsMatchingQuery(l,e,t?o:mt.min(),t?u:qt())).next(g=>(iE(r,aw(e),g),{documents:g,Hi:u})))}function zb(n,e){const t=Ze(n),r=Ze(t.Cs),o=t.qi.get(e);return o?Promise.resolve(o.target):t.persistence.runTransaction("Get target data","readonly",u=>r.ne(u,e).next(l=>l?l.target:null))}function Wb(n,e){const t=Ze(n),r=t.Ki.get(e)||mt.min();return t.persistence.runTransaction("Get new document changes","readonly",o=>t.Gi.getAllFromCollectionGroup(o,e,OI(r,-1),Number.MAX_SAFE_INTEGER)).then(o=>(iE(t,e,o),o))}function iE(n,e,t){let r=n.Ki.get(e)||mt.min();t.forEach((o,u)=>{u.readTime.compareTo(r)>0&&(r=u.readTime)}),n.Ki.set(e,r)}function sE(){return sE=(0,ve.Z)(function*(n,e,t,r){const o=Ze(n);let u=qt(),l=Oi();for(const b of t){const S=e.Ji(b.metadata.name);b.document&&(u=u.add(S));const P=e.Yi(b);P.setReadTime(e.Xi(b.metadata.readTime)),l=l.insert(S,P)}const g=o.Gi.newChangeBuffer({trackRemovals:!0}),_=yield qd(o,(b=r,Pi(Nd(rn.fromString(`__bundle__/docs/${b}`)))));var b;return o.persistence.runTransaction("Apply bundle documents","readwrite",b=>nE(b,g,l).next(S=>(g.apply(b),S)).next(S=>o.Cs.removeMatchingKeysForTargetId(b,_.targetId).next(()=>o.Cs.addMatchingKeys(b,u,_.targetId)).next(()=>o.localDocuments.getLocalViewOfDocuments(b,S.Wi,S.zi)).next(()=>S.Wi)))}),sE.apply(this,arguments)}function $S(n,e){return oE.apply(this,arguments)}function oE(){return oE=(0,ve.Z)(function*(n,e,t=qt()){const r=yield qd(n,Pi(Ww(e.bundledQuery))),o=Ze(n);return o.persistence.runTransaction("Save named query","readwrite",u=>{const l=Wn(e.readTime);if(r.snapshotVersion.compareTo(l)>=0)return o.Ns.saveNamedQuery(u,e);const g=r.withResumeToken(Pr.EMPTY_BYTE_STRING,l);return o.qi=o.qi.insert(g.targetId,g),o.Cs.updateTargetData(u,g).next(()=>o.Cs.removeMatchingKeysForTargetId(u,r.targetId)).next(()=>o.Cs.addMatchingKeys(u,t,r.targetId)).next(()=>o.Ns.saveNamedQuery(u,e))})}),oE.apply(this,arguments)}function Gb(n,e){return`firestore_clients_${n}_${e}`}function qb(n,e,t){let r=`firestore_mutations_${n}_${t}`;return e.isAuthenticated()&&(r+=`_${e.uid}`),r}function i(n,e){return`firestore_targets_${n}_${e}`}class s{constructor(e,t,r,o){this.user=e,this.batchId=t,this.state=r,this.error=o}static Zi(e,t,r){const o=JSON.parse(r);let u,l="object"==typeof o&&-1!==["pending","acknowledged","rejected"].indexOf(o.state)&&(void 0===o.error||"object"==typeof o.error);return l&&o.error&&(l="string"==typeof o.error.message&&"string"==typeof o.error.code,l&&(u=new Te(o.error.code,o.error.message))),l?new s(e,t,o.state,u):(er("SharedClientState",`Failed to parse mutation state for ID '${t}': ${r}`),null)}tr(){const e={state:this.state,updateTimeMs:Date.now()};return this.error&&(e.error={code:this.error.code,message:this.error.message}),JSON.stringify(e)}}class a{constructor(e,t,r){this.targetId=e,this.state=t,this.error=r}static Zi(e,t){const r=JSON.parse(t);let o,u="object"==typeof r&&-1!==["not-current","current","rejected"].indexOf(r.state)&&(void 0===r.error||"object"==typeof r.error);return u&&r.error&&(u="string"==typeof r.error.message&&"string"==typeof r.error.code,u&&(o=new Te(r.error.code,r.error.message))),u?new a(e,r.state,o):(er("SharedClientState",`Failed to parse target state for ID '${e}': ${t}`),null)}tr(){const e={state:this.state,updateTimeMs:Date.now()};return this.error&&(e.error={code:this.error.code,message:this.error.message}),JSON.stringify(e)}}class c{constructor(e,t){this.clientId=e,this.activeTargetIds=t}static Zi(e,t){const r=JSON.parse(t);let o="object"==typeof r&&r.activeTargetIds instanceof Array,u=Hg();for(let l=0;o&&l<r.activeTargetIds.length;++l)o=Sv(r.activeTargetIds[l]),u=u.add(r.activeTargetIds[l]);return o?new c(e,u):(er("SharedClientState",`Failed to parse client data for instance '${e}': ${t}`),null)}}class d{constructor(e,t){this.clientId=e,this.onlineState=t}static Zi(e){const t=JSON.parse(e);return"object"==typeof t&&-1!==["Unknown","Online","Offline"].indexOf(t.onlineState)&&"string"==typeof t.clientId?new d(t.clientId,t.onlineState):(er("SharedClientState",`Failed to parse online state: ${e}`),null)}}class h{constructor(){this.activeTargetIds=Hg()}er(e){this.activeTargetIds=this.activeTargetIds.add(e)}nr(e){this.activeTargetIds=this.activeTargetIds.delete(e)}tr(){const e={activeTargetIds:this.activeTargetIds.toArray(),updateTimeMs:Date.now()};return JSON.stringify(e)}}class y{constructor(e,t,r,o,u){this.window=e,this.Hs=t,this.persistenceKey=r,this.sr=o,this.syncEngine=null,this.onlineStateHandler=null,this.sequenceNumberHandler=null,this.ir=this.rr.bind(this),this.ur=new nr(Mt),this.started=!1,this.cr=[];const l=r.replace(/[.*+?^${}()|[\]\\]/g,"\\$&");this.storage=this.window.localStorage,this.currentUser=u,this.ar=Gb(this.persistenceKey,this.sr),this.hr=`firestore_sequence_number_${this.persistenceKey}`,this.ur=this.ur.insert(this.sr,new h),this.lr=new RegExp(`^firestore_clients_${l}_([^_]*)$`),this.dr=new RegExp(`^firestore_mutations_${l}_(\\d+)(?:_(.*))?$`),this._r=new RegExp(`^firestore_targets_${l}_(\\d+)$`),this.wr=`firestore_online_state_${this.persistenceKey}`,this.mr=function(g){return`firestore_bundle_loaded_v2_${g}`}(this.persistenceKey),this.window.addEventListener("storage",this.ir)}static C(e){return!(!e||!e.localStorage)}start(){var e=this;return(0,ve.Z)(function*(){const t=yield e.syncEngine.vi();for(const o of t){if(o===e.sr)continue;const u=e.getItem(Gb(e.persistenceKey,o));if(u){const l=c.Zi(o,u);l&&(e.ur=e.ur.insert(l.clientId,l))}}e.gr();const r=e.storage.getItem(e.wr);if(r){const o=e.yr(r);o&&e.pr(o)}for(const o of e.cr)e.rr(o);e.cr=[],e.window.addEventListener("pagehide",()=>e.shutdown()),e.started=!0})()}writeSequenceNumber(e){this.setItem(this.hr,JSON.stringify(e))}getAllActiveQueryTargets(){return this.Ir(this.ur)}isActiveQueryTarget(e){let t=!1;return this.ur.forEach((r,o)=>{o.activeTargetIds.has(e)&&(t=!0)}),t}addPendingMutation(e){this.Tr(e,"pending")}updateMutationState(e,t,r){this.Tr(e,t,r),this.Er(e)}addLocalQueryTarget(e){let t="not-current";if(this.isActiveQueryTarget(e)){const r=this.storage.getItem(i(this.persistenceKey,e));if(r){const o=a.Zi(e,r);o&&(t=o.state)}}return this.Ar.er(e),this.gr(),t}removeLocalQueryTarget(e){this.Ar.nr(e),this.gr()}isLocalQueryTarget(e){return this.Ar.activeTargetIds.has(e)}clearQueryState(e){this.removeItem(i(this.persistenceKey,e))}updateQueryState(e,t,r){this.Rr(e,t,r)}handleUserChange(e,t,r){t.forEach(o=>{this.Er(o)}),this.currentUser=e,r.forEach(o=>{this.addPendingMutation(o)})}setOnlineState(e){this.br(e)}notifyBundleLoaded(e){this.Pr(e)}shutdown(){this.started&&(this.window.removeEventListener("storage",this.ir),this.removeItem(this.ar),this.started=!1)}getItem(e){const t=this.storage.getItem(e);return Ve("SharedClientState","READ",e,t),t}setItem(e,t){Ve("SharedClientState","SET",e,t),this.storage.setItem(e,t)}removeItem(e){Ve("SharedClientState","REMOVE",e),this.storage.removeItem(e)}rr(e){var t=this;const r=e;if(r.storageArea===this.storage){if(Ve("SharedClientState","EVENT",r.key,r.newValue),r.key===this.ar)return void er("Received WebStorage notification for local change. Another client might have garbage-collected our state");this.Hs.enqueueRetryable((0,ve.Z)(function*(){if(t.started){if(null!==r.key)if(t.lr.test(r.key)){if(null==r.newValue){const o=t.vr(r.key);return t.Vr(o,null)}{const o=t.Sr(r.key,r.newValue);if(o)return t.Vr(o.clientId,o)}}else if(t.dr.test(r.key)){if(null!==r.newValue){const o=t.Dr(r.key,r.newValue);if(o)return t.Cr(o)}}else if(t._r.test(r.key)){if(null!==r.newValue){const o=t.Nr(r.key,r.newValue);if(o)return t.kr(o)}}else if(r.key===t.wr){if(null!==r.newValue){const o=t.yr(r.newValue);if(o)return t.pr(o)}}else if(r.key===t.hr){const o=function(u){let l=Vs.at;if(null!=u)try{const g=JSON.parse(u);ct("number"==typeof g),l=g}catch(g){er("SharedClientState","Failed to read sequence number from WebStorage",g)}return l}(r.newValue);o!==Vs.at&&t.sequenceNumberHandler(o)}else if(r.key===t.mr){const o=t.Or(r.newValue);yield Promise.all(o.map(u=>t.syncEngine.Mr(u)))}}else t.cr.push(r)}))}}get Ar(){return this.ur.get(this.sr)}gr(){this.setItem(this.ar,this.Ar.tr())}Tr(e,t,r){const o=new s(this.currentUser,e,t,r),u=qb(this.persistenceKey,this.currentUser,e);this.setItem(u,o.tr())}Er(e){const t=qb(this.persistenceKey,this.currentUser,e);this.removeItem(t)}br(e){this.storage.setItem(this.wr,JSON.stringify({clientId:this.sr,onlineState:e}))}Rr(e,t,r){const o=i(this.persistenceKey,e),u=new a(e,t,r);this.setItem(o,u.tr())}Pr(e){const t=JSON.stringify(Array.from(e));this.setItem(this.mr,t)}vr(e){const t=this.lr.exec(e);return t?t[1]:null}Sr(e,t){const r=this.vr(e);return c.Zi(r,t)}Dr(e,t){const r=this.dr.exec(e),o=Number(r[1]);return s.Zi(new Nr(void 0!==r[2]?r[2]:null),o,t)}Nr(e,t){const r=this._r.exec(e),o=Number(r[1]);return a.Zi(o,t)}yr(e){return d.Zi(e)}Or(e){return JSON.parse(e)}Cr(e){var t=this;return(0,ve.Z)(function*(){if(e.user.uid===t.currentUser.uid)return t.syncEngine.Fr(e.batchId,e.state,e.error);Ve("SharedClientState",`Ignoring mutation for non-active user ${e.user.uid}`)})()}kr(e){return this.syncEngine.$r(e.targetId,e.state,e.error)}Vr(e,t){const r=t?this.ur.insert(e,t):this.ur.remove(e),o=this.Ir(this.ur),u=this.Ir(r),l=[],g=[];return u.forEach(_=>{o.has(_)||l.push(_)}),o.forEach(_=>{u.has(_)||g.push(_)}),this.syncEngine.Br(l,g).then(()=>{this.ur=r})}pr(e){this.ur.get(e.clientId)&&this.onlineStateHandler(e.onlineState)}Ir(e){let t=Hg();return e.forEach((r,o)=>{t=t.unionWith(o.activeTargetIds)}),t}}class I{constructor(){this.Lr=new h,this.qr={},this.onlineStateHandler=null,this.sequenceNumberHandler=null}addPendingMutation(e){}updateMutationState(e,t,r){}addLocalQueryTarget(e){return this.Lr.er(e),this.qr[e]||"not-current"}updateQueryState(e,t,r){this.qr[e]=t}removeLocalQueryTarget(e){this.Lr.nr(e)}isLocalQueryTarget(e){return this.Lr.activeTargetIds.has(e)}clearQueryState(e){delete this.qr[e]}getAllActiveQueryTargets(){return this.Lr.activeTargetIds}isActiveQueryTarget(e){return this.Lr.activeTargetIds.has(e)}start(){return this.Lr=new h,Promise.resolve()}handleUserChange(e,t,r){}setOnlineState(e){}shutdown(){}writeSequenceNumber(e){}notifyBundleLoaded(e){}}class E{Ur(e){}shutdown(){}}class T{constructor(){this.Kr=()=>this.Gr(),this.Qr=()=>this.jr(),this.Wr=[],this.zr()}Ur(e){this.Wr.push(e)}shutdown(){window.removeEventListener("online",this.Kr),window.removeEventListener("offline",this.Qr)}zr(){window.addEventListener("online",this.Kr),window.addEventListener("offline",this.Qr)}Gr(){Ve("ConnectivityMonitor","Network connectivity changed: AVAILABLE");for(const e of this.Wr)e(0)}jr(){Ve("ConnectivityMonitor","Network connectivity changed: UNAVAILABLE");for(const e of this.Wr)e(1)}static C(){return typeof window<"u"&&void 0!==window.addEventListener&&void 0!==window.removeEventListener}}const M={BatchGetDocuments:"batchGet",Commit:"commit",RunQuery:"runQuery",RunAggregationQuery:"runAggregationQuery"};class F{constructor(e){this.Hr=e.Hr,this.Jr=e.Jr}Yr(e){this.Xr=e}Zr(e){this.eo=e}onMessage(e){this.no=e}close(){this.Jr()}send(e){this.Hr(e)}so(){this.Xr()}io(e){this.eo(e)}ro(e){this.no(e)}}class q extends class{constructor(e){this.databaseInfo=e,this.databaseId=e.databaseId,this.oo=(e.ssl?"https":"http")+"://"+e.host,this.uo="projects/"+this.databaseId.projectId+"/databases/"+this.databaseId.database+"/documents"}get co(){return!1}ao(e,t,r,o,u){const l=this.ho(e,t);Ve("RestConnection","Sending: ",l,r);const g={};return this.lo(g,o,u),this.fo(e,l,g,r).then(_=>(Ve("RestConnection","Received: ",_),_),_=>{throw yu("RestConnection",`${e} failed with error: `,_,"url: ",l,"request:",r),_})}_o(e,t,r,o,u,l){return this.ao(e,t,r,o,u)}lo(e,t,r){e["X-Goog-Api-Client"]="gl-js/ fire/"+Uc,e["Content-Type"]="text/plain",this.databaseInfo.appId&&(e["X-Firebase-GMPID"]=this.databaseInfo.appId),t&&t.headers.forEach((o,u)=>e[u]=o),r&&r.headers.forEach((o,u)=>e[u]=o)}ho(e,t){return`${this.oo}/v1/${t}:${M[e]}`}}{constructor(e){super(e),this.forceLongPolling=e.forceLongPolling,this.autoDetectLongPolling=e.autoDetectLongPolling,this.useFetchStreams=e.useFetchStreams}fo(e,t,r,o){return new Promise((u,l)=>{const g=new ob;g.setWithCredentials(!0),g.listenOnce(rb.COMPLETE,()=>{try{switch(g.getLastErrorCode()){case Dv.NO_ERROR:const b=g.getResponseJson();Ve("Connection","XHR received:",JSON.stringify(b)),u(b);break;case Dv.TIMEOUT:Ve("Connection",'RPC "'+e+'" timed out'),l(new Te(fe.DEADLINE_EXCEEDED,"Request time out"));break;case Dv.HTTP_ERROR:const S=g.getStatus();if(Ve("Connection",'RPC "'+e+'" failed with status:',S,"response text:",g.getResponseText()),S>0){let P=g.getResponseJson();Array.isArray(P)&&(P=P[0]);const W=P?.error;if(W&&W.status&&W.message){const J=function(oe){const ke=oe.toLowerCase().replace(/_/g,"-");return Object.values(fe).indexOf(ke)>=0?ke:fe.UNKNOWN}(W.status);l(new Te(J,W.message))}else l(new Te(fe.UNKNOWN,"Server responded with status "+g.getStatus()))}else l(new Te(fe.UNAVAILABLE,"Connection failed."));break;default:tt()}}finally{Ve("Connection",'RPC "'+e+'" completed.')}});const _=JSON.stringify(o);g.send(t,"POST",_,r,15)})}wo(e,t,r){const o=[this.oo,"/","google.firestore.v1.Firestore","/",e,"/channel"],u=tb(),l=nb(),g={httpSessionIdParam:"gsessionid",initMessageHeaders:{},messageUrlParams:{database:`projects/${this.databaseId.projectId}/databases/${this.databaseId.database}`},sendRawJson:!0,supportsCrossDomainXhr:!0,internalChannelParams:{forwardChannelRequestTimeoutMs:6e5},forceLongPolling:this.forceLongPolling,detectBufferingProxy:this.autoDetectLongPolling};this.useFetchStreams&&(g.xmlHttpFactory=new sb({})),this.lo(g.initMessageHeaders,t,r),g.encodeInitMessageHeaders=!0;const _=o.join("");Ve("Connection","Creating WebChannel: "+_,g);const b=u.createWebChannel(_,g);let S=!1,P=!1;const W=new F({Hr:oe=>{P?Ve("Connection","Not sending because WebChannel is closed:",oe):(S||(Ve("Connection","Opening WebChannel transport."),b.open(),S=!0),Ve("Connection","WebChannel sending:",oe),b.send(oe))},Jr:()=>b.close()}),J=(oe,ke,je)=>{oe.listen(ke,vt=>{try{je(vt)}catch(zt){setTimeout(()=>{throw zt},0)}})};return J(b,wg.EventType.OPEN,()=>{P||Ve("Connection","WebChannel transport opened.")}),J(b,wg.EventType.CLOSE,()=>{P||(P=!0,Ve("Connection","WebChannel transport closed"),W.io())}),J(b,wg.EventType.ERROR,oe=>{P||(P=!0,yu("Connection","WebChannel transport errored:",oe),W.io(new Te(fe.UNAVAILABLE,"The operation could not be completed")))}),J(b,wg.EventType.MESSAGE,oe=>{var ke;if(!P){const je=oe.data[0];ct(!!je);const vt=je,zt=vt.error||(null===(ke=vt[0])||void 0===ke?void 0:ke.error);if(zt){Ve("Connection","WebChannel received error:",zt);const Lt=zt.status;let Ut=function(Qt){const ui=rr[Qt];if(void 0!==ui)return _w(ui)}(Lt),$t=zt.message;void 0===Ut&&(Ut=fe.INTERNAL,$t="Unknown error status: "+Lt+" with message "+zt.message),P=!0,W.io(new Te(Ut,$t)),b.close()}else Ve("Connection","WebChannel received:",je),W.ro(je)}}),J(l,ib.STAT_EVENT,oe=>{oe.stat===TI.PROXY?Ve("Connection","Detected buffering proxy"):oe.stat===TI.NOPROXY&&Ve("Connection","Detected no buffering proxy")}),setTimeout(()=>{W.so()},0),W}}function te(){return typeof window<"u"?window:null}function ye(){return typeof document<"u"?document:null}function Be(n){return new Tw(n,!0)}class qe{constructor(e,t,r=1e3,o=1.5,u=6e4){this.Hs=e,this.timerId=t,this.mo=r,this.yo=o,this.po=u,this.Io=0,this.To=null,this.Eo=Date.now(),this.reset()}reset(){this.Io=0}Ao(){this.Io=this.po}Ro(e){this.cancel();const t=Math.floor(this.Io+this.bo()),r=Math.max(0,Date.now()-this.Eo),o=Math.max(0,t-r);o>0&&Ve("ExponentialBackoff",`Backing off for ${o} ms (base delay: ${this.Io} ms, delay with jitter: ${t} ms, last attempt: ${r} ms ago)`),this.To=this.Hs.enqueueAfterDelay(this.timerId,o,()=>(this.Eo=Date.now(),e())),this.Io*=this.yo,this.Io<this.mo&&(this.Io=this.mo),this.Io>this.po&&(this.Io=this.po)}Po(){null!==this.To&&(this.To.skipDelay(),this.To=null)}cancel(){null!==this.To&&(this.To.cancel(),this.To=null)}bo(){return(Math.random()-.5)*this.Io}}class st{constructor(e,t,r,o,u,l,g,_){this.Hs=e,this.vo=r,this.Vo=o,this.connection=u,this.authCredentialsProvider=l,this.appCheckCredentialsProvider=g,this.listener=_,this.state=0,this.So=0,this.Do=null,this.Co=null,this.stream=null,this.xo=new qe(e,t)}No(){return 1===this.state||5===this.state||this.ko()}ko(){return 2===this.state||3===this.state}start(){4!==this.state?this.auth():this.Oo()}stop(){var e=this;return(0,ve.Z)(function*(){e.No()&&(yield e.close(0))})()}Mo(){this.state=0,this.xo.reset()}Fo(){this.ko()&&null===this.Do&&(this.Do=this.Hs.enqueueAfterDelay(this.vo,6e4,()=>this.$o()))}Bo(e){this.Lo(),this.stream.send(e)}$o(){var e=this;return(0,ve.Z)(function*(){if(e.ko())return e.close(0)})()}Lo(){this.Do&&(this.Do.cancel(),this.Do=null)}qo(){this.Co&&(this.Co.cancel(),this.Co=null)}close(e,t){var r=this;return(0,ve.Z)(function*(){r.Lo(),r.qo(),r.xo.cancel(),r.So++,4!==e?r.xo.reset():t&&t.code===fe.RESOURCE_EXHAUSTED?(er(t.toString()),er("Using maximum backoff delay to prevent overloading the backend."),r.xo.Ao()):t&&t.code===fe.UNAUTHENTICATED&&3!==r.state&&(r.authCredentialsProvider.invalidateToken(),r.appCheckCredentialsProvider.invalidateToken()),null!==r.stream&&(r.Uo(),r.stream.close(),r.stream=null),r.state=e,yield r.listener.Zr(t)})()}Uo(){}auth(){this.state=1;const e=this.Ko(this.So),t=this.So;Promise.all([this.authCredentialsProvider.getToken(),this.appCheckCredentialsProvider.getToken()]).then(([r,o])=>{this.So===t&&this.Go(r,o)},r=>{e(()=>{const o=new Te(fe.UNKNOWN,"Fetching auth token failed: "+r.message);return this.Qo(o)})})}Go(e,t){const r=this.Ko(this.So);this.stream=this.jo(e,t),this.stream.Yr(()=>{r(()=>(this.state=2,this.Co=this.Hs.enqueueAfterDelay(this.Vo,1e4,()=>(this.ko()&&(this.state=3),Promise.resolve())),this.listener.Yr()))}),this.stream.Zr(o=>{r(()=>this.Qo(o))}),this.stream.onMessage(o=>{r(()=>this.onMessage(o))})}Oo(){var e=this;this.state=5,this.xo.Ro((0,ve.Z)(function*(){e.state=0,e.start()}))}Qo(e){return Ve("PersistentStream",`close with error: ${e}`),this.stream=null,this.close(4,e)}Ko(e){return t=>{this.Hs.enqueueAndForget(()=>this.So===e?t():(Ve("PersistentStream","stream callback skipped by getCloseGuardedDispatcher."),Promise.resolve()))}}}class Ct extends st{constructor(e,t,r,o,u,l){super(e,"listen_stream_connection_backoff","listen_stream_idle","health_check_timeout",t,r,o,l),this.yt=u}jo(e,t){return this.connection.wo("Listen",e,t)}onMessage(e){this.xo.reset();const t=function Qv(n,e){let t;if("targetChange"in e){const r="NO_CHANGE"===(_=e.targetChange.targetChangeType||"NO_CHANGE")?0:"ADD"===_?1:"REMOVE"===_?2:"CURRENT"===_?3:"RESET"===_?4:tt(),o=e.targetChange.targetIds||[],u=function(_,b){return _.wt?(ct(void 0===b||"string"==typeof b),Pr.fromBase64String(b||"")):(ct(void 0===b||b instanceof Uint8Array),Pr.fromUint8Array(b||new Uint8Array))}(n,e.targetChange.resumeToken),l=e.targetChange.cause,g=l&&function(_){const b=void 0===_.code?fe.UNKNOWN:_w(_.code);return new Te(b,_.message||"")}(l);t=new Ib(r,o,u,g||null)}else if("documentChange"in e){const r=e.documentChange,o=$s(n,r.document.name),u=Wn(r.document.updateTime),l=r.document.createTime?Wn(r.document.createTime):mt.min(),g=new qr({mapValue:{fields:r.document.fields}}),_=Cn.newFoundDocument(o,u,l,g);t=new zg(r.targetIds||[],r.removedTargetIds||[],_.key,_)}else if("documentDelete"in e){const r=e.documentDelete,o=$s(n,r.document),u=r.readTime?Wn(r.readTime):mt.min(),l=Cn.newNoDocument(o,u);t=new zg([],r.removedTargetIds||[],l.key,l)}else if("documentRemove"in e){const r=e.documentRemove,o=$s(n,r.document);t=new zg([],r.removedTargetIds||[],o,null)}else{if(!("filter"in e))return tt();{const r=e.filter,u=new yw(r.count||0);t=new bw(r.targetId,u)}}var _;return t}(this.yt,e),r=function(o){if(!("targetChange"in o))return mt.min();const u=o.targetChange;return u.targetIds&&u.targetIds.length?mt.min():u.readTime?Wn(u.readTime):mt.min()}(e);return this.listener.Wo(t,r)}zo(e){const t={};t.database=kf(this.yt),t.addTarget=function(o,u){let l;const g=u.target;return l=kg(g)?{documents:Rw(o,g)}:{query:Jv(o,g)},l.targetId=u.targetId,u.resumeToken.approximateByteSize()>0?l.resumeToken=Sw(o,u.resumeToken):u.snapshotVersion.compareTo(mt.min())>0&&(l.readTime=Ud(o,u.snapshotVersion.toTimestamp())),l}(this.yt,e);const r=function Pw(n,e){const t=function(r,o){switch(o){case 0:return null;case 1:return"existence-filter-mismatch";case 2:return"limbo-document";default:return tt()}}(0,e.purpose);return null==t?null:{"goog-listen-tags":t}}(0,e);r&&(t.labels=r),this.Bo(t)}Ho(e){const t={};t.database=kf(this.yt),t.removeTarget=e,this.Bo(t)}}class Oe extends st{constructor(e,t,r,o,u,l){super(e,"write_stream_connection_backoff","write_stream_idle","health_check_timeout",t,r,o,l),this.yt=u,this.Jo=!1}get Yo(){return this.Jo}start(){this.Jo=!1,this.lastStreamToken=void 0,super.start()}Uo(){this.Jo&&this.Xo([])}jo(e,t){return this.connection.wo("Write",e,t)}onMessage(e){if(ct(!!e.streamToken),this.lastStreamToken=e.streamToken,this.Jo){this.xo.reset();const t=function mS(n,e){return n&&n.length>0?(ct(void 0!==e),n.map(t=>function(r,o){let u=Wn(r.updateTime?r.updateTime:o);return u.isEqual(mt.min())&&(u=Wn(o)),new yb(u,r.transformResults||[])}(t,e))):[]}(e.writeResults,e.commitTime),r=Wn(e.commitTime);return this.listener.Zo(r,t)}return ct(!e.writeResults||0===e.writeResults.length),this.Jo=!0,this.listener.tu()}eu(){const e={};e.database=kf(this.yt),this.Bo(e)}Xo(e){const t={streamToken:this.lastStreamToken,writes:e.map(r=>Gg(this.yt,r))};this.Bo(t)}}class Ft extends class{}{constructor(e,t,r,o){super(),this.authCredentials=e,this.appCheckCredentials=t,this.connection=r,this.yt=o,this.nu=!1}su(){if(this.nu)throw new Te(fe.FAILED_PRECONDITION,"The client has already been terminated.")}ao(e,t,r){return this.su(),Promise.all([this.authCredentials.getToken(),this.appCheckCredentials.getToken()]).then(([o,u])=>this.connection.ao(e,t,r,o,u)).catch(o=>{throw"FirebaseError"===o.name?(o.code===fe.UNAUTHENTICATED&&(this.authCredentials.invalidateToken(),this.appCheckCredentials.invalidateToken()),o):new Te(fe.UNKNOWN,o.toString())})}_o(e,t,r,o){return this.su(),Promise.all([this.authCredentials.getToken(),this.appCheckCredentials.getToken()]).then(([u,l])=>this.connection._o(e,t,r,u,l,o)).catch(u=>{throw"FirebaseError"===u.name?(u.code===fe.UNAUTHENTICATED&&(this.authCredentials.invalidateToken(),this.appCheckCredentials.invalidateToken()),u):new Te(fe.UNKNOWN,u.toString())})}terminate(){this.nu=!0}}class jS{constructor(e,t){this.asyncQueue=e,this.onlineStateHandler=t,this.state="Unknown",this.iu=0,this.ru=null,this.ou=!0}uu(){0===this.iu&&(this.cu("Unknown"),this.ru=this.asyncQueue.enqueueAfterDelay("online_state_timeout",1e4,()=>(this.ru=null,this.au("Backend didn't respond within 10 seconds."),this.cu("Offline"),Promise.resolve())))}hu(e){"Online"===this.state?this.cu("Unknown"):(this.iu++,this.iu>=1&&(this.lu(),this.au(`Connection failed 1 times. Most recent error: ${e.toString()}`),this.cu("Offline")))}set(e){this.lu(),this.iu=0,"Online"===e&&(this.ou=!1),this.cu(e)}cu(e){e!==this.state&&(this.state=e,this.onlineStateHandler(e))}au(e){const t=`Could not reach Cloud Firestore backend. ${e}\nThis typically indicates that your device does not have a healthy Internet connection at the moment. The client will operate in offline mode until it is able to successfully connect to the backend.`;this.ou?(er(t),this.ou=!1):Ve("OnlineStateTracker",t)}lu(){null!==this.ru&&(this.ru.cancel(),this.ru=null)}}class iM{constructor(e,t,r,o,u){var l=this;this.localStore=e,this.datastore=t,this.asyncQueue=r,this.remoteSyncer={},this.fu=[],this.du=new Map,this._u=new Set,this.wu=[],this.mu=u,this.mu.Ur(g=>{r.enqueueAndForget((0,ve.Z)(function*(){var _;sl(l)&&(Ve("RemoteStore","Restarting streams for network reachability change."),yield(_=(0,ve.Z)(function*(b){const S=Ze(b);S._u.add(4),yield pm(S),S.gu.set("Unknown"),S._u.delete(4),yield C_(S)}),function(b){return _.apply(this,arguments)})(l))}))}),this.gu=new jS(r,o)}}function C_(n){return Zb.apply(this,arguments)}function Zb(){return Zb=(0,ve.Z)(function*(n){if(sl(n))for(const e of n.wu)yield e(!0)}),Zb.apply(this,arguments)}function pm(n){return Kb.apply(this,arguments)}function Kb(){return Kb=(0,ve.Z)(function*(n){for(const e of n.wu)yield e(!1)}),Kb.apply(this,arguments)}function aE(n,e){const t=Ze(n);t.du.has(e.targetId)||(t.du.set(e.targetId,e),Xb(t)?Qb(t):mm(t).ko()&&Yb(t,e))}function T_(n,e){const t=Ze(n),r=mm(t);t.du.delete(e),r.ko()&&HS(t,e),0===t.du.size&&(r.ko()?r.Fo():sl(t)&&t.gu.set("Unknown"))}function Yb(n,e){n.yu.Ot(e.targetId),mm(n).zo(e)}function HS(n,e){n.yu.Ot(e),mm(n).Ho(e)}function Qb(n){n.yu=new Cw({getRemoteKeysForTarget:e=>n.remoteSyncer.getRemoteKeysForTarget(e),ne:e=>n.du.get(e)||null}),mm(n).start(),n.gu.uu()}function Xb(n){return sl(n)&&!mm(n).No()&&n.du.size>0}function sl(n){return 0===Ze(n)._u.size}function zS(n){n.yu=void 0}function sM(n){return Jb.apply(this,arguments)}function Jb(){return Jb=(0,ve.Z)(function*(n){n.du.forEach((e,t)=>{Yb(n,e)})}),Jb.apply(this,arguments)}function oM(n,e){return eC.apply(this,arguments)}function eC(){return eC=(0,ve.Z)(function*(n,e){zS(n),Xb(n)?(n.gu.hu(e),Qb(n)):n.gu.set("Unknown")}),eC.apply(this,arguments)}function aM(n,e,t){return tC.apply(this,arguments)}function tC(){return tC=(0,ve.Z)(function*(n,e,t){if(n.gu.set("Online"),e instanceof Ib&&2===e.state&&e.cause)try{yield(r=(0,ve.Z)(function*(o,u){const l=u.cause;for(const g of u.targetIds)o.du.has(g)&&(yield o.remoteSyncer.rejectListen(g,l),o.du.delete(g),o.yu.removeTarget(g))}),function(o,u){return r.apply(this,arguments)})(n,e)}catch(r){Ve("RemoteStore","Failed to remove targets %s: %s ",e.targetIds.join(","),r),yield uE(n,r)}else if(e instanceof zg?n.yu.Kt(e):e instanceof bw?n.yu.Jt(e):n.yu.jt(e),!t.isEqual(mt.min()))try{const r=yield jb(n.localStore);t.compareTo(r)>=0&&(yield function(o,u){const l=o.yu.Zt(u);return l.targetChanges.forEach((g,_)=>{if(g.resumeToken.approximateByteSize()>0){const b=o.du.get(_);b&&o.du.set(_,b.withResumeToken(g.resumeToken,u))}}),l.targetMismatches.forEach(g=>{const _=o.du.get(g);if(!_)return;o.du.set(g,_.withResumeToken(Pr.EMPTY_BYTE_STRING,_.snapshotVersion)),HS(o,g);const b=new Qc(_.target,g,1,_.sequenceNumber);Yb(o,b)}),o.remoteSyncer.applyRemoteEvent(l)}(n,t))}catch(r){Ve("RemoteStore","Failed to raise snapshot:",r),yield uE(n,r)}var r}),tC.apply(this,arguments)}function uE(n,e,t){return nC.apply(this,arguments)}function nC(){return nC=(0,ve.Z)(function*(n,e,t){if(!ba(e))throw e;n._u.add(1),yield pm(n),n.gu.set("Offline"),t||(t=()=>jb(n.localStore)),n.asyncQueue.enqueueRetryable((0,ve.Z)(function*(){Ve("RemoteStore","Retrying IndexedDB access"),yield t(),n._u.delete(1),yield C_(n)}))}),nC.apply(this,arguments)}function WS(n,e){return e().catch(t=>uE(n,t,e))}function gm(n){return rC.apply(this,arguments)}function rC(){return rC=(0,ve.Z)(function*(n){const e=Ze(n),t=Zd(e);let r=e.fu.length>0?e.fu[e.fu.length-1].batchId:-1;for(;uM(e);)try{const o=yield Hb(e.localStore,r);if(null===o){0===e.fu.length&&t.Fo();break}r=o.batchId,cM(e,o)}catch(o){yield uE(e,o)}GS(e)&&qS(e)}),rC.apply(this,arguments)}function uM(n){return sl(n)&&n.fu.length<10}function cM(n,e){n.fu.push(e);const t=Zd(n);t.ko()&&t.Yo&&t.Xo(e.mutations)}function GS(n){return sl(n)&&!Zd(n).No()&&n.fu.length>0}function qS(n){Zd(n).start()}function lM(n){return iC.apply(this,arguments)}function iC(){return iC=(0,ve.Z)(function*(n){Zd(n).eu()}),iC.apply(this,arguments)}function dM(n){return sC.apply(this,arguments)}function sC(){return sC=(0,ve.Z)(function*(n){const e=Zd(n);for(const t of n.fu)e.Xo(t.mutations)}),sC.apply(this,arguments)}function hM(n,e,t){return oC.apply(this,arguments)}function oC(){return oC=(0,ve.Z)(function*(n,e,t){const r=n.fu.shift(),o=$d.from(r,e,t);yield WS(n,()=>n.remoteSyncer.applySuccessfulWrite(o)),yield gm(n)}),oC.apply(this,arguments)}function fM(n,e){return aC.apply(this,arguments)}function aC(){return aC=(0,ve.Z)(function*(n,e){var t;e&&Zd(n).Yo&&(yield(t=(0,ve.Z)(function*(r,o){if(vw(u=o.code)&&u!==fe.ABORTED){const l=r.fu.shift();Zd(r).Mo(),yield WS(r,()=>r.remoteSyncer.rejectFailedWrite(l.batchId,o)),yield gm(r)}var u}),function(r,o){return t.apply(this,arguments)})(n,e)),GS(n)&&qS(n)}),aC.apply(this,arguments)}function ZS(n,e){return uC.apply(this,arguments)}function uC(){return uC=(0,ve.Z)(function*(n,e){const t=Ze(n);t.asyncQueue.verifyOperationInProgress(),Ve("RemoteStore","RemoteStore received new credentials");const r=sl(t);t._u.add(3),yield pm(t),r&&t.gu.set("Unknown"),yield t.remoteSyncer.handleCredentialChange(e),t._u.delete(3),yield C_(t)}),uC.apply(this,arguments)}function cC(n,e){return lC.apply(this,arguments)}function lC(){return lC=(0,ve.Z)(function*(n,e){const t=Ze(n);e?(t._u.delete(2),yield C_(t)):e||(t._u.add(2),yield pm(t),t.gu.set("Unknown"))}),lC.apply(this,arguments)}function mm(n){return n.pu||(n.pu=function(e,t,r){const o=Ze(e);return o.su(),new Ct(t,o.connection,o.authCredentials,o.appCheckCredentials,o.yt,r)}(n.datastore,n.asyncQueue,{Yr:sM.bind(null,n),Zr:oM.bind(null,n),Wo:aM.bind(null,n)}),n.wu.push(function(){var e=(0,ve.Z)(function*(t){t?(n.pu.Mo(),Xb(n)?Qb(n):n.gu.set("Unknown")):(yield n.pu.stop(),zS(n))});return function(t){return e.apply(this,arguments)}}())),n.pu}function Zd(n){return n.Iu||(n.Iu=function(e,t,r){const o=Ze(e);return o.su(),new Oe(t,o.connection,o.authCredentials,o.appCheckCredentials,o.yt,r)}(n.datastore,n.asyncQueue,{Yr:lM.bind(null,n),Zr:fM.bind(null,n),tu:dM.bind(null,n),Zo:hM.bind(null,n)}),n.wu.push(function(){var e=(0,ve.Z)(function*(t){t?(n.Iu.Mo(),yield gm(n)):(yield n.Iu.stop(),n.fu.length>0&&(Ve("RemoteStore",`Stopping write stream with ${n.fu.length} pending writes`),n.fu=[]))});return function(t){return e.apply(this,arguments)}}())),n.Iu}class dC{constructor(e,t,r,o,u){this.asyncQueue=e,this.timerId=t,this.targetTimeMs=r,this.op=o,this.removalCallback=u,this.deferred=new Wr,this.then=this.deferred.promise.then.bind(this.deferred.promise),this.deferred.promise.catch(l=>{})}static createAndSchedule(e,t,r,o,u){const l=Date.now()+r,g=new dC(e,t,l,o,u);return g.start(r),g}start(e){this.timerHandle=setTimeout(()=>this.handleDelayElapsed(),e)}skipDelay(){return this.handleDelayElapsed()}cancel(e){null!==this.timerHandle&&(this.clearTimeout(),this.deferred.reject(new Te(fe.CANCELLED,"Operation cancelled"+(e?": "+e:""))))}handleDelayElapsed(){this.asyncQueue.enqueueAndForget(()=>null!==this.timerHandle?(this.clearTimeout(),this.op().then(e=>this.deferred.resolve(e))):Promise.resolve())}clearTimeout(){null!==this.timerHandle&&(this.removalCallback(this),clearTimeout(this.timerHandle),this.timerHandle=null)}}function ym(n,e){if(er("AsyncQueue",`${e}: ${n}`),ba(n))return new Te(fe.UNAVAILABLE,`${e}: ${n}`);throw n}class vm{constructor(e){this.comparator=e?(t,r)=>e(t,r)||Ge.comparator(t.key,r.key):(t,r)=>Ge.comparator(t.key,r.key),this.keyedMap=Fd(),this.sortedSet=new nr(this.comparator)}static emptySet(e){return new vm(e.comparator)}has(e){return null!=this.keyedMap.get(e)}get(e){return this.keyedMap.get(e)}first(){return this.sortedSet.minKey()}last(){return this.sortedSet.maxKey()}isEmpty(){return this.sortedSet.isEmpty()}indexOf(e){const t=this.keyedMap.get(e);return t?this.sortedSet.indexOf(t):-1}get size(){return this.sortedSet.size}forEach(e){this.sortedSet.inorderTraversal((t,r)=>(e(t),!1))}add(e){const t=this.delete(e.key);return t.copy(t.keyedMap.insert(e.key,e),t.sortedSet.insert(e,null))}delete(e){const t=this.get(e);return t?this.copy(this.keyedMap.remove(e),this.sortedSet.remove(t)):this}isEqual(e){if(!(e instanceof vm)||this.size!==e.size)return!1;const t=this.sortedSet.getIterator(),r=e.sortedSet.getIterator();for(;t.hasNext();){const o=t.getNext().key,u=r.getNext().key;if(!o.isEqual(u))return!1}return!0}toString(){const e=[];return this.forEach(t=>{e.push(t.toString())}),0===e.length?"DocumentSet ()":"DocumentSet (\n  "+e.join("  \n")+"\n)"}copy(e,t){const r=new vm;return r.comparator=this.comparator,r.keyedMap=e,r.sortedSet=t,r}}class KS{constructor(){this.Tu=new nr(Ge.comparator)}track(e){const t=e.doc.key,r=this.Tu.get(t);r?0!==e.type&&3===r.type?this.Tu=this.Tu.insert(t,e):3===e.type&&1!==r.type?this.Tu=this.Tu.insert(t,{type:r.type,doc:e.doc}):2===e.type&&2===r.type?this.Tu=this.Tu.insert(t,{type:2,doc:e.doc}):2===e.type&&0===r.type?this.Tu=this.Tu.insert(t,{type:0,doc:e.doc}):1===e.type&&0===r.type?this.Tu=this.Tu.remove(t):1===e.type&&2===r.type?this.Tu=this.Tu.insert(t,{type:1,doc:r.doc}):0===e.type&&1===r.type?this.Tu=this.Tu.insert(t,{type:2,doc:e.doc}):tt():this.Tu=this.Tu.insert(t,e)}Eu(){const e=[];return this.Tu.inorderTraversal((t,r)=>{e.push(r)}),e}}class _m{constructor(e,t,r,o,u,l,g,_,b){this.query=e,this.docs=t,this.oldDocs=r,this.docChanges=o,this.mutatedKeys=u,this.fromCache=l,this.syncStateChanged=g,this.excludesMetadataChanges=_,this.hasCachedResults=b}static fromInitialDocuments(e,t,r,o,u){const l=[];return t.forEach(g=>{l.push({type:0,doc:g})}),new _m(e,t,vm.emptySet(t),l,r,o,!0,!1,u)}get hasPendingWrites(){return!this.mutatedKeys.isEmpty()}isEqual(e){if(!(this.fromCache===e.fromCache&&this.hasCachedResults===e.hasCachedResults&&this.syncStateChanged===e.syncStateChanged&&this.mutatedKeys.isEqual(e.mutatedKeys)&&xf(this.query,e.query)&&this.docs.isEqual(e.docs)&&this.oldDocs.isEqual(e.oldDocs)))return!1;const t=this.docChanges,r=e.docChanges;if(t.length!==r.length)return!1;for(let o=0;o<t.length;o++)if(t[o].type!==r[o].type||!t[o].doc.isEqual(r[o].doc))return!1;return!0}}class pM{constructor(){this.Au=void 0,this.listeners=[]}}class gM{constructor(){this.queries=new Nu(e=>ow(e),xf),this.onlineState="Unknown",this.Ru=new Set}}function hC(n,e){return fC.apply(this,arguments)}function fC(){return fC=(0,ve.Z)(function*(n,e){const t=Ze(n),r=e.query;let o=!1,u=t.queries.get(r);if(u||(o=!0,u=new pM),o)try{u.Au=yield t.onListen(r)}catch(l){const g=ym(l,`Initialization of query '${Uv(e.query)}' failed`);return void e.onError(g)}t.queries.set(r,u),u.listeners.push(e),e.bu(t.onlineState),u.Au&&e.Pu(u.Au)&&mC(t)}),fC.apply(this,arguments)}function pC(n,e){return gC.apply(this,arguments)}function gC(){return gC=(0,ve.Z)(function*(n,e){const t=Ze(n),r=e.query;let o=!1;const u=t.queries.get(r);if(u){const l=u.listeners.indexOf(e);l>=0&&(u.listeners.splice(l,1),o=0===u.listeners.length)}if(o)return t.queries.delete(r),t.onUnlisten(r)}),gC.apply(this,arguments)}function mM(n,e){const t=Ze(n);let r=!1;for(const o of e){const l=t.queries.get(o.query);if(l){for(const g of l.listeners)g.Pu(o)&&(r=!0);l.Au=o}}r&&mC(t)}function yM(n,e,t){const r=Ze(n),o=r.queries.get(e);if(o)for(const u of o.listeners)u.onError(t);r.queries.delete(e)}function mC(n){n.Ru.forEach(e=>{e.next()})}class yC{constructor(e,t,r){this.query=e,this.vu=t,this.Vu=!1,this.Su=null,this.onlineState="Unknown",this.options=r||{}}Pu(e){if(!this.options.includeMetadataChanges){const r=[];for(const o of e.docChanges)3!==o.type&&r.push(o);e=new _m(e.query,e.docs,e.oldDocs,r,e.mutatedKeys,e.fromCache,e.syncStateChanged,!0,e.hasCachedResults)}let t=!1;return this.Vu?this.Du(e)&&(this.vu.next(e),t=!0):this.Cu(e,this.onlineState)&&(this.xu(e),t=!0),this.Su=e,t}onError(e){this.vu.error(e)}bu(e){this.onlineState=e;let t=!1;return this.Su&&!this.Vu&&this.Cu(this.Su,e)&&(this.xu(this.Su),t=!0),t}Cu(e,t){return!e.fromCache||(!this.options.Nu||!("Offline"!==t))&&(!e.docs.isEmpty()||e.hasCachedResults||"Offline"===t)}Du(e){return e.docChanges.length>0||!!(e.syncStateChanged||this.Su&&this.Su.hasPendingWrites!==e.hasPendingWrites)&&!0===this.options.includeMetadataChanges}xu(e){e=_m.fromInitialDocuments(e.query,e.docs,e.mutatedKeys,e.fromCache,e.hasCachedResults),this.Vu=!0,this.vu.next(e)}}class vM{constructor(e,t){this.ku=e,this.byteLength=t}Ou(){return"metadata"in this.ku}}class YS{constructor(e){this.yt=e}Ji(e){return $s(this.yt,e)}Yi(e){return e.metadata.exists?xw(this.yt,e.document,!1):Cn.newNoDocument(this.Ji(e.metadata.name),this.Xi(e.metadata.readTime))}Xi(e){return Wn(e)}}class _M{constructor(e,t,r){this.Mu=e,this.localStore=t,this.yt=r,this.queries=[],this.documents=[],this.collectionGroups=new Set,this.progress=QS(e)}Fu(e){this.progress.bytesLoaded+=e.byteLength;let t=this.progress.documentsLoaded;if(e.ku.namedQuery)this.queries.push(e.ku.namedQuery);else if(e.ku.documentMetadata){this.documents.push({metadata:e.ku.documentMetadata}),e.ku.documentMetadata.exists||++t;const r=rn.fromString(e.ku.documentMetadata.name);this.collectionGroups.add(r.get(r.length-2))}else e.ku.document&&(this.documents[this.documents.length-1].document=e.ku.document,++t);return t!==this.progress.documentsLoaded?(this.progress.documentsLoaded=t,Object.assign({},this.progress)):null}$u(e){const t=new Map,r=new YS(this.yt);for(const o of e)if(o.metadata.queries){const u=r.Ji(o.metadata.name);for(const l of o.metadata.queries){const g=(t.get(l)||qt()).add(u);t.set(l,g)}}return t}complete(){var e=this;return(0,ve.Z)(function*(){const t=yield function BS(n,e,t,r){return sE.apply(this,arguments)}(e.localStore,new YS(e.yt),e.documents,e.Mu.id),r=e.$u(e.documents);for(const o of e.queries)yield $S(e.localStore,o,r.get(o.name));return e.progress.taskState="Success",{progress:e.progress,Bu:e.collectionGroups,Lu:t}})()}}function QS(n){return{taskState:"Running",documentsLoaded:0,bytesLoaded:0,totalDocuments:n.totalDocuments,totalBytes:n.totalBytes}}class XS{constructor(e){this.key=e}}class JS{constructor(e){this.key=e}}class eA{constructor(e,t){this.query=e,this.qu=t,this.Uu=null,this.hasCachedResults=!1,this.current=!1,this.Ku=qt(),this.mutatedKeys=qt(),this.Gu=uw(e),this.Qu=new vm(this.Gu)}get ju(){return this.qu}Wu(e,t){const r=t?t.zu:new KS,o=t?t.Qu:this.Qu;let u=t?t.mutatedKeys:this.mutatedKeys,l=o,g=!1;const _="F"===this.query.limitType&&o.size===this.query.limit?o.last():null,b="L"===this.query.limitType&&o.size===this.query.limit?o.first():null;if(e.inorderTraversal((S,P)=>{const W=o.get(S),J=Vv(this.query,P)?P:null,oe=!!W&&this.mutatedKeys.has(W.key),ke=!!J&&(J.hasLocalMutations||this.mutatedKeys.has(J.key)&&J.hasCommittedMutations);let je=!1;W&&J?W.data.isEqual(J.data)?oe!==ke&&(r.track({type:3,doc:J}),je=!0):this.Hu(W,J)||(r.track({type:2,doc:J}),je=!0,(_&&this.Gu(J,_)>0||b&&this.Gu(J,b)<0)&&(g=!0)):!W&&J?(r.track({type:0,doc:J}),je=!0):W&&!J&&(r.track({type:1,doc:W}),je=!0,(_||b)&&(g=!0)),je&&(J?(l=l.add(J),u=ke?u.add(S):u.delete(S)):(l=l.delete(S),u=u.delete(S)))}),null!==this.query.limit)for(;l.size>this.query.limit;){const S="F"===this.query.limitType?l.last():l.first();l=l.delete(S.key),u=u.delete(S.key),r.track({type:1,doc:S})}return{Qu:l,zu:r,$i:g,mutatedKeys:u}}Hu(e,t){return e.hasLocalMutations&&t.hasCommittedMutations&&!t.hasLocalMutations}applyChanges(e,t,r){const o=this.Qu;this.Qu=e.Qu,this.mutatedKeys=e.mutatedKeys;const u=e.zu.Eu();u.sort((b,S)=>function(P,W){const J=oe=>{switch(oe){case 0:return 1;case 2:case 3:return 2;case 1:return 0;default:return tt()}};return J(P)-J(W)}(b.type,S.type)||this.Gu(b.doc,S.doc)),this.Ju(r);const l=t?this.Yu():[],g=0===this.Ku.size&&this.current?1:0,_=g!==this.Uu;return this.Uu=g,0!==u.length||_?{snapshot:new _m(this.query,e.Qu,o,u,e.mutatedKeys,0===g,_,!1,!!r&&r.resumeToken.approximateByteSize()>0),Xu:l}:{Xu:l}}bu(e){return this.current&&"Offline"===e?(this.current=!1,this.applyChanges({Qu:this.Qu,zu:new KS,mutatedKeys:this.mutatedKeys,$i:!1},!1)):{Xu:[]}}Zu(e){return!this.qu.has(e)&&!!this.Qu.has(e)&&!this.Qu.get(e).hasLocalMutations}Ju(e){e&&(e.addedDocuments.forEach(t=>this.qu=this.qu.add(t)),e.modifiedDocuments.forEach(t=>{}),e.removedDocuments.forEach(t=>this.qu=this.qu.delete(t)),this.current=e.current)}Yu(){if(!this.current)return[];const e=this.Ku;this.Ku=qt(),this.Qu.forEach(r=>{this.Zu(r.key)&&(this.Ku=this.Ku.add(r.key))});const t=[];return e.forEach(r=>{this.Ku.has(r)||t.push(new JS(r))}),this.Ku.forEach(r=>{e.has(r)||t.push(new XS(r))}),t}tc(e){this.qu=e.Hi,this.Ku=qt();const t=this.Wu(e.documents);return this.applyChanges(t,!0)}ec(){return _m.fromInitialDocuments(this.query,this.Qu,this.mutatedKeys,0===this.Uu,this.hasCachedResults)}}class IM{constructor(e,t,r){this.query=e,this.targetId=t,this.view=r}}class wM{constructor(e){this.key=e,this.nc=!1}}class EM{constructor(e,t,r,o,u,l){this.localStore=e,this.remoteStore=t,this.eventManager=r,this.sharedClientState=o,this.currentUser=u,this.maxConcurrentLimboResolutions=l,this.sc={},this.ic=new Nu(g=>ow(g),xf),this.rc=new Map,this.oc=new Set,this.uc=new nr(Ge.comparator),this.cc=new Map,this.ac=new zf,this.hc={},this.lc=new Map,this.fc=rl.vn(),this.onlineState="Unknown",this.dc=void 0}get isPrimaryClient(){return!0===this.dc}}function DM(n,e){return vC.apply(this,arguments)}function vC(){return vC=(0,ve.Z)(function*(n,e){const t=$C(n);let r,o;const u=t.ic.get(e);if(u)r=u.targetId,t.sharedClientState.addLocalQueryTarget(r),o=u.view.ec();else{const l=yield qd(t.localStore,Pi(e));t.isPrimaryClient&&aE(t.remoteStore,l);const g=t.sharedClientState.addLocalQueryTarget(l.targetId);r=l.targetId,o=yield _C(t,e,r,"current"===g,l.resumeToken)}return o}),vC.apply(this,arguments)}function _C(n,e,t,r,o){return IC.apply(this,arguments)}function IC(){return IC=(0,ve.Z)(function*(n,e,t,r,o){n._c=(P,W,J)=>{return(oe=(0,ve.Z)(function*(ke,je,vt,zt){let Lt=je.view.Wu(vt);Lt.$i&&(Lt=yield b_(ke.localStore,je.query,!1).then(({documents:Qt})=>je.view.Wu(Qt,Lt)));const Ut=zt&&zt.targetChanges.get(je.targetId),$t=je.view.applyChanges(Lt,ke.isPrimaryClient,Ut);return MC(ke,je.targetId,$t.Xu),$t.snapshot}),function(ke,je,vt,zt){return oe.apply(this,arguments)})(n,P,W,J);var oe};const u=yield b_(n.localStore,e,!0),l=new eA(e,u.Hi),g=l.Wu(u.documents),_=$o.createSynthesizedTargetChangeForCurrentChange(t,r&&"Offline"!==n.onlineState,o),b=l.applyChanges(g,n.isPrimaryClient,_);MC(n,t,b.Xu);const S=new IM(e,t,l);return n.ic.set(e,S),n.rc.has(t)?n.rc.get(t).push(e):n.rc.set(t,[e]),b.snapshot}),IC.apply(this,arguments)}function bM(n,e){return wC.apply(this,arguments)}function wC(){return wC=(0,ve.Z)(function*(n,e){const t=Ze(n),r=t.ic.get(e),o=t.rc.get(r.targetId);if(o.length>1)return t.rc.set(r.targetId,o.filter(u=>!xf(u,e))),void t.ic.delete(e);t.isPrimaryClient?(t.sharedClientState.removeLocalQueryTarget(r.targetId),t.sharedClientState.isActiveQueryTarget(r.targetId)||(yield Wf(t.localStore,r.targetId,!1).then(()=>{t.sharedClientState.clearQueryState(r.targetId),T_(t.remoteStore,r.targetId),Im(t,r.targetId)}).catch(Us))):(Im(t,r.targetId),yield Wf(t.localStore,r.targetId,!0))}),wC.apply(this,arguments)}function EC(){return EC=(0,ve.Z)(function*(n,e,t){const r=jC(n);try{const o=yield function(u,l){const g=Ze(u),_=Hn.now(),b=l.reduce((W,J)=>W.add(J.key),qt());let S,P;return g.persistence.runTransaction("Locally write mutations","readwrite",W=>{let J=Oi(),oe=qt();return g.Gi.getEntries(W,b).next(ke=>{J=ke,J.forEach((je,vt)=>{vt.isValidDocument()||(oe=oe.add(je))})}).next(()=>g.localDocuments.getOverlayedDocuments(W,J)).next(ke=>{S=ke;const je=[];for(const vt of l){const zt=Bg(vt,S.get(vt.key).overlayedDocument);null!=zt&&je.push(new Bo(vt.key,zt,Pg(zt.value.mapValue),Tn.exists(!0)))}return g.mutationQueue.addMutationBatch(W,_,je,l)}).next(ke=>{P=ke;const je=ke.applyToLocalDocumentSet(S,oe);return g.documentOverlayCache.saveOverlays(W,ke.batchId,je)})}).then(()=>({batchId:P.batchId,changes:Iw(S)}))}(r.localStore,e);r.sharedClientState.addPendingMutation(o.batchId),function(u,l,g){let _=u.hc[u.currentUser.toKey()];_||(_=new nr(Mt)),_=_.insert(l,g),u.hc[u.currentUser.toKey()]=_}(r,o.batchId,t),yield ol(r,o.changes),yield gm(r.remoteStore)}catch(o){const u=ym(o,"Failed to persist write");t.reject(u)}}),EC.apply(this,arguments)}function tA(n,e){return DC.apply(this,arguments)}function DC(){return DC=(0,ve.Z)(function*(n,e){const t=Ze(n);try{const r=yield VS(t.localStore,e);e.targetChanges.forEach((o,u)=>{const l=t.cc.get(u);l&&(ct(o.addedDocuments.size+o.modifiedDocuments.size+o.removedDocuments.size<=1),o.addedDocuments.size>0?l.nc=!0:o.modifiedDocuments.size>0?ct(l.nc):o.removedDocuments.size>0&&(ct(l.nc),l.nc=!1))}),yield ol(t,r,e)}catch(r){yield Us(r)}}),DC.apply(this,arguments)}function nA(n,e,t){const r=Ze(n);if(r.isPrimaryClient&&0===t||!r.isPrimaryClient&&1===t){const o=[];r.ic.forEach((u,l)=>{const g=l.view.bu(e);g.snapshot&&o.push(g.snapshot)}),function(u,l){const g=Ze(u);g.onlineState=l;let _=!1;g.queries.forEach((b,S)=>{for(const P of S.listeners)P.bu(l)&&(_=!0)}),_&&mC(g)}(r.eventManager,e),o.length&&r.sc.Wo(o),r.onlineState=e,r.isPrimaryClient&&r.sharedClientState.setOnlineState(e)}}function TM(n,e,t){return bC.apply(this,arguments)}function bC(){return bC=(0,ve.Z)(function*(n,e,t){const r=Ze(n);r.sharedClientState.updateQueryState(e,"rejected",t);const o=r.cc.get(e),u=o&&o.key;if(u){let l=new nr(Ge.comparator);l=l.insert(u,Cn.newNoDocument(u,mt.min()));const g=qt().add(u),_=new Or(mt.min(),new Map,new pn(Mt),l,g);yield tA(r,_),r.uc=r.uc.remove(u),r.cc.delete(e),RC(r)}else yield Wf(r.localStore,e,!1).then(()=>Im(r,e,t)).catch(Us)}),bC.apply(this,arguments)}function SM(n,e){return CC.apply(this,arguments)}function CC(){return CC=(0,ve.Z)(function*(n,e){const t=Ze(n),r=e.batch.batchId;try{const o=yield $b(t.localStore,e);xC(t,r,null),AC(t,r),t.sharedClientState.updateMutationState(r,"acknowledged"),yield ol(t,o)}catch(o){yield Us(o)}}),CC.apply(this,arguments)}function AM(n,e,t){return TC.apply(this,arguments)}function TC(){return TC=(0,ve.Z)(function*(n,e,t){const r=Ze(n);try{const o=yield function(u,l){const g=Ze(u);return g.persistence.runTransaction("Reject batch","readwrite-primary",_=>{let b;return g.mutationQueue.lookupMutationBatch(_,l).next(S=>(ct(null!==S),b=S.keys(),g.mutationQueue.removeMutationBatch(_,S))).next(()=>g.mutationQueue.performConsistencyCheck(_)).next(()=>g.documentOverlayCache.removeOverlaysForBatchId(_,b,l)).next(()=>g.localDocuments.recalculateAndSaveOverlaysForDocumentKeys(_,b)).next(()=>g.localDocuments.getDocuments(_,b))})}(r.localStore,e);xC(r,e,t),AC(r,e),r.sharedClientState.updateMutationState(e,"rejected",t),yield ol(r,o)}catch(o){yield Us(o)}}),TC.apply(this,arguments)}function SC(){return SC=(0,ve.Z)(function*(n,e){const t=Ze(n);sl(t.remoteStore)||Ve("SyncEngine","The network is disabled. The task returned by 'awaitPendingWrites()' will not complete until the network is enabled.");try{const r=yield function(u){const l=Ze(u);return l.persistence.runTransaction("Get highest unacknowledged batch id","readonly",g=>l.mutationQueue.getHighestUnacknowledgedBatchId(g))}(t.localStore);if(-1===r)return void e.resolve();const o=t.lc.get(r)||[];o.push(e),t.lc.set(r,o)}catch(r){const o=ym(r,"Initialization of waitForPendingWrites() operation failed");e.reject(o)}}),SC.apply(this,arguments)}function AC(n,e){(n.lc.get(e)||[]).forEach(t=>{t.resolve()}),n.lc.delete(e)}function xC(n,e,t){const r=Ze(n);let o=r.hc[r.currentUser.toKey()];if(o){const u=o.get(e);u&&(t?u.reject(t):u.resolve(),o=o.remove(e)),r.hc[r.currentUser.toKey()]=o}}function Im(n,e,t=null){n.sharedClientState.removeLocalQueryTarget(e);for(const r of n.rc.get(e))n.ic.delete(r),t&&n.sc.wc(r,t);n.rc.delete(e),n.isPrimaryClient&&n.ac.ls(e).forEach(r=>{n.ac.containsKey(r)||rA(n,r)})}function rA(n,e){n.oc.delete(e.path.canonicalString());const t=n.uc.get(e);null!==t&&(T_(n.remoteStore,t),n.uc=n.uc.remove(e),n.cc.delete(t),RC(n))}function MC(n,e,t){for(const r of t)r instanceof XS?(n.ac.addReference(r.key,e),MM(n,r)):r instanceof JS?(Ve("SyncEngine","Document no longer in limbo: "+r.key),n.ac.removeReference(r.key,e),n.ac.containsKey(r.key)||rA(n,r.key)):tt()}function MM(n,e){const t=e.key,r=t.path.canonicalString();n.uc.get(t)||n.oc.has(r)||(Ve("SyncEngine","New document in limbo: "+t),n.oc.add(r),RC(n))}function RC(n){for(;n.oc.size>0&&n.uc.size<n.maxConcurrentLimboResolutions;){const e=n.oc.values().next().value;n.oc.delete(e);const t=new Ge(rn.fromString(e)),r=n.fc.next();n.cc.set(r,new wM(t)),n.uc=n.uc.insert(t,r),aE(n.remoteStore,new Qc(Pi(Nd(t.path)),r,2,Vs.at))}}function ol(n,e,t){return NC.apply(this,arguments)}function NC(){return NC=(0,ve.Z)(function*(n,e,t){const r=Ze(n),o=[],u=[],l=[];var g;r.ic.isEmpty()||(r.ic.forEach((g,_)=>{l.push(r._c(_,e,t).then(b=>{if((b||t)&&r.isPrimaryClient&&r.sharedClientState.updateQueryState(_.targetId,b?.fromCache?"not-current":"current"),b){o.push(b);const S=dm.Ci(_.targetId,b);u.push(S)}}))}),yield Promise.all(l),r.sc.Wo(o),yield(g=(0,ve.Z)(function*(_,b){const S=Ze(_);try{yield S.persistence.runTransaction("notifyLocalViewChanges","readwrite",P=>le.forEach(b,W=>le.forEach(W.Si,J=>S.persistence.referenceDelegate.addReference(P,W.targetId,J)).next(()=>le.forEach(W.Di,J=>S.persistence.referenceDelegate.removeReference(P,W.targetId,J)))))}catch(P){if(!ba(P))throw P;Ve("LocalStore","Failed to update sequence numbers: "+P)}for(const P of b){const W=P.targetId;if(!P.fromCache){const J=S.qi.get(W),ke=J.withLastLimboFreeSnapshotVersion(J.snapshotVersion);S.qi=S.qi.insert(W,ke)}}}),function(_,b){return g.apply(this,arguments)})(r.localStore,u))}),NC.apply(this,arguments)}function RM(n,e){return PC.apply(this,arguments)}function PC(){return PC=(0,ve.Z)(function*(n,e){const t=Ze(n);if(!t.currentUser.isEqual(e)){Ve("SyncEngine","User change. New user:",e.toKey());const r=yield fm(t.localStore,e);t.currentUser=e,(o=t).lc.forEach(l=>{l.forEach(g=>{g.reject(new Te(fe.CANCELLED,"'waitForPendingWrites' promise is rejected due to a user change."))})}),o.lc.clear(),t.sharedClientState.handleUserChange(e,r.removedBatchIds,r.addedBatchIds),yield ol(t,r.ji)}var o}),PC.apply(this,arguments)}function NM(n,e){const t=Ze(n),r=t.cc.get(e);if(r&&r.nc)return qt().add(r.key);{let o=qt();const u=t.rc.get(e);if(!u)return o;for(const l of u){const g=t.ic.get(l);o=o.unionWith(g.view.ju)}return o}}function PM(n,e){return OC.apply(this,arguments)}function OC(){return OC=(0,ve.Z)(function*(n,e){const t=Ze(n),r=yield b_(t.localStore,e.query,!0),o=e.view.tc(r);return t.isPrimaryClient&&MC(t,e.targetId,o.Xu),o}),OC.apply(this,arguments)}function OM(n,e){return kC.apply(this,arguments)}function kC(){return kC=(0,ve.Z)(function*(n,e){const t=Ze(n);return Wb(t.localStore,e).then(r=>ol(t,r))}),kC.apply(this,arguments)}function kM(n,e,t,r){return FC.apply(this,arguments)}function FC(){return FC=(0,ve.Z)(function*(n,e,t,r){const o=Ze(n),u=yield function(l,g){const _=Ze(l),b=Ze(_.mutationQueue);return _.persistence.runTransaction("Lookup mutation documents","readonly",S=>b.Tn(S,g).next(P=>P?_.localDocuments.getDocuments(S,P):le.resolve(null)))}(o.localStore,e);var g;null!==u?("pending"===t?yield gm(o.remoteStore):"acknowledged"===t||"rejected"===t?(xC(o,e,r||null),AC(o,e),g=e,Ze(Ze(o.localStore).mutationQueue).An(g)):tt(),yield ol(o,u)):Ve("SyncEngine","Cannot apply mutation batch with id: "+e)}),FC.apply(this,arguments)}function LC(){return LC=(0,ve.Z)(function*(n,e){const t=Ze(n);if($C(t),jC(t),!0===e&&!0!==t.dc){const r=t.sharedClientState.getAllActiveQueryTargets(),o=yield iA(t,r.toArray());t.dc=!0,yield cC(t.remoteStore,!0);for(const u of o)aE(t.remoteStore,u)}else if(!1===e&&!1!==t.dc){const r=[];let o=Promise.resolve();t.rc.forEach((u,l)=>{t.sharedClientState.isLocalQueryTarget(l)?r.push(l):o=o.then(()=>(Im(t,l),Wf(t.localStore,l,!0))),T_(t.remoteStore,l)}),yield o,yield iA(t,r),function(u){const l=Ze(u);l.cc.forEach((g,_)=>{T_(l.remoteStore,_)}),l.ac.fs(),l.cc=new Map,l.uc=new nr(Ge.comparator)}(t),t.dc=!1,yield cC(t.remoteStore,!1)}}),LC.apply(this,arguments)}function iA(n,e,t){return UC.apply(this,arguments)}function UC(){return UC=(0,ve.Z)(function*(n,e,t){const r=Ze(n),o=[],u=[];for(const l of e){let g;const _=r.rc.get(l);if(_&&0!==_.length){g=yield qd(r.localStore,Pi(_[0]));for(const b of _){const S=r.ic.get(b),P=yield PM(r,S);P.snapshot&&u.push(P.snapshot)}}else{const b=yield zb(r.localStore,l);g=yield qd(r.localStore,b),yield _C(r,sA(b),l,!1,g.resumeToken)}o.push(g)}return r.sc.Wo(u),o}),UC.apply(this,arguments)}function sA(n){return kv(n.path,n.collectionGroup,n.orderBy,n.filters,n.limit,"F",n.startAt,n.endAt)}function LM(n){const e=Ze(n);return Ze(Ze(e.localStore).persistence).vi()}function UM(n,e,t,r){return VC.apply(this,arguments)}function VC(){return VC=(0,ve.Z)(function*(n,e,t,r){const o=Ze(n);if(o.dc)return void Ve("SyncEngine","Ignoring unexpected query state notification.");const u=o.rc.get(e);if(u&&u.length>0)switch(t){case"current":case"not-current":{const l=yield Wb(o.localStore,aw(u[0])),g=Or.createSynthesizedRemoteEventForCurrentChange(e,"current"===t,Pr.EMPTY_BYTE_STRING);yield ol(o,l,g);break}case"rejected":yield Wf(o.localStore,e,!0),Im(o,e,r);break;default:tt()}}),VC.apply(this,arguments)}function VM(n,e,t){return BC.apply(this,arguments)}function BC(){return BC=(0,ve.Z)(function*(n,e,t){const r=$C(n);if(r.dc){for(const o of e){if(r.rc.has(o)){Ve("SyncEngine","Adding an already active target "+o);continue}const u=yield zb(r.localStore,o),l=yield qd(r.localStore,u);yield _C(r,sA(u),l.targetId,!1,l.resumeToken),aE(r.remoteStore,l)}for(const o of t)r.rc.has(o)&&(yield Wf(r.localStore,o,!1).then(()=>{T_(r.remoteStore,o),Im(r,o)}).catch(Us))}}),BC.apply(this,arguments)}function $C(n){const e=Ze(n);return e.remoteStore.remoteSyncer.applyRemoteEvent=tA.bind(null,e),e.remoteStore.remoteSyncer.getRemoteKeysForTarget=NM.bind(null,e),e.remoteStore.remoteSyncer.rejectListen=TM.bind(null,e),e.sc.Wo=mM.bind(null,e.eventManager),e.sc.wc=yM.bind(null,e.eventManager),e}function jC(n){const e=Ze(n);return e.remoteStore.remoteSyncer.applySuccessfulWrite=SM.bind(null,e),e.remoteStore.remoteSyncer.rejectFailedWrite=AM.bind(null,e),e}class oA{constructor(){this.synchronizeTabs=!1}initialize(e){var t=this;return(0,ve.Z)(function*(){t.yt=Be(e.databaseInfo.databaseId),t.sharedClientState=t.gc(e),t.persistence=t.yc(e),yield t.persistence.start(),t.localStore=t.Ic(e),t.gcScheduler=t.Tc(e,t.localStore),t.indexBackfillerScheduler=t.Ec(e,t.localStore)})()}Tc(e,t){return null}Ec(e,t){return null}Ic(e){return E_(this.persistence,new hm,e.initialUser,this.yt)}yc(e){return new I_(am.Bs,this.yt)}gc(e){return new I}terminate(){var e=this;return(0,ve.Z)(function*(){e.gcScheduler&&e.gcScheduler.stop(),yield e.sharedClientState.shutdown(),yield e.persistence.shutdown()})()}}class aA extends oA{constructor(e,t,r){super(),this.Ac=e,this.cacheSizeBytes=t,this.forceOwnership=r,this.synchronizeTabs=!1}initialize(e){var t=()=>super.initialize,r=this;return(0,ve.Z)(function*(){yield t().call(r,e),yield r.Ac.initialize(r,e),yield jC(r.Ac.syncEngine),yield gm(r.Ac.remoteStore),yield r.persistence.li(()=>(r.gcScheduler&&!r.gcScheduler.started&&r.gcScheduler.start(),r.indexBackfillerScheduler&&!r.indexBackfillerScheduler.started&&r.indexBackfillerScheduler.start(),Promise.resolve()))})()}Ic(e){return E_(this.persistence,new hm,e.initialUser,this.yt)}Tc(e,t){return new Fb(this.persistence.referenceDelegate.garbageCollector,e.asyncQueue,t)}Ec(e,t){const r=new pS(t,this.persistence);return new fS(e.asyncQueue,r)}yc(e){const t=w_(e.databaseInfo.databaseId,e.databaseInfo.persistenceKey),r=void 0!==this.cacheSizeBytes?ki.withCacheSize(this.cacheSizeBytes):ki.DEFAULT;return new cm(this.synchronizeTabs,t,e.clientId,r,e.asyncQueue,te(),ye(),this.yt,this.sharedClientState,!!this.forceOwnership)}gc(e){return new I}}class $M extends aA{constructor(e,t){super(e,t,!1),this.Ac=e,this.cacheSizeBytes=t,this.synchronizeTabs=!0}initialize(e){var t=()=>super.initialize,r=this;return(0,ve.Z)(function*(){yield t().call(r,e);const o=r.Ac.syncEngine;r.sharedClientState instanceof y&&(r.sharedClientState.syncEngine={Fr:kM.bind(null,o),$r:UM.bind(null,o),Br:VM.bind(null,o),vi:LM.bind(null,o),Mr:OM.bind(null,o)},yield r.sharedClientState.start()),yield r.persistence.li(function(){var u=(0,ve.Z)(function*(l){yield function FM(n,e){return LC.apply(this,arguments)}(r.Ac.syncEngine,l),r.gcScheduler&&(l&&!r.gcScheduler.started?r.gcScheduler.start():l||r.gcScheduler.stop()),r.indexBackfillerScheduler&&(l&&!r.indexBackfillerScheduler.started?r.indexBackfillerScheduler.start():l||r.indexBackfillerScheduler.stop())});return function(l){return u.apply(this,arguments)}}())})()}gc(e){const t=te();if(!y.C(t))throw new Te(fe.UNIMPLEMENTED,"IndexedDB persistence is only available on platforms that support LocalStorage.");const r=w_(e.databaseInfo.databaseId,e.databaseInfo.persistenceKey);return new y(t,e.asyncQueue,r,e.clientId,e.initialUser)}}class HC{initialize(e,t){var r=this;return(0,ve.Z)(function*(){r.localStore||(r.localStore=e.localStore,r.sharedClientState=e.sharedClientState,r.datastore=r.createDatastore(t),r.remoteStore=r.createRemoteStore(t),r.eventManager=r.createEventManager(t),r.syncEngine=r.createSyncEngine(t,!e.synchronizeTabs),r.sharedClientState.onlineStateHandler=o=>nA(r.syncEngine,o,1),r.remoteStore.remoteSyncer.handleCredentialChange=RM.bind(null,r.syncEngine),yield cC(r.remoteStore,r.syncEngine.isPrimaryClient))})()}createEventManager(e){return new gM}createDatastore(e){const t=Be(e.databaseInfo.databaseId),r=new q(e.databaseInfo);return new Ft(e.authCredentials,e.appCheckCredentials,r,t)}createRemoteStore(e){return t=this.localStore,r=this.datastore,o=e.asyncQueue,u=g=>nA(this.syncEngine,g,0),l=T.C()?new T:new E,new iM(t,r,o,u,l);var t,r,o,u,l}createSyncEngine(e,t){return function(r,o,u,l,g,_,b){const S=new EM(r,o,u,l,g,_);return b&&(S.dc=!0),S}(this.localStore,this.remoteStore,this.eventManager,this.sharedClientState,e.initialUser,e.maxConcurrentLimboResolutions,t)}terminate(){return(e=(0,ve.Z)(function*(t){const r=Ze(t);Ve("RemoteStore","RemoteStore shutting down."),r._u.add(5),yield pm(r),r.mu.shutdown(),r.gu.set("Unknown")}),function(t){return e.apply(this,arguments)})(this.remoteStore);var e}}function zC(n,e,t){if(!t)throw new Te(fe.INVALID_ARGUMENT,`Function ${n}() cannot be called with an empty ${e}.`)}function uA(n,e,t,r){if(!0===e&&!0===r)throw new Te(fe.INVALID_ARGUMENT,`${n} and ${t} cannot be used together.`)}function cA(n){if(!Ge.isDocumentKey(n))throw new Te(fe.INVALID_ARGUMENT,`Invalid document reference. Document references must have an even number of segments, but ${n} has ${n.length}.`)}function lA(n){if(Ge.isDocumentKey(n))throw new Te(fe.INVALID_ARGUMENT,`Invalid collection reference. Collection references must have an odd number of segments, but ${n} has ${n.length}.`)}function cE(n){if(void 0===n)return"undefined";if(null===n)return"null";if("string"==typeof n)return n.length>20&&(n=`${n.substring(0,20)}...`),JSON.stringify(n);if("number"==typeof n||"boolean"==typeof n)return""+n;if("object"==typeof n){if(n instanceof Array)return"an array";{const e=(t=n).constructor?t.constructor.name:null;return e?`a custom ${e} object`:"an object"}}var t;return"function"==typeof n?"a function":tt()}function sn(n,e){if("_delegate"in n&&(n=n._delegate),!(n instanceof e)){if(e.name===n.constructor.name)throw new Te(fe.INVALID_ARGUMENT,"Type does not match the expected instance. Did you pass a reference from a different Firestore SDK?");{const t=cE(n);throw new Te(fe.INVALID_ARGUMENT,`Expected type '${e.name}', but it was: ${t}`)}}return n}function dA(n,e){if(e<=0)throw new Te(fe.INVALID_ARGUMENT,`Function ${n}() requires a positive number, but it was: ${e}.`)}const hA=new Map;class fA{constructor(e){var t;if(void 0===e.host){if(void 0!==e.ssl)throw new Te(fe.INVALID_ARGUMENT,"Can't provide ssl option if host option is not set");this.host="firestore.googleapis.com",this.ssl=!0}else this.host=e.host,this.ssl=null===(t=e.ssl)||void 0===t||t;if(this.credentials=e.credentials,this.ignoreUndefinedProperties=!!e.ignoreUndefinedProperties,void 0===e.cacheSizeBytes)this.cacheSizeBytes=41943040;else{if(-1!==e.cacheSizeBytes&&e.cacheSizeBytes<1048576)throw new Te(fe.INVALID_ARGUMENT,"cacheSizeBytes must be at least 1048576");this.cacheSizeBytes=e.cacheSizeBytes}this.experimentalForceLongPolling=!!e.experimentalForceLongPolling,this.experimentalAutoDetectLongPolling=!!e.experimentalAutoDetectLongPolling,this.useFetchStreams=!!e.useFetchStreams,uA("experimentalForceLongPolling",e.experimentalForceLongPolling,"experimentalAutoDetectLongPolling",e.experimentalAutoDetectLongPolling)}isEqual(e){return this.host===e.host&&this.ssl===e.ssl&&this.credentials===e.credentials&&this.cacheSizeBytes===e.cacheSizeBytes&&this.experimentalForceLongPolling===e.experimentalForceLongPolling&&this.experimentalAutoDetectLongPolling===e.experimentalAutoDetectLongPolling&&this.ignoreUndefinedProperties===e.ignoreUndefinedProperties&&this.useFetchStreams===e.useFetchStreams}}class S_{constructor(e,t,r,o){this._authCredentials=e,this._appCheckCredentials=t,this._databaseId=r,this._app=o,this.type="firestore-lite",this._persistenceKey="(lite)",this._settings=new fA({}),this._settingsFrozen=!1}get app(){if(!this._app)throw new Te(fe.FAILED_PRECONDITION,"Firestore was not initialized using the Firebase SDK. 'app' is not available");return this._app}get _initialized(){return this._settingsFrozen}get _terminated(){return void 0!==this._terminateTask}_setSettings(e){if(this._settingsFrozen)throw new Te(fe.FAILED_PRECONDITION,"Firestore has already been started and its settings can no longer be changed. You can only modify settings before calling any other methods on a Firestore object.");this._settings=new fA(e),void 0!==e.credentials&&(this._authCredentials=function(t){if(!t)return new lS;switch(t.type){case"gapi":return new Dt(t.client,t.sessionIndex||"0",t.iamToken||null,t.authTokenFactory||null);case"provider":return t.client;default:throw new Te(fe.INVALID_ARGUMENT,"makeAuthCredentialsProvider failed due to invalid credential type")}}(e.credentials))}_getSettings(){return this._settings}_freezeSettings(){return this._settingsFrozen=!0,this._settings}_delete(){return this._terminateTask||(this._terminateTask=this._terminate()),this._terminateTask}toJSON(){return{app:this._app,databaseId:this._databaseId,settings:this._settings}}_terminate(){return function(e){const t=hA.get(e);t&&(Ve("ComponentProvider","Removing Datastore"),hA.delete(e),t.terminate())}(this),Promise.resolve()}}function pA(n,e,t,r={}){var o;const u=(n=sn(n,S_))._getSettings();if("firestore.googleapis.com"!==u.host&&u.host!==e&&yu("Host has been set in both settings() and useEmulator(), emulator host will be used"),n._setSettings(Object.assign(Object.assign({},u),{host:`${e}:${t}`,ssl:!1})),r.mockUserToken){let l,g;if("string"==typeof r.mockUserToken)l=r.mockUserToken,g=Nr.MOCK_USER;else{l=(0,an.Sg)(r.mockUserToken,null===(o=n._app)||void 0===o?void 0:o.options.projectId);const _=r.mockUserToken.sub||r.mockUserToken.user_id;if(!_)throw new Te(fe.INVALID_ARGUMENT,"mockUserToken must contain 'sub' or 'user_id' field!");g=new Nr(_)}n._authCredentials=new xI(new bg(l,g))}}class qn{constructor(e,t,r){this.converter=t,this._key=r,this.type="document",this.firestore=e}get _path(){return this._key.path}get id(){return this._key.path.lastSegment()}get path(){return this._key.path.canonicalString()}get parent(){return new Uu(this.firestore,this.converter,this._key.path.popLast())}withConverter(e){return new qn(this.firestore,e,this._key)}}class Fi{constructor(e,t,r){this.converter=t,this._query=r,this.type="query",this.firestore=e}withConverter(e){return new Fi(this.firestore,e,this._query)}}class Uu extends Fi{constructor(e,t,r){super(e,t,Nd(r)),this._path=r,this.type="collection"}get id(){return this._query.path.lastSegment()}get path(){return this._query.path.canonicalString()}get parent(){const e=this._path.popLast();return e.isEmpty()?null:new qn(this.firestore,null,new Ge(e))}withConverter(e){return new Uu(this.firestore,e,this._path)}}function gA(n,e,...t){if(n=(0,an.m9)(n),zC("collection","path",e),n instanceof S_){const r=rn.fromString(e,...t);return lA(r),new Uu(n,null,r)}{if(!(n instanceof qn||n instanceof Uu))throw new Te(fe.INVALID_ARGUMENT,"Expected first argument to collection() to be a CollectionReference, a DocumentReference or FirebaseFirestore");const r=n._path.child(rn.fromString(e,...t));return lA(r),new Uu(n.firestore,null,r)}}function lE(n,e,...t){if(n=(0,an.m9)(n),1===arguments.length&&(e=NI.R()),zC("doc","path",e),n instanceof S_){const r=rn.fromString(e,...t);return cA(r),new qn(n,null,new Ge(r))}{if(!(n instanceof qn||n instanceof Uu))throw new Te(fe.INVALID_ARGUMENT,"Expected first argument to collection() to be a CollectionReference, a DocumentReference or FirebaseFirestore");const r=n._path.child(rn.fromString(e,...t));return cA(r),new qn(n.firestore,n instanceof Uu?n.converter:null,new Ge(r))}}function mA(n,e){return n=(0,an.m9)(n),e=(0,an.m9)(e),(n instanceof qn||n instanceof Uu)&&(e instanceof qn||e instanceof Uu)&&n.firestore===e.firestore&&n.path===e.path&&n.converter===e.converter}function WC(n,e){return n=(0,an.m9)(n),e=(0,an.m9)(e),n instanceof Fi&&e instanceof Fi&&n.firestore===e.firestore&&xf(n._query,e._query)&&n.converter===e.converter}function yA(n,e=10240){let t=0;return{read:()=>(0,ve.Z)(function*(){if(t<n.byteLength){const r={value:n.slice(t,t+e),done:!1};return t+=e,r}return{done:!0}})(),cancel:()=>(0,ve.Z)(function*(){})(),releaseLock(){},closed:Promise.reject("unimplemented")}}class dE{constructor(e){this.observer=e,this.muted=!1}next(e){this.observer.next&&this.Rc(this.observer.next,e)}error(e){this.observer.error?this.Rc(this.observer.error,e):er("Uncaught Error in snapshot listener:",e.toString())}bc(){this.muted=!0}Rc(e,t){this.muted||setTimeout(()=>{this.muted||e(t)},0)}}class HM{constructor(e,t){this.Pc=e,this.yt=t,this.metadata=new Wr,this.buffer=new Uint8Array,this.vc=new TextDecoder("utf-8"),this.Vc().then(r=>{r&&r.Ou()?this.metadata.resolve(r.ku.metadata):this.metadata.reject(new Error(`The first element of the bundle is not a metadata, it is\n             ${JSON.stringify(r?.ku)}`))},r=>this.metadata.reject(r))}close(){return this.Pc.cancel()}getMetadata(){var e=this;return(0,ve.Z)(function*(){return e.metadata.promise})()}mc(){var e=this;return(0,ve.Z)(function*(){return yield e.getMetadata(),e.Vc()})()}Vc(){var e=this;return(0,ve.Z)(function*(){const t=yield e.Sc();if(null===t)return null;const r=e.vc.decode(t),o=Number(r);isNaN(o)&&e.Dc(`length string (${r}) is not valid number`);const u=yield e.Cc(o);return new vM(JSON.parse(u),t.length+o)})()}xc(){return this.buffer.findIndex(e=>e==="{".charCodeAt(0))}Sc(){var e=this;return(0,ve.Z)(function*(){for(;e.xc()<0&&!(yield e.Nc()););if(0===e.buffer.length)return null;const t=e.xc();t<0&&e.Dc("Reached the end of bundle when a length string is expected.");const r=e.buffer.slice(0,t);return e.buffer=e.buffer.slice(t),r})()}Cc(e){var t=this;return(0,ve.Z)(function*(){for(;t.buffer.length<e;)(yield t.Nc())&&t.Dc("Reached the end of bundle when more is expected.");const r=t.vc.decode(t.buffer.slice(0,e));return t.buffer=t.buffer.slice(e),r})()}Dc(e){throw this.Pc.cancel(),new Error(`Invalid bundle format: ${e}`)}Nc(){var e=this;return(0,ve.Z)(function*(){const t=yield e.Pc.read();if(!t.done){const r=new Uint8Array(e.buffer.length+t.value.length);r.set(e.buffer),r.set(t.value,e.buffer.length),e.buffer=r}return t.done})()}}class GM{constructor(e){this.datastore=e,this.readVersions=new Map,this.mutations=[],this.committed=!1,this.lastWriteError=null,this.writtenDocs=new Set}lookup(e){var t=this;return(0,ve.Z)(function*(){if(t.ensureCommitNotCalled(),t.mutations.length>0)throw new Te(fe.INVALID_ARGUMENT,"Firestore transactions require all reads to be executed before all writes.");const r=yield(o=(0,ve.Z)(function*(u,l){const g=Ze(u),_=kf(g.yt)+"/documents",b={documents:l.map(J=>Pu(g.yt,J))},S=yield g._o("BatchGetDocuments",_,b,l.length),P=new Map;S.forEach(J=>{const oe=function Mw(n,e){return"found"in e?function(t,r){ct(!!r.found);const o=$s(t,r.found.name),u=Wn(r.found.updateTime),l=r.found.createTime?Wn(r.found.createTime):mt.min(),g=new qr({mapValue:{fields:r.found.fields}});return Cn.newFoundDocument(o,u,l,g)}(n,e):"missing"in e?function(t,r){ct(!!r.missing),ct(!!r.readTime);const o=$s(t,r.missing),u=Wn(r.readTime);return Cn.newNoDocument(o,u)}(n,e):tt()}(g.yt,J);P.set(oe.key.toString(),oe)});const W=[];return l.forEach(J=>{const oe=P.get(J.toString());ct(!!oe),W.push(oe)}),W}),function(u,l){return o.apply(this,arguments)})(t.datastore,e);var o;return r.forEach(o=>t.recordVersion(o)),r})()}set(e,t){this.write(t.toMutation(e,this.precondition(e))),this.writtenDocs.add(e.toString())}update(e,t){try{this.write(t.toMutation(e,this.preconditionForUpdate(e)))}catch(r){this.lastWriteError=r}this.writtenDocs.add(e.toString())}delete(e){this.write(new Ru(e,this.precondition(e))),this.writtenDocs.add(e.toString())}commit(){var e=this;return(0,ve.Z)(function*(){if(e.ensureCommitNotCalled(),e.lastWriteError)throw e.lastWriteError;const t=e.readVersions;var r;e.mutations.forEach(r=>{t.delete(r.key.toString())}),t.forEach((r,o)=>{const u=Ge.fromPath(o);e.mutations.push(new Pf(u,e.precondition(u)))}),yield(r=(0,ve.Z)(function*(o,u){const l=Ze(o),g=kf(l.yt)+"/documents",_={writes:u.map(b=>Gg(l.yt,b))};yield l.ao("Commit",g,_)}),function(o,u){return r.apply(this,arguments)})(e.datastore,e.mutations),e.committed=!0})()}recordVersion(e){let t;if(e.isFoundDocument())t=e.version;else{if(!e.isNoDocument())throw tt();t=mt.min()}const r=this.readVersions.get(e.key.toString());if(r){if(!t.isEqual(r))throw new Te(fe.ABORTED,"Document version changed between two reads.")}else this.readVersions.set(e.key.toString(),t)}precondition(e){const t=this.readVersions.get(e.toString());return!this.writtenDocs.has(e.toString())&&t?t.isEqual(mt.min())?Tn.exists(!1):Tn.updateTime(t):Tn.none()}preconditionForUpdate(e){const t=this.readVersions.get(e.toString());if(!this.writtenDocs.has(e.toString())&&t){if(t.isEqual(mt.min()))throw new Te(fe.INVALID_ARGUMENT,"Can't update a document that doesn't exist.");return Tn.updateTime(t)}return Tn.exists(!0)}write(e){this.ensureCommitNotCalled(),this.mutations.push(e)}ensureCommitNotCalled(){}}class qM{constructor(e,t,r,o,u){this.asyncQueue=e,this.datastore=t,this.options=r,this.updateFunction=o,this.deferred=u,this.kc=r.maxAttempts,this.xo=new qe(this.asyncQueue,"transaction_retry")}run(){this.kc-=1,this.Oc()}Oc(){var e=this;this.xo.Ro((0,ve.Z)(function*(){const t=new GM(e.datastore),r=e.Mc(t);r&&r.then(o=>{e.asyncQueue.enqueueAndForget(()=>t.commit().then(()=>{e.deferred.resolve(o)}).catch(u=>{e.Fc(u)}))}).catch(o=>{e.Fc(o)})}))}Mc(e){try{const t=this.updateFunction(e);return!Df(t)&&t.catch&&t.then?t:(this.deferred.reject(Error("Transaction callback must return a Promise")),null)}catch(t){return this.deferred.reject(t),null}}Fc(e){this.kc>0&&this.$c(e)?(this.kc-=1,this.asyncQueue.enqueueAndForget(()=>(this.Oc(),Promise.resolve()))):this.deferred.reject(e)}$c(e){if("FirebaseError"===e.name){const t=e.code;return"aborted"===t||"failed-precondition"===t||"already-exists"===t||!vw(t)}return!1}}class ZM{constructor(e,t,r,o){var u=this;this.authCredentials=e,this.appCheckCredentials=t,this.asyncQueue=r,this.databaseInfo=o,this.user=Nr.UNAUTHENTICATED,this.clientId=NI.R(),this.authCredentialListener=()=>Promise.resolve(),this.appCheckCredentialListener=()=>Promise.resolve(),this.authCredentials.start(r,function(){var l=(0,ve.Z)(function*(g){Ve("FirestoreClient","Received user=",g.uid),yield u.authCredentialListener(g),u.user=g});return function(g){return l.apply(this,arguments)}}()),this.appCheckCredentials.start(r,l=>(Ve("FirestoreClient","Received new app check token=",l),this.appCheckCredentialListener(l,this.user)))}getConfiguration(){var e=this;return(0,ve.Z)(function*(){return{asyncQueue:e.asyncQueue,databaseInfo:e.databaseInfo,clientId:e.clientId,authCredentials:e.authCredentials,appCheckCredentials:e.appCheckCredentials,initialUser:e.user,maxConcurrentLimboResolutions:100}})()}setCredentialChangeListener(e){this.authCredentialListener=e}setAppCheckTokenChangeListener(e){this.appCheckCredentialListener=e}verifyNotTerminated(){if(this.asyncQueue.isShuttingDown)throw new Te(fe.FAILED_PRECONDITION,"The client has already been terminated.")}terminate(){var e=this;this.asyncQueue.enterRestrictedMode();const t=new Wr;return this.asyncQueue.enqueueAndForgetEvenWhileRestricted((0,ve.Z)(function*(){try{e.onlineComponents&&(yield e.onlineComponents.terminate()),e.offlineComponents&&(yield e.offlineComponents.terminate()),e.authCredentials.shutdown(),e.appCheckCredentials.shutdown(),t.resolve()}catch(r){const o=ym(r,"Failed to shutdown persistence");t.reject(o)}})),t.promise}}function vA(n,e){return GC.apply(this,arguments)}function GC(){return GC=(0,ve.Z)(function*(n,e){n.asyncQueue.verifyOperationInProgress(),Ve("FirestoreClient","Initializing OfflineComponentProvider");const t=yield n.getConfiguration();yield e.initialize(t);let r=t.initialUser;n.setCredentialChangeListener(function(){var o=(0,ve.Z)(function*(u){r.isEqual(u)||(yield fm(e.localStore,u),r=u)});return function(u){return o.apply(this,arguments)}}()),e.persistence.setDatabaseDeletedListener(()=>n.terminate()),n.offlineComponents=e}),GC.apply(this,arguments)}function _A(n,e){return qC.apply(this,arguments)}function qC(){return qC=(0,ve.Z)(function*(n,e){n.asyncQueue.verifyOperationInProgress();const t=yield ZC(n);Ve("FirestoreClient","Initializing OnlineComponentProvider");const r=yield n.getConfiguration();yield e.initialize(t,r),n.setCredentialChangeListener(o=>ZS(e.remoteStore,o)),n.setAppCheckTokenChangeListener((o,u)=>ZS(e.remoteStore,u)),n.onlineComponents=e}),qC.apply(this,arguments)}function ZC(n){return KC.apply(this,arguments)}function KC(){return KC=(0,ve.Z)(function*(n){return n.offlineComponents||(Ve("FirestoreClient","Using default OfflineComponentProvider"),yield vA(n,new oA)),n.offlineComponents}),KC.apply(this,arguments)}function hE(n){return YC.apply(this,arguments)}function YC(){return YC=(0,ve.Z)(function*(n){return n.onlineComponents||(Ve("FirestoreClient","Using default OnlineComponentProvider"),yield _A(n,new HC)),n.onlineComponents}),YC.apply(this,arguments)}function IA(n){return ZC(n).then(e=>e.persistence)}function fE(n){return ZC(n).then(e=>e.localStore)}function QC(n){return hE(n).then(e=>e.remoteStore)}function XC(n){return hE(n).then(e=>e.syncEngine)}function wm(n){return JC.apply(this,arguments)}function JC(){return JC=(0,ve.Z)(function*(n){const e=yield hE(n),t=e.eventManager;return t.onListen=DM.bind(null,e.syncEngine),t.onUnlisten=bM.bind(null,e.syncEngine),t}),JC.apply(this,arguments)}function EA(n,e,t={}){const r=new Wr;return n.asyncQueue.enqueueAndForget((0,ve.Z)(function*(){return function(o,u,l,g,_){const b=new dE({next:P=>{u.enqueueAndForget(()=>pC(o,S));const W=P.docs.has(l);!W&&P.fromCache?_.reject(new Te(fe.UNAVAILABLE,"Failed to get document because the client is offline.")):W&&P.fromCache&&g&&"server"===g.source?_.reject(new Te(fe.UNAVAILABLE,'Failed to get document from server. (However, this document does exist in the local cache. Run again without setting source to "server" to retrieve the cached document.)')):_.resolve(P)},error:P=>_.reject(P)}),S=new yC(Nd(l.path),b,{includeMetadataChanges:!0,Nu:!0});return hC(o,S)}(yield wm(n),n.asyncQueue,e,t,r)})),r.promise}function DA(n,e,t={}){const r=new Wr;return n.asyncQueue.enqueueAndForget((0,ve.Z)(function*(){return function(o,u,l,g,_){const b=new dE({next:P=>{u.enqueueAndForget(()=>pC(o,S)),P.fromCache&&"server"===g.source?_.reject(new Te(fe.UNAVAILABLE,'Failed to get documents from server. (However, these documents may exist in the local cache. Run again without setting source to "server" to retrieve the cached documents.)')):_.resolve(P)},error:P=>_.reject(P)}),S=new yC(l,b,{includeMetadataChanges:!0,Nu:!0});return hC(o,S)}(yield wm(n),n.asyncQueue,e,t,r)})),r.promise}class nR{constructor(){this.Bc=Promise.resolve(),this.Lc=[],this.qc=!1,this.Uc=[],this.Kc=null,this.Gc=!1,this.Qc=!1,this.jc=[],this.xo=new qe(this,"async_queue_retry"),this.Wc=()=>{const t=ye();t&&Ve("AsyncQueue","Visibility state changed to "+t.visibilityState),this.xo.Po()};const e=ye();e&&"function"==typeof e.addEventListener&&e.addEventListener("visibilitychange",this.Wc)}get isShuttingDown(){return this.qc}enqueueAndForget(e){this.enqueue(e)}enqueueAndForgetEvenWhileRestricted(e){this.zc(),this.Hc(e)}enterRestrictedMode(e){if(!this.qc){this.qc=!0,this.Qc=e||!1;const t=ye();t&&"function"==typeof t.removeEventListener&&t.removeEventListener("visibilitychange",this.Wc)}}enqueue(e){if(this.zc(),this.qc)return new Promise(()=>{});const t=new Wr;return this.Hc(()=>this.qc&&this.Qc?Promise.resolve():(e().then(t.resolve,t.reject),t.promise)).then(()=>t.promise)}enqueueRetryable(e){this.enqueueAndForget(()=>(this.Lc.push(e),this.Jc()))}Jc(){var e=this;return(0,ve.Z)(function*(){if(0!==e.Lc.length){try{yield e.Lc[0](),e.Lc.shift(),e.xo.reset()}catch(t){if(!ba(t))throw t;Ve("AsyncQueue","Operation failed with retryable error: "+t)}e.Lc.length>0&&e.xo.Ro(()=>e.Jc())}})()}Hc(e){const t=this.Bc.then(()=>(this.Gc=!0,e().catch(r=>{throw this.Kc=r,this.Gc=!1,er("INTERNAL UNHANDLED ERROR: ",function(u){let l=u.message||"";return u.stack&&(l=u.stack.includes(u.message)?u.stack:u.message+"\n"+u.stack),l}(r)),r}).then(r=>(this.Gc=!1,r))));return this.Bc=t,t}enqueueAfterDelay(e,t,r){this.zc(),this.jc.indexOf(e)>-1&&(t=0);const o=dC.createAndSchedule(this,e,t,r,u=>this.Yc(u));return this.Uc.push(o),o}zc(){this.Kc&&tt()}verifyOperationInProgress(){}Xc(){var e=this;return(0,ve.Z)(function*(){let t;do{t=e.Bc,yield t}while(t!==e.Bc)})()}Zc(e){for(const t of this.Uc)if(t.timerId===e)return!0;return!1}ta(e){return this.Xc().then(()=>{this.Uc.sort((t,r)=>t.targetTimeMs-r.targetTimeMs);for(const t of this.Uc)if(t.skipDelay(),"all"!==e&&t.timerId===e)break;return this.Xc()})}ea(e){this.jc.push(e)}Yc(e){const t=this.Uc.indexOf(e);this.Uc.splice(t,1)}}function eT(n){return function(e,t){if("object"!=typeof e||null===e)return!1;const r=e;for(const o of["next","error","complete"])if(o in r&&"function"==typeof r[o])return!0;return!1}(n)}class rR{constructor(){this._progressObserver={},this._taskCompletionResolver=new Wr,this._lastProgress={taskState:"Running",totalBytes:0,totalDocuments:0,bytesLoaded:0,documentsLoaded:0}}onProgress(e,t,r){this._progressObserver={next:e,error:t,complete:r}}catch(e){return this._taskCompletionResolver.promise.catch(e)}then(e,t){return this._taskCompletionResolver.promise.then(e,t)}_completeWith(e){this._updateProgress(e),this._progressObserver.complete&&this._progressObserver.complete(),this._taskCompletionResolver.resolve(e)}_failWith(e){this._lastProgress.taskState="Error",this._progressObserver.next&&this._progressObserver.next(this._lastProgress),this._progressObserver.error&&this._progressObserver.error(e),this._taskCompletionResolver.reject(e)}_updateProgress(e){this._lastProgress=e,this._progressObserver.next&&this._progressObserver.next(e)}}class Zn extends S_{constructor(e,t,r,o){super(e,t,r,o),this.type="firestore",this._queue=new nR,this._persistenceKey=o?.name||"[DEFAULT]"}_terminate(){return this._firestoreClient||bA(this),this._firestoreClient.terminate()}}function sR(n,e){const t="object"==typeof n?n:(0,Oo.getApp)(),r="string"==typeof n?n:e||"(default)",o=(0,Oo._getProvider)(t,"firestore").getImmediate({identifier:r});if(!o._initialized){const u=(0,an.P0)("firestore");u&&pA(o,...u)}return o}function kr(n){return n._firestoreClient||bA(n),n._firestoreClient.verifyNotTerminated(),n._firestoreClient}function bA(n){var e;const t=n._freezeSettings(),r=(u=(null===(e=n._app)||void 0===e?void 0:e.options.appId)||"",new gS(n._databaseId,u,n._persistenceKey,(g=t).host,g.ssl,g.experimentalForceLongPolling,g.experimentalAutoDetectLongPolling,g.useFetchStreams));var u,g;n._firestoreClient=new ZM(n._authCredentials,n._appCheckCredentials,n._queue,r)}function CA(n,e,t){const r=new Wr;return n.asyncQueue.enqueue((0,ve.Z)(function*(){try{yield vA(n,t),yield _A(n,e),r.resolve()}catch(o){const u=o;if(!("FirebaseError"===(l=u).name?l.code===fe.FAILED_PRECONDITION||l.code===fe.UNIMPLEMENTED:!(typeof DOMException<"u"&&l instanceof DOMException)||22===l.code||20===l.code||11===l.code))throw u;yu("Error enabling offline persistence. Falling back to persistence disabled: "+u),r.reject(u)}var l})).then(()=>r.promise)}function TA(n){if(n._initialized||n._terminated)throw new Te(fe.FAILED_PRECONDITION,"Firestore has already been started and persistence can no longer be enabled. You can only enable persistence before calling any other methods on a Firestore object.")}class Vu{constructor(e){this._byteString=e}static fromBase64String(e){try{return new Vu(Pr.fromBase64String(e))}catch(t){throw new Te(fe.INVALID_ARGUMENT,"Failed to construct data from Base64 string: "+t)}}static fromUint8Array(e){return new Vu(Pr.fromUint8Array(e))}toBase64(){return this._byteString.toBase64()}toUint8Array(){return this._byteString.toUint8Array()}toString(){return"Bytes(base64: "+this.toBase64()+")"}isEqual(e){return this._byteString.isEqual(e._byteString)}}class al{constructor(...e){for(let t=0;t<e.length;++t)if(0===e[t].length)throw new Te(fe.INVALID_ARGUMENT,"Invalid field name at argument $(i + 1). Field names must not be empty.");this._internalPath=new zn(e)}isEqual(e){return this._internalPath.isEqual(e._internalPath)}}class Gf{constructor(e){this._methodName=e}}class pE{constructor(e,t){if(!isFinite(e)||e<-90||e>90)throw new Te(fe.INVALID_ARGUMENT,"Latitude must be a number between -90 and 90, but was: "+e);if(!isFinite(t)||t<-180||t>180)throw new Te(fe.INVALID_ARGUMENT,"Longitude must be a number between -180 and 180, but was: "+t);this._lat=e,this._long=t}get latitude(){return this._lat}get longitude(){return this._long}isEqual(e){return this._lat===e._lat&&this._long===e._long}toJSON(){return{latitude:this._lat,longitude:this._long}}_compareTo(e){return Mt(this._lat,e._lat)||Mt(this._long,e._long)}}const pR=/^__.*__$/;class gR{constructor(e,t,r){this.data=e,this.fieldMask=t,this.fieldTransforms=r}toMutation(e,t){return null!==this.fieldMask?new Bo(e,this.data,this.fieldMask,t,this.fieldTransforms):new kd(e,this.data,t,this.fieldTransforms)}}class SA{constructor(e,t,r){this.data=e,this.fieldMask=t,this.fieldTransforms=r}toMutation(e,t){return new Bo(e,this.data,this.fieldMask,t,this.fieldTransforms)}}function AA(n){switch(n){case 0:case 2:case 1:return!0;case 3:case 4:return!1;default:throw tt()}}class gE{constructor(e,t,r,o,u,l){this.settings=e,this.databaseId=t,this.yt=r,this.ignoreUndefinedProperties=o,void 0===u&&this.na(),this.fieldTransforms=u||[],this.fieldMask=l||[]}get path(){return this.settings.path}get sa(){return this.settings.sa}ia(e){return new gE(Object.assign(Object.assign({},this.settings),e),this.databaseId,this.yt,this.ignoreUndefinedProperties,this.fieldTransforms,this.fieldMask)}ra(e){var t;const r=null===(t=this.path)||void 0===t?void 0:t.child(e),o=this.ia({path:r,oa:!1});return o.ua(e),o}ca(e){var t;const r=null===(t=this.path)||void 0===t?void 0:t.child(e),o=this.ia({path:r,oa:!1});return o.na(),o}aa(e){return this.ia({path:void 0,oa:!0})}ha(e){return vE(e,this.settings.methodName,this.settings.la||!1,this.path,this.settings.fa)}contains(e){return void 0!==this.fieldMask.find(t=>e.isPrefixOf(t))||void 0!==this.fieldTransforms.find(t=>e.isPrefixOf(t.field))}na(){if(this.path)for(let e=0;e<this.path.length;e++)this.ua(this.path.get(e))}ua(e){if(0===e.length)throw this.ha("Document fields must not be empty");if(AA(this.sa)&&pR.test(e))throw this.ha('Document fields cannot begin and end with "__"')}}class mR{constructor(e,t,r){this.databaseId=e,this.ignoreUndefinedProperties=t,this.yt=r||Be(e)}da(e,t,r,o=!1){return new gE({sa:e,methodName:t,fa:r,path:zn.emptyPath(),oa:!1,la:o},this.databaseId,this.yt,this.ignoreUndefinedProperties)}}function qf(n){const e=n._freezeSettings(),t=Be(n._databaseId);return new mR(n._databaseId,!!e.ignoreUndefinedProperties,t)}function mE(n,e,t,r,o,u={}){const l=n.da(u.merge||u.mergeFields?2:0,e,t,o);iT("Data must be an object, but it was:",l,r);const g=RA(r,l);let _,b;if(u.merge)_=new ds(l.fieldMask),b=l.fieldTransforms;else if(u.mergeFields){const S=[];for(const P of u.mergeFields){const W=sT(e,P,t);if(!l.contains(W))throw new Te(fe.INVALID_ARGUMENT,`Field '${W}' is specified in your field mask but missing from your input data.`);PA(S,W)||S.push(W)}_=new ds(S),b=l.fieldTransforms.filter(P=>_.covers(P.field))}else _=null,b=l.fieldTransforms;return new gR(new qr(g),_,b)}class A_ extends Gf{_toFieldTransform(e){if(2!==e.sa)throw e.ha(1===e.sa?`${this._methodName}() can only appear at the top level of your update data`:`${this._methodName}() cannot be used with set() unless you pass {merge:true}`);return e.fieldMask.push(e.path),null}isEqual(e){return e instanceof A_}}function xA(n,e,t){return new gE({sa:3,fa:e.settings.fa,methodName:n._methodName,oa:t},e.databaseId,e.yt,e.ignoreUndefinedProperties)}class tT extends Gf{_toFieldTransform(e){return new Kc(e.path,new Nf)}isEqual(e){return e instanceof tT}}class yR extends Gf{constructor(e,t){super(e),this._a=t}_toFieldTransform(e){const t=xA(this,e,!0),r=this._a.map(u=>Zf(u,t)),o=new Au(r);return new Kc(e.path,o)}isEqual(e){return this===e}}class vR extends Gf{constructor(e,t){super(e),this._a=t}_toFieldTransform(e){const t=xA(this,e,!0),r=this._a.map(u=>Zf(u,t)),o=new Zc(r);return new Kc(e.path,o)}isEqual(e){return this===e}}class _R extends Gf{constructor(e,t){super(e),this.wa=t}_toFieldTransform(e){const t=new Pd(e.yt,jv(e.yt,this.wa));return new Kc(e.path,t)}isEqual(e){return this===e}}function nT(n,e,t,r){const o=n.da(1,e,t);iT("Data must be an object, but it was:",o,r);const u=[],l=qr.empty();Iu(r,(_,b)=>{const S=yE(e,_,t);b=(0,an.m9)(b);const P=o.ca(S);if(b instanceof A_)u.push(S);else{const W=Zf(b,P);null!=W&&(u.push(S),l.set(S,W))}});const g=new ds(u);return new SA(l,g,o.fieldTransforms)}function rT(n,e,t,r,o,u){const l=n.da(1,e,t),g=[sT(e,r,t)],_=[o];if(u.length%2!=0)throw new Te(fe.INVALID_ARGUMENT,`Function ${e}() needs to be called with an even number of arguments that alternate between field names and values.`);for(let W=0;W<u.length;W+=2)g.push(sT(e,u[W])),_.push(u[W+1]);const b=[],S=qr.empty();for(let W=g.length-1;W>=0;--W)if(!PA(b,g[W])){const J=g[W];let oe=_[W];oe=(0,an.m9)(oe);const ke=l.ca(J);if(oe instanceof A_)b.push(J);else{const je=Zf(oe,ke);null!=je&&(b.push(J),S.set(J,je))}}const P=new ds(b);return new SA(S,P,l.fieldTransforms)}function MA(n,e,t,r=!1){return Zf(t,n.da(r?4:3,e))}function Zf(n,e){if(NA(n=(0,an.m9)(n)))return iT("Unsupported field value:",e,n),RA(n,e);if(n instanceof Gf)return function(t,r){if(!AA(r.sa))throw r.ha(`${t._methodName}() can only be used with update() and set()`);if(!r.path)throw r.ha(`${t._methodName}() is not currently supported inside arrays`);const o=t._toFieldTransform(r);o&&r.fieldTransforms.push(o)}(n,e),null;if(void 0===n&&e.ignoreUndefinedProperties)return null;if(e.path&&e.fieldMask.push(e.path),n instanceof Array){if(e.settings.oa&&4!==e.sa)throw e.ha("Nested arrays are not supported");return function(t,r){const o=[];let u=0;for(const l of t){let g=Zf(l,r.aa(u));null==g&&(g={nullValue:"NULL_VALUE"}),o.push(g),u++}return{arrayValue:{values:o}}}(n,e)}return function(t,r){if(null===(t=(0,an.m9)(t)))return{nullValue:"NULL_VALUE"};if("number"==typeof t)return jv(r.yt,t);if("boolean"==typeof t)return{booleanValue:t};if("string"==typeof t)return{stringValue:t};if(t instanceof Date){const o=Hn.fromDate(t);return{timestampValue:Ud(r.yt,o)}}if(t instanceof Hn){const o=new Hn(t.seconds,1e3*Math.floor(t.nanoseconds/1e3));return{timestampValue:Ud(r.yt,o)}}if(t instanceof pE)return{geoPointValue:{latitude:t.latitude,longitude:t.longitude}};if(t instanceof Vu)return{bytesValue:Sw(r.yt,t._byteString)};if(t instanceof qn){const o=r.databaseId,u=t.firestore._databaseId;if(!u.isEqual(o))throw r.ha(`Document reference is for database ${u.projectId}/${u.database} but should be for database ${o.projectId}/${o.database}`);return{referenceValue:Wg(t.firestore._databaseId||r.databaseId,t._key.path)}}throw r.ha(`Unsupported field value: ${cE(t)}`)}(n,e)}function RA(n,e){const t={};return Ef(n)?e.path&&e.path.length>0&&e.fieldMask.push(e.path):Iu(n,(r,o)=>{const u=Zf(o,e.ra(r));null!=u&&(t[r]=u)}),{mapValue:{fields:t}}}function NA(n){return!("object"!=typeof n||null===n||n instanceof Array||n instanceof Date||n instanceof Hn||n instanceof pE||n instanceof Vu||n instanceof qn||n instanceof Gf)}function iT(n,e,t){if(!NA(t)||"object"!=typeof(r=t)||null===r||Object.getPrototypeOf(r)!==Object.prototype&&null!==Object.getPrototypeOf(r)){const r=cE(t);throw e.ha("an object"===r?n+" a custom object":n+" "+r)}var r}function sT(n,e,t){if((e=(0,an.m9)(e))instanceof al)return e._internalPath;if("string"==typeof e)return yE(n,e);throw vE("Field path arguments must be of type string or ",n,!1,void 0,t)}const IR=new RegExp("[~\\*/\\[\\]]");function yE(n,e,t){if(e.search(IR)>=0)throw vE(`Invalid field path (${e}). Paths must not contain '~', '*', '/', '[', or ']'`,n,!1,void 0,t);try{return new al(...e.split("."))._internalPath}catch{throw vE(`Invalid field path (${e}). Paths must not be empty, begin with '.', end with '.', or contain '..'`,n,!1,void 0,t)}}function vE(n,e,t,r,o){const u=r&&!r.isEmpty(),l=void 0!==o;let g=`Function ${e}() called with invalid data`;t&&(g+=" (via `toFirestore()`)"),g+=". ";let _="";return(u||l)&&(_+=" (found",u&&(_+=` in field ${r}`),l&&(_+=` in document ${o}`),_+=")"),new Te(fe.INVALID_ARGUMENT,g+n+_)}function PA(n,e){return n.some(t=>t.isEqual(e))}class x_{constructor(e,t,r,o,u){this._firestore=e,this._userDataWriter=t,this._key=r,this._document=o,this._converter=u}get id(){return this._key.path.lastSegment()}get ref(){return new qn(this._firestore,this._converter,this._key)}exists(){return null!==this._document}data(){if(this._document){if(this._converter){const e=new wR(this._firestore,this._userDataWriter,this._key,this._document,null);return this._converter.fromFirestore(e)}return this._userDataWriter.convertValue(this._document.data.value)}}get(e){if(this._document){const t=this._document.data.field(_E("DocumentSnapshot.get",e));if(null!==t)return this._userDataWriter.convertValue(t)}}}class wR extends x_{data(){return super.data()}}function _E(n,e){return"string"==typeof e?yE(n,e):e instanceof al?e._internalPath:e._delegate._internalPath}function OA(n){if("L"===n.limitType&&0===n.explicitOrderBy.length)throw new Te(fe.UNIMPLEMENTED,"limitToLast() queries require specifying at least one orderBy() clause")}class oT{}class M_ extends oT{}function Kd(n,e,...t){let r=[];e instanceof oT&&r.push(e),r=r.concat(t),function(o){const u=o.filter(g=>g instanceof Em).length,l=o.filter(g=>g instanceof R_).length;if(u>1||u>0&&l>0)throw new Te(fe.INVALID_ARGUMENT,"InvalidQuery. When using composite filters, you cannot use more than one filter at the top level. Consider nesting the multiple filters within an `and(...)` statement. For example: change `query(query, where(...), or(...))` to `query(query, and(where(...), or(...)))`.")}(r);for(const o of r)n=o._apply(n);return n}class R_ extends M_{constructor(e,t,r){super(),this._field=e,this._op=t,this._value=r,this.type="where"}static _create(e,t,r){return new R_(e,t,r)}_apply(e){const t=this._parse(e);return UA(e._query,t),new Fi(e.firestore,e.converter,Lv(e._query,t))}_parse(e){const t=qf(e.firestore);return function(o,u,l,g,_,b,S){let P;if(_.isKeyField()){if("array-contains"===b||"array-contains-any"===b)throw new Te(fe.INVALID_ARGUMENT,`Invalid Query. You can't perform '${b}' queries on documentId().`);if("in"===b||"not-in"===b){LA(S,b);const W=[];for(const J of S)W.push(FA(g,o,J));P={arrayValue:{values:W}}}else P=FA(g,o,S)}else"in"!==b&&"not-in"!==b&&"array-contains-any"!==b||LA(S,b),P=MA(l,"where",S,"in"===b||"not-in"===b);return tn.create(_,b,P)}(e._query,0,t,e.firestore._databaseId,this._field,this._op,this._value)}}class Em extends oT{constructor(e,t){super(),this.type=e,this._queryConstraints=t}static _create(e,t){return new Em(e,t)}_parse(e){const t=this._queryConstraints.map(r=>r._parse(e)).filter(r=>r.getFilters().length>0);return 1===t.length?t[0]:fn.create(t,this._getOperator())}_apply(e){const t=this._parse(e);return 0===t.getFilters().length?e:(function(r,o){let u=r;const l=o.getFlattenedFilters();for(const g of l)UA(u,g),u=Lv(u,g)}(e._query,t),new Fi(e.firestore,e.converter,Lv(e._query,t)))}_getQueryConstraints(){return this._queryConstraints}_getOperator(){return"and"===this.type?"and":"or"}}class aT extends M_{constructor(e,t){super(),this._field=e,this._direction=t,this.type="orderBy"}static _create(e,t){return new aT(e,t)}_apply(e){const t=function(r,o,u){if(null!==r.startAt)throw new Te(fe.INVALID_ARGUMENT,"Invalid query. You must not call startAt() or startAfter() before calling orderBy().");if(null!==r.endAt)throw new Te(fe.INVALID_ARGUMENT,"Invalid query. You must not call endAt() or endBefore() before calling orderBy().");const l=new uo(o,u);return function(g,_){if(null===sw(g)){const b=Lg(g);null!==b&&VA(0,b,_.field)}}(r,l),l}(e._query,this._field,this._direction);return new Fi(e.firestore,e.converter,function(r,o){const u=r.explicitOrderBy.concat([o]);return new Su(r.path,r.collectionGroup,u,r.filters.slice(),r.limit,r.limitType,r.startAt,r.endAt)}(e._query,t))}}class IE extends M_{constructor(e,t,r){super(),this.type=e,this._limit=t,this._limitType=r}static _create(e,t,r){return new IE(e,t,r)}_apply(e){return new Fi(e.firestore,e.converter,Ug(e._query,this._limit,this._limitType))}}class wE extends M_{constructor(e,t,r){super(),this.type=e,this._docOrFields=t,this._inclusive=r}static _create(e,t,r){return new wE(e,t,r)}_apply(e){const t=kA(e,this.type,this._docOrFields,this._inclusive);return new Fi(e.firestore,e.converter,(o=t,new Su((r=e._query).path,r.collectionGroup,r.explicitOrderBy.slice(),r.filters.slice(),r.limit,r.limitType,o,r.endAt)));var r,o}}class EE extends M_{constructor(e,t,r){super(),this.type=e,this._docOrFields=t,this._inclusive=r}static _create(e,t,r){return new EE(e,t,r)}_apply(e){const t=kA(e,this.type,this._docOrFields,this._inclusive);return new Fi(e.firestore,e.converter,(o=t,new Su((r=e._query).path,r.collectionGroup,r.explicitOrderBy.slice(),r.filters.slice(),r.limit,r.limitType,r.startAt,o)));var r,o}}function kA(n,e,t,r){if(t[0]=(0,an.m9)(t[0]),t[0]instanceof x_)return function(o,u,l,g,_){if(!g)throw new Te(fe.NOT_FOUND,`Can't use a DocumentSnapshot that doesn't exist for ${l}().`);const b=[];for(const S of qc(o))if(S.field.isKeyField())b.push(zc(u,g.key));else{const P=g.data.field(S.field);if(Sg(P))throw new Te(fe.INVALID_ARGUMENT,'Invalid query. You are trying to start or end a query using a document for which the field "'+S.field+'" is an uncommitted server timestamp. (Since the value of this field is unknown, you cannot start/end a query with it.)');if(null===P){const W=S.field.canonicalString();throw new Te(fe.INVALID_ARGUMENT,`Invalid query. You are trying to start or end a query using a document for which the field '${W}' (used as the orderBy) does not exist.`)}b.push(P)}return new bu(b,_)}(n._query,n.firestore._databaseId,e,t[0]._document,r);{const o=qf(n.firestore);return function(u,l,g,_,b,S){const P=u.explicitOrderBy;if(b.length>P.length)throw new Te(fe.INVALID_ARGUMENT,`Too many arguments provided to ${_}(). The number of arguments must be less than or equal to the number of orderBy() clauses`);const W=[];for(let J=0;J<b.length;J++){const oe=b[J];if(P[J].field.isKeyField()){if("string"!=typeof oe)throw new Te(fe.INVALID_ARGUMENT,`Invalid query. Expected a string for document ID in ${_}(), but got a ${typeof oe}`);if(!Fv(u)&&-1!==oe.indexOf("/"))throw new Te(fe.INVALID_ARGUMENT,`Invalid query. When querying a collection and ordering by documentId(), the value passed to ${_}() must be a plain document ID, but '${oe}' contains a slash.`);const ke=u.path.child(rn.fromString(oe));if(!Ge.isDocumentKey(ke))throw new Te(fe.INVALID_ARGUMENT,`Invalid query. When querying a collection group and ordering by documentId(), the value passed to ${_}() must result in a valid document path, but '${ke}' is not because it contains an odd number of segments.`);const je=new Ge(ke);W.push(zc(l,je))}else{const ke=MA(g,_,oe);W.push(ke)}}return new bu(W,S)}(n._query,n.firestore._databaseId,o,e,t,r)}}function FA(n,e,t){if("string"==typeof(t=(0,an.m9)(t))){if(""===t)throw new Te(fe.INVALID_ARGUMENT,"Invalid query. When querying with documentId(), you must provide a valid document ID, but it was an empty string.");if(!Fv(e)&&-1!==t.indexOf("/"))throw new Te(fe.INVALID_ARGUMENT,`Invalid query. When querying a collection by documentId(), you must provide a plain document ID, but '${t}' contains a '/' character.`);const r=e.path.child(rn.fromString(t));if(!Ge.isDocumentKey(r))throw new Te(fe.INVALID_ARGUMENT,`Invalid query. When querying a collection group by documentId(), the value provided must result in a valid document path, but '${r}' is not because it has an odd number of segments (${r.length}).`);return zc(n,new Ge(r))}if(t instanceof qn)return zc(n,t._key);throw new Te(fe.INVALID_ARGUMENT,`Invalid query. When querying with documentId(), you must provide a valid string or a DocumentReference, but it was: ${cE(t)}.`)}function LA(n,e){if(!Array.isArray(n)||0===n.length)throw new Te(fe.INVALID_ARGUMENT,`Invalid Query. A non-empty array is required for '${e.toString()}' filters.`);if(n.length>10)throw new Te(fe.INVALID_ARGUMENT,`Invalid Query. '${e.toString()}' filters support a maximum of 10 elements in the value array.`)}function UA(n,e){if(e.isInequality()){const r=Lg(n),o=e.field;if(null!==r&&!r.isEqual(o))throw new Te(fe.INVALID_ARGUMENT,`Invalid query. All where filters with an inequality (<, <=, !=, not-in, >, or >=) must be on the same field. But you have inequality filters on '${r.toString()}' and '${o.toString()}'`);const u=sw(n);null!==u&&VA(0,o,u)}const t=function(r,o){for(const u of r)for(const l of u.getFlattenedFilters())if(o.indexOf(l.op)>=0)return l.op;return null}(n.filters,function(r){switch(r){case"!=":return["!=","not-in"];case"array-contains":return["array-contains","array-contains-any","not-in"];case"in":return["array-contains-any","in","not-in"];case"array-contains-any":return["array-contains","array-contains-any","in","not-in"];case"not-in":return["array-contains","array-contains-any","in","not-in","!="];default:return[]}}(e.op));if(null!==t)throw new Te(fe.INVALID_ARGUMENT,t===e.op?`Invalid query. You cannot use more than one '${e.op.toString()}' filter.`:`Invalid query. You cannot use '${e.op.toString()}' filters with '${t.toString()}' filters.`)}function VA(n,e,t){if(!t.isEqual(e))throw new Te(fe.INVALID_ARGUMENT,`Invalid query. You have a where filter with an inequality (<, <=, !=, not-in, >, or >=) on field '${e.toString()}' and so you must also use '${e.toString()}' as your first argument to orderBy(), but your first orderBy() is on field '${t.toString()}' instead.`)}class uT{convertValue(e,t="none"){switch(Eu(e)){case 0:return null;case 1:return e.booleanValue;case 2:return tr(e.integerValue||e.doubleValue);case 3:return this.convertTimestamp(e.timestampValue);case 4:return this.convertServerTimestamp(e,t);case 5:return e.stringValue;case 6:return this.convertBytes(Hc(e.bytesValue));case 7:return this.convertReference(e.referenceValue);case 8:return this.convertGeoPoint(e.geoPointValue);case 9:return this.convertArray(e.arrayValue,t);case 10:return this.convertObject(e.mapValue,t);default:throw tt()}}convertObject(e,t){const r={};return Iu(e.fields,(o,u)=>{r[o]=this.convertValue(u,t)}),r}convertGeoPoint(e){return new pE(tr(e.latitude),tr(e.longitude))}convertArray(e,t){return(e.values||[]).map(r=>this.convertValue(r,t))}convertServerTimestamp(e,t){switch(t){case"previous":const r=UI(e);return null==r?null:this.convertValue(r,t);case"estimate":return this.convertTimestamp(Tf(e));default:return null}}convertTimestamp(e){const t=wu(e);return new Hn(t.seconds,t.nanos)}convertDocumentKey(e,t){const r=rn.fromString(e);ct(n_(r));const o=new jc(r.get(1),r.get(3)),u=new Ge(r.popFirst(5));return o.isEqual(t)||er(`Document ${u} contains a document reference within a different database (${o.projectId}/${o.database}) which is not supported. It will be treated as a reference in the current database (${t.projectId}/${t.database}) instead.`),u}}function DE(n,e,t){let r;return r=n?t&&(t.merge||t.mergeFields)?n.toFirestore(e,t):n.toFirestore(e):e,r}class MR extends uT{constructor(e){super(),this.firestore=e}convertBytes(e){return new Vu(e)}convertReference(e){const t=this.convertDocumentKey(e,this.firestore._databaseId);return new qn(this.firestore,null,t)}}class Kf{constructor(e,t){this.hasPendingWrites=e,this.fromCache=t}isEqual(e){return this.hasPendingWrites===e.hasPendingWrites&&this.fromCache===e.fromCache}}class ul extends x_{constructor(e,t,r,o,u,l){super(e,t,r,o,l),this._firestore=e,this._firestoreImpl=e,this.metadata=u}exists(){return super.exists()}data(e={}){if(this._document){if(this._converter){const t=new N_(this._firestore,this._userDataWriter,this._key,this._document,this.metadata,null);return this._converter.fromFirestore(t,e)}return this._userDataWriter.convertValue(this._document.data.value,e.serverTimestamps)}}get(e,t={}){if(this._document){const r=this._document.data.field(_E("DocumentSnapshot.get",e));if(null!==r)return this._userDataWriter.convertValue(r,t.serverTimestamps)}}}class N_ extends ul{data(e={}){return super.data(e)}}class Yd{constructor(e,t,r,o){this._firestore=e,this._userDataWriter=t,this._snapshot=o,this.metadata=new Kf(o.hasPendingWrites,o.fromCache),this.query=r}get docs(){const e=[];return this.forEach(t=>e.push(t)),e}get size(){return this._snapshot.docs.size}get empty(){return 0===this.size}forEach(e,t){this._snapshot.docs.forEach(r=>{e.call(t,new N_(this._firestore,this._userDataWriter,r.key,r,new Kf(this._snapshot.mutatedKeys.has(r.key),this._snapshot.fromCache),this.query.converter))})}docChanges(e={}){const t=!!e.includeMetadataChanges;if(t&&this._snapshot.excludesMetadataChanges)throw new Te(fe.INVALID_ARGUMENT,"To include metadata changes with your document changes, you must also pass { includeMetadataChanges:true } to onSnapshot().");return this._cachedChanges&&this._cachedChangesIncludeMetadataChanges===t||(this._cachedChanges=function(r,o){if(r._snapshot.oldDocs.isEmpty()){let u=0;return r._snapshot.docChanges.map(l=>({type:"added",doc:new N_(r._firestore,r._userDataWriter,l.doc.key,l.doc,new Kf(r._snapshot.mutatedKeys.has(l.doc.key),r._snapshot.fromCache),r.query.converter),oldIndex:-1,newIndex:u++}))}{let u=r._snapshot.oldDocs;return r._snapshot.docChanges.filter(l=>o||3!==l.type).map(l=>{const g=new N_(r._firestore,r._userDataWriter,l.doc.key,l.doc,new Kf(r._snapshot.mutatedKeys.has(l.doc.key),r._snapshot.fromCache),r.query.converter);let _=-1,b=-1;return 0!==l.type&&(_=u.indexOf(l.doc.key),u=u.delete(l.doc.key)),1!==l.type&&(u=u.add(l.doc),b=u.indexOf(l.doc.key)),{type:RR(l.type),doc:g,oldIndex:_,newIndex:b}})}}(this,t),this._cachedChangesIncludeMetadataChanges=t),this._cachedChanges}}function RR(n){switch(n){case 0:return"added";case 2:case 3:return"modified";case 1:return"removed";default:return tt()}}function $A(n,e){return n instanceof ul&&e instanceof ul?n._firestore===e._firestore&&n._key.isEqual(e._key)&&(null===n._document?null===e._document:n._document.isEqual(e._document))&&n._converter===e._converter:n instanceof Yd&&e instanceof Yd&&n._firestore===e._firestore&&WC(n.query,e.query)&&n.metadata.isEqual(e.metadata)&&n._snapshot.isEqual(e._snapshot)}class Qd extends uT{constructor(e){super(),this.firestore=e}convertBytes(e){return new Vu(e)}convertReference(e){const t=this.convertDocumentKey(e,this.firestore._databaseId);return new qn(this.firestore,null,t)}}function jA(n,e,t){n=sn(n,qn);const r=sn(n.firestore,Zn),o=DE(n.converter,e,t);return Dm(r,[mE(qf(r),"setDoc",n._key,o,null!==n.converter,t).toMutation(n._key,Tn.none())])}function HA(n,e,t,...r){n=sn(n,qn);const o=sn(n.firestore,Zn),u=qf(o);let l;return l="string"==typeof(e=(0,an.m9)(e))||e instanceof al?rT(u,"updateDoc",n._key,e,t,r):nT(u,"updateDoc",n._key,e),Dm(o,[l.toMutation(n._key,Tn.exists(!0))])}function zA(n,...e){var t,r,o;n=(0,an.m9)(n);let u={includeMetadataChanges:!1},l=0;"object"!=typeof e[l]||eT(e[l])||(u=e[l],l++);const g={includeMetadataChanges:u.includeMetadataChanges};if(eT(e[l])){const P=e[l];e[l]=null===(t=P.next)||void 0===t?void 0:t.bind(P),e[l+1]=null===(r=P.error)||void 0===r?void 0:r.bind(P),e[l+2]=null===(o=P.complete)||void 0===o?void 0:o.bind(P)}let _,b,S;if(n instanceof qn)b=sn(n.firestore,Zn),S=Nd(n._key.path),_={next:P=>{e[l]&&e[l](cT(b,n,P))},error:e[l+1],complete:e[l+2]};else{const P=sn(n,Fi);b=sn(P.firestore,Zn),S=P._query;const W=new Qd(b);_={next:J=>{e[l]&&e[l](new Yd(b,W,P,J))},error:e[l+1],complete:e[l+2]},OA(n._query)}return function(P,W,J,oe){const ke=new dE(oe),je=new yC(W,ke,J);return P.asyncQueue.enqueueAndForget((0,ve.Z)(function*(){return hC(yield wm(P),je)})),()=>{ke.bc(),P.asyncQueue.enqueueAndForget((0,ve.Z)(function*(){return pC(yield wm(P),je)}))}}(kr(b),S,g,_)}function Dm(n,e){return function(t,r){const o=new Wr;return t.asyncQueue.enqueueAndForget((0,ve.Z)(function*(){return function CM(n,e,t){return EC.apply(this,arguments)}(yield XC(t),r,o)})),o.promise}(kr(n),e)}function cT(n,e,t){const r=t.docs.get(e._key),o=new Qd(n);return new ul(n,o,e._key,r,new Kf(t.hasPendingWrites,t.fromCache),e.converter)}const $R={maxAttempts:5};class WA{constructor(e,t){this._firestore=e,this._commitHandler=t,this._mutations=[],this._committed=!1,this._dataReader=qf(e)}set(e,t,r){this._verifyNotCommitted();const o=Xd(e,this._firestore),u=DE(o.converter,t,r),l=mE(this._dataReader,"WriteBatch.set",o._key,u,null!==o.converter,r);return this._mutations.push(l.toMutation(o._key,Tn.none())),this}update(e,t,r,...o){this._verifyNotCommitted();const u=Xd(e,this._firestore);let l;return l="string"==typeof(t=(0,an.m9)(t))||t instanceof al?rT(this._dataReader,"WriteBatch.update",u._key,t,r,o):nT(this._dataReader,"WriteBatch.update",u._key,t),this._mutations.push(l.toMutation(u._key,Tn.exists(!0))),this}delete(e){this._verifyNotCommitted();const t=Xd(e,this._firestore);return this._mutations=this._mutations.concat(new Ru(t._key,Tn.none())),this}commit(){return this._verifyNotCommitted(),this._committed=!0,this._mutations.length>0?this._commitHandler(this._mutations):Promise.resolve()}_verifyNotCommitted(){if(this._committed)throw new Te(fe.FAILED_PRECONDITION,"A write batch can no longer be used after commit() has been called.")}}function Xd(n,e){if((n=(0,an.m9)(n)).firestore!==e)throw new Te(fe.INVALID_ARGUMENT,"Provided document reference is from a different Firestore instance.");return n}class jR extends class{constructor(e,t){this._firestore=e,this._transaction=t,this._dataReader=qf(e)}get(e){const t=Xd(e,this._firestore),r=new MR(this._firestore);return this._transaction.lookup([t._key]).then(o=>{if(!o||1!==o.length)return tt();const u=o[0];if(u.isFoundDocument())return new x_(this._firestore,r,u.key,u,t.converter);if(u.isNoDocument())return new x_(this._firestore,r,t._key,null,t.converter);throw tt()})}set(e,t,r){const o=Xd(e,this._firestore),u=DE(o.converter,t,r),l=mE(this._dataReader,"Transaction.set",o._key,u,null!==o.converter,r);return this._transaction.set(o._key,l),this}update(e,t,r,...o){const u=Xd(e,this._firestore);let l;return l="string"==typeof(t=(0,an.m9)(t))||t instanceof al?rT(this._dataReader,"Transaction.update",u._key,t,r,o):nT(this._dataReader,"Transaction.update",u._key,t),this._transaction.update(u._key,l),this}delete(e){const t=Xd(e,this._firestore);return this._transaction.delete(t._key),this}}{constructor(e,t){super(e,t),this._firestore=e}get(e){const t=Xd(e,this._firestore),r=new Qd(this._firestore);return super.get(e).then(o=>new ul(this._firestore,r,t._key,o._document,new Kf(!1,!1),t.converter))}}function lT(n,e){if(void 0===e)return{merge:!1};if(void 0!==e.mergeFields&&void 0!==e.merge)throw new Te("invalid-argument",`Invalid options passed to function ${n}(): You cannot specify both "merge" and "mergeFields".`);return e}function qA(){if(typeof Uint8Array>"u")throw new Te("unimplemented","Uint8Arrays are not available in this environment.")}function ZA(){if(!function Cf(){return typeof atob<"u"}())throw new Te("unimplemented","Blobs are unavailable in Firestore in this environment.")}!function(n,e=!0){Uc=Oo.SDK_VERSION,(0,Oo._registerComponent)(new td.wA("firestore",(t,{instanceIdentifier:r,options:o})=>{const u=t.getProvider("app").getImmediate(),l=new Zn(new MI(t.getProvider("auth-internal")),new ab(t.getProvider("app-check-internal")),function(g,_){if(!Object.prototype.hasOwnProperty.apply(g.options,["projectId"]))throw new Te(fe.INVALID_ARGUMENT,'"projectId" not provided in firebase.initializeApp.');return new jc(g.options.projectId,_)}(u,r),u);return o=Object.assign({useFetchStreams:e},o),l._setSettings(o),l},"PUBLIC").setMultipleInstances(!0)),(0,Oo.registerVersion)(SI,"3.8.0",n),(0,Oo.registerVersion)(SI,"3.8.0","esm2017")}();class P_{constructor(e){this._delegate=e}static fromBase64String(e){return ZA(),new P_(Vu.fromBase64String(e))}static fromUint8Array(e){return qA(),new P_(Vu.fromUint8Array(e))}toBase64(){return ZA(),this._delegate.toBase64()}toUint8Array(){return qA(),this._delegate.toUint8Array()}isEqual(e){return this._delegate.isEqual(e._delegate)}toString(){return"Blob(base64: "+this.toBase64()+")"}}function dT(n){return function QR(n,e){if("object"!=typeof n||null===n)return!1;const t=n;for(const r of e)if(r in t&&"function"==typeof t[r])return!0;return!1}(n,["next","error","complete"])}class XR{enableIndexedDbPersistence(e,t){return function oR(n,e){TA(n=sn(n,Zn));const t=kr(n),r=n._freezeSettings(),o=new HC;return CA(t,o,new aA(o,r.cacheSizeBytes,e?.forceOwnership))}(e._delegate,{forceOwnership:t})}enableMultiTabIndexedDbPersistence(e){return function aR(n){TA(n=sn(n,Zn));const e=kr(n),t=n._freezeSettings(),r=new HC;return CA(e,r,new $M(r,t.cacheSizeBytes))}(e._delegate)}clearIndexedDbPersistence(e){return function uR(n){if(n._initialized&&!n._terminated)throw new Te(fe.FAILED_PRECONDITION,"Persistence can only be cleared before a Firestore instance is initialized or after it is terminated.");const e=new Wr;return n._queue.enqueueAndForgetEvenWhileRestricted((0,ve.Z)(function*(){try{yield(t=(0,ve.Z)(function*(r){if(!ao.C())return Promise.resolve();const o=r+"main";yield ao.delete(o)}),function(r){return t.apply(this,arguments)})(w_(n._databaseId,n._persistenceKey)),e.resolve()}catch(t){e.reject(t)}var t})),e.promise}(e._delegate)}}class KA{constructor(e,t,r){this._delegate=t,this._persistenceProvider=r,this.INTERNAL={delete:()=>this.terminate()},e instanceof jc||(this._appCompat=e)}get _databaseId(){return this._delegate._databaseId}settings(e){const t=this._delegate._getSettings();!e.merge&&t.host!==e.host&&yu("You are overriding the original host. If you did not intend to override your settings, use {merge: true}."),e.merge&&delete(e=Object.assign(Object.assign({},t),e)).merge,this._delegate._setSettings(e)}useEmulator(e,t,r={}){pA(this._delegate,e,t,r)}enableNetwork(){return function lR(n){return function KM(n){return n.asyncQueue.enqueue((0,ve.Z)(function*(){const e=yield IA(n),t=yield QC(n);return e.setNetworkEnabled(!0),function(r){const o=Ze(r);return o._u.delete(0),C_(o)}(t)}))}(kr(n=sn(n,Zn)))}(this._delegate)}disableNetwork(){return function dR(n){return function YM(n){return n.asyncQueue.enqueue((0,ve.Z)(function*(){const e=yield IA(n),t=yield QC(n);return e.setNetworkEnabled(!1),(r=(0,ve.Z)(function*(o){const u=Ze(o);u._u.add(0),yield pm(u),u.gu.set("Offline")}),function(o){return r.apply(this,arguments)})(t);var r}))}(kr(n=sn(n,Zn)))}(this._delegate)}enablePersistence(e){let t=!1,r=!1;return e&&(t=!!e.synchronizeTabs,r=!!e.experimentalForceOwningTab,uA("synchronizeTabs",t,"experimentalForceOwningTab",r)),t?this._persistenceProvider.enableMultiTabIndexedDbPersistence(this):this._persistenceProvider.enableIndexedDbPersistence(this,r)}clearPersistence(){return this._persistenceProvider.clearIndexedDbPersistence(this)}terminate(){return this._appCompat&&(this._appCompat._removeServiceInstance("firestore-compat"),this._appCompat._removeServiceInstance("firestore")),this._delegate._delete()}waitForPendingWrites(){return function cR(n){return function(e){const t=new Wr;return e.asyncQueue.enqueueAndForget((0,ve.Z)(function*(){return function xM(n,e){return SC.apply(this,arguments)}(yield XC(e),t)})),t.promise}(kr(n=sn(n,Zn)))}(this._delegate)}onSnapshotsInSync(e){return function BR(n,e){return function JM(n,e){const t=new dE(e);return n.asyncQueue.enqueueAndForget((0,ve.Z)(function*(){return r=yield wm(n),o=t,Ze(r).Ru.add(o),void o.next();var r,o})),()=>{t.bc(),n.asyncQueue.enqueueAndForget((0,ve.Z)(function*(){return r=yield wm(n),o=t,void Ze(r).Ru.delete(o);var r,o}))}}(kr(n=sn(n,Zn)),eT(e)?e:{next:e})}(this._delegate,e)}get app(){if(!this._appCompat)throw new Te("failed-precondition","Firestore was not initialized using the Firebase SDK. 'app' is not available");return this._appCompat}collection(e){try{return new bm(this,gA(this._delegate,e))}catch(t){throw ps(t,"collection()","Firestore.collection()")}}doc(e){try{return new zo(this,lE(this._delegate,e))}catch(t){throw ps(t,"doc()","Firestore.doc()")}}collectionGroup(e){try{return new gs(this,function jM(n,e){if(n=sn(n,S_),zC("collectionGroup","collection id",e),e.indexOf("/")>=0)throw new Te(fe.INVALID_ARGUMENT,`Invalid collection ID '${e}' passed to function collectionGroup(). Collection IDs must not contain '/'.`);return new Fi(n,null,(t=e,new Su(rn.emptyPath(),t)));var t}(this._delegate,e))}catch(t){throw ps(t,"collectionGroup()","Firestore.collectionGroup()")}}runTransaction(e){return function HR(n,e,t){n=sn(n,Zn);const r=Object.assign(Object.assign({},$R),t);return function(o){if(o.maxAttempts<1)throw new Te(fe.INVALID_ARGUMENT,"Max attempts must be at least 1")}(r),function(o,u,l){const g=new Wr;return o.asyncQueue.enqueueAndForget((0,ve.Z)(function*(){const _=yield function wA(n){return hE(n).then(e=>e.datastore)}(o);new qM(o.asyncQueue,_,l,u,g).run()})),g.promise}(kr(n),o=>e(new jR(n,o)),r)}(this._delegate,t=>e(new YA(this,t)))}batch(){return kr(this._delegate),new QA(new WA(this._delegate,e=>Dm(this._delegate,e)))}loadBundle(e){return function hR(n,e){const t=kr(n=sn(n,Zn)),r=new rR;return function eR(n,e,t,r){const o=function(u,l){let g;return g="string"==typeof u?(new TextEncoder).encode(u):u,_=function(_,b){if(_ instanceof Uint8Array)return yA(_,b);if(_ instanceof ArrayBuffer)return yA(new Uint8Array(_),b);if(_ instanceof ReadableStream)return _.getReader();throw new Error("Source of `toByteStreamReader` has to be a ArrayBuffer or ReadableStream")}(g),new HM(_,l);var _}(t,Be(e));n.asyncQueue.enqueueAndForget((0,ve.Z)(function*(){!function BM(n,e,t){const r=Ze(n);var o;(o=(0,ve.Z)(function*(u,l,g){try{const _=yield l.getMetadata();if(yield function(W,J){const oe=Ze(W),ke=Wn(J.createTime);return oe.persistence.runTransaction("hasNewerBundle","readonly",je=>oe.Ns.getBundleMetadata(je,J.id)).then(je=>!!je&&je.createTime.compareTo(ke)>=0)}(u.localStore,_))return yield l.close(),g._completeWith({taskState:"Success",documentsLoaded:(W=_).totalDocuments,bytesLoaded:W.totalBytes,totalDocuments:W.totalDocuments,totalBytes:W.totalBytes}),Promise.resolve(new Set);g._updateProgress(QS(_));const b=new _M(_,u.localStore,l.yt);let S=yield l.mc();for(;S;){const W=yield b.Fu(S);W&&g._updateProgress(W),S=yield l.mc()}const P=yield b.complete();return yield ol(u,P.Lu,void 0),yield function(W,J){const oe=Ze(W);return oe.persistence.runTransaction("Save bundle","readwrite",ke=>oe.Ns.saveBundleMetadata(ke,J))}(u.localStore,_),g._completeWith(P.progress),Promise.resolve(P.Bu)}catch(_){return yu("SyncEngine",`Loading bundle failed with ${_}`),g._failWith(_),Promise.resolve(new Set)}var W}),function(u,l,g){return o.apply(this,arguments)})(r,e,t).then(o=>{r.sharedClientState.notifyBundleLoaded(o)})}(yield XC(n),o,r)}))}(t,n._databaseId,e,r),r}(this._delegate,e)}namedQuery(e){return function fR(n,e){return function tR(n,e){return n.asyncQueue.enqueue((0,ve.Z)(function*(){return function(t,r){const o=Ze(t);return o.persistence.runTransaction("Get named query","readonly",u=>o.Ns.getNamedQuery(u,r))}(yield fE(n),e)}))}(kr(n=sn(n,Zn)),e).then(t=>t?new Fi(n,null,t.query):null)}(this._delegate,e).then(t=>t?new gs(this,t):null)}}class bE extends uT{constructor(e){super(),this.firestore=e}convertBytes(e){return new P_(new Vu(e))}convertReference(e){const t=this.convertDocumentKey(e,this.firestore._databaseId);return zo.forKey(t,this.firestore,null)}}class YA{constructor(e,t){this._firestore=e,this._delegate=t,this._userDataWriter=new bE(e)}get(e){const t=Qf(e);return this._delegate.get(t).then(r=>new O_(this._firestore,new ul(this._firestore._delegate,this._userDataWriter,r._key,r._document,r.metadata,t.converter)))}set(e,t,r){const o=Qf(e);return r?(lT("Transaction.set",r),this._delegate.set(o,t,r)):this._delegate.set(o,t),this}update(e,t,r,...o){const u=Qf(e);return 2===arguments.length?this._delegate.update(u,t):this._delegate.update(u,t,r,...o),this}delete(e){const t=Qf(e);return this._delegate.delete(t),this}}class QA{constructor(e){this._delegate=e}set(e,t,r){const o=Qf(e);return r?(lT("WriteBatch.set",r),this._delegate.set(o,t,r)):this._delegate.set(o,t),this}update(e,t,r,...o){const u=Qf(e);return 2===arguments.length?this._delegate.update(u,t):this._delegate.update(u,t,r,...o),this}delete(e){const t=Qf(e);return this._delegate.delete(t),this}commit(){return this._delegate.commit()}}class Yf{constructor(e,t,r){this._firestore=e,this._userDataWriter=t,this._delegate=r}fromFirestore(e,t){const r=new N_(this._firestore._delegate,this._userDataWriter,e._key,e._document,e.metadata,null);return this._delegate.fromFirestore(new k_(this._firestore,r),t??{})}toFirestore(e,t){return t?this._delegate.toFirestore(e,t):this._delegate.toFirestore(e)}static getInstance(e,t){const r=Yf.INSTANCES;let o=r.get(e);o||(o=new WeakMap,r.set(e,o));let u=o.get(t);return u||(u=new Yf(e,new bE(e),t),o.set(t,u)),u}}Yf.INSTANCES=new WeakMap;class zo{constructor(e,t){this.firestore=e,this._delegate=t,this._userDataWriter=new bE(e)}static forPath(e,t,r){if(e.length%2!=0)throw new Te("invalid-argument",`Invalid document reference. Document references must have an even number of segments, but ${e.canonicalString()} has ${e.length}`);return new zo(t,new qn(t._delegate,r,new Ge(e)))}static forKey(e,t,r){return new zo(t,new qn(t._delegate,r,e))}get id(){return this._delegate.id}get parent(){return new bm(this.firestore,this._delegate.parent)}get path(){return this._delegate.path}collection(e){try{return new bm(this.firestore,gA(this._delegate,e))}catch(t){throw ps(t,"collection()","DocumentReference.collection()")}}isEqual(e){return(e=(0,an.m9)(e))instanceof qn&&mA(this._delegate,e)}set(e,t){t=lT("DocumentReference.set",t);try{return t?jA(this._delegate,e,t):jA(this._delegate,e)}catch(r){throw ps(r,"setDoc()","DocumentReference.set()")}}update(e,t,...r){try{return 1===arguments.length?HA(this._delegate,e):HA(this._delegate,e,t,...r)}catch(o){throw ps(o,"updateDoc()","DocumentReference.update()")}}delete(){return function UR(n){return Dm(sn(n.firestore,Zn),[new Ru(n._key,Tn.none())])}(this._delegate)}onSnapshot(...e){const t=XA(e),r=JA(e,o=>new O_(this.firestore,new ul(this.firestore._delegate,this._userDataWriter,o._key,o._document,o.metadata,this._delegate.converter)));return zA(this._delegate,t,r)}get(e){let t;return t="cache"===e?.source?function PR(n){n=sn(n,qn);const e=sn(n.firestore,Zn),t=kr(e),r=new Qd(e);return function QM(n,e){const t=new Wr;return n.asyncQueue.enqueueAndForget((0,ve.Z)(function*(){return(r=(0,ve.Z)(function*(o,u,l){try{const g=yield function(_,b){const S=Ze(_);return S.persistence.runTransaction("read document","readonly",P=>S.localDocuments.getDocument(P,b))}(o,u);g.isFoundDocument()?l.resolve(g):g.isNoDocument()?l.resolve(null):l.reject(new Te(fe.UNAVAILABLE,"Failed to get document from cache. (However, this document may exist on the server. Run again without setting 'source' in the GetOptions to attempt to retrieve the document from the server.)"))}catch(g){const _=ym(g,`Failed to get document '${u} from cache`);l.reject(_)}}),function(o,u,l){return r.apply(this,arguments)})(yield fE(n),e,t);var r})),t.promise}(t,n._key).then(o=>new ul(e,r,n._key,o,new Kf(null!==o&&o.hasLocalMutations,!0),n.converter))}(this._delegate):"server"===e?.source?function OR(n){n=sn(n,qn);const e=sn(n.firestore,Zn);return EA(kr(e),n._key,{source:"server"}).then(t=>cT(e,n,t))}(this._delegate):function NR(n){n=sn(n,qn);const e=sn(n.firestore,Zn);return EA(kr(e),n._key).then(t=>cT(e,n,t))}(this._delegate),t.then(r=>new O_(this.firestore,new ul(this.firestore._delegate,this._userDataWriter,r._key,r._document,r.metadata,this._delegate.converter)))}withConverter(e){return new zo(this.firestore,this._delegate.withConverter(e?Yf.getInstance(this.firestore,e):null))}}function ps(n,e,t){return n.message=n.message.replace(e,t),n}function XA(n){for(const e of n)if("object"==typeof e&&!dT(e))return e;return{}}function JA(n,e){var t,r;let o;return o=dT(n[0])?n[0]:dT(n[1])?n[1]:"function"==typeof n[0]?{next:n[0],error:n[1],complete:n[2]}:{next:n[1],error:n[2],complete:n[3]},{next:u=>{o.next&&o.next(e(u))},error:null===(t=o.error)||void 0===t?void 0:t.bind(o),complete:null===(r=o.complete)||void 0===r?void 0:r.bind(o)}}class O_{constructor(e,t){this._firestore=e,this._delegate=t}get ref(){return new zo(this._firestore,this._delegate.ref)}get id(){return this._delegate.id}get metadata(){return this._delegate.metadata}get exists(){return this._delegate.exists()}data(e){return this._delegate.data(e)}get(e,t){return this._delegate.get(e,t)}isEqual(e){return $A(this._delegate,e._delegate)}}class k_ extends O_{data(e){const t=this._delegate.data(e);return function Vc(n,e){n||tt()}(void 0!==t),t}}class gs{constructor(e,t){this.firestore=e,this._delegate=t,this._userDataWriter=new bE(e)}where(e,t,r){try{return new gs(this.firestore,Kd(this._delegate,function ER(n,e,t){const r=e,o=_E("where",n);return R_._create(o,r,t)}(e,t,r)))}catch(o){throw ps(o,/(orderBy|where)\(\)/,"Query.$1()")}}orderBy(e,t){try{return new gs(this.firestore,Kd(this._delegate,function DR(n,e="asc"){const t=e,r=_E("orderBy",n);return aT._create(r,t)}(e,t)))}catch(r){throw ps(r,/(orderBy|where)\(\)/,"Query.$1()")}}limit(e){try{return new gs(this.firestore,Kd(this._delegate,function bR(n){return dA("limit",n),IE._create("limit",n,"F")}(e)))}catch(t){throw ps(t,"limit()","Query.limit()")}}limitToLast(e){try{return new gs(this.firestore,Kd(this._delegate,function CR(n){return dA("limitToLast",n),IE._create("limitToLast",n,"L")}(e)))}catch(t){throw ps(t,"limitToLast()","Query.limitToLast()")}}startAt(...e){try{return new gs(this.firestore,Kd(this._delegate,function TR(...n){return wE._create("startAt",n,!0)}(...e)))}catch(t){throw ps(t,"startAt()","Query.startAt()")}}startAfter(...e){try{return new gs(this.firestore,Kd(this._delegate,function SR(...n){return wE._create("startAfter",n,!1)}(...e)))}catch(t){throw ps(t,"startAfter()","Query.startAfter()")}}endBefore(...e){try{return new gs(this.firestore,Kd(this._delegate,function AR(...n){return EE._create("endBefore",n,!1)}(...e)))}catch(t){throw ps(t,"endBefore()","Query.endBefore()")}}endAt(...e){try{return new gs(this.firestore,Kd(this._delegate,function xR(...n){return EE._create("endAt",n,!0)}(...e)))}catch(t){throw ps(t,"endAt()","Query.endAt()")}}isEqual(e){return WC(this._delegate,e._delegate)}get(e){let t;return t="cache"===e?.source?function FR(n){n=sn(n,Fi);const e=sn(n.firestore,Zn),t=kr(e),r=new Qd(e);return function XM(n,e){const t=new Wr;return n.asyncQueue.enqueueAndForget((0,ve.Z)(function*(){return(r=(0,ve.Z)(function*(o,u,l){try{const g=yield b_(o,u,!0),_=new eA(u,g.Hi),b=_.Wu(g.documents),S=_.applyChanges(b,!1);l.resolve(S.snapshot)}catch(g){const _=ym(g,`Failed to execute query '${u} against cache`);l.reject(_)}}),function(o,u,l){return r.apply(this,arguments)})(yield fE(n),e,t);var r})),t.promise}(t,n._query).then(o=>new Yd(e,r,n,o))}(this._delegate):"server"===e?.source?function LR(n){n=sn(n,Fi);const e=sn(n.firestore,Zn),t=kr(e),r=new Qd(e);return DA(t,n._query,{source:"server"}).then(o=>new Yd(e,r,n,o))}(this._delegate):function kR(n){n=sn(n,Fi);const e=sn(n.firestore,Zn),t=kr(e),r=new Qd(e);return OA(n._query),DA(t,n._query).then(o=>new Yd(e,r,n,o))}(this._delegate),t.then(r=>new hT(this.firestore,new Yd(this.firestore._delegate,this._userDataWriter,this._delegate,r._snapshot)))}onSnapshot(...e){const t=XA(e),r=JA(e,o=>new hT(this.firestore,new Yd(this.firestore._delegate,this._userDataWriter,this._delegate,o._snapshot)));return zA(this._delegate,t,r)}withConverter(e){return new gs(this.firestore,this._delegate.withConverter(e?Yf.getInstance(this.firestore,e):null))}}class eN{constructor(e,t){this._firestore=e,this._delegate=t}get type(){return this._delegate.type}get doc(){return new k_(this._firestore,this._delegate.doc)}get oldIndex(){return this._delegate.oldIndex}get newIndex(){return this._delegate.newIndex}}class hT{constructor(e,t){this._firestore=e,this._delegate=t}get query(){return new gs(this._firestore,this._delegate.query)}get metadata(){return this._delegate.metadata}get size(){return this._delegate.size}get empty(){return this._delegate.empty}get docs(){return this._delegate.docs.map(e=>new k_(this._firestore,e))}docChanges(e){return this._delegate.docChanges(e).map(t=>new eN(this._firestore,t))}forEach(e,t){this._delegate.forEach(r=>{e.call(t,new k_(this._firestore,r))})}isEqual(e){return $A(this._delegate,e._delegate)}}class bm extends gs{constructor(e,t){super(e,t),this.firestore=e,this._delegate=t}get id(){return this._delegate.id}get path(){return this._delegate.path}get parent(){const e=this._delegate.parent;return e?new zo(this.firestore,e):null}doc(e){try{return new zo(this.firestore,void 0===e?lE(this._delegate):lE(this._delegate,e))}catch(t){throw ps(t,"doc()","CollectionReference.doc()")}}add(e){return function VR(n,e){const t=sn(n.firestore,Zn),r=lE(n),o=DE(n.converter,e);return Dm(t,[mE(qf(n.firestore),"addDoc",r._key,o,null!==n.converter,{}).toMutation(r._key,Tn.exists(!1))]).then(()=>r)}(this._delegate,e).then(t=>new zo(this.firestore,t))}isEqual(e){return mA(this._delegate,e._delegate)}withConverter(e){return new bm(this.firestore,this._delegate.withConverter(e?Yf.getInstance(this.firestore,e):null))}}function Qf(n){return sn(n,qn)}class fT{constructor(...e){this._delegate=new al(...e)}static documentId(){return new fT(zn.keyField().canonicalString())}isEqual(e){return(e=(0,an.m9)(e))instanceof al&&this._delegate._internalPath.isEqual(e._internalPath)}}class Xf{constructor(e){this._delegate=e}static serverTimestamp(){const e=function WR(){return new tT("serverTimestamp")}();return e._methodName="FieldValue.serverTimestamp",new Xf(e)}static delete(){const e=function zR(){return new A_("deleteField")}();return e._methodName="FieldValue.delete",new Xf(e)}static arrayUnion(...e){const t=function GR(...n){return new yR("arrayUnion",n)}(...e);return t._methodName="FieldValue.arrayUnion",new Xf(t)}static arrayRemove(...e){const t=function qR(...n){return new vR("arrayRemove",n)}(...e);return t._methodName="FieldValue.arrayRemove",new Xf(t)}static increment(e){const t=function ZR(n){return new _R("increment",n)}(e);return t._methodName="FieldValue.increment",new Xf(t)}isEqual(e){return this._delegate.isEqual(e._delegate)}}const tN={Firestore:KA,GeoPoint:pE,Timestamp:Hn,Blob:P_,Transaction:YA,WriteBatch:QA,DocumentReference:zo,DocumentSnapshot:O_,Query:gs,QueryDocumentSnapshot:k_,QuerySnapshot:hT,CollectionReference:bm,FieldPath:fT,FieldValue:Xf,setLogLevel:function JR(n){!function AI(n){Ea.setLogLevel(n)}(n)},CACHE_SIZE_UNLIMITED:-1};!function rN(n){(function nN(n,e){n.INTERNAL.registerComponent(new td.wA("firestore-compat",t=>{const r=t.getProvider("app-compat").getImmediate(),o=t.getProvider("firestore").getImmediate();return e(r,o)},"PUBLIC").setServiceProps(Object.assign({},tN)))})(n,(e,t)=>new KA(e,t,new XR)),n.registerVersion("@firebase/firestore-compat","0.3.0")}(Py.Z);var iN=k(6451),CE=k(5363),sN=k(6063);class oN extends fi.x{constructor(e=1/0,t=1/0,r=sN.l){super(),this._bufferSize=e,this._windowTime=t,this._timestampProvider=r,this._buffer=[],this._infiniteTimeWindow=!0,this._infiniteTimeWindow=t===1/0,this._bufferSize=Math.max(1,e),this._windowTime=Math.max(1,t)}next(e){const{isStopped:t,_buffer:r,_infiniteTimeWindow:o,_timestampProvider:u,_windowTime:l}=this;t||(r.push(e),!o&&r.push(u.now()+l)),this._trimBuffer(),super.next(e)}_subscribe(e){this._throwIfClosed(),this._trimBuffer();const t=this._innerSubscribe(e),{_infiniteTimeWindow:r,_buffer:o}=this,u=o.slice();for(let l=0;l<u.length&&!e.closed;l+=r?1:2)e.next(u[l]);return this._checkFinalizedStatuses(e),t}_trimBuffer(){const{_bufferSize:e,_timestampProvider:t,_buffer:r,_infiniteTimeWindow:o}=this,u=(o?1:2)*e;if(e<1/0&&u<r.length&&r.splice(0,r.length-u),!o){const l=t.now();let g=0;for(let _=1;_<r.length&&r[_]<=l;_+=2)g=_;g&&r.splice(0,g+1)}}}var aN=k(3099);function ex(n,e,t){let r,o=!1;return n&&"object"==typeof n?({bufferSize:r=1/0,windowTime:e=1/0,refCount:o=!1,scheduler:t}=n):r=n??1/0,(0,aN.B)({connector:()=>new oN(r,e,t),resetOnError:!0,resetOnComplete:!1,resetOnRefCountZero:o})}function tx(n,e){return(0,ua.m)(e)?Rr(()=>n,e):Rr(()=>n)}var pT=k(9468),Jf=k(259);class Cm{constructor(e){return e}}class nx{constructor(){return(0,Jf.C6)()}}const gT=new p.OlP("angularfire2._apps"),cN={provide:Cm,useFactory:function uN(n){return n&&1===n.length?n[0]:new Cm((0,Jf.Mq)())},deps:[[new p.FiY,gT]]},lN={provide:nx,deps:[[new p.FiY,gT]]};function dN(n){return(e,t)=>{const r=e.runOutsideAngular(()=>n(t));return new Cm(r)}}let hN=(()=>{class n{constructor(t){(0,Jf.KN)("angularfire",yn.q4.full,"core"),(0,Jf.KN)("angularfire",yn.q4.full,"app"),(0,Jf.KN)("angular",p.q4F.full,t.toString())}}return n.\u0275fac=function(t){return new(t||n)(p.LFG(p.Lbi))},n.\u0275mod=p.oAB({type:n}),n.\u0275inj=p.cJS({providers:[cN,lN]}),n})();const pN=(0,yn.u3)(Jf.ZF,!0),mT=new Map,rx={activated:!1,tokenObservers:[]},gN={initialized:!1,enabled:!1};function Li(n){return mT.get(n)||Object.assign({},rx)}function TE(){return gN}class wN{constructor(e,t,r,o,u){if(this.operation=e,this.retryPolicy=t,this.getWaitDuration=r,this.lowerBound=o,this.upperBound=u,this.pending=null,this.nextErrorWaitInterval=o,o>u)throw new Error("Proactive refresh lower bound greater than upper bound!")}start(){this.nextErrorWaitInterval=this.lowerBound,this.process(!0).catch(()=>{})}stop(){this.pending&&(this.pending.reject("cancelled"),this.pending=null)}isRunning(){return!!this.pending}process(e){var t=this;return(0,ve.Z)(function*(){t.stop();try{t.pending=new an.BH,yield function EN(n){return new Promise(e=>{setTimeout(e,n)})}(t.getNextRun(e)),t.pending.resolve(),yield t.pending.promise,t.pending=new an.BH,yield t.operation(),t.pending.resolve(),yield t.pending.promise,t.process(!0).catch(()=>{})}catch(r){t.retryPolicy(r)?t.process(!1).catch(()=>{}):t.stop()}})()}getNextRun(e){if(e)return this.nextErrorWaitInterval=this.lowerBound,this.getWaitDuration();{const t=this.nextErrorWaitInterval;return this.nextErrorWaitInterval*=2,this.nextErrorWaitInterval>this.upperBound&&(this.nextErrorWaitInterval=this.upperBound),t}}}const ms=new an.LL("appCheck","AppCheck",{"already-initialized":"You have already called initializeAppCheck() for FirebaseApp {$appName} with different options. To avoid this error, call initializeAppCheck() with the same options as when it was originally called. This will return the already initialized instance.","use-before-activation":"App Check is being used before initializeAppCheck() is called for FirebaseApp {$appName}. Call initializeAppCheck() before instantiating other Firebase services.","fetch-network-error":"Fetch failed to connect to a network. Check Internet connection. Original error: {$originalErrorMessage}.","fetch-parse-error":"Fetch client could not parse response. Original error: {$originalErrorMessage}.","fetch-status-error":"Fetch server returned an HTTP error status. HTTP status: {$httpStatus}.","storage-open":"Error thrown when opening storage. Original error: {$originalErrorMessage}.","storage-get":"Error thrown when reading from storage. Original error: {$originalErrorMessage}.","storage-set":"Error thrown when writing to storage. Original error: {$originalErrorMessage}.","recaptcha-error":"ReCAPTCHA error.",throttled:"Requests throttled due to {$httpStatus} error. Attempts allowed again after {$time}"});function sx(n){if(!Li(n).activated)throw ms.create("use-before-activation",{appName:n.name})}function _T(n,e){return IT.apply(this,arguments)}function IT(){return IT=(0,ve.Z)(function*({url:n,body:e},t){const r={"Content-Type":"application/json"},o=t.getImmediate({optional:!0});if(o){const P=yield o.getHeartbeatsHeader();P&&(r["X-Firebase-Client"]=P)}const u={method:"POST",body:JSON.stringify(e),headers:r};let l,g;try{l=yield fetch(n,u)}catch(P){throw ms.create("fetch-network-error",{originalErrorMessage:P?.message})}if(200!==l.status)throw ms.create("fetch-status-error",{httpStatus:l.status});try{g=yield l.json()}catch(P){throw ms.create("fetch-parse-error",{originalErrorMessage:P?.message})}const _=g.ttl.match(/^([\d.]+)(s)$/);if(!_||!_[2]||isNaN(Number(_[1])))throw ms.create("fetch-parse-error",{originalErrorMessage:`ttl field (timeToLive) is not in standard Protobuf Duration format: ${g.ttl}`});const b=1e3*Number(_[1]),S=Date.now();return{token:g.token,expireTimeMillis:S+b,issuedAtTimeMillis:S}}),IT.apply(this,arguments)}function TN(n,e){const{projectId:t,appId:r,apiKey:o}=n.options;return{url:`https://content-firebaseappcheck.googleapis.com/v1/projects/${t}/apps/${r}:exchangeDebugToken?key=${o}`,body:{debug_token:e}}}const F_="firebase-app-check-store";let xE=null;function ax(){return xE||(xE=new Promise((n,e)=>{try{const t=indexedDB.open("firebase-app-check-database",1);t.onsuccess=r=>{n(r.target.result)},t.onerror=r=>{var o;e(ms.create("storage-open",{originalErrorMessage:null===(o=r.target.error)||void 0===o?void 0:o.message}))},t.onupgradeneeded=r=>{0===r.oldVersion&&r.target.result.createObjectStore(F_,{keyPath:"compositeKey"})}}catch(t){e(ms.create("storage-open",{originalErrorMessage:t?.message}))}}),xE)}function wT(){return wT=(0,ve.Z)(function*(n,e){const r=(yield ax()).transaction(F_,"readwrite"),u=r.objectStore(F_).put({compositeKey:n,value:e});return new Promise((l,g)=>{u.onsuccess=_=>{l()},r.onerror=_=>{var b;g(ms.create("storage-set",{originalErrorMessage:null===(b=_.target.error)||void 0===b?void 0:b.message}))}})}),wT.apply(this,arguments)}const L_=new hu.Yd("@firebase/app-check");function bT(n,e){return(0,an.hl)()?function MN(n,e){return function ux(n,e){return wT.apply(this,arguments)}(function lx(n){return`${n.options.appId}-${n.name}`}(n),e)}(n,e).catch(t=>{L_.warn(`Failed to write token to IndexedDB. Error: ${t}`)}):Promise.resolve()}function dx(){return TE().enabled}function hx(){return TT.apply(this,arguments)}function TT(){return TT=(0,ve.Z)(function*(){const n=TE();if(n.enabled&&n.token)return n.token.promise;throw Error("\n            Can't get debug token in production mode.\n        ")}),TT.apply(this,arguments)}const FN={error:"UNKNOWN_ERROR"};function LN(n){return an.US.encodeString(JSON.stringify(n),!1)}function ME(n){return ST.apply(this,arguments)}function ST(){return ST=(0,ve.Z)(function*(n,e=!1){const t=n.app;sx(t);const r=Li(t);let u,o=r.token;if(o&&!Tm(o)&&(r.token=void 0,o=void 0),!o){const _=yield r.cachedTokenPromise;_&&(Tm(_)?o=_:yield bT(t,void 0))}if(!e&&o&&Tm(o))return{token:o.token};let g,l=!1;if(dx()){r.exchangeTokenPromise||(r.exchangeTokenPromise=_T(TN(t,yield hx()),n.heartbeatServiceProvider).finally(()=>{r.exchangeTokenPromise=void 0}),l=!0);const _=yield r.exchangeTokenPromise;return yield bT(t,_),r.token=_,{token:_.token}}try{r.exchangeTokenPromise||(r.exchangeTokenPromise=r.provider.getToken().finally(()=>{r.exchangeTokenPromise=void 0}),l=!0),o=yield Li(t).exchangeTokenPromise}catch(_){"appCheck/throttled"===_.code?L_.warn(_.message):L_.error(_),u=_}return o?u?g=Tm(o)?{token:o.token,internalError:u}:gx(u):(g={token:o.token},r.token=o,yield bT(t,o)):g=gx(u),l&&px(t,g),g}),ST.apply(this,arguments)}function xT(n,e){const t=Li(n),r=t.tokenObservers.filter(o=>o.next!==e);0===r.length&&t.tokenRefresher&&t.tokenRefresher.isRunning()&&t.tokenRefresher.stop(),t.tokenObservers=r}function fx(n){const{app:e}=n,t=Li(e);let r=t.tokenRefresher;r||(r=function UN(n){const{app:e}=n;return new wN((0,ve.Z)(function*(){let r;if(r=Li(e).token?yield ME(n,!0):yield ME(n),r.error)throw r.error;if(r.internalError)throw r.internalError}),()=>!0,()=>{const t=Li(e);if(t.token){let r=t.token.issuedAtTimeMillis+.5*(t.token.expireTimeMillis-t.token.issuedAtTimeMillis)+3e5;return r=Math.min(r,t.token.expireTimeMillis-3e5),Math.max(0,r-Date.now())}return 0},3e4,96e4)}(n),t.tokenRefresher=r),!r.isRunning()&&t.isTokenAutoRefreshEnabled&&r.start()}function px(n,e){const t=Li(n).tokenObservers;for(const r of t)try{"EXTERNAL"===r.type&&null!=e.error?r.error(e.error):r.next(e)}catch{}}function Tm(n){return n.expireTimeMillis-Date.now()>0}function gx(n){return{token:LN(FN),error:n}}class VN{constructor(e,t){this.app=e,this.heartbeatServiceProvider=t}_delete(){const{tokenObservers:e}=Li(this.app);for(const t of e)xT(this.app,t.next);return Promise.resolve()}}const Dx="app-check-internal";!function JN(){(0,Oo._registerComponent)(new td.wA("app-check",n=>function BN(n,e){return new VN(n,e)}(n.getProvider("app").getImmediate(),n.getProvider("heartbeat")),"PUBLIC").setInstantiationMode("EXPLICIT").setInstanceCreatedCallback((n,e,t)=>{n.getProvider(Dx).initialize()})),(0,Oo._registerComponent)(new td.wA(Dx,n=>function $N(n){return{getToken:e=>ME(n,e),addTokenListener:e=>function AT(n,e,t,r){const{app:o}=n,u=Li(o);if(u.tokenObservers=[...u.tokenObservers,{next:t,error:r,type:e}],u.token&&Tm(u.token)){const g=u.token;Promise.resolve().then(()=>{t({token:g.token}),fx(n)}).catch(()=>{})}u.cachedTokenPromise.then(()=>fx(n))}(n,"INTERNAL",e),removeTokenListener:e=>xT(n.app,e)}}(n.getProvider("app-check").getImmediate()),"PUBLIC").setInstantiationMode("EXPLICIT")),(0,Oo.registerVersion)("@firebase/app-check","0.6.0")}();class NE{constructor(){return(0,yn.vb)("app-check")}}typeof window<"u"&&window,k(9260);const Cx=new p.OlP("angularfire2.auth.use-emulator"),Tx=new p.OlP("angularfire2.auth.settings"),Sx=new p.OlP("angularfire2.auth.tenant-id"),Ax=new p.OlP("angularfire2.auth.langugage-code"),xx=new p.OlP("angularfire2.auth.use-device-language"),Mx=new p.OlP("angularfire.auth.persistence"),Rx=(n,e,t,r,o,u,l,g)=>(0,Zi.cc)(`${n.name}.auth`,"AngularFireAuth",n.name,()=>{const _=e.runOutsideAngular(()=>n.auth());if(t&&_.useEmulator(...t),r&&(_.tenantId=r),_.languageCode=o,u&&_.useDeviceLanguage(),l)for(const[b,S]of Object.entries(l))_.settings[b]=S;return g&&_.setPersistence(g),_},[t,r,o,u,l,g]);let Nx=(()=>{class n{constructor(t,r,o,u,l,g,_,b,S,P,W,J){const oe=new fi.x,ke=Qe(void 0).pipe((0,CE.Q)(l.outsideAngular),Rr(()=>u.runOutsideAngular(()=>Promise.resolve().then(k.bind(k,9568)))),(0,_t.U)(()=>(0,Zi.on)(t,u,r)),(0,_t.U)(je=>Rx(je,u,g,b,S,P,_,W)),ex({bufferSize:1,refCount:!1}));if(Zo(o))this.authState=this.user=this.idToken=this.idTokenResult=this.credential=Qe(null);else{ke.pipe(as()).subscribe();const vt=ke.pipe(Rr(Ut=>Ut.getRedirectResult().then($t=>$t,()=>null)),yn.iC,ex({bufferSize:1,refCount:!1})),zt=ke.pipe(Rr(Ut=>new dr.y($t=>({unsubscribe:u.runOutsideAngular(()=>Ut.onAuthStateChanged(Qt=>$t.next(Qt),Qt=>$t.error(Qt),()=>$t.complete()))})))),Lt=ke.pipe(Rr(Ut=>new dr.y($t=>({unsubscribe:u.runOutsideAngular(()=>Ut.onIdTokenChanged(Qt=>$t.next(Qt),Qt=>$t.error(Qt),()=>$t.complete()))}))));this.authState=vt.pipe(tx(zt),(0,pT.R)(l.outsideAngular),(0,CE.Q)(l.insideAngular)),this.user=vt.pipe(tx(Lt),(0,pT.R)(l.outsideAngular),(0,CE.Q)(l.insideAngular)),this.idToken=this.user.pipe(Rr(Ut=>Ut?(0,Zt.D)(Ut.getIdToken()):Qe(null))),this.idTokenResult=this.user.pipe(Rr(Ut=>Ut?(0,Zt.D)(Ut.getIdTokenResult()):Qe(null))),this.credential=(0,iN.T)(vt,oe,this.authState.pipe(Wi(Ut=>!Ut))).pipe((0,_t.U)(Ut=>Ut?.user?Ut:null),(0,pT.R)(l.outsideAngular),(0,CE.Q)(l.insideAngular))}return(0,Zi.pX)(this,ke,u,{spy:{apply:(je,vt,zt)=>{(je.startsWith("signIn")||je.startsWith("createUser"))&&zt.then(Lt=>oe.next(Lt))}}})}}return n.\u0275fac=function(t){return new(t||n)(p.LFG(Zi.Dh),p.LFG(Zi.xv,8),p.LFG(p.Lbi),p.LFG(p.R0b),p.LFG(yn.HU),p.LFG(Cx,8),p.LFG(Tx,8),p.LFG(Sx,8),p.LFG(Ax,8),p.LFG(xx,8),p.LFG(Mx,8),p.LFG(NE,8))},n.\u0275prov=p.Yz7({token:n,factory:n.\u0275fac,providedIn:"any"}),n})();function Px(n,e){return function sP(n,e=ed.z){return new dr.y(t=>{let r;return null!=e?e.schedule(()=>{r=n.onSnapshot({includeMetadataChanges:!0},t)}):r=n.onSnapshot({includeMetadataChanges:!0},t),()=>{r?.()}})}(n,e)}function OT(n,e){return Px(n,e).pipe((0,_t.U)(t=>({payload:t,type:"query"})))}function PE(n,e){return OT(n,e).pipe(xl(void 0),xc(),(0,_t.U)(([t,r])=>{const o=r.payload.docChanges(),u=o.map(l=>({type:l.type,payload:l}));return t&&JSON.stringify(t.payload.metadata)!==JSON.stringify(r.payload.metadata)&&r.payload.docs.forEach((l,g)=>{const _=o.find(S=>S.doc.ref.isEqual(l.ref)),b=t?.payload.docs.find(S=>S.ref.isEqual(l.ref));_&&JSON.stringify(_.doc.metadata)===JSON.stringify(l.metadata)||!_&&b&&JSON.stringify(b.metadata)===JSON.stringify(l.metadata)||u.push({type:"modified",payload:{oldIndex:g,newIndex:g,type:"modified",doc:l}})}),u}))}function Ox(n,e,t){return PE(n,t).pipe(su((r,o)=>function aP(n,e,t){return e.forEach(r=>{t.indexOf(r.type)>-1&&(n=function uP(n,e){switch(e.type){case"added":if(!n[e.newIndex]||!n[e.newIndex].doc.ref.isEqual(e.doc.ref))return kT(n,e.newIndex,0,e);break;case"modified":if(null==n[e.oldIndex]||n[e.oldIndex].doc.ref.isEqual(e.doc.ref)){if(e.oldIndex!==e.newIndex){const t=n.slice();return t.splice(e.oldIndex,1),t.splice(e.newIndex,0,e),t}return kT(n,e.newIndex,1,e)}break;case"removed":if(n[e.oldIndex]&&n[e.oldIndex].doc.ref.isEqual(e.doc.ref))return kT(n,e.oldIndex,1)}return n}(n,r))}),n}(r,o.map(u=>u.payload),e),[]),function Ny(n,e=Ni.y){return n=n??$p,(0,hr.e)((t,r)=>{let o,u=!0;t.subscribe((0,G.x)(r,l=>{const g=e(l);(u||!n(o,g))&&(u=!1,o=g,r.next(l))}))})}(),(0,_t.U)(r=>r.map(o=>({type:o.type,payload:o}))))}function kT(n,e,t,...r){const o=n.slice();return o.splice(e,t,...r),o}function kx(n){return(!n||0===n.length)&&(n=["added","removed","modified"]),n}class Fx{constructor(e,t,r){this.ref=e,this.query=t,this.afs=r}stateChanges(e){let t=PE(this.query,this.afs.schedulers.outsideAngular);return e&&e.length>0&&(t=t.pipe((0,_t.U)(r=>r.filter(o=>e.indexOf(o.type)>-1)))),t.pipe(xl(void 0),xc(),Wi(([r,o])=>o.length>0||!r),(0,_t.U)(([r,o])=>o),yn.iC)}auditTrail(e){return this.stateChanges(e).pipe(su((t,r)=>[...t,...r],[]))}snapshotChanges(e){const t=kx(e);return Ox(this.query,t,this.afs.schedulers.outsideAngular).pipe(yn.iC)}valueChanges(e={}){return OT(this.query,this.afs.schedulers.outsideAngular).pipe((0,_t.U)(t=>t.payload.docs.map(r=>e.idField?Object.assign(Object.assign({},r.data()),{[e.idField]:r.id}):r.data())),yn.iC)}get(e){return(0,Zt.D)(this.query.get(e)).pipe(yn.iC)}add(e){return this.ref.add(e)}doc(e){return new Lx(this.ref.doc(e),this.afs)}}class Lx{constructor(e,t){this.ref=e,this.afs=t}set(e,t){return this.ref.set(e,t)}update(e){return this.ref.update(e)}delete(){return this.ref.delete()}collection(e,t){const r=this.ref.collection(e),{ref:o,query:u}=Ux(r,t);return new Fx(o,u,this.afs)}snapshotChanges(){return function oP(n,e){return Px(n,e).pipe(xl(void 0),xc(),(0,_t.U)(([t,r])=>r.exists?t?.exists?{payload:r,type:"modified"}:{payload:r,type:"added"}:{payload:r,type:"removed"}))}(this.ref,this.afs.schedulers.outsideAngular).pipe(yn.iC)}valueChanges(e={}){return this.snapshotChanges().pipe((0,_t.U)(({payload:t})=>e.idField?Object.assign(Object.assign({},t.data()),{[e.idField]:t.id}):t.data()))}get(e){return(0,Zt.D)(this.ref.get(e)).pipe(yn.iC)}}class cP{constructor(e,t){this.query=e,this.afs=t}stateChanges(e){return e&&0!==e.length?PE(this.query,this.afs.schedulers.outsideAngular).pipe((0,_t.U)(t=>t.filter(r=>e.indexOf(r.type)>-1)),Wi(t=>t.length>0),yn.iC):PE(this.query,this.afs.schedulers.outsideAngular).pipe(yn.iC)}auditTrail(e){return this.stateChanges(e).pipe(su((t,r)=>[...t,...r],[]))}snapshotChanges(e){const t=kx(e);return Ox(this.query,t,this.afs.schedulers.outsideAngular).pipe(yn.iC)}valueChanges(e={}){return OT(this.query,this.afs.schedulers.outsideAngular).pipe((0,_t.U)(r=>r.payload.docs.map(o=>e.idField?Object.assign({[e.idField]:o.id},o.data()):o.data())),yn.iC)}get(e){return(0,Zt.D)(this.query.get(e)).pipe(yn.iC)}}const lP=new p.OlP("angularfire2.enableFirestorePersistence"),dP=new p.OlP("angularfire2.firestore.persistenceSettings"),hP=new p.OlP("angularfire2.firestore.settings"),fP=new p.OlP("angularfire2.firestore.use-emulator");function Ux(n,e=(t=>t)){return{query:e(n),ref:n}}let pP=(()=>{class n{constructor(t,r,o,u,l,g,_,b,S,P,W,J,oe,ke,je,vt,zt){this.schedulers=_;const Lt=(0,Zi.on)(t,g,r),Ut=S;P&&Rx(Lt,g,W,oe,ke,je,J,vt),[this.firestore,this.persistenceEnabled$]=(0,Zi.cc)(`${Lt.name}.firestore`,"AngularFirestore",Lt.name,()=>{const $t=g.runOutsideAngular(()=>Lt.firestore());if(u&&$t.settings(u),Ut&&$t.useEmulator(...Ut),o&&!Zo(l)){const Qt=()=>{try{return(0,Zt.D)($t.enablePersistence(b||void 0).then(()=>!0,()=>!1))}catch(ui){return typeof console<"u"&&console.warn(ui),Qe(!1)}};return[$t,g.runOutsideAngular(Qt)]}return[$t,Qe(!1)]},[u,Ut,o])}collection(t,r){let o;o="string"==typeof t?this.firestore.collection(t):t;const{ref:u,query:l}=Ux(o,r),g=this.schedulers.ngZone.run(()=>u);return new Fx(g,l,this)}collectionGroup(t,r){const o=r||(l=>l),u=this.firestore.collectionGroup(t);return new cP(o(u),this)}doc(t){let r;r="string"==typeof t?this.firestore.doc(t):t;const o=this.schedulers.ngZone.run(()=>r);return new Lx(o,this)}createId(){return this.firestore.collection("_").doc().id}}return n.\u0275fac=function(t){return new(t||n)(p.LFG(Zi.Dh),p.LFG(Zi.xv,8),p.LFG(lP,8),p.LFG(hP,8),p.LFG(p.Lbi),p.LFG(p.R0b),p.LFG(yn.HU),p.LFG(dP,8),p.LFG(fP,8),p.LFG(Nx,8),p.LFG(Cx,8),p.LFG(Tx,8),p.LFG(Sx,8),p.LFG(Ax,8),p.LFG(xx,8),p.LFG(Mx,8),p.LFG(NE,8))},n.\u0275prov=p.Yz7({token:n,factory:n.\u0275fac,providedIn:"any"}),n})();function gP(n,e){if(1&n){const t=p.EpF();p.ynx(0),p.TgZ(1,"div",9),p._UZ(2,"img",10),p.TgZ(3,"h5")(4,"strong"),p._uU(5,"Product: "),p.qZA(),p._uU(6),p.qZA(),p.TgZ(7,"p")(8,"strong"),p._uU(9,"Description: "),p.qZA(),p._uU(10),p.qZA(),p.TgZ(11,"p")(12,"strong"),p._uU(13,"Price:"),p.qZA(),p._uU(14),p.qZA(),p.TgZ(15,"button",11),p.NdJ("click",function(){const u=p.CHM(t).$implicit,l=p.oxw();return p.KtG(l.setCartItem(u))}),p._uU(16,"Add to card"),p.qZA()(),p.BQk()}if(2&n){const t=e.$implicit;p.xp6(2),p.Q6J("src",t.image,p.LSH),p.xp6(4),p.Oqu(t.title),p.xp6(4),p.Oqu(t.description),p.xp6(4),p.hij(" $",t.price,"")}}class U_{constructor(e,t){this.ref=t,this.cartcount=new p.vpe,this.productsCollection=e.collection("M@rv&l0usE"),this.products=this.productsCollection.valueChanges()}ngOnInit(){}ngAfterViewInit(){this.products.subscribe(e=>{console.log(e)})}setCartItem(e){e.quantity=1,e.subtotal=1*parseFloat(e.price),(n=>{let e=Zh();e.push(n),localStorage.setItem("cart",JSON.stringify(e))})(e),this.ref.detectChanges()}}function mP(n,e){if(1&n&&(p.TgZ(0,"tr"),p._UZ(1,"td"),p.TgZ(2,"td"),p._uU(3),p.qZA(),p.TgZ(4,"td"),p._uU(5),p.qZA(),p.TgZ(6,"td"),p._uU(7),p.qZA(),p.TgZ(8,"td"),p._uU(9),p.qZA(),p.TgZ(10,"td"),p._uU(11),p.qZA(),p.TgZ(12,"td"),p._uU(13),p.qZA(),p.TgZ(14,"td")(15,"button",9),p._UZ(16,"i",13),p.qZA()()()),2&n){const t=e.$implicit;p.xp6(3),p.Oqu(t.id),p.xp6(2),p.Oqu(t.image),p.xp6(2),p.Oqu(t.description),p.xp6(2),p.Oqu(t.quantity),p.xp6(2),p.Oqu(t.price),p.xp6(2),p.Oqu(t.subtotal)}}function yP(n,e){if(1&n&&(p.ynx(0),p.TgZ(1,"div",1)(2,"div",2)(3,"div",3)(4,"table",4)(5,"thead")(6,"tr")(7,"th"),p._uU(8,"Sr.No"),p.qZA(),p.TgZ(9,"th"),p._uU(10,"Product Name"),p.qZA(),p.TgZ(11,"th"),p._uU(12,"Product Image"),p.qZA(),p.TgZ(13,"th",5),p._uU(14,"Description"),p.qZA(),p.TgZ(15,"th",6),p._uU(16,"Quantity"),p.qZA(),p.TgZ(17,"th",6),p._uU(18,"price"),p.qZA(),p.TgZ(19,"th",6),p._uU(20,"Total"),p.qZA(),p.TgZ(21,"th"),p._uU(22,"Action"),p.qZA()()(),p.TgZ(23,"tbody"),p.YNc(24,mP,17,6,"tr",7),p.TgZ(25,"tr"),p._UZ(26,"td",8),p.TgZ(27,"td")(28,"button",9),p._uU(29,"Empty Cart"),p.qZA()(),p.TgZ(30,"td")(31,"button",10),p._uU(32,"Shop More"),p.qZA()(),p.TgZ(33,"td")(34,"button",11)(35,"a",12),p._uU(36,"Pay Now"),p.qZA()()()()()()()()(),p.BQk()),2&n){const t=p.oxw();p.xp6(24),p.Q6J("ngForOf",t.updatedCartItems)}}function vP(n,e){1&n&&(p.ynx(0),p.TgZ(1,"div",14)(2,"div",15)(3,"h5",16),p._uU(4,"My Cart"),p.qZA()(),p.TgZ(5,"div",17),p._UZ(6,"img",18),p.TgZ(7,"h4"),p._uU(8,"Your card is empty"),p.qZA(),p.TgZ(9,"h6"),p._uU(10,"Add item now"),p.qZA(),p.TgZ(11,"button",19),p._uU(12,"Shop Now!!!"),p.qZA()()(),p.BQk())}U_.\u0275fac=function(e){return new(e||U_)(p.Y36(pP),p.Y36(p.sBO))},U_.\u0275cmp=p.Xpm({type:U_,selectors:[["app-product"]],outputs:{cartcount:"cartcount"},decls:22,vars:3,consts:[[1,"card-top","container-fluid"],[1,"container","d-flex"],[1,"item"],["src","./assets/allProduct.png","alt",""],["src","./assets/fashionDress.jpg","alt","",2,"width","50px"],["src","./assets/images.jpeg","alt","",2,"width","60px"],[1,"container"],[1,"row"],[4,"ngFor","ngForOf"],[1,"card","col-md-3"],["alt","DisplayedItem",3,"src"],[1,"btn",2,"background-color","pink",3,"click"]],template:function(e,t){1&e&&(p.TgZ(0,"div",0)(1,"div",1)(2,"div",2)(3,"a"),p._UZ(4,"img",3),p.TgZ(5,"h6"),p._uU(6,"All product"),p.qZA()()(),p.TgZ(7,"div",2)(8,"a"),p._UZ(9,"img",4),p.TgZ(10,"h6"),p._uU(11,"Lady's fashion"),p.qZA()()(),p.TgZ(12,"div",2)(13,"a"),p._UZ(14,"img",5),p.TgZ(15,"h6"),p._uU(16,"Jewelry"),p.qZA()()(),p._UZ(17,"div",2),p.qZA()(),p.TgZ(18,"div",6)(19,"div",7),p.YNc(20,gP,17,4,"ng-container",8),p.ALo(21,"async"),p.qZA()()),2&e&&(p.xp6(20),p.Q6J("ngForOf",p.lcZ(21,1,t.products)))},dependencies:[Ai,Go],styles:[".card-top[_ngcontent-%COMP%]{position:relative;display:flex;flex-direction:row;min-width:0;word-wrap:break-word;background-color:#fff;background-clip:border-box;border:1px solid rgba(0,0,0,.2);border-radius:.25rem}.item[_ngcontent-%COMP%]   img[_ngcontent-%COMP%]{width:64px}.item[_ngcontent-%COMP%]{margin:0 15px;text-align:center}.item[_ngcontent-%COMP%]   a[_ngcontent-%COMP%]:hover{color:pink}.card[_ngcontent-%COMP%]{padding:20;margin:40px}.item[_ngcontent-%COMP%]   h6[_ngcontent-%COMP%]{font-size:16px;font-family:serif}.card[_ngcontent-%COMP%]   img[_ngcontent-%COMP%]{height:350px;width:100%}.card[_ngcontent-%COMP%]   img[_ngcontent-%COMP%]:hover{transition:.3s ease-in-out;transform:scale(1.1)}.card[_ngcontent-%COMP%]   h5[_ngcontent-%COMP%], p[_ngcontent-%COMP%]{white-space:nowrap;overflow:hidden;text-overflow:ellipsis;max-width:100ch}"]});class V_{constructor(){this.status=!1,this.localStorecartItems=[],this.updatedCartItems=[]}ngOnInit(){this.localStorecartItems=Zh(),this.updatedCartItems=this.getCartItems(),this.status=this.updatedCartItems.length>0}getCartItems(){let e=[];return this.localStorecartItems.map(t=>{let r=t.id;if(e.find(o=>o.id==r)){let o=e.find(u=>u.id==r);e[0].subtotal+=parseFloat(`${o.price}`),e[0].quantity+=1}else e.push(t)}),e}getTotalPrice(e){}}V_.\u0275fac=function(e){return new(e||V_)},V_.\u0275cmp=p.Xpm({type:V_,selectors:[["app-cart"]],decls:2,vars:2,consts:[[4,"ngIf"],[1,"cart-height"],[1,"card-table"],[1,"card-product"],[1,"table","table-responsive"],[2,"width","25%"],[2,"width","12%"],[4,"ngFor","ngForOf"],["colspan","4"],[1,"btn","btn-danger"],[1,"btn","btn-primary"],[1,"btn","btn-success"],["href","https://wa.me/237652636242?text=I'm%20interested%20in%20your%20car%20for%20sale",2,"text-decoration","none","color","white"],[1,"fas","fa-trash-alt"],[1,"container"],[1,"card"],[1,"card-title"],[1,"center"],["src","assets/shopNow.jpg","alt",""],["routerLink","/product",1,"btn","btn-primary"]],template:function(e,t){1&e&&(p.YNc(0,yP,37,1,"ng-container",0),p.YNc(1,vP,13,0,"ng-container",0)),2&e&&(p.Q6J("ngIf",t.status),p.xp6(1),p.Q6J("ngIf",!t.status))},dependencies:[Ai,vn,Ql],styles:[".cart-height[_ngcontent-%COMP%]{height:100vh}.card[_ngcontent-%COMP%]{height:100vh;margin:25px}.center[_ngcontent-%COMP%]{position:absolute;top:50%;left:50%;transform:translate(-50%,50%);text-align:center}.center[_ngcontent-%COMP%]   img[_ngcontent-%COMP%]{color:inherit;border:none;outline:none;height:100px;margin:20px 0}h4[_ngcontent-%COMP%], h6[_ngcontent-%COMP%]{font-weight:400px}.card[_ngcontent-%COMP%]   table[_ngcontent-%COMP%]{position:relative;display:flex;flex-direction:column;min-width:none;word-wrap:break-word;background-color:#fff;background-clip:border-box;border:1px solid rgba(0,0,0,.2);border-radius:.25rem}.center[_ngcontent-%COMP%]   .btn[_ngcontent-%COMP%]{font-size:14px!important;margin-top:20px!important;font-weight:400;padding:12px 72px;border-radius:3px!important}"]});class OE{}class FT{}class cl{constructor(e){this.normalizedNames=new Map,this.lazyUpdate=null,e?this.lazyInit="string"==typeof e?()=>{this.headers=new Map,e.split("\n").forEach(t=>{const r=t.indexOf(":");if(r>0){const o=t.slice(0,r),u=o.toLowerCase(),l=t.slice(r+1).trim();this.maybeSetNormalizedName(o,u),this.headers.has(u)?this.headers.get(u).push(l):this.headers.set(u,[l])}})}:()=>{this.headers=new Map,Object.keys(e).forEach(t=>{let r=e[t];const o=t.toLowerCase();"string"==typeof r&&(r=[r]),r.length>0&&(this.headers.set(o,r),this.maybeSetNormalizedName(t,o))})}:this.headers=new Map}has(e){return this.init(),this.headers.has(e.toLowerCase())}get(e){this.init();const t=this.headers.get(e.toLowerCase());return t&&t.length>0?t[0]:null}keys(){return this.init(),Array.from(this.normalizedNames.values())}getAll(e){return this.init(),this.headers.get(e.toLowerCase())||null}append(e,t){return this.clone({name:e,value:t,op:"a"})}set(e,t){return this.clone({name:e,value:t,op:"s"})}delete(e,t){return this.clone({name:e,value:t,op:"d"})}maybeSetNormalizedName(e,t){this.normalizedNames.has(t)||this.normalizedNames.set(t,e)}init(){this.lazyInit&&(this.lazyInit instanceof cl?this.copyFrom(this.lazyInit):this.lazyInit(),this.lazyInit=null,this.lazyUpdate&&(this.lazyUpdate.forEach(e=>this.applyUpdate(e)),this.lazyUpdate=null))}copyFrom(e){e.init(),Array.from(e.headers.keys()).forEach(t=>{this.headers.set(t,e.headers.get(t)),this.normalizedNames.set(t,e.normalizedNames.get(t))})}clone(e){const t=new cl;return t.lazyInit=this.lazyInit&&this.lazyInit instanceof cl?this.lazyInit:this,t.lazyUpdate=(this.lazyUpdate||[]).concat([e]),t}applyUpdate(e){const t=e.name.toLowerCase();switch(e.op){case"a":case"s":let r=e.value;if("string"==typeof r&&(r=[r]),0===r.length)return;this.maybeSetNormalizedName(e.name,t);const o=("a"===e.op?this.headers.get(t):void 0)||[];o.push(...r),this.headers.set(t,o);break;case"d":const u=e.value;if(u){let l=this.headers.get(t);if(!l)return;l=l.filter(g=>-1===u.indexOf(g)),0===l.length?(this.headers.delete(t),this.normalizedNames.delete(t)):this.headers.set(t,l)}else this.headers.delete(t),this.normalizedNames.delete(t)}}forEach(e){this.init(),Array.from(this.normalizedNames.keys()).forEach(t=>e(this.normalizedNames.get(t),this.headers.get(t)))}}class _P{encodeKey(e){return Vx(e)}encodeValue(e){return Vx(e)}decodeKey(e){return decodeURIComponent(e)}decodeValue(e){return decodeURIComponent(e)}}const wP=/%(\d[a-f0-9])/gi,EP={40:"@","3A":":",24:"$","2C":",","3B":";","3D":"=","3F":"?","2F":"/"};function Vx(n){return encodeURIComponent(n).replace(wP,(e,t)=>EP[t]??e)}function kE(n){return`${n}`}class Jd{constructor(e={}){if(this.updates=null,this.cloneFrom=null,this.encoder=e.encoder||new _P,e.fromString){if(e.fromObject)throw new Error("Cannot specify both fromString and fromObject.");this.map=function IP(n,e){const t=new Map;return n.length>0&&n.replace(/^\?/,"").split("&").forEach(o=>{const u=o.indexOf("="),[l,g]=-1==u?[e.decodeKey(o),""]:[e.decodeKey(o.slice(0,u)),e.decodeValue(o.slice(u+1))],_=t.get(l)||[];_.push(g),t.set(l,_)}),t}(e.fromString,this.encoder)}else e.fromObject?(this.map=new Map,Object.keys(e.fromObject).forEach(t=>{const r=e.fromObject[t],o=Array.isArray(r)?r.map(kE):[kE(r)];this.map.set(t,o)})):this.map=null}has(e){return this.init(),this.map.has(e)}get(e){this.init();const t=this.map.get(e);return t?t[0]:null}getAll(e){return this.init(),this.map.get(e)||null}keys(){return this.init(),Array.from(this.map.keys())}append(e,t){return this.clone({param:e,value:t,op:"a"})}appendAll(e){const t=[];return Object.keys(e).forEach(r=>{const o=e[r];Array.isArray(o)?o.forEach(u=>{t.push({param:r,value:u,op:"a"})}):t.push({param:r,value:o,op:"a"})}),this.clone(t)}set(e,t){return this.clone({param:e,value:t,op:"s"})}delete(e,t){return this.clone({param:e,value:t,op:"d"})}toString(){return this.init(),this.keys().map(e=>{const t=this.encoder.encodeKey(e);return this.map.get(e).map(r=>t+"="+this.encoder.encodeValue(r)).join("&")}).filter(e=>""!==e).join("&")}clone(e){const t=new Jd({encoder:this.encoder});return t.cloneFrom=this.cloneFrom||this,t.updates=(this.updates||[]).concat(e),t}init(){null===this.map&&(this.map=new Map),null!==this.cloneFrom&&(this.cloneFrom.init(),this.cloneFrom.keys().forEach(e=>this.map.set(e,this.cloneFrom.map.get(e))),this.updates.forEach(e=>{switch(e.op){case"a":case"s":const t=("a"===e.op?this.map.get(e.param):void 0)||[];t.push(kE(e.value)),this.map.set(e.param,t);break;case"d":if(void 0===e.value){this.map.delete(e.param);break}{let r=this.map.get(e.param)||[];const o=r.indexOf(kE(e.value));-1!==o&&r.splice(o,1),r.length>0?this.map.set(e.param,r):this.map.delete(e.param)}}}),this.cloneFrom=this.updates=null)}}class DP{constructor(){this.map=new Map}set(e,t){return this.map.set(e,t),this}get(e){return this.map.has(e)||this.map.set(e,e.defaultValue()),this.map.get(e)}delete(e){return this.map.delete(e),this}has(e){return this.map.has(e)}keys(){return this.map.keys()}}function Bx(n){return typeof ArrayBuffer<"u"&&n instanceof ArrayBuffer}function $x(n){return typeof Blob<"u"&&n instanceof Blob}function jx(n){return typeof FormData<"u"&&n instanceof FormData}class B_{constructor(e,t,r,o){let u;if(this.url=t,this.body=null,this.reportProgress=!1,this.withCredentials=!1,this.responseType="json",this.method=e.toUpperCase(),function bP(n){switch(n){case"DELETE":case"GET":case"HEAD":case"OPTIONS":case"JSONP":return!1;default:return!0}}(this.method)||o?(this.body=void 0!==r?r:null,u=o):u=r,u&&(this.reportProgress=!!u.reportProgress,this.withCredentials=!!u.withCredentials,u.responseType&&(this.responseType=u.responseType),u.headers&&(this.headers=u.headers),u.context&&(this.context=u.context),u.params&&(this.params=u.params)),this.headers||(this.headers=new cl),this.context||(this.context=new DP),this.params){const l=this.params.toString();if(0===l.length)this.urlWithParams=t;else{const g=t.indexOf("?");this.urlWithParams=t+(-1===g?"?":g<t.length-1?"&":"")+l}}else this.params=new Jd,this.urlWithParams=t}serializeBody(){return null===this.body?null:Bx(this.body)||$x(this.body)||jx(this.body)||function CP(n){return typeof URLSearchParams<"u"&&n instanceof URLSearchParams}(this.body)||"string"==typeof this.body?this.body:this.body instanceof Jd?this.body.toString():"object"==typeof this.body||"boolean"==typeof this.body||Array.isArray(this.body)?JSON.stringify(this.body):this.body.toString()}detectContentTypeHeader(){return null===this.body||jx(this.body)?null:$x(this.body)?this.body.type||null:Bx(this.body)?null:"string"==typeof this.body?"text/plain":this.body instanceof Jd?"application/x-www-form-urlencoded;charset=UTF-8":"object"==typeof this.body||"number"==typeof this.body||"boolean"==typeof this.body?"application/json":null}clone(e={}){const t=e.method||this.method,r=e.url||this.url,o=e.responseType||this.responseType,u=void 0!==e.body?e.body:this.body,l=void 0!==e.withCredentials?e.withCredentials:this.withCredentials,g=void 0!==e.reportProgress?e.reportProgress:this.reportProgress;let _=e.headers||this.headers,b=e.params||this.params;const S=e.context??this.context;return void 0!==e.setHeaders&&(_=Object.keys(e.setHeaders).reduce((P,W)=>P.set(W,e.setHeaders[W]),_)),e.setParams&&(b=Object.keys(e.setParams).reduce((P,W)=>P.set(W,e.setParams[W]),b)),new B_(t,r,u,{params:b,headers:_,context:S,reportProgress:g,responseType:o,withCredentials:l})}}var Kr=(()=>((Kr=Kr||{})[Kr.Sent=0]="Sent",Kr[Kr.UploadProgress=1]="UploadProgress",Kr[Kr.ResponseHeader=2]="ResponseHeader",Kr[Kr.DownloadProgress=3]="DownloadProgress",Kr[Kr.Response=4]="Response",Kr[Kr.User=5]="User",Kr))();class LT{constructor(e,t=200,r="OK"){this.headers=e.headers||new cl,this.status=void 0!==e.status?e.status:t,this.statusText=e.statusText||r,this.url=e.url||null,this.ok=this.status>=200&&this.status<300}}class UT extends LT{constructor(e={}){super(e),this.type=Kr.ResponseHeader}clone(e={}){return new UT({headers:e.headers||this.headers,status:void 0!==e.status?e.status:this.status,statusText:e.statusText||this.statusText,url:e.url||this.url||void 0})}}class FE extends LT{constructor(e={}){super(e),this.type=Kr.Response,this.body=void 0!==e.body?e.body:null}clone(e={}){return new FE({body:void 0!==e.body?e.body:this.body,headers:e.headers||this.headers,status:void 0!==e.status?e.status:this.status,statusText:e.statusText||this.statusText,url:e.url||this.url||void 0})}}class Hx extends LT{constructor(e){super(e,0,"Unknown Error"),this.name="HttpErrorResponse",this.ok=!1,this.message=this.status>=200&&this.status<300?`Http failure during parsing for ${e.url||"(unknown url)"}`:`Http failure response for ${e.url||"(unknown url)"}: ${e.status} ${e.statusText}`,this.error=e.error||null}}function VT(n,e){return{body:e,headers:n.headers,context:n.context,observe:n.observe,params:n.params,reportProgress:n.reportProgress,responseType:n.responseType,withCredentials:n.withCredentials}}let TP=(()=>{class n{constructor(t){this.handler=t}request(t,r,o={}){let u;if(t instanceof B_)u=t;else{let _,b;_=o.headers instanceof cl?o.headers:new cl(o.headers),o.params&&(b=o.params instanceof Jd?o.params:new Jd({fromObject:o.params})),u=new B_(t,r,void 0!==o.body?o.body:null,{headers:_,context:o.context,params:b,reportProgress:o.reportProgress,responseType:o.responseType||"json",withCredentials:o.withCredentials})}const l=Qe(u).pipe(ca(_=>this.handler.handle(_)));if(t instanceof B_||"events"===o.observe)return l;const g=l.pipe(Wi(_=>_ instanceof FE));switch(o.observe||"body"){case"body":switch(u.responseType){case"arraybuffer":return g.pipe((0,_t.U)(_=>{if(null!==_.body&&!(_.body instanceof ArrayBuffer))throw new Error("Response is not an ArrayBuffer.");return _.body}));case"blob":return g.pipe((0,_t.U)(_=>{if(null!==_.body&&!(_.body instanceof Blob))throw new Error("Response is not a Blob.");return _.body}));case"text":return g.pipe((0,_t.U)(_=>{if(null!==_.body&&"string"!=typeof _.body)throw new Error("Response is not a string.");return _.body}));default:return g.pipe((0,_t.U)(_=>_.body))}case"response":return g;default:throw new Error(`Unreachable: unhandled observe type ${o.observe}}`)}}delete(t,r={}){return this.request("DELETE",t,r)}get(t,r={}){return this.request("GET",t,r)}head(t,r={}){return this.request("HEAD",t,r)}jsonp(t,r){return this.request("JSONP",t,{params:(new Jd).append(r,"JSONP_CALLBACK"),observe:"body",responseType:"json"})}options(t,r={}){return this.request("OPTIONS",t,r)}patch(t,r,o={}){return this.request("PATCH",t,VT(o,r))}post(t,r,o={}){return this.request("POST",t,VT(o,r))}put(t,r,o={}){return this.request("PUT",t,VT(o,r))}}return n.\u0275fac=function(t){return new(t||n)(p.LFG(OE))},n.\u0275prov=p.Yz7({token:n,factory:n.\u0275fac}),n})();function zx(n,e){return e(n)}function SP(n,e){return(t,r)=>e.intercept(t,{handle:o=>n(o,r)})}const xP=new p.OlP("HTTP_INTERCEPTORS"),$_=new p.OlP("HTTP_INTERCEPTOR_FNS");function MP(){let n=null;return(e,t)=>(null===n&&(n=((0,p.f3M)(xP,{optional:!0})??[]).reduceRight(SP,zx)),n(e,t))}let Wx=(()=>{class n extends OE{constructor(t,r){super(),this.backend=t,this.injector=r,this.chain=null}handle(t){if(null===this.chain){const r=Array.from(new Set(this.injector.get($_)));this.chain=r.reduceRight((o,u)=>function AP(n,e,t){return(r,o)=>t.runInContext(()=>e(r,u=>n(u,o)))}(o,u,this.injector),zx)}return this.chain(t,r=>this.backend.handle(r))}}return n.\u0275fac=function(t){return new(t||n)(p.LFG(FT),p.LFG(p.lqb))},n.\u0275prov=p.Yz7({token:n,factory:n.\u0275fac}),n})();const OP=/^\)\]\}',?\n/;let qx=(()=>{class n{constructor(t){this.xhrFactory=t}handle(t){if("JSONP"===t.method)throw new Error("Attempted to construct Jsonp request without HttpClientJsonpModule installed.");return new dr.y(r=>{const o=this.xhrFactory.build();if(o.open(t.method,t.urlWithParams),t.withCredentials&&(o.withCredentials=!0),t.headers.forEach((J,oe)=>o.setRequestHeader(J,oe.join(","))),t.headers.has("Accept")||o.setRequestHeader("Accept","application/json, text/plain, */*"),!t.headers.has("Content-Type")){const J=t.detectContentTypeHeader();null!==J&&o.setRequestHeader("Content-Type",J)}if(t.responseType){const J=t.responseType.toLowerCase();o.responseType="json"!==J?J:"text"}const u=t.serializeBody();let l=null;const g=()=>{if(null!==l)return l;const J=o.statusText||"OK",oe=new cl(o.getAllResponseHeaders()),ke=function kP(n){return"responseURL"in n&&n.responseURL?n.responseURL:/^X-Request-URL:/m.test(n.getAllResponseHeaders())?n.getResponseHeader("X-Request-URL"):null}(o)||t.url;return l=new UT({headers:oe,status:o.status,statusText:J,url:ke}),l},_=()=>{let{headers:J,status:oe,statusText:ke,url:je}=g(),vt=null;204!==oe&&(vt=typeof o.response>"u"?o.responseText:o.response),0===oe&&(oe=vt?200:0);let zt=oe>=200&&oe<300;if("json"===t.responseType&&"string"==typeof vt){const Lt=vt;vt=vt.replace(OP,"");try{vt=""!==vt?JSON.parse(vt):null}catch(Ut){vt=Lt,zt&&(zt=!1,vt={error:Ut,text:vt})}}zt?(r.next(new FE({body:vt,headers:J,status:oe,statusText:ke,url:je||void 0})),r.complete()):r.error(new Hx({error:vt,headers:J,status:oe,statusText:ke,url:je||void 0}))},b=J=>{const{url:oe}=g(),ke=new Hx({error:J,status:o.status||0,statusText:o.statusText||"Unknown Error",url:oe||void 0});r.error(ke)};let S=!1;const P=J=>{S||(r.next(g()),S=!0);let oe={type:Kr.DownloadProgress,loaded:J.loaded};J.lengthComputable&&(oe.total=J.total),"text"===t.responseType&&!!o.responseText&&(oe.partialText=o.responseText),r.next(oe)},W=J=>{let oe={type:Kr.UploadProgress,loaded:J.loaded};J.lengthComputable&&(oe.total=J.total),r.next(oe)};return o.addEventListener("load",_),o.addEventListener("error",b),o.addEventListener("timeout",b),o.addEventListener("abort",b),t.reportProgress&&(o.addEventListener("progress",P),null!==u&&o.upload&&o.upload.addEventListener("progress",W)),o.send(u),r.next({type:Kr.Sent}),()=>{o.removeEventListener("error",b),o.removeEventListener("abort",b),o.removeEventListener("load",_),o.removeEventListener("timeout",b),t.reportProgress&&(o.removeEventListener("progress",P),null!==u&&o.upload&&o.upload.removeEventListener("progress",W)),o.readyState!==o.DONE&&o.abort()}})}}return n.\u0275fac=function(t){return new(t||n)(p.LFG(Zs))},n.\u0275prov=p.Yz7({token:n,factory:n.\u0275fac}),n})();const BT=new p.OlP("XSRF_ENABLED"),Zx="XSRF-TOKEN",Kx=new p.OlP("XSRF_COOKIE_NAME",{providedIn:"root",factory:()=>Zx}),Yx="X-XSRF-TOKEN",Qx=new p.OlP("XSRF_HEADER_NAME",{providedIn:"root",factory:()=>Yx});class Xx{}let FP=(()=>{class n{constructor(t,r,o){this.doc=t,this.platform=r,this.cookieName=o,this.lastCookieString="",this.lastToken=null,this.parseCount=0}getToken(){if("server"===this.platform)return null;const t=this.doc.cookie||"";return t!==this.lastCookieString&&(this.parseCount++,this.lastToken=Tr(t,this.cookieName),this.lastCookieString=t),this.lastToken}}return n.\u0275fac=function(t){return new(t||n)(p.LFG(ue),p.LFG(p.Lbi),p.LFG(Kx))},n.\u0275prov=p.Yz7({token:n,factory:n.\u0275fac}),n})();function LP(n,e){const t=n.url.toLowerCase();if(!(0,p.f3M)(BT)||"GET"===n.method||"HEAD"===n.method||t.startsWith("http://")||t.startsWith("https://"))return e(n);const r=(0,p.f3M)(Xx).getToken(),o=(0,p.f3M)(Qx);return null!=r&&!n.headers.has(o)&&(n=n.clone({headers:n.headers.set(o,r)})),e(n)}var Fr=(()=>((Fr=Fr||{})[Fr.Interceptors=0]="Interceptors",Fr[Fr.LegacyInterceptors=1]="LegacyInterceptors",Fr[Fr.CustomXsrfConfiguration=2]="CustomXsrfConfiguration",Fr[Fr.NoXsrfProtection=3]="NoXsrfProtection",Fr[Fr.JsonpSupport=4]="JsonpSupport",Fr[Fr.RequestsMadeViaParent=5]="RequestsMadeViaParent",Fr))();function Sm(n,e){return{\u0275kind:n,\u0275providers:e}}function UP(...n){const e=[TP,qx,Wx,{provide:OE,useExisting:Wx},{provide:FT,useExisting:qx},{provide:$_,useValue:LP,multi:!0},{provide:BT,useValue:!0},{provide:Xx,useClass:FP}];for(const t of n)e.push(...t.\u0275providers);return(0,p.MR2)(e)}const Jx=new p.OlP("LEGACY_INTERCEPTOR_FN");function BP({cookieName:n,headerName:e}){const t=[];return void 0!==n&&t.push({provide:Kx,useValue:n}),void 0!==e&&t.push({provide:Qx,useValue:e}),Sm(Fr.CustomXsrfConfiguration,t)}let $P=(()=>{class n{}return n.\u0275fac=function(t){return new(t||n)},n.\u0275mod=p.oAB({type:n}),n.\u0275inj=p.cJS({providers:[UP(Sm(Fr.LegacyInterceptors,[{provide:Jx,useFactory:MP},{provide:$_,useExisting:Jx,multi:!0}]),BP({cookieName:Zx,headerName:Yx}))]}),n})();k(552);class tM{constructor(){return(0,yn.vb)("auth")}}class HT{constructor(e){return e}}const nM="firestore",zT=new p.OlP("angularfire2.firestore-instances");function qP(n){return(e,t)=>{const r=e.runOutsideAngular(()=>n(t));return new HT(r)}}const ZP={provide:class WP{constructor(){return(0,yn.vb)(nM)}},deps:[[new p.FiY,zT]]},KP={provide:HT,useFactory:function GP(n,e){const t=(0,yn.JM)(nM,n,e);return t&&new HT(t)},deps:[[new p.FiY,zT],Cm]};let YP=(()=>{class n{constructor(){(0,Jf.KN)("angularfire",yn.q4.full,"fst")}}return n.\u0275fac=function(t){return new(t||n)},n.\u0275mod=p.oAB({type:n}),n.\u0275inj=p.cJS({providers:[KP,ZP]}),n})();const XP=(0,yn.u3)(sR,!0),WT={production:!1,firebase:{apiKey:"AIzaSyBTP5EXWpF-HR5ldSogzsur1P4XKrAxELk",authDomain:"ecommerce-app-844b0.firebaseapp.com",databaseURL:"https://ecommerce-app-844b0-default-rtdb.firebaseio.com",projectId:"ecommerce-app-844b0",storageBucket:"ecommerce-app-844b0.appspot.com",messagingSenderId:"851874310579",appId:"1:851874310579:web:79a41254bfaadab86443c6",measurementId:"G-3C77VBVJLH"}},JP=[{path:"",redirectTo:"product",pathMatch:"full"},{path:"product",component:U_},{path:"cart",component:V_},{path:"footer",component:Jl}];class Am{}Am.\u0275fac=function(e){return new(e||Am)},Am.\u0275mod=p.oAB({type:Am,bootstrap:[du]}),Am.\u0275inj=p.cJS({providers:[{provide:Zi.Dh,useValue:WT.firebase}],imports:[ia,$P,xy,ns,xy.forRoot(JP),function fN(n,...e){return{ngModule:hN,providers:[{provide:gT,useFactory:dN(n),multi:!0,deps:[p.R0b,p.zs3,yn.HU,...e]}]}}(()=>pN(WT.firebase)),function QP(n,...e){return{ngModule:YP,providers:[{provide:zT,useFactory:qP(n),multi:!0,deps:[p.R0b,p.zs3,yn.HU,nx,[new p.FiY,tM],[new p.FiY,NE],...e]}]}}(()=>XP()),Zi.hO,Zi.hO.initializeApp(WT.firebase)]}),ri().bootstrapModule(Am).catch(n=>console.error(n))},9751:(lt,be,k)=>{k.d(be,{y:()=>de});var p=k(2961),B=k(727),N=k(8822),ne=k(9635),ae=k(2416),ue=k(576),me=k(2806);let de=(()=>{class Q{constructor(Se){Se&&(this._subscribe=Se)}lift(Se){const ze=new Q;return ze.source=this,ze.operator=Se,ze}subscribe(Se,ze,nt){const ge=function H(Q){return Q&&Q instanceof p.Lv||function z(Q){return Q&&(0,ue.m)(Q.next)&&(0,ue.m)(Q.error)&&(0,ue.m)(Q.complete)}(Q)&&(0,B.Nn)(Q)}(Se)?Se:new p.Hp(Se,ze,nt);return(0,me.x)(()=>{const{operator:Ee,source:we}=this;ge.add(Ee?Ee.call(ge,we):we?this._subscribe(ge):this._trySubscribe(ge))}),ge}_trySubscribe(Se){try{return this._subscribe(Se)}catch(ze){Se.error(ze)}}forEach(Se,ze){return new(ze=pe(ze))((nt,ge)=>{const Ee=new p.Hp({next:we=>{try{Se(we)}catch(Re){ge(Re),Ee.unsubscribe()}},error:ge,complete:nt});this.subscribe(Ee)})}_subscribe(Se){var ze;return null===(ze=this.source)||void 0===ze?void 0:ze.subscribe(Se)}[N.L](){return this}pipe(...Se){return(0,ne.U)(Se)(this)}toPromise(Se){return new(Se=pe(Se))((ze,nt)=>{let ge;this.subscribe(Ee=>ge=Ee,Ee=>nt(Ee),()=>ze(ge))})}}return Q.create=Ue=>new Q(Ue),Q})();function pe(Q){var Ue;return null!==(Ue=Q??ae.v.Promise)&&void 0!==Ue?Ue:Promise}},7579:(lt,be,k)=>{k.d(be,{x:()=>me});var p=k(9751),B=k(727);const ne=(0,k(3888).d)(pe=>function(){pe(this),this.name="ObjectUnsubscribedError",this.message="object unsubscribed"});var ae=k(8737),ue=k(2806);let me=(()=>{class pe extends p.y{constructor(){super(),this.closed=!1,this.currentObservers=null,this.observers=[],this.isStopped=!1,this.hasError=!1,this.thrownError=null}lift(H){const Q=new de(this,this);return Q.operator=H,Q}_throwIfClosed(){if(this.closed)throw new ne}next(H){(0,ue.x)(()=>{if(this._throwIfClosed(),!this.isStopped){this.currentObservers||(this.currentObservers=Array.from(this.observers));for(const Q of this.currentObservers)Q.next(H)}})}error(H){(0,ue.x)(()=>{if(this._throwIfClosed(),!this.isStopped){this.hasError=this.isStopped=!0,this.thrownError=H;const{observers:Q}=this;for(;Q.length;)Q.shift().error(H)}})}complete(){(0,ue.x)(()=>{if(this._throwIfClosed(),!this.isStopped){this.isStopped=!0;const{observers:H}=this;for(;H.length;)H.shift().complete()}})}unsubscribe(){this.isStopped=this.closed=!0,this.observers=this.currentObservers=null}get observed(){var H;return(null===(H=this.observers)||void 0===H?void 0:H.length)>0}_trySubscribe(H){return this._throwIfClosed(),super._trySubscribe(H)}_subscribe(H){return this._throwIfClosed(),this._checkFinalizedStatuses(H),this._innerSubscribe(H)}_innerSubscribe(H){const{hasError:Q,isStopped:Ue,observers:Se}=this;return Q||Ue?B.Lc:(this.currentObservers=null,Se.push(H),new B.w0(()=>{this.currentObservers=null,(0,ae.P)(Se,H)}))}_checkFinalizedStatuses(H){const{hasError:Q,thrownError:Ue,isStopped:Se}=this;Q?H.error(Ue):Se&&H.complete()}asObservable(){const H=new p.y;return H.source=this,H}}return pe.create=(z,H)=>new de(z,H),pe})();class de extends me{constructor(z,H){super(),this.destination=z,this.source=H}next(z){var H,Q;null===(Q=null===(H=this.destination)||void 0===H?void 0:H.next)||void 0===Q||Q.call(H,z)}error(z){var H,Q;null===(Q=null===(H=this.destination)||void 0===H?void 0:H.error)||void 0===Q||Q.call(H,z)}complete(){var z,H;null===(H=null===(z=this.destination)||void 0===z?void 0:z.complete)||void 0===H||H.call(z)}_subscribe(z){var H,Q;return null!==(Q=null===(H=this.source)||void 0===H?void 0:H.subscribe(z))&&void 0!==Q?Q:B.Lc}}},2961:(lt,be,k)=>{k.d(be,{Hp:()=>nt,Lv:()=>Q});var p=k(576),B=k(727),N=k(2416),ne=k(7849);function ae(){}const ue=pe("C",void 0,void 0);function pe(Pe,Ne,De){return{kind:Pe,value:Ne,error:De}}var z=k(3410),H=k(2806);class Q extends B.w0{constructor(Ne){super(),this.isStopped=!1,Ne?(this.destination=Ne,(0,B.Nn)(Ne)&&Ne.add(this)):this.destination=Re}static create(Ne,De,He){return new nt(Ne,De,He)}next(Ne){this.isStopped?we(function de(Pe){return pe("N",Pe,void 0)}(Ne),this):this._next(Ne)}error(Ne){this.isStopped?we(function me(Pe){return pe("E",void 0,Pe)}(Ne),this):(this.isStopped=!0,this._error(Ne))}complete(){this.isStopped?we(ue,this):(this.isStopped=!0,this._complete())}unsubscribe(){this.closed||(this.isStopped=!0,super.unsubscribe(),this.destination=null)}_next(Ne){this.destination.next(Ne)}_error(Ne){try{this.destination.error(Ne)}finally{this.unsubscribe()}}_complete(){try{this.destination.complete()}finally{this.unsubscribe()}}}const Ue=Function.prototype.bind;function Se(Pe,Ne){return Ue.call(Pe,Ne)}class ze{constructor(Ne){this.partialObserver=Ne}next(Ne){const{partialObserver:De}=this;if(De.next)try{De.next(Ne)}catch(He){ge(He)}}error(Ne){const{partialObserver:De}=this;if(De.error)try{De.error(Ne)}catch(He){ge(He)}else ge(Ne)}complete(){const{partialObserver:Ne}=this;if(Ne.complete)try{Ne.complete()}catch(De){ge(De)}}}class nt extends Q{constructor(Ne,De,He){let X;if(super(),(0,p.m)(Ne)||!Ne)X={next:Ne??void 0,error:De??void 0,complete:He??void 0};else{let ce;this&&N.v.useDeprecatedNextContext?(ce=Object.create(Ne),ce.unsubscribe=()=>this.unsubscribe(),X={next:Ne.next&&Se(Ne.next,ce),error:Ne.error&&Se(Ne.error,ce),complete:Ne.complete&&Se(Ne.complete,ce)}):X=Ne}this.destination=new ze(X)}}function ge(Pe){N.v.useDeprecatedSynchronousErrorHandling?(0,H.O)(Pe):(0,ne.h)(Pe)}function we(Pe,Ne){const{onStoppedNotification:De}=N.v;De&&z.z.setTimeout(()=>De(Pe,Ne))}const Re={closed:!0,next:ae,error:function Ee(Pe){throw Pe},complete:ae}},727:(lt,be,k)=>{k.d(be,{Lc:()=>ue,w0:()=>ae,Nn:()=>me});var p=k(576);const N=(0,k(3888).d)(pe=>function(H){pe(this),this.message=H?`${H.length} errors occurred during unsubscription:\n${H.map((Q,Ue)=>`${Ue+1}) ${Q.toString()}`).join("\n  ")}`:"",this.name="UnsubscriptionError",this.errors=H});var ne=k(8737);class ae{constructor(z){this.initialTeardown=z,this.closed=!1,this._parentage=null,this._finalizers=null}unsubscribe(){let z;if(!this.closed){this.closed=!0;const{_parentage:H}=this;if(H)if(this._parentage=null,Array.isArray(H))for(const Se of H)Se.remove(this);else H.remove(this);const{initialTeardown:Q}=this;if((0,p.m)(Q))try{Q()}catch(Se){z=Se instanceof N?Se.errors:[Se]}const{_finalizers:Ue}=this;if(Ue){this._finalizers=null;for(const Se of Ue)try{de(Se)}catch(ze){z=z??[],ze instanceof N?z=[...z,...ze.errors]:z.push(ze)}}if(z)throw new N(z)}}add(z){var H;if(z&&z!==this)if(this.closed)de(z);else{if(z instanceof ae){if(z.closed||z._hasParent(this))return;z._addParent(this)}(this._finalizers=null!==(H=this._finalizers)&&void 0!==H?H:[]).push(z)}}_hasParent(z){const{_parentage:H}=this;return H===z||Array.isArray(H)&&H.includes(z)}_addParent(z){const{_parentage:H}=this;this._parentage=Array.isArray(H)?(H.push(z),H):H?[H,z]:z}_removeParent(z){const{_parentage:H}=this;H===z?this._parentage=null:Array.isArray(H)&&(0,ne.P)(H,z)}remove(z){const{_finalizers:H}=this;H&&(0,ne.P)(H,z),z instanceof ae&&z._removeParent(this)}}ae.EMPTY=(()=>{const pe=new ae;return pe.closed=!0,pe})();const ue=ae.EMPTY;function me(pe){return pe instanceof ae||pe&&"closed"in pe&&(0,p.m)(pe.remove)&&(0,p.m)(pe.add)&&(0,p.m)(pe.unsubscribe)}function de(pe){(0,p.m)(pe)?pe():pe.unsubscribe()}},2416:(lt,be,k)=>{k.d(be,{v:()=>p});const p={onUnhandledError:null,onStoppedNotification:null,Promise:void 0,useDeprecatedSynchronousErrorHandling:!1,useDeprecatedNextContext:!1}},515:(lt,be,k)=>{k.d(be,{E:()=>B});const B=new(k(9751).y)(ae=>ae.complete())},8996:(lt,be,k)=>{k.d(be,{D:()=>Ne});var p=k(8421),B=k(5363),N=k(9468),ue=k(9751),de=k(2202),pe=k(576),z=k(9672);function Q(De,He){if(!De)throw new Error("Iterable cannot be null");return new ue.y(X=>{(0,z.f)(X,He,()=>{const ce=De[Symbol.asyncIterator]();(0,z.f)(X,He,()=>{ce.next().then(_e=>{_e.done?X.complete():X.next(_e.value)})},0,!0)})})}var Ue=k(3670),Se=k(8239),ze=k(1144),nt=k(6495),ge=k(2206),Ee=k(4532),we=k(3260);function Ne(De,He){return He?function Pe(De,He){if(null!=De){if((0,Ue.c)(De))return function ne(De,He){return(0,p.Xf)(De).pipe((0,N.R)(He),(0,B.Q)(He))}(De,He);if((0,ze.z)(De))return function me(De,He){return new ue.y(X=>{let ce=0;return He.schedule(function(){ce===De.length?X.complete():(X.next(De[ce++]),X.closed||this.schedule())})})}(De,He);if((0,Se.t)(De))return function ae(De,He){return(0,p.Xf)(De).pipe((0,N.R)(He),(0,B.Q)(He))}(De,He);if((0,ge.D)(De))return Q(De,He);if((0,nt.T)(De))return function H(De,He){return new ue.y(X=>{let ce;return(0,z.f)(X,He,()=>{ce=De[de.h](),(0,z.f)(X,He,()=>{let _e,K;try{({value:_e,done:K}=ce.next())}catch(Y){return void X.error(Y)}K?X.complete():X.next(_e)},0,!0)}),()=>(0,pe.m)(ce?.return)&&ce.return()})}(De,He);if((0,we.L)(De))return function Re(De,He){return Q((0,we.Q)(De),He)}(De,He)}throw(0,Ee.z)(De)}(De,He):(0,p.Xf)(De)}},8421:(lt,be,k)=>{k.d(be,{Xf:()=>Ue});var p=k(655),B=k(1144),N=k(8239),ne=k(9751),ae=k(3670),ue=k(2206),me=k(4532),de=k(6495),pe=k(3260),z=k(576),H=k(7849),Q=k(8822);function Ue(Pe){if(Pe instanceof ne.y)return Pe;if(null!=Pe){if((0,ae.c)(Pe))return function Se(Pe){return new ne.y(Ne=>{const De=Pe[Q.L]();if((0,z.m)(De.subscribe))return De.subscribe(Ne);throw new TypeError("Provided object does not correctly implement Symbol.observable")})}(Pe);if((0,B.z)(Pe))return function ze(Pe){return new ne.y(Ne=>{for(let De=0;De<Pe.length&&!Ne.closed;De++)Ne.next(Pe[De]);Ne.complete()})}(Pe);if((0,N.t)(Pe))return function nt(Pe){return new ne.y(Ne=>{Pe.then(De=>{Ne.closed||(Ne.next(De),Ne.complete())},De=>Ne.error(De)).then(null,H.h)})}(Pe);if((0,ue.D)(Pe))return Ee(Pe);if((0,de.T)(Pe))return function ge(Pe){return new ne.y(Ne=>{for(const De of Pe)if(Ne.next(De),Ne.closed)return;Ne.complete()})}(Pe);if((0,pe.L)(Pe))return function we(Pe){return Ee((0,pe.Q)(Pe))}(Pe)}throw(0,me.z)(Pe)}function Ee(Pe){return new ne.y(Ne=>{(function Re(Pe,Ne){var De,He,X,ce;return(0,p.mG)(this,void 0,void 0,function*(){try{for(De=(0,p.KL)(Pe);!(He=yield De.next()).done;)if(Ne.next(He.value),Ne.closed)return}catch(_e){X={error:_e}}finally{try{He&&!He.done&&(ce=De.return)&&(yield ce.call(De))}finally{if(X)throw X.error}}Ne.complete()})})(Pe,Ne).catch(De=>Ne.error(De))})}},6451:(lt,be,k)=>{k.d(be,{T:()=>ue});var p=k(8189),B=k(8421),N=k(515),ne=k(7669),ae=k(8996);function ue(...me){const de=(0,ne.yG)(me),pe=(0,ne._6)(me,1/0),z=me;return z.length?1===z.length?(0,B.Xf)(z[0]):(0,p.J)(pe)((0,ae.D)(z,de)):N.E}},5403:(lt,be,k)=>{k.d(be,{x:()=>B});var p=k(2961);function B(ne,ae,ue,me,de){return new N(ne,ae,ue,me,de)}class N extends p.Lv{constructor(ae,ue,me,de,pe,z){super(ae),this.onFinalize=pe,this.shouldUnsubscribe=z,this._next=ue?function(H){try{ue(H)}catch(Q){ae.error(Q)}}:super._next,this._error=de?function(H){try{de(H)}catch(Q){ae.error(Q)}finally{this.unsubscribe()}}:super._error,this._complete=me?function(){try{me()}catch(H){ae.error(H)}finally{this.unsubscribe()}}:super._complete}unsubscribe(){var ae;if(!this.shouldUnsubscribe||this.shouldUnsubscribe()){const{closed:ue}=this;super.unsubscribe(),!ue&&(null===(ae=this.onFinalize)||void 0===ae||ae.call(this))}}}},4004:(lt,be,k)=>{k.d(be,{U:()=>N});var p=k(4482),B=k(5403);function N(ne,ae){return(0,p.e)((ue,me)=>{let de=0;ue.subscribe((0,B.x)(me,pe=>{me.next(ne.call(ae,pe,de++))}))})}},8189:(lt,be,k)=>{k.d(be,{J:()=>N});var p=k(5577),B=k(4671);function N(ne=1/0){return(0,p.z)(B.y,ne)}},5577:(lt,be,k)=>{k.d(be,{z:()=>de});var p=k(4004),B=k(8421),N=k(4482),ne=k(9672),ae=k(5403),me=k(576);function de(pe,z,H=1/0){return(0,me.m)(z)?de((Q,Ue)=>(0,p.U)((Se,ze)=>z(Q,Se,Ue,ze))((0,B.Xf)(pe(Q,Ue))),H):("number"==typeof z&&(H=z),(0,N.e)((Q,Ue)=>function ue(pe,z,H,Q,Ue,Se,ze,nt){const ge=[];let Ee=0,we=0,Re=!1;const Pe=()=>{Re&&!ge.length&&!Ee&&z.complete()},Ne=He=>Ee<Q?De(He):ge.push(He),De=He=>{Se&&z.next(He),Ee++;let X=!1;(0,B.Xf)(H(He,we++)).subscribe((0,ae.x)(z,ce=>{Ue?.(ce),Se?Ne(ce):z.next(ce)},()=>{X=!0},void 0,()=>{if(X)try{for(Ee--;ge.length&&Ee<Q;){const ce=ge.shift();ze?(0,ne.f)(z,ze,()=>De(ce)):De(ce)}Pe()}catch(ce){z.error(ce)}}))};return pe.subscribe((0,ae.x)(z,Ne,()=>{Re=!0,Pe()})),()=>{nt?.()}}(Q,Ue,pe,H)))}},5363:(lt,be,k)=>{k.d(be,{Q:()=>ne});var p=k(9672),B=k(4482),N=k(5403);function ne(ae,ue=0){return(0,B.e)((me,de)=>{me.subscribe((0,N.x)(de,pe=>(0,p.f)(de,ae,()=>de.next(pe),ue),()=>(0,p.f)(de,ae,()=>de.complete(),ue),pe=>(0,p.f)(de,ae,()=>de.error(pe),ue)))})}},3099:(lt,be,k)=>{k.d(be,{B:()=>ae});var p=k(8421),B=k(7579),N=k(2961),ne=k(4482);function ae(me={}){const{connector:de=(()=>new B.x),resetOnError:pe=!0,resetOnComplete:z=!0,resetOnRefCountZero:H=!0}=me;return Q=>{let Ue,Se,ze,nt=0,ge=!1,Ee=!1;const we=()=>{Se?.unsubscribe(),Se=void 0},Re=()=>{we(),Ue=ze=void 0,ge=Ee=!1},Pe=()=>{const Ne=Ue;Re(),Ne?.unsubscribe()};return(0,ne.e)((Ne,De)=>{nt++,!Ee&&!ge&&we();const He=ze=ze??de();De.add(()=>{nt--,0===nt&&!Ee&&!ge&&(Se=ue(Pe,H))}),He.subscribe(De),!Ue&&nt>0&&(Ue=new N.Hp({next:X=>He.next(X),error:X=>{Ee=!0,we(),Se=ue(Re,pe,X),He.error(X)},complete:()=>{ge=!0,we(),Se=ue(Re,z),He.complete()}}),(0,p.Xf)(Ne).subscribe(Ue))})(Q)}}function ue(me,de,...pe){if(!0===de)return void me();if(!1===de)return;const z=new N.Hp({next:()=>{z.unsubscribe(),me()}});return de(...pe).subscribe(z)}},9468:(lt,be,k)=>{k.d(be,{R:()=>B});var p=k(4482);function B(N,ne=0){return(0,p.e)((ae,ue)=>{ue.add(N.schedule(()=>ae.subscribe(ue),ne))})}},8505:(lt,be,k)=>{k.d(be,{b:()=>ae});var p=k(576),B=k(4482),N=k(5403),ne=k(4671);function ae(ue,me,de){const pe=(0,p.m)(ue)||me||de?{next:ue,error:me,complete:de}:ue;return pe?(0,B.e)((z,H)=>{var Q;null===(Q=pe.subscribe)||void 0===Q||Q.call(pe);let Ue=!0;z.subscribe((0,N.x)(H,Se=>{var ze;null===(ze=pe.next)||void 0===ze||ze.call(pe,Se),H.next(Se)},()=>{var Se;Ue=!1,null===(Se=pe.complete)||void 0===Se||Se.call(pe),H.complete()},Se=>{var ze;Ue=!1,null===(ze=pe.error)||void 0===ze||ze.call(pe,Se),H.error(Se)},()=>{var Se,ze;Ue&&(null===(Se=pe.unsubscribe)||void 0===Se||Se.call(pe)),null===(ze=pe.finalize)||void 0===ze||ze.call(pe)}))}):ne.y}},4408:(lt,be,k)=>{k.d(be,{o:()=>ae});var p=k(727);class B extends p.w0{constructor(me,de){super()}schedule(me,de=0){return this}}const N={setInterval(ue,me,...de){const{delegate:pe}=N;return pe?.setInterval?pe.setInterval(ue,me,...de):setInterval(ue,me,...de)},clearInterval(ue){const{delegate:me}=N;return(me?.clearInterval||clearInterval)(ue)},delegate:void 0};var ne=k(8737);class ae extends B{constructor(me,de){super(me,de),this.scheduler=me,this.work=de,this.pending=!1}schedule(me,de=0){var pe;if(this.closed)return this;this.state=me;const z=this.id,H=this.scheduler;return null!=z&&(this.id=this.recycleAsyncId(H,z,de)),this.pending=!0,this.delay=de,this.id=null!==(pe=this.id)&&void 0!==pe?pe:this.requestAsyncId(H,this.id,de),this}requestAsyncId(me,de,pe=0){return N.setInterval(me.flush.bind(me,this),pe)}recycleAsyncId(me,de,pe=0){if(null!=pe&&this.delay===pe&&!1===this.pending)return de;null!=de&&N.clearInterval(de)}execute(me,de){if(this.closed)return new Error("executing a cancelled action");this.pending=!1;const pe=this._execute(me,de);if(pe)return pe;!1===this.pending&&null!=this.id&&(this.id=this.recycleAsyncId(this.scheduler,this.id,null))}_execute(me,de){let z,pe=!1;try{this.work(me)}catch(H){pe=!0,z=H||new Error("Scheduled action threw falsy error")}if(pe)return this.unsubscribe(),z}unsubscribe(){if(!this.closed){const{id:me,scheduler:de}=this,{actions:pe}=de;this.work=this.state=this.scheduler=null,this.pending=!1,(0,ne.P)(pe,this),null!=me&&(this.id=this.recycleAsyncId(de,me,null)),this.delay=null,super.unsubscribe()}}}},7565:(lt,be,k)=>{k.d(be,{v:()=>N});var p=k(6063);class B{constructor(ae,ue=B.now){this.schedulerActionCtor=ae,this.now=ue}schedule(ae,ue=0,me){return new this.schedulerActionCtor(this,ae).schedule(me,ue)}}B.now=p.l.now;class N extends B{constructor(ae,ue=B.now){super(ae,ue),this.actions=[],this._active=!1}flush(ae){const{actions:ue}=this;if(this._active)return void ue.push(ae);let me;this._active=!0;do{if(me=ae.execute(ae.state,ae.delay))break}while(ae=ue.shift());if(this._active=!1,me){for(;ae=ue.shift();)ae.unsubscribe();throw me}}}},4986:(lt,be,k)=>{k.d(be,{z:()=>N});var p=k(4408);const N=new(k(7565).v)(p.o)},6063:(lt,be,k)=>{k.d(be,{l:()=>p});const p={now:()=>(p.delegate||Date).now(),delegate:void 0}},3410:(lt,be,k)=>{k.d(be,{z:()=>p});const p={setTimeout(B,N,...ne){const{delegate:ae}=p;return ae?.setTimeout?ae.setTimeout(B,N,...ne):setTimeout(B,N,...ne)},clearTimeout(B){const{delegate:N}=p;return(N?.clearTimeout||clearTimeout)(B)},delegate:void 0}},2202:(lt,be,k)=>{k.d(be,{h:()=>B});const B=function p(){return"function"==typeof Symbol&&Symbol.iterator?Symbol.iterator:"@@iterator"}()},8822:(lt,be,k)=>{k.d(be,{L:()=>p});const p="function"==typeof Symbol&&Symbol.observable||"@@observable"},7669:(lt,be,k)=>{k.d(be,{_6:()=>ue,jO:()=>ne,yG:()=>ae});var p=k(576);function N(me){return me[me.length-1]}function ne(me){return(0,p.m)(N(me))?me.pop():void 0}function ae(me){return function B(me){return me&&(0,p.m)(me.schedule)}(N(me))?me.pop():void 0}function ue(me,de){return"number"==typeof N(me)?me.pop():de}},8737:(lt,be,k)=>{function p(B,N){if(B){const ne=B.indexOf(N);0<=ne&&B.splice(ne,1)}}k.d(be,{P:()=>p})},3888:(lt,be,k)=>{function p(B){const ne=B(ae=>{Error.call(ae),ae.stack=(new Error).stack});return ne.prototype=Object.create(Error.prototype),ne.prototype.constructor=ne,ne}k.d(be,{d:()=>p})},2806:(lt,be,k)=>{k.d(be,{O:()=>ne,x:()=>N});var p=k(2416);let B=null;function N(ae){if(p.v.useDeprecatedSynchronousErrorHandling){const ue=!B;if(ue&&(B={errorThrown:!1,error:null}),ae(),ue){const{errorThrown:me,error:de}=B;if(B=null,me)throw de}}else ae()}function ne(ae){p.v.useDeprecatedSynchronousErrorHandling&&B&&(B.errorThrown=!0,B.error=ae)}},9672:(lt,be,k)=>{function p(B,N,ne,ae=0,ue=!1){const me=N.schedule(function(){ne(),ue?B.add(this.schedule(null,ae)):this.unsubscribe()},ae);if(B.add(me),!ue)return me}k.d(be,{f:()=>p})},4671:(lt,be,k)=>{function p(B){return B}k.d(be,{y:()=>p})},1144:(lt,be,k)=>{k.d(be,{z:()=>p});const p=B=>B&&"number"==typeof B.length&&"function"!=typeof B},2206:(lt,be,k)=>{k.d(be,{D:()=>B});var p=k(576);function B(N){return Symbol.asyncIterator&&(0,p.m)(N?.[Symbol.asyncIterator])}},576:(lt,be,k)=>{function p(B){return"function"==typeof B}k.d(be,{m:()=>p})},3670:(lt,be,k)=>{k.d(be,{c:()=>N});var p=k(8822),B=k(576);function N(ne){return(0,B.m)(ne[p.L])}},6495:(lt,be,k)=>{k.d(be,{T:()=>N});var p=k(2202),B=k(576);function N(ne){return(0,B.m)(ne?.[p.h])}},8239:(lt,be,k)=>{k.d(be,{t:()=>B});var p=k(576);function B(N){return(0,p.m)(N?.then)}},3260:(lt,be,k)=>{k.d(be,{L:()=>ne,Q:()=>N});var p=k(655),B=k(576);function N(ae){return(0,p.FC)(this,arguments,function*(){const me=ae.getReader();try{for(;;){const{value:de,done:pe}=yield(0,p.qq)(me.read());if(pe)return yield(0,p.qq)(void 0);yield yield(0,p.qq)(de)}}finally{me.releaseLock()}})}function ne(ae){return(0,B.m)(ae?.getReader)}},4482:(lt,be,k)=>{k.d(be,{A:()=>B,e:()=>N});var p=k(576);function B(ne){return(0,p.m)(ne?.lift)}function N(ne){return ae=>{if(B(ae))return ae.lift(function(ue){try{return ne(ue,this)}catch(me){this.error(me)}});throw new TypeError("Unable to lift unknown Observable type")}}},9635:(lt,be,k)=>{k.d(be,{U:()=>N,z:()=>B});var p=k(4671);function B(...ne){return N(ne)}function N(ne){return 0===ne.length?p.y:1===ne.length?ne[0]:function(ue){return ne.reduce((me,de)=>de(me),ue)}}},7849:(lt,be,k)=>{k.d(be,{h:()=>N});var p=k(2416),B=k(3410);function N(ne){B.z.setTimeout(()=>{const{onUnhandledError:ae}=p.v;if(!ae)throw ne;ae(ne)})}},4532:(lt,be,k)=>{function p(B){return new TypeError(`You provided ${null!==B&&"object"==typeof B?"an invalid object":`'${B}'`} where a stream was expected. You can provide an Observable, Promise, ReadableStream, Array, AsyncIterable, or Iterable.`)}k.d(be,{z:()=>p})},655:(lt,be,k)=>{function ne(K,Y){var he={};for(var re in K)Object.prototype.hasOwnProperty.call(K,re)&&Y.indexOf(re)<0&&(he[re]=K[re]);if(null!=K&&"function"==typeof Object.getOwnPropertySymbols){var Le=0;for(re=Object.getOwnPropertySymbols(K);Le<re.length;Le++)Y.indexOf(re[Le])<0&&Object.prototype.propertyIsEnumerable.call(K,re[Le])&&(he[re[Le]]=K[re[Le]])}return he}function de(K,Y,he,re){return new(he||(he=Promise))(function(Fe,dt){function Jt(Vt){try{It(re.next(Vt))}catch(pt){dt(pt)}}function un(Vt){try{It(re.throw(Vt))}catch(pt){dt(pt)}}function It(Vt){Vt.done?Fe(Vt.value):function Le(Fe){return Fe instanceof he?Fe:new he(function(dt){dt(Fe)})}(Vt.value).then(Jt,un)}It((re=re.apply(K,Y||[])).next())})}function ge(K){return this instanceof ge?(this.v=K,this):new ge(K)}function Ee(K,Y,he){if(!Symbol.asyncIterator)throw new TypeError("Symbol.asyncIterator is not defined.");var Le,re=he.apply(K,Y||[]),Fe=[];return Le={},dt("next"),dt("throw"),dt("return"),Le[Symbol.asyncIterator]=function(){return this},Le;function dt(Xt){re[Xt]&&(Le[Xt]=function(ir){return new Promise(function(Wt,gt){Fe.push([Xt,ir,Wt,gt])>1||Jt(Xt,ir)})})}function Jt(Xt,ir){try{!function un(Xt){Xt.value instanceof ge?Promise.resolve(Xt.value.v).then(It,Vt):pt(Fe[0][2],Xt)}(re[Xt](ir))}catch(Wt){pt(Fe[0][3],Wt)}}function It(Xt){Jt("next",Xt)}function Vt(Xt){Jt("throw",Xt)}function pt(Xt,ir){Xt(ir),Fe.shift(),Fe.length&&Jt(Fe[0][0],Fe[0][1])}}function Re(K){if(!Symbol.asyncIterator)throw new TypeError("Symbol.asyncIterator is not defined.");var he,Y=K[Symbol.asyncIterator];return Y?Y.call(K):(K=function Q(K){var Y="function"==typeof Symbol&&Symbol.iterator,he=Y&&K[Y],re=0;if(he)return he.call(K);if(K&&"number"==typeof K.length)return{next:function(){return K&&re>=K.length&&(K=void 0),{value:K&&K[re++],done:!K}}};throw new TypeError(Y?"Object is not iterable.":"Symbol.iterator is not defined.")}(K),he={},re("next"),re("throw"),re("return"),he[Symbol.asyncIterator]=function(){return this},he);function re(Fe){he[Fe]=K[Fe]&&function(dt){return new Promise(function(Jt,un){!function Le(Fe,dt,Jt,un){Promise.resolve(un).then(function(It){Fe({value:It,done:Jt})},dt)}(Jt,un,(dt=K[Fe](dt)).done,dt.value)})}}}k.d(be,{FC:()=>Ee,KL:()=>Re,_T:()=>ne,mG:()=>de,qq:()=>ge})},4650:(lt,be,k)=>{k.d(be,{$8M:()=>Tl,$Z:()=>UD,AFp:()=>Vw,ALo:()=>lw,AaK:()=>de,BQk:()=>cf,CHM:()=>ih,CRH:()=>Wv,CZH:()=>Zg,CqO:()=>iv,D6c:()=>qd,EJc:()=>u_,EpF:()=>nv,F4k:()=>md,FYo:()=>p0,FiY:()=>Ni,GfV:()=>m0,JOm:()=>gi,KtG:()=>ml,LFG:()=>$e,LSH:()=>Mp,Lbi:()=>jw,Lck:()=>nr,MMx:()=>Cu,MR2:()=>eD,NdJ:()=>yd,OlP:()=>on,Oqu:()=>yg,P3R:()=>a0,PXZ:()=>nm,Q6J:()=>rf,QGY:()=>rv,QP$:()=>Rn,Qsj:()=>lD,R0b:()=>fs,RDi:()=>$E,Rgc:()=>xu,SBq:()=>zh,Sil:()=>Yg,Suo:()=>co,TTD:()=>Gs,TgZ:()=>af,X6Q:()=>rl,XFs:()=>Je,Xpm:()=>ho,Xts:()=>cy,Y36:()=>Xl,YKP:()=>ew,YNc:()=>fd,Yjl:()=>po,Yz7:()=>gt,Z0I:()=>En,ZZ4:()=>hm,_UZ:()=>uf,_Vd:()=>Zl,_c5:()=>nE,_uU:()=>bd,aQg:()=>fm,c2e:()=>Zr,cJS:()=>Yr,cg1:()=>bg,dDg:()=>ku,dqk:()=>bt,eFA:()=>f_,eoX:()=>l_,f3M:()=>Ke,g9A:()=>$w,h0i:()=>uo,hGG:()=>Hb,hij:()=>yf,iGM:()=>Fd,ifc:()=>Ae,ip1:()=>Uw,jDz:()=>qr,kL8:()=>xI,lG2:()=>Ta,lcZ:()=>Au,lqb:()=>Cc,lri:()=>zd,n5z:()=>sc,oAB:()=>fo,oxw:()=>sv,q4F:()=>y0,qLn:()=>Wh,qZA:()=>og,rWj:()=>Ou,sBO:()=>Xw,sIi:()=>Rc,s_b:()=>Bg,soG:()=>$d,tb:()=>o_,tp0:()=>D,uIk:()=>ig,vHH:()=>ge,vpe:()=>Vo,wAp:()=>Dt,xp6:()=>Cy,ynx:()=>gd,z2F:()=>jf,zSh:()=>dy,zs3:()=>Sc});var p=k(7579),B=k(727),N=k(9751),ne=k(6451),ae=k(3099);function ue(i){for(let s in i)if(i[s]===ue)return s;throw Error("Could not find renamed property on target object.")}function de(i){if("string"==typeof i)return i;if(Array.isArray(i))return"["+i.map(de).join(", ")+"]";if(null==i)return""+i;if(i.overriddenName)return`${i.overriddenName}`;if(i.name)return`${i.name}`;const s=i.toString();if(null==s)return""+s;const a=s.indexOf("\n");return-1===a?s:s.substring(0,a)}function pe(i,s){return null==i||""===i?null===s?"":s:null==s||""===s?i:i+" "+s}const z=ue({__forward_ref__:ue});function H(i){return i.__forward_ref__=H,i.toString=function(){return de(this())},i}function Q(i){return Ue(i)?i():i}function Ue(i){return"function"==typeof i&&i.hasOwnProperty(z)&&i.__forward_ref__===H}function Se(i){return i&&!!i.\u0275providers}const nt="https://g.co/ng/security#xss";class ge extends Error{constructor(s,a){super(function Ee(i,s){return`NG0${Math.abs(i)}${s?": "+s.trim():""}`}(s,a)),this.code=s}}function we(i){return"string"==typeof i?i:null==i?"":String(i)}function He(i,s){throw new ge(-201,!1)}function Vt(i,s){null==i&&function pt(i,s,a,c){throw new Error(`ASSERTION ERROR: ${i}`+(null==c?"":` [Expected=> ${a} ${c} ${s} <=Actual]`))}(s,i,null,"!=")}function gt(i){return{token:i.token,providedIn:i.providedIn||null,factory:i.factory,value:void 0}}function Yr(i){return{providers:i.providers||[],imports:i.imports||[]}}function gr(i){return Ui(i,Qr)||Ui(i,ln)}function En(i){return null!==gr(i)}function Ui(i,s){return i.hasOwnProperty(s)?i[s]:null}function Fn(i){return i&&(i.hasOwnProperty(bi)||i.hasOwnProperty(sr))?i[bi]:null}const Qr=ue({\u0275prov:ue}),bi=ue({\u0275inj:ue}),ln=ue({ngInjectableDef:ue}),sr=ue({ngInjectorDef:ue});var Je=(()=>((Je=Je||{})[Je.Default=0]="Default",Je[Je.Host=1]="Host",Je[Je.Self=2]="Self",Je[Je.SkipSelf=4]="SkipSelf",Je[Je.Optional=8]="Optional",Je))();let or;function Ln(i){const s=or;return or=i,s}function Un(i,s,a){const c=gr(i);return c&&"root"==c.providedIn?void 0===c.value?c.value=c.factory():c.value:a&Je.Optional?null:void 0!==s?s:void He(de(i))}const bt=(()=>typeof globalThis<"u"&&globalThis||typeof global<"u"&&global||typeof window<"u"&&window||typeof self<"u"&&typeof WorkerGlobalScope<"u"&&self instanceof WorkerGlobalScope&&self)(),Kn={},Dn="__NG_DI_FLAG__",Xr="ngTempTokenPath",Ci=/\n/gm,Ti="__source";let jt;function br(i){const s=jt;return jt=i,s}function Mn(i,s=Je.Default){if(void 0===jt)throw new ge(-203,!1);return null===jt?Un(i,void 0,s):jt.get(i,s&Je.Optional?null:void 0,s)}function $e(i,s=Je.Default){return(function mr(){return or}()||Mn)(Q(i),s)}function Ke(i,s=Je.Default){return $e(i,yt(s))}function yt(i){return typeof i>"u"||"number"==typeof i?i:0|(i.optional&&8)|(i.host&&1)|(i.self&&2)|(i.skipSelf&&4)}function wt(i){const s=[];for(let a=0;a<i.length;a++){const c=Q(i[a]);if(Array.isArray(c)){if(0===c.length)throw new ge(900,!1);let d,h=Je.Default;for(let y=0;y<c.length;y++){const I=c[y],E=j(I);"number"==typeof E?-1===E?d=I.token:h|=E:d=I}s.push($e(d,h))}else s.push($e(c))}return s}function Kt(i,s){return i[Dn]=s,i.prototype[Dn]=s,i}function j(i){return i[Dn]}function U(i){return{toString:i}.toString()}var R=(()=>((R=R||{})[R.OnPush=0]="OnPush",R[R.Default=1]="Default",R))(),Ae=(()=>{return(i=Ae||(Ae={}))[i.Emulated=0]="Emulated",i[i.None=2]="None",i[i.ShadowDom=3]="ShadowDom",Ae;var i})();const it={},We=[],xt=ue({\u0275cmp:ue}),ut=ue({\u0275dir:ue}),gn=ue({\u0275pipe:ue}),ar=ue({\u0275mod:ue}),Tt=ue({\u0275fac:ue}),Cr=ue({__NG_ELEMENT_ID__:ue});let Bu=0;function ho(i){return U(()=>{const a=!0===i.standalone,c={},d={type:i.type,providersResolver:null,decls:i.decls,vars:i.vars,factory:null,template:i.template||null,consts:i.consts||null,ngContentSelectors:i.ngContentSelectors,hostBindings:i.hostBindings||null,hostVars:i.hostVars||0,hostAttrs:i.hostAttrs||null,contentQueries:i.contentQueries||null,declaredInputs:c,inputs:null,outputs:null,exportAs:i.exportAs||null,onPush:i.changeDetection===R.OnPush,directiveDefs:null,pipeDefs:null,standalone:a,dependencies:a&&i.dependencies||null,getStandaloneInjector:null,selectors:i.selectors||We,viewQuery:i.viewQuery||null,features:i.features||null,data:i.data||{},encapsulation:i.encapsulation||Ae.Emulated,id:"c"+Bu++,styles:i.styles||We,_:null,setInput:null,schemas:i.schemas||null,tView:null,findHostDirectiveDefs:null,hostDirectives:null},h=i.dependencies,y=i.features;return d.inputs=Hu(i.inputs,c),d.outputs=Hu(i.outputs),y&&y.forEach(I=>I(d)),d.directiveDefs=h?()=>("function"==typeof h?h():h).map(ju).filter(ur):null,d.pipeDefs=h?()=>("function"==typeof h?h():h).map(yr).filter(ur):null,d})}function ju(i){return en(i)||_n(i)}function ur(i){return null!==i}function fo(i){return U(()=>({type:i.type,bootstrap:i.bootstrap||We,declarations:i.declarations||We,imports:i.imports||We,exports:i.exports||We,transitiveCompileScopes:null,schemas:i.schemas||null,id:i.id||null}))}function Hu(i,s){if(null==i)return it;const a={};for(const c in i)if(i.hasOwnProperty(c)){let d=i[c],h=d;Array.isArray(d)&&(h=d[1],d=d[0]),a[d]=c,s&&(s[d]=h)}return a}const Ta=ho;function po(i){return{type:i.type,name:i.name,factory:null,pure:!1!==i.pure,standalone:!0===i.standalone,onDestroy:i.type.prototype.ngOnDestroy||null}}function en(i){return i[xt]||null}function _n(i){return i[ut]||null}function yr(i){return i[gn]||null}function Rn(i){const s=en(i)||_n(i)||yr(i);return null!==s&&s.standalone}function Tr(i,s){const a=i[ar]||null;if(!a&&!0===s)throw new Error(`Type ${de(i)} does not have '\u0275mod' property.`);return a}function Jr(i){return Array.isArray(i)&&"object"==typeof i[1]}function ei(i){return Array.isArray(i)&&!0===i[1]}function es(i){return 0!=(4&i.flags)}function qo(i){return i.componentOffset>-1}function Gu(i){return 1==(1&i.flags)}function lr(i){return null!==i.template}function tp(i){return 0!=(256&i[2])}function zs(i,s){return i.hasOwnProperty(Tt)?i[Tt]:null}class Ws{constructor(s,a,c){this.previousValue=s,this.currentValue=a,this.firstChange=c}isFirstChange(){return this.firstChange}}function Gs(){return qs}function qs(i){return i.type.prototype.ngOnChanges&&(i.setInput=Ko),Pa}function Pa(){const i=Oa(this),s=i?.current;if(s){const a=i.previous;if(a===it)i.previous=s;else for(let c in s)a[c]=s[c];i.current=null,this.ngOnChanges(s)}}function Ko(i,s,a,c){const d=this.declaredInputs[a],h=Oa(i)||function Yo(i,s){return i[Zs]=s}(i,{previous:it,current:null}),y=h.current||(h.current={}),I=h.previous,E=I[d];y[d]=new Ws(E&&E.currentValue,s,I===it),i[c]=s}Gs.ngInherit=!0;const Zs="__ngSimpleChanges__";function Oa(i){return i[Zs]||null}function Sn(i){for(;Array.isArray(i);)i=i[0];return i}function Br(i,s){return Sn(s[i.index])}function La(i,s){return i.data[s]}function Xn(i,s){const a=s[i];return Jr(a)?a:a[0]}function vo(i){return 64==(64&i[2])}function di(i,s){return null==s?null:i[s]}function qu(i){i[18]=0}function Ks(i,s){i[5]+=s;let a=i,c=i[3];for(;null!==c&&(1===s&&1===a[5]||-1===s&&0===a[5]);)c[5]+=s,a=c,c=c[3]}const Rt={lFrame:cp(null),bindingsEnabled:!0};function gl(){return Rt.bindingsEnabled}function xe(){return Rt.lFrame.lView}function Yt(){return Rt.lFrame.tView}function ih(i){return Rt.lFrame.contextLView=i,i[8]}function ml(i){return Rt.lFrame.contextLView=null,i}function Jn(){let i=Ba();for(;null!==i&&64===i.type;)i=i.parent;return i}function Ba(){return Rt.lFrame.currentTNode}function Bi(i,s){const a=Rt.lFrame;a.currentTNode=i,a.isParent=s}function wo(){return Rt.lFrame.isParent}function $a(){Rt.lFrame.isParent=!1}function Mi(){return Rt.lFrame.bindingIndex++}function Ha(i,s){const a=Rt.lFrame;a.bindingIndex=a.bindingRootIndex=i,Ys(s)}function Ys(i){Rt.lFrame.currentDirectiveIndex=i}function oh(){return Rt.lFrame.currentQueryIndex}function Yu(i){Rt.lFrame.currentQueryIndex=i}function yl(i){const s=i[1];return 2===s.type?s.declTNode:1===s.type?i[6]:null}function ah(i,s,a){if(a&Je.SkipSelf){let d=s,h=i;for(;!(d=d.parent,null!==d||a&Je.Host||(d=yl(h),null===d||(h=h[15],10&d.type))););if(null===d)return!1;s=d,i=h}const c=Rt.lFrame=up();return c.currentTNode=s,c.lView=i,!0}function za(i){const s=up(),a=i[1];Rt.lFrame=s,s.currentTNode=a.firstChild,s.lView=i,s.tView=a,s.contextLView=i,s.bindingIndex=a.bindingStartIndex,s.inI18n=!1}function up(){const i=Rt.lFrame,s=null===i?null:i.child;return null===s?cp(i):s}function cp(i){const s={currentTNode:null,isParent:!0,lView:null,tView:null,selectedIndex:-1,contextLView:null,elementDepthCount:0,currentNamespace:null,currentDirectiveIndex:-1,bindingRootIndex:-1,bindingIndex:-1,currentQueryIndex:0,parent:i,child:null,inI18n:!1};return null!==i&&(i.child=s),s}function lp(){const i=Rt.lFrame;return Rt.lFrame=i.parent,i.currentTNode=null,i.lView=null,i}const Qu=lp;function dp(){const i=lp();i.isParent=!0,i.tView=null,i.selectedIndex=-1,i.contextLView=null,i.elementDepthCount=0,i.currentDirectiveIndex=-1,i.currentNamespace=null,i.bindingRootIndex=-1,i.bindingIndex=-1,i.currentQueryIndex=0}function ti(){return Rt.lFrame.selectedIndex}function Ds(i){Rt.lFrame.selectedIndex=i}function cn(){const i=Rt.lFrame;return La(i.tView,i.selectedIndex)}function bs(i,s){for(let a=s.directiveStart,c=s.directiveEnd;a<c;a++){const h=i.data[a].type.prototype,{ngAfterContentInit:y,ngAfterContentChecked:I,ngAfterViewInit:E,ngAfterViewChecked:T,ngOnDestroy:M}=h;y&&(i.contentHooks||(i.contentHooks=[])).push(-a,y),I&&((i.contentHooks||(i.contentHooks=[])).push(a,I),(i.contentCheckHooks||(i.contentCheckHooks=[])).push(a,I)),E&&(i.viewHooks||(i.viewHooks=[])).push(-a,E),T&&((i.viewHooks||(i.viewHooks=[])).push(a,T),(i.viewCheckHooks||(i.viewCheckHooks=[])).push(a,T)),null!=M&&(i.destroyHooks||(i.destroyHooks=[])).push(a,M)}}function ji(i,s,a){_l(i,s,3,a)}function Qs(i,s,a,c){(3&i[2])===a&&_l(i,s,a,c)}function rs(i,s){let a=i[2];(3&a)===s&&(a&=2047,a+=1,i[2]=a)}function _l(i,s,a,c){const h=c??-1,y=s.length-1;let I=0;for(let E=void 0!==c?65535&i[18]:0;E<y;E++)if("number"==typeof s[E+1]){if(I=s[E],null!=c&&I>=c)break}else s[E]<0&&(i[18]+=65536),(I<h||-1==h)&&(Il(i,a,s,E),i[18]=(4294901760&i[18])+E+2),E++}function Il(i,s,a,c){const d=a[c]<0,h=a[c+1],I=i[d?-a[c]:a[c]];if(d){if(i[2]>>11<i[18]>>16&&(3&i[2])===s){i[2]+=2048;try{h.call(I)}finally{}}}else try{h.call(I)}finally{}}class Wa{constructor(s,a,c){this.factory=s,this.resolving=!1,this.canSeeViewProviders=a,this.injectImpl=c}}function na(i,s,a){let c=0;for(;c<a.length;){const d=a[c];if("number"==typeof d){if(0!==d)break;c++;const h=a[c++],y=a[c++],I=a[c++];i.setAttribute(s,y,I,h)}else{const h=d,y=a[++c];qa(h)?i.setProperty(s,h,y):i.setAttribute(s,h,y),c++}}return c}function Ts(i){return 3===i||4===i||6===i}function qa(i){return 64===i.charCodeAt(0)}function Hi(i,s){if(null!==s&&0!==s.length)if(null===i||0===i.length)i=s.slice();else{let a=-1;for(let c=0;c<s.length;c++){const d=s[c];"number"==typeof d?a=d:0===a||wl(i,a,d,null,-1===a||2===a?s[++c]:null)}}return i}function wl(i,s,a,c,d){let h=0,y=i.length;if(-1===s)y=-1;else for(;h<i.length;){const I=i[h++];if("number"==typeof I){if(I===s){y=-1;break}if(I>s){y=h-1;break}}}for(;h<i.length;){const I=i[h];if("number"==typeof I)break;if(I===a){if(null===c)return void(null!==d&&(i[h+1]=d));if(c===i[h+1])return void(i[h+2]=d)}h++,null!==c&&h++,null!==d&&h++}-1!==y&&(i.splice(y,0,s),h=y+1),i.splice(h++,0,a),null!==c&&i.splice(h++,0,c),null!==d&&i.splice(h++,0,d)}function El(i){return-1!==i}function ra(i){return 32767&i}function is(i,s){let a=function nc(i){return i>>16}(i),c=s;for(;a>0;)c=c[15],a--;return c}let Xs=!0;function Js(i){const s=Xs;return Xs=i,s}let rc=0;const xr={};function Ss(i,s){const a=Ka(i,s);if(-1!==a)return a;const c=s[1];c.firstCreatePass&&(i.injectorIndex=s.length,Co(c.data,i),Co(s,null),Co(c.blueprint,null));const d=Ya(i,s),h=i.injectorIndex;if(El(d)){const y=ra(d),I=is(d,s),E=I[1].data;for(let T=0;T<8;T++)s[h+T]=I[y+T]|E[y+T]}return s[h+8]=d,h}function Co(i,s){i.push(0,0,0,0,0,0,0,0,s)}function Ka(i,s){return-1===i.injectorIndex||i.parent&&i.parent.injectorIndex===i.injectorIndex||null===s[i.injectorIndex+8]?-1:i.injectorIndex}function Ya(i,s){if(i.parent&&-1!==i.parent.injectorIndex)return i.parent.injectorIndex;let a=0,c=null,d=s;for(;null!==d;){if(c=Cl(d),null===c)return-1;if(a++,d=d[15],-1!==c.injectorIndex)return c.injectorIndex|a<<16}return-1}function Dl(i,s,a){!function lh(i,s,a){let c;"string"==typeof a?c=a.charCodeAt(0)||0:a.hasOwnProperty(Cr)&&(c=a[Cr]),null==c&&(c=a[Cr]=rc++);const d=255&c;s.data[i+(d>>5)]|=1<<d}(i,s,a)}function Xa(i,s,a){if(a&Je.Optional||void 0!==i)return i;He()}function ic(i,s,a,c){if(a&Je.Optional&&void 0===c&&(c=null),0==(a&(Je.Self|Je.Host))){const d=i[9],h=Ln(void 0);try{return d?d.get(s,c,a&Je.Optional):Un(s,c,a&Je.Optional)}finally{Ln(h)}}return Xa(c,0,a)}function dh(i,s,a,c=Je.Default,d){if(null!==i){if(1024&s[2]){const y=function Nm(i,s,a,c,d){let h=i,y=s;for(;null!==h&&null!==y&&1024&y[2]&&!(256&y[2]);){const I=ni(h,y,a,c|Je.Self,xr);if(I!==xr)return I;let E=h.parent;if(!E){const T=y[21];if(T){const M=T.get(a,xr,c);if(M!==xr)return M}E=Cl(y),y=y[15]}h=E}return d}(i,s,a,c,xr);if(y!==xr)return y}const h=ni(i,s,a,c,xr);if(h!==xr)return h}return ic(s,a,c,d)}function ni(i,s,a,c,d){const h=function bl(i){if("string"==typeof i)return i.charCodeAt(0)||0;const s=i.hasOwnProperty(Cr)?i[Cr]:void 0;return"number"==typeof s?s>=0?255&s:fh:s}(a);if("function"==typeof h){if(!ah(s,i,c))return c&Je.Host?Xa(d,0,c):ic(s,a,c,d);try{const y=h(c);if(null!=y||c&Je.Optional)return y;He()}finally{Qu()}}else if("number"==typeof h){let y=null,I=Ka(i,s),E=-1,T=c&Je.Host?s[16][6]:null;for((-1===I||c&Je.SkipSelf)&&(E=-1===I?Ya(i,s):s[I+8],-1!==E&&ri(c,!1)?(y=s[1],I=ra(E),s=is(E,s)):I=-1);-1!==I;){const M=s[1];if(Ja(h,I,M.data)){const F=hh(I,s,a,y,c,T);if(F!==xr)return F}E=s[I+8],-1!==E&&ri(c,s[1].data[I+8]===T)&&Ja(h,I,s)?(y=M,I=ra(E),s=is(E,s)):I=-1}}return d}function hh(i,s,a,c,d,h){const y=s[1],I=y.data[i+8],M=To(I,y,a,null==c?qo(I)&&Xs:c!=y&&0!=(3&I.type),d&Je.Host&&h===I);return null!==M?Ri(s,y,M,I):xr}function To(i,s,a,c,d){const h=i.providerIndexes,y=s.data,I=1048575&h,E=i.directiveStart,M=h>>20,q=d?I+M:i.directiveEnd;for(let te=c?I:I+M;te<q;te++){const ye=y[te];if(te<E&&a===ye||te>=E&&ye.type===a)return te}if(d){const te=y[E];if(te&&lr(te)&&te.type===a)return E}return null}function Ri(i,s,a,c){let d=i[a];const h=s.data;if(function $r(i){return i instanceof Wa}(d)){const y=d;y.resolving&&function Pe(i,s){const a=s?`. Dependency path: ${s.join(" > ")} > ${i}`:"";throw new ge(-200,`Circular dependency in DI detected for ${i}${a}`)}(function Re(i){return"function"==typeof i?i.name||i.toString():"object"==typeof i&&null!=i&&"function"==typeof i.type?i.type.name||i.type.toString():we(i)}(h[a]));const I=Js(y.canSeeViewProviders);y.resolving=!0;const E=y.injectImpl?Ln(y.injectImpl):null;ah(i,c,Je.Default);try{d=i[a]=y.factory(void 0,h,i,c),s.firstCreatePass&&a>=c.directiveStart&&function Ju(i,s,a){const{ngOnChanges:c,ngOnInit:d,ngDoCheck:h}=s.type.prototype;if(c){const y=qs(s);(a.preOrderHooks||(a.preOrderHooks=[])).push(i,y),(a.preOrderCheckHooks||(a.preOrderCheckHooks=[])).push(i,y)}d&&(a.preOrderHooks||(a.preOrderHooks=[])).push(0-i,d),h&&((a.preOrderHooks||(a.preOrderHooks=[])).push(i,h),(a.preOrderCheckHooks||(a.preOrderCheckHooks=[])).push(i,h))}(a,h[a],s)}finally{null!==E&&Ln(E),Js(I),y.resolving=!1,Qu()}}return d}function Ja(i,s,a){return!!(a[s+(i>>5)]&1<<i)}function ri(i,s){return!(i&Je.Self||i&Je.Host&&s)}class ss{constructor(s,a){this._tNode=s,this._lView=a}get(s,a,c){return dh(this._tNode,this._lView,s,yt(c),a)}}function fh(){return new ss(Jn(),xe())}function sc(i){return U(()=>{const s=i.prototype.constructor,a=s[Tt]||ia(s),c=Object.prototype;let d=Object.getPrototypeOf(i.prototype).constructor;for(;d&&d!==c;){const h=d[Tt]||ia(d);if(h&&h!==a)return h;d=Object.getPrototypeOf(d)}return h=>new h})}function ia(i){return Ue(i)?()=>{const s=ia(Q(i));return s&&s()}:zs(i)}function Cl(i){const s=i[1],a=s.type;return 2===a?s.declTNode:1===a?i[6]:null}function Tl(i){return function Qa(i,s){if("class"===s)return i.classes;if("style"===s)return i.styles;const a=i.attrs;if(a){const c=a.length;let d=0;for(;d<c;){const h=a[d];if(Ts(h))break;if(0===h)d+=2;else if("number"==typeof h)for(d++;d<c&&"string"==typeof a[d];)d++;else{if(h===s)return a[d+1];d+=2}}}return null}(Jn(),i)}const So="__parameters__";function eu(i,s,a){return U(()=>{const c=function gh(i){return function(...a){if(i){const c=i(...a);for(const d in c)this[d]=c[d]}}}(s);function d(...h){if(this instanceof d)return c.apply(this,h),this;const y=new d(...h);return I.annotation=y,I;function I(E,T,M){const F=E.hasOwnProperty(So)?E[So]:Object.defineProperty(E,So,{value:[]})[So];for(;F.length<=M;)F.push(null);return(F[M]=F[M]||[]).push(y),E}}return a&&(d.prototype=Object.create(a.prototype)),d.prototype.ngMetadataName=i,d.annotationCls=d,d})}class on{constructor(s,a){this._desc=s,this.ngMetadataName="InjectionToken",this.\u0275prov=void 0,"number"==typeof a?this.__NG_ELEMENT_ID__=a:void 0!==a&&(this.\u0275prov=gt({token:this,providedIn:a.providedIn||"root",factory:a.factory}))}get multi(){return this}toString(){return`InjectionToken ${this._desc}`}}function os(i,s){i.forEach(a=>Array.isArray(a)?os(a,s):s(a))}function uc(i,s,a){s>=i.length?i.push(a):i.splice(s,0,a)}function oa(i,s){return s>=i.length-1?i.pop():i.splice(s,1)[0]}const Ni=Kt(eu("Optional"),8),D=Kt(eu("SkipSelf"),4);var gi=(()=>((gi=gi||{})[gi.Important=1]="Important",gi[gi.DashCase=2]="DashCase",gi))();const Gi=new Map;let Nl=0;const Ol="__ngContext__";function jr(i,s){Jr(s)?(i[Ol]=s[20],function Th(i){Gi.set(i[20],i)}(s)):i[Ol]=s}function Ce(i,s){return undefined(i,s)}function at(i){const s=i[3];return ei(s)?s[3]:s}function oi(i){return da(i[13])}function Rs(i){return da(i[4])}function da(i){for(;null!==i&&!ei(i);)i=i[4];return i}function Ns(i,s,a,c,d){if(null!=c){let h,y=!1;ei(c)?h=c:Jr(c)&&(y=!0,c=c[0]);const I=Sn(c);0===i&&null!==a?null==d?G_(s,a,I):yc(s,a,I,d||null,!0):1===i&&null!==a?yc(s,a,I,d||null,!0):2===i?function kh(i,s,a){const c=Oh(i,s);c&&function Nh(i,s,a,c){i.removeChild(s,a,c)}(i,c,s,a)}(s,I,y):3===i&&s.destroyNode(I),null!=h&&function Gm(i,s,a,c,d){const h=a[7];h!==Sn(a)&&Ns(s,i,c,h,d);for(let I=10;I<a.length;I++){const E=a[I];$l(E[1],E,i,s,c,h)}}(s,i,h,a,d)}}function pc(i,s,a){return i.createElement(s,a)}function bp(i,s){const a=i[9],c=a.indexOf(s),d=s[3];512&s[2]&&(s[2]&=-513,Ks(d,-1)),a.splice(c,1)}function Mh(i,s){if(i.length<=10)return;const a=10+s,c=i[a];if(c){const d=c[17];null!==d&&d!==i&&bp(d,c),s>0&&(i[a-1][4]=c[4]);const h=oa(i,10+s);!function Ep(i,s){$l(i,s,s[11],2,null,null),s[0]=null,s[6]=null}(c[1],c);const y=h[19];null!==y&&y.detachView(h[1]),c[3]=null,c[4]=null,c[2]&=-65}return c}function Rh(i,s){if(!(128&s[2])){const a=s[11];a.destroyNode&&$l(i,s,a,3,null,null),function Dp(i){let s=i[13];if(!s)return Vm(i[1],i);for(;s;){let a=null;if(Jr(s))a=s[13];else{const c=s[10];c&&(a=c)}if(!a){for(;s&&!s[4]&&s!==i;)Jr(s)&&Vm(s[1],s),s=s[3];null===s&&(s=i),Jr(s)&&Vm(s[1],s),a=s&&s[4]}s=a}}(s)}}function Vm(i,s){if(!(128&s[2])){s[2]&=-65,s[2]|=128,function Bm(i,s){let a;if(null!=i&&null!=(a=i.destroyHooks))for(let c=0;c<a.length;c+=2){const d=s[a[c]];if(!(d instanceof Wa)){const h=a[c+1];if(Array.isArray(h))for(let y=0;y<h.length;y+=2){const I=d[h[y]],E=h[y+1];try{E.call(I)}finally{}}else try{h.call(d)}finally{}}}}(i,s),function mc(i,s){const a=i.cleanup,c=s[7];let d=-1;if(null!==a)for(let h=0;h<a.length-1;h+=2)if("string"==typeof a[h]){const y=a[h+3];y>=0?c[d=y]():c[d=-y].unsubscribe(),h+=2}else{const y=c[d=a[h+1]];a[h].call(y)}if(null!==c){for(let h=d+1;h<c.length;h++)(0,c[h])();s[7]=null}}(i,s),1===s[1].type&&s[11].destroy();const a=s[17];if(null!==a&&ei(s[3])){a!==s[3]&&bp(a,s);const c=s[19];null!==c&&c.detachView(i)}!function fr(i){Gi.delete(i[20])}(s)}}function LE(i,s,a){return function W_(i,s,a){let c=s;for(;null!==c&&40&c.type;)c=(s=c).parent;if(null===c)return a[0];{const{componentOffset:d}=c;if(d>-1){const{encapsulation:h}=i.data[c.directiveStart+d];if(h===Ae.None||h===Ae.Emulated)return null}return Br(c,a)}}(i,s.parent,a)}function yc(i,s,a,c,d){i.insertBefore(s,a,c,d)}function G_(i,s,a){i.appendChild(s,a)}function Ul(i,s,a,c,d){null!==c?yc(i,s,a,c,d):G_(i,s,a)}function Oh(i,s){return i.parentNode(s)}let Km,Fh,Z_=function vc(i,s,a){return 40&i.type?Br(i,a):null};function Cp(i,s,a,c){const d=LE(i,c,s),h=s[11],I=function $m(i,s,a){return Z_(i,s,a)}(c.parent||s[6],c,s);if(null!=d)if(Array.isArray(a))for(let E=0;E<a.length;E++)Ul(h,d,a[E],I,!1);else Ul(h,d,a,I,!1)}function Vl(i,s){if(null!==s){const a=s.type;if(3&a)return Br(s,i);if(4&a)return zm(-1,i[s.index]);if(8&a){const c=s.child;if(null!==c)return Vl(i,c);{const d=i[s.index];return ei(d)?zm(-1,d):Sn(d)}}if(32&a)return Ce(s,i)()||Sn(i[s.index]);{const c=Bl(i,s);return null!==c?Array.isArray(c)?c[0]:Vl(at(i[16]),c):Vl(i,s.next)}}return null}function Bl(i,s){return null!==s?i[16][6].projection[s.projection]:null}function zm(i,s){const a=10+i+1;if(a<s.length){const c=s[a],d=c[1].firstChild;if(null!==d)return Vl(c,d)}return s[7]}function Wm(i,s,a,c,d,h,y){for(;null!=a;){const I=c[a.index],E=a.type;if(y&&0===s&&(I&&jr(Sn(I),c),a.flags|=2),32!=(32&a.flags))if(8&E)Wm(i,s,a.child,c,d,h,!1),Ns(s,i,d,I,h);else if(32&E){const T=Ce(a,c);let M;for(;M=T();)Ns(s,i,d,M,h);Ns(s,i,d,I,h)}else 16&E?Po(i,s,c,a,d,h):Ns(s,i,d,I,h);a=y?a.projectionNext:a.next}}function $l(i,s,a,c,d,h){Wm(a,c,i.firstChild,s,d,h,!1)}function Po(i,s,a,c,d,h){const y=a[16],E=y[6].projection[c.projection];if(Array.isArray(E))for(let T=0;T<E.length;T++)Ns(s,i,d,E[T],h);else Wm(i,s,E,y[3],d,h,!0)}function qm(i,s,a){""===a?i.removeAttribute(s,"class"):i.setAttribute(s,"class",a)}function Y_(i,s,a){const{mergedAttrs:c,classes:d,styles:h}=a;null!==c&&na(i,s,c),null!==d&&qm(i,s,d),null!==h&&function Tp(i,s,a){i.setAttribute(s,"style",a)}(i,s,h)}function $E(i){Km=i}function HE(i){return function Ym(){if(void 0===Fh&&(Fh=null,bt.trustedTypes))try{Fh=bt.trustedTypes.createPolicy("angular#unsafe-bypass",{createHTML:i=>i,createScript:i=>i,createScriptURL:i=>i})}catch{}return Fh}()?.createScriptURL(i)||i}class J_{constructor(s){this.changingThisBreaksApplicationSecurity=s}toString(){return`SafeValue must use [property]=binding: ${this.changingThisBreaksApplicationSecurity} (see ${nt})`}}function fa(i){return i instanceof J_?i.changingThisBreaksApplicationSecurity:i}function Hl(i,s){const a=function zE(i){return i instanceof J_&&i.getTypeName()||null}(i);if(null!=a&&a!==s){if("ResourceURL"===a&&"URL"===s)return!0;throw new Error(`Required a safe ${s}, got a ${a} (see ${nt})`)}return a===s}const qE=/^(?:(?:https?|mailto|data|ftp|tel|file|sms):|[^&:/?#]*(?:[/?#]|$))/gi;var Er=(()=>((Er=Er||{})[Er.NONE=0]="NONE",Er[Er.HTML=1]="HTML",Er[Er.STYLE=2]="STYLE",Er[Er.SCRIPT=3]="SCRIPT",Er[Er.URL=4]="URL",Er[Er.RESOURCE_URL=5]="RESOURCE_URL",Er))();function Mp(i){const s=ga();return s?s.sanitize(Er.URL,i)||"":Hl(i,"URL")?fa(i):function wc(i){return(i=String(i)).match(qE)?i:"unsafe:"+i}(we(i))}function Wl(i){const s=ga();if(s)return HE(s.sanitize(Er.RESOURCE_URL,i)||"");if(Hl(i,"ResourceURL"))return HE(fa(i));throw new ge(904,!1)}function a0(i,s,a){return function Rp(i,s){return"src"===s&&("embed"===i||"frame"===i||"iframe"===i||"media"===i||"script"===i)||"href"===s&&("base"===i||"link"===i)?Wl:Mp}(s,a)(i)}function ga(){const i=xe();return i&&i[12]}const cy=new on("ENVIRONMENT_INITIALIZER"),u0=new on("INJECTOR",-1),Gl=new on("INJECTOR_DEF_TYPES");class ql{get(s,a=Kn){if(a===Kn){const c=new Error(`NullInjectorError: No provider for ${de(s)}!`);throw c.name="NullInjectorError",c}return a}}function eD(i){return{\u0275providers:i}}function tD(...i){return{\u0275providers:c0(0,i),\u0275fromNgModule:!0}}function c0(i,...s){const a=[],c=new Set;let d;return os(s,h=>{const y=h;ly(y,a,[],c)&&(d||(d=[]),d.push(y))}),void 0!==d&&l0(d,a),a}function l0(i,s){for(let a=0;a<i.length;a++){const{providers:d}=i[a];d0(d,h=>{s.push(h)})}}function ly(i,s,a,c){if(!(i=Q(i)))return!1;let d=null,h=Fn(i);const y=!h&&en(i);if(h||y){if(y&&!y.standalone)return!1;d=i}else{const E=i.ngModule;if(h=Fn(E),!h)return!1;d=E}const I=c.has(d);if(y){if(I)return!1;if(c.add(d),y.dependencies){const E="function"==typeof y.dependencies?y.dependencies():y.dependencies;for(const T of E)ly(T,s,a,c)}}else{if(!h)return!1;{if(null!=h.imports&&!I){let T;c.add(d);try{os(h.imports,M=>{ly(M,s,a,c)&&(T||(T=[]),T.push(M))})}finally{}void 0!==T&&l0(T,s)}if(!I){const T=zs(d)||(()=>new d);s.push({provide:d,useFactory:T,deps:We},{provide:Gl,useValue:d,multi:!0},{provide:cy,useValue:()=>$e(d),multi:!0})}const E=h.providers;null==E||I||d0(E,M=>{s.push(M)})}}return d!==i&&void 0!==i.providers}function d0(i,s){for(let a of i)Se(a)&&(a=a.\u0275providers),Array.isArray(a)?d0(a,s):s(a)}const nD=ue({provide:String,useValue:ue});function Bh(i){return null!==i&&"object"==typeof i&&nD in i}function bc(i){return"function"==typeof i}const dy=new on("Set Injector scope."),Np={},iD={};let hy;function Pp(){return void 0===hy&&(hy=new ql),hy}class Cc{}class h0 extends Cc{constructor(s,a,c,d){super(),this.parent=a,this.source=c,this.scopes=d,this.records=new Map,this._ngOnDestroyHooks=new Set,this._onDestroyHooks=[],this._destroyed=!1,gy(s,y=>this.processProvider(y)),this.records.set(u0,cu(void 0,this)),d.has("environment")&&this.records.set(Cc,cu(void 0,this));const h=this.records.get(dy);null!=h&&"string"==typeof h.value&&this.scopes.add(h.value),this.injectorDefTypes=new Set(this.get(Gl.multi,We,Je.Self))}get destroyed(){return this._destroyed}destroy(){this.assertNotDestroyed(),this._destroyed=!0;try{for(const s of this._ngOnDestroyHooks)s.ngOnDestroy();for(const s of this._onDestroyHooks)s()}finally{this.records.clear(),this._ngOnDestroyHooks.clear(),this.injectorDefTypes.clear(),this._onDestroyHooks.length=0}}onDestroy(s){this._onDestroyHooks.push(s)}runInContext(s){this.assertNotDestroyed();const a=br(this),c=Ln(void 0);try{return s()}finally{br(a),Ln(c)}}get(s,a=Kn,c=Je.Default){this.assertNotDestroyed(),c=yt(c);const d=br(this),h=Ln(void 0);try{if(!(c&Je.SkipSelf)){let I=this.records.get(s);if(void 0===I){const E=function aD(i){return"function"==typeof i||"object"==typeof i&&i instanceof on}(s)&&gr(s);I=E&&this.injectableDefInScope(E)?cu(Op(s),Np):null,this.records.set(s,I)}if(null!=I)return this.hydrate(s,I)}return(c&Je.Self?Pp():this.parent).get(s,a=c&Je.Optional&&a===Kn?null:a)}catch(y){if("NullInjectorError"===y.name){if((y[Xr]=y[Xr]||[]).unshift(de(s)),d)throw y;return function $(i,s,a,c){const d=i[Xr];throw s[Ti]&&d.unshift(s[Ti]),i.message=function Z(i,s,a,c=null){i=i&&"\n"===i.charAt(0)&&"\u0275"==i.charAt(1)?i.slice(2):i;let d=de(s);if(Array.isArray(s))d=s.map(de).join(" -> ");else if("object"==typeof s){let h=[];for(let y in s)if(s.hasOwnProperty(y)){let I=s[y];h.push(y+":"+("string"==typeof I?JSON.stringify(I):de(I)))}d=`{${h.join(", ")}}`}return`${a}${c?"("+c+")":""}[${d}]: ${i.replace(Ci,"\n  ")}`}("\n"+i.message,d,a,c),i.ngTokenPath=d,i[Xr]=null,i}(y,s,"R3InjectorError",this.source)}throw y}finally{Ln(h),br(d)}}resolveInjectorInitializers(){const s=br(this),a=Ln(void 0);try{const c=this.get(cy.multi,We,Je.Self);for(const d of c)d()}finally{br(s),Ln(a)}}toString(){const s=[],a=this.records;for(const c of a.keys())s.push(de(c));return`R3Injector[${s.join(", ")}]`}assertNotDestroyed(){if(this._destroyed)throw new ge(205,!1)}processProvider(s){let a=bc(s=Q(s))?s:Q(s&&s.provide);const c=function fy(i){return Bh(i)?cu(void 0,i.useValue):cu(function py(i,s,a){let c;if(bc(i)){const d=Q(i);return zs(d)||Op(d)}if(Bh(i))c=()=>Q(i.useValue);else if(function Dc(i){return!(!i||!i.useFactory)}(i))c=()=>i.useFactory(...wt(i.deps||[]));else if(function $h(i){return!(!i||!i.useExisting)}(i))c=()=>$e(Q(i.useExisting));else{const d=Q(i&&(i.useClass||i.provide));if(!function kp(i){return!!i.deps}(i))return zs(d)||Op(d);c=()=>new d(...wt(i.deps))}return c}(i),Np)}(s);if(bc(s)||!0!==s.multi)this.records.get(a);else{let d=this.records.get(a);d||(d=cu(void 0,Np,!0),d.factory=()=>wt(d.multi),this.records.set(a,d)),a=s,d.multi.push(s)}this.records.set(a,c)}hydrate(s,a){return a.value===Np&&(a.value=iD,a.value=a.factory()),"object"==typeof a.value&&a.value&&function oD(i){return null!==i&&"object"==typeof i&&"function"==typeof i.ngOnDestroy}(a.value)&&this._ngOnDestroyHooks.add(a.value),a.value}injectableDefInScope(s){if(!s.providedIn)return!1;const a=Q(s.providedIn);return"string"==typeof a?"any"===a||this.scopes.has(a):this.injectorDefTypes.has(a)}}function Op(i){const s=gr(i),a=null!==s?s.factory:zs(i);if(null!==a)return a;if(i instanceof on)throw new ge(204,!1);if(i instanceof Function)return function sD(i){const s=i.length;if(s>0)throw function xs(i,s){const a=[];for(let c=0;c<i;c++)a.push(s);return a}(s,"?"),new ge(204,!1);const a=function ys(i){const s=i&&(i[Qr]||i[ln]);if(s){const a=function Di(i){if(i.hasOwnProperty("name"))return i.name;const s=(""+i).match(/^function\s*([^\s(]+)/);return null===s?"":s[1]}(i);return console.warn(`DEPRECATED: DI is instantiating a token "${a}" that inherits its @Injectable decorator but does not provide one itself.\nThis will become an error in a future version of Angular. Please add @Injectable() to the "${a}" class.`),s}return null}(i);return null!==a?()=>a.factory(i):()=>new i}(i);throw new ge(204,!1)}function cu(i,s,a=!1){return{factory:i,value:s,multi:a?[]:void 0}}function gy(i,s){for(const a of i)Array.isArray(a)?gy(a,s):a&&Se(a)?gy(a.\u0275providers,s):s(a)}class uD{}class jh{}class Fp{resolveComponentFactory(s){throw function f0(i){const s=Error(`No component factory found for ${de(i)}. Did you add it to @NgModule.entryComponents?`);return s.ngComponent=i,s}(s)}}let Zl=(()=>{class i{}return i.NULL=new Fp,i})();function Hh(){return Tc(Jn(),xe())}function Tc(i,s){return new zh(Br(i,s))}let zh=(()=>{class i{constructor(a){this.nativeElement=a}}return i.__NG_ELEMENT_ID__=Hh,i})();function cD(i){return i instanceof zh?i.nativeElement:i}class p0{}let lD=(()=>{class i{}return i.__NG_ELEMENT_ID__=()=>function dD(){const i=xe(),a=Xn(Jn().index,i);return(Jr(a)?a:i)[11]}(),i})(),g0=(()=>{class i{}return i.\u0275prov=gt({token:i,providedIn:"root",factory:()=>null}),i})();class m0{constructor(s){this.full=s,this.major=s.split(".")[0],this.minor=s.split(".")[1],this.patch=s.split(".").slice(2).join(".")}}const y0=new m0("15.0.4"),vy={};function Iy(i){return i.ngOriginalError}class Wh{constructor(){this._console=console}handleError(s){const a=this._findOriginalError(s);this._console.error("ERROR",s),a&&this._console.error("ORIGINAL ERROR",a)}_findOriginalError(s){let a=s&&Iy(s);for(;a&&Iy(a);)a=Iy(a);return a||null}}function ma(i){return i instanceof Function?i():i}function b0(i,s,a){let c=i.length;for(;;){const d=i.indexOf(s,a);if(-1===d)return d;if(0===d||i.charCodeAt(d-1)<=32){const h=s.length;if(d+h===c||i.charCodeAt(d+h)<=32)return d}a=d+1}}const Ey="ng-template";function Yl(i,s,a){let c=0;for(;c<i.length;){let d=i[c++];if(a&&"class"===d){if(d=i[c],-1!==b0(d.toLowerCase(),s,0))return!0}else if(1===d){for(;c<i.length&&"string"==typeof(d=i[c++]);)if(d.toLowerCase()===s)return!0;return!1}}return!1}function Lp(i){return 4===i.type&&i.value!==Ey}function mD(i,s,a){return s===(4!==i.type||a?i.value:Ey)}function C0(i,s,a){let c=4;const d=i.attrs||[],h=function yD(i){for(let s=0;s<i.length;s++)if(Ts(i[s]))return s;return i.length}(d);let y=!1;for(let I=0;I<s.length;I++){const E=s[I];if("number"!=typeof E){if(!y)if(4&c){if(c=2|1&c,""!==E&&!mD(i,E,a)||""===E&&1===s.length){if(Os(c))return!1;y=!0}}else{const T=8&c?E:s[++I];if(8&c&&null!==i.attrs){if(!Yl(i.attrs,T,a)){if(Os(c))return!1;y=!0}continue}const F=Dy(8&c?"class":E,d,Lp(i),a);if(-1===F){if(Os(c))return!1;y=!0;continue}if(""!==T){let q;q=F>h?"":d[F+1].toLowerCase();const te=8&c?q:null;if(te&&-1!==b0(te,T,0)||2&c&&T!==q){if(Os(c))return!1;y=!0}}}}else{if(!y&&!Os(c)&&!Os(E))return!1;if(y&&Os(E))continue;y=!1,c=E|1&c}}return Os(c)||y}function Os(i){return 0==(1&i)}function Dy(i,s,a,c){if(null===s)return-1;let d=0;if(c||!a){let h=!1;for(;d<s.length;){const y=s[d];if(y===i)return d;if(3===y||6===y)h=!0;else{if(1===y||2===y){let I=s[++d];for(;"string"==typeof I;)I=s[++d];continue}if(4===y)break;if(0===y){d+=4;continue}}d+=h?1:2}return-1}return function vD(i,s){let a=i.indexOf(4);if(a>-1)for(a++;a<i.length;){const c=i[a];if("number"==typeof c)return-1;if(c===s)return a;a++}return-1}(s,i)}function by(i,s,a=!1){for(let c=0;c<s.length;c++)if(C0(i,s[c],a))return!0;return!1}function S0(i,s){return i?":not("+s.trim()+")":s}function ID(i){let s=i[0],a=1,c=2,d="",h=!1;for(;a<i.length;){let y=i[a];if("string"==typeof y)if(2&c){const I=i[++a];d+="["+y+(I.length>0?'="'+I+'"':"")+"]"}else 8&c?d+="."+y:4&c&&(d+=" "+y);else""!==d&&!Os(y)&&(s+=S0(h,d),d=""),c=y,h=h||!Os(c);a++}return""!==d&&(s+=S0(h,d)),s}const Bt={};function Cy(i){A0(Yt(),xe(),ti()+i,!1)}function A0(i,s,a,c){if(!c)if(3==(3&s[2])){const h=i.preOrderCheckHooks;null!==h&&ji(s,h,a)}else{const h=i.preOrderHooks;null!==h&&Qs(s,h,0,a)}Ds(a)}function AD(i,s=null,a=null,c){const d=xD(i,s,a,c);return d.resolveInjectorInitializers(),d}function xD(i,s=null,a=null,c,d=new Set){const h=[a||We,tD(i)];return c=c||("object"==typeof i?void 0:de(i)),new h0(h,s||Pp(),c||null,d)}let Sc=(()=>{class i{static create(a,c){if(Array.isArray(a))return AD({name:""},c,a,"");{const d=a.name??"";return AD({name:d},a.parent,a.providers,d)}}}return i.THROW_IF_NOT_FOUND=Kn,i.NULL=new ql,i.\u0275prov=gt({token:i,providedIn:"any",factory:()=>$e(u0)}),i.__NG_ELEMENT_ID__=-1,i})();function Xl(i,s=Je.Default){const a=xe();return null===a?$e(i,s):dh(Jn(),a,Q(i),s)}function UD(){throw new Error("invalid")}function Zh(i,s){const a=i.contentQueries;if(null!==a)for(let c=0;c<a.length;c+=2){const d=a[c],h=a[c+1];if(-1!==h){const y=i.data[h];Yu(d),y.contentQueries(2,s[h],h)}}}function du(i,s,a,c,d,h,y,I,E,T,M){const F=s.blueprint.slice();return F[0]=d,F[2]=76|c,(null!==M||i&&1024&i[2])&&(F[2]|=1024),qu(F),F[3]=F[15]=i,F[8]=a,F[10]=y||i&&i[10],F[11]=I||i&&i[11],F[12]=E||i&&i[12]||null,F[9]=T||i&&i[9]||null,F[6]=h,F[20]=function vp(){return Nl++}(),F[21]=M,F[16]=2==s.type?i[16]:F,F}function ed(i,s,a,c,d){let h=i.data[s];if(null===h)h=function yn(i,s,a,c,d){const h=Ba(),y=wo(),E=i.data[s]=function ya(i,s,a,c,d,h){return{type:a,index:c,insertBeforeIndex:null,injectorIndex:s?s.injectorIndex:-1,directiveStart:-1,directiveEnd:-1,directiveStylingLast:-1,componentOffset:-1,propertyBindings:null,flags:0,providerIndexes:0,value:d,attrs:h,mergedAttrs:null,localNames:null,initialInputs:void 0,inputs:null,outputs:null,tViews:null,next:null,projectionNext:null,child:null,parent:s,projection:null,styles:null,stylesWithoutHost:null,residualStyles:void 0,classes:null,classesWithoutHost:null,residualClasses:void 0,classBindings:0,styleBindings:0}}(0,y?h:h&&h.parent,a,s,c,d);return null===i.firstChild&&(i.firstChild=E),null!==h&&(y?null==h.child&&null!==E.parent&&(h.child=E):null===h.next&&(h.next=E)),E}(i,s,a,c,d),function ap(){return Rt.lFrame.inI18n}()&&(h.flags|=32);else if(64&h.type){h.type=a,h.value=c,h.attrs=d;const y=function Io(){const i=Rt.lFrame,s=i.currentTNode;return i.isParent?s:s.parent}();h.injectorIndex=null===y?-1:y.injectorIndex}return Bi(h,!0),h}function xc(i,s,a,c){if(0===a)return-1;const d=s.length;for(let h=0;h<a;h++)s.push(c),i.blueprint.push(c),i.data.push(null);return d}function Ny(i,s,a){za(s);try{const c=i.viewQuery;null!==c&&Qh(1,c,a);const d=i.template;null!==d&&Zi(i,s,d,1,a),i.firstCreatePass&&(i.firstCreatePass=!1),i.staticContentQueries&&Zh(i,s),i.staticViewQueries&&Qh(2,i.viewQuery,a);const h=i.components;null!==h&&function Jl(i,s){for(let a=0;a<s.length;a++)Fy(i,s[a])}(s,h)}catch(c){throw i.firstCreatePass&&(i.incompleteFirstPass=!0,i.firstCreatePass=!1),c}finally{s[2]&=-5,dp()}}function $p(i,s,a,c){const d=s[2];if(128!=(128&d)){za(s);try{qu(s),function sh(i){return Rt.lFrame.bindingIndex=i}(i.bindingStartIndex),null!==a&&Zi(i,s,a,2,c);const y=3==(3&d);if(y){const T=i.preOrderCheckHooks;null!==T&&ji(s,T,null)}else{const T=i.preOrderHooks;null!==T&&Qs(s,T,0,null),rs(s,0)}if(function WD(i){for(let s=oi(i);null!==s;s=Rs(s)){if(!s[2])continue;const a=s[9];for(let c=0;c<a.length;c++){const d=a[c],h=d[3];0==(512&d[2])&&Ks(h,1),d[2]|=512}}}(s),function zD(i){for(let s=oi(i);null!==s;s=Rs(s))for(let a=10;a<s.length;a++){const c=s[a],d=c[1];vo(c)&&$p(d,c,d.template,c[8])}}(s),null!==i.contentQueries&&Zh(i,s),y){const T=i.contentCheckHooks;null!==T&&ji(s,T)}else{const T=i.contentHooks;null!==T&&Qs(s,T,1),rs(s,1)}!function VD(i,s){const a=i.hostBindingOpCodes;if(null!==a)try{for(let c=0;c<a.length;c++){const d=a[c];if(d<0)Ds(~d);else{const h=d,y=a[++c],I=a[++c];Ha(y,h),I(2,s[h])}}}finally{Ds(-1)}}(i,s);const I=i.components;null!==I&&function Kh(i,s){for(let a=0;a<s.length;a++)rd(i,s[a])}(s,I);const E=i.viewQuery;if(null!==E&&Qh(2,E,c),y){const T=i.viewCheckHooks;null!==T&&ji(s,T)}else{const T=i.viewHooks;null!==T&&Qs(s,T,2),rs(s,2)}!0===i.firstUpdatePass&&(i.firstUpdatePass=!1),s[2]&=-41,512&s[2]&&(s[2]&=-513,Ks(s[3],-1))}finally{dp()}}}function Zi(i,s,a,c,d){const h=ti(),y=2&c;try{Ds(-1),y&&s.length>22&&A0(i,s,22,!1),a(c,d)}finally{Ds(h)}}function F0(i,s,a){if(es(s)){const d=s.directiveEnd;for(let h=s.directiveStart;h<d;h++){const y=i.data[h];y.contentQueries&&y.contentQueries(1,a[h],h)}}}function Py(i,s,a){!gl()||(function zp(i,s,a,c){const d=a.directiveStart,h=a.directiveEnd;qo(a)&&function Gp(i,s,a){const c=Br(s,i),d=Oo(a),h=i[10],y=Yp(i,du(i,d,null,a.onPush?32:16,c,s,h,h.createRenderer(c,a),null,null,null));i[s.index]=y}(s,a,i.data[d+a.componentOffset]),i.firstCreatePass||Ss(a,s),jr(c,s);const y=a.initialInputs;for(let I=d;I<h;I++){const E=i.data[I],T=Ri(s,i,I,a);jr(T,s),null!==y&&qp(0,I-d,T,E,0,y),lr(E)&&(Xn(a.index,s)[8]=Ri(s,i,I,a))}}(i,s,a,Br(a,s)),64==(64&a.flags)&&Hr(i,s,a))}function ve(i,s,a=Br){const c=s.localNames;if(null!==c){let d=s.index+1;for(let h=0;h<c.length;h+=2){const y=c[h+1],I=-1===y?a(s,i):i[y];i[d++]=I}}}function Oo(i){const s=i.tView;return null===s||s.incompleteFirstPass?i.tView=td(1,null,i.template,i.decls,i.vars,i.directiveDefs,i.pipeDefs,i.viewQuery,i.schemas,i.consts):s}function td(i,s,a,c,d,h,y,I,E,T){const M=22+c,F=M+d,q=function hu(i,s){const a=[];for(let c=0;c<s;c++)a.push(c<i?null:Bt);return a}(M,F),te="function"==typeof T?T():T;return q[1]={type:i,blueprint:q,template:a,queries:null,viewQuery:I,declTNode:s,data:q.slice().fill(null,M),bindingStartIndex:M,expandoStartIndex:F,hostBindingOpCodes:null,firstCreatePass:!0,firstUpdatePass:!0,staticViewQueries:!1,staticContentQueries:!1,preOrderHooks:null,preOrderCheckHooks:null,contentHooks:null,contentCheckHooks:null,viewHooks:null,viewCheckHooks:null,destroyHooks:null,cleanup:null,contentQueries:null,components:null,directiveRegistry:"function"==typeof h?h():h,pipeRegistry:"function"==typeof y?y():y,firstChild:null,schemas:E,consts:te,incompleteFirstPass:!1}}function L0(i,s,a,c){const d=z0(s);null===a?d.push(c):(d.push(a),i.firstCreatePass&&W0(i).push(c,d.length-1))}function ft(i,s,a,c){for(let d in i)if(i.hasOwnProperty(d)){a=null===a?{}:a;const h=i[d];null===c?jp(a,s,d,h):c.hasOwnProperty(d)&&jp(a,s,c[d],h)}return a}function jp(i,s,a,c){i.hasOwnProperty(a)?i[a].push(s,c):i[a]=[s,c]}function nd(i,s){const a=Xn(s,i);16&a[2]||(a[2]|=32)}function Oy(i,s,a,c){let d=!1;if(gl()){const h=null===c?null:{"":-1},y=function jD(i,s){const a=i.directiveRegistry;let c=null,d=null;if(a)for(let h=0;h<a.length;h++){const y=a[h];if(by(s,y.selectors,!1))if(c||(c=[]),lr(y))if(null!==y.findHostDirectiveDefs){const I=[];d=d||new Map,y.findHostDirectiveDefs(y,I,d),c.unshift(...I,y),Wp(i,s,I.length)}else c.unshift(y),Wp(i,s,0);else d=d||new Map,y.findHostDirectiveDefs?.(y,c,d),c.push(y)}return null===c?null:[c,d]}(i,a);let I,E;null===y?I=E=null:[I,E]=y,null!==I&&(d=!0,V0(i,s,a,I,h,E)),h&&function ky(i,s,a){if(s){const c=i.localNames=[];for(let d=0;d<s.length;d+=2){const h=a[s[d+1]];if(null==h)throw new ge(-301,!1);c.push(s[d],h)}}}(a,c,h)}return a.mergedAttrs=Hi(a.mergedAttrs,a.attrs),d}function V0(i,s,a,c,d,h){for(let T=0;T<c.length;T++)Dl(Ss(a,s),i,c[T].type);!function vi(i,s,a){i.flags|=1,i.directiveStart=s,i.directiveEnd=s+a,i.providerIndexes=s}(a,i.data.length,c.length);for(let T=0;T<c.length;T++){const M=c[T];M.providersResolver&&M.providersResolver(M)}let y=!1,I=!1,E=xc(i,s,c.length,null);for(let T=0;T<c.length;T++){const M=c[T];a.mergedAttrs=Hi(a.mergedAttrs,M.hostAttrs),HD(i,a,s,E,M),B0(E,M,d),null!==M.contentQueries&&(a.flags|=4),(null!==M.hostBindings||null!==M.hostAttrs||0!==M.hostVars)&&(a.flags|=64);const F=M.type.prototype;!y&&(F.ngOnChanges||F.ngOnInit||F.ngDoCheck)&&((i.preOrderHooks||(i.preOrderHooks=[])).push(a.index),y=!0),!I&&(F.ngOnChanges||F.ngDoCheck)&&((i.preOrderCheckHooks||(i.preOrderCheckHooks=[])).push(a.index),I=!0),E++}!function kt(i,s,a){const d=s.directiveEnd,h=i.data,y=s.attrs,I=[];let E=null,T=null;for(let M=s.directiveStart;M<d;M++){const F=h[M],q=a?a.get(F):null,ye=q?q.outputs:null;E=ft(F.inputs,M,E,q?q.inputs:null),T=ft(F.outputs,M,T,ye);const Be=null===E||null===y||Lp(s)?null:ko(E,M,y);I.push(Be)}null!==E&&(E.hasOwnProperty("class")&&(s.flags|=8),E.hasOwnProperty("style")&&(s.flags|=16)),s.initialInputs=I,s.inputs=E,s.outputs=T}(i,a,h)}function Hr(i,s,a){const c=a.directiveStart,d=a.directiveEnd,h=a.index,y=function Zu(){return Rt.lFrame.currentDirectiveIndex}();try{Ds(h);for(let I=c;I<d;I++){const E=i.data[I],T=s[I];Ys(I),(null!==E.hostBindings||0!==E.hostVars||null!==E.hostAttrs)&&fu(E,T)}}finally{Ds(-1),Ys(y)}}function fu(i,s){null!==i.hostBindings&&i.hostBindings(1,s)}function Wp(i,s,a){s.componentOffset=a,(i.components||(i.components=[])).push(s.index)}function B0(i,s,a){if(a){if(s.exportAs)for(let c=0;c<s.exportAs.length;c++)a[s.exportAs[c]]=i;lr(s)&&(a[""]=i)}}function HD(i,s,a,c,d){i.data[c]=d;const h=d.factory||(d.factory=zs(d.type)),y=new Wa(h,lr(d),Xl);i.blueprint[c]=y,a[c]=y,function $D(i,s,a,c,d){const h=d.hostBindings;if(h){let y=i.hostBindingOpCodes;null===y&&(y=i.hostBindingOpCodes=[]);const I=~s.index;(function yi(i){let s=i.length;for(;s>0;){const a=i[--s];if("number"==typeof a&&a<0)return a}return 0})(y)!=I&&y.push(I),y.push(a,c,h)}}(i,s,c,xc(i,a,d.hostVars,Bt),d)}function ro(i,s,a,c,d,h){const y=Br(i,s);!function Yh(i,s,a,c,d,h,y){if(null==h)i.removeAttribute(s,d,a);else{const I=null==y?we(h):y(h,c||"",d);i.setAttribute(s,d,I,a)}}(s[11],y,h,i.value,a,c,d)}function qp(i,s,a,c,d,h){const y=h[s];if(null!==y){const I=c.setInput;for(let E=0;E<y.length;){const T=y[E++],M=y[E++],F=y[E++];null!==I?c.setInput(a,F,T,M):a[M]=F}}}function ko(i,s,a){let c=null,d=0;for(;d<a.length;){const h=a[d];if(0!==h)if(5!==h){if("number"==typeof h)break;if(i.hasOwnProperty(h)){null===c&&(c=[]);const y=i[h];for(let I=0;I<y.length;I+=2)if(y[I]===s){c.push(h,y[I+1],a[d+1]);break}}d+=2}else d+=2;else d+=4}return c}function Zp(i,s,a,c){return[i,!0,!1,s,null,0,c,a,null,null]}function rd(i,s){const a=Xn(s,i);if(vo(a)){const c=a[1];48&a[2]?$p(c,a,c.template,a[8]):a[5]>0&&Kp(a)}}function Kp(i){for(let c=oi(i);null!==c;c=Rs(c))for(let d=10;d<c.length;d++){const h=c[d];if(vo(h))if(512&h[2]){const y=h[1];$p(y,h,y.template,h[8])}else h[5]>0&&Kp(h)}const a=i[1].components;if(null!==a)for(let c=0;c<a.length;c++){const d=Xn(a[c],i);vo(d)&&d[5]>0&&Kp(d)}}function Fy(i,s){const a=Xn(s,i),c=a[1];(function $0(i,s){for(let a=s.length;a<i.blueprint.length;a++)s.push(i.blueprint[a])})(c,a),Ny(c,a,a[8])}function Yp(i,s){return i[13]?i[14][4]=s:i[13]=s,i[14]=s,s}function Qp(i){for(;i;){i[2]|=32;const s=at(i);if(tp(i)&&!s)return i;i=s}return null}function Mc(i,s,a,c=!0){const d=s[10];d.begin&&d.begin();try{$p(i,s,i.template,a)}catch(y){throw c&&Ly(s,y),y}finally{d.end&&d.end()}}function Qh(i,s,a){Yu(0),s(i,a)}function z0(i){return i[7]||(i[7]=[])}function W0(i){return i.cleanup||(i.cleanup=[])}function Ly(i,s){const a=i[9],c=a?a.get(Wh,null):null;c&&c.handleError(s)}function Uy(i,s,a,c,d){for(let h=0;h<a.length;){const y=a[h++],I=a[h++],E=s[y],T=i.data[y];null!==T.setInput?T.setInput(E,d,c,I):E[I]=d}}function us(i,s,a){const c=function ws(i,s){return Sn(s[i])}(s,i);!function Ll(i,s,a){i.setValue(s,a)}(i[11],c,a)}function Jp(i,s,a){let c=a?i.styles:null,d=a?i.classes:null,h=0;if(null!==s)for(let y=0;y<s.length;y++){const I=s[y];"number"==typeof I?h=I:1==h?d=pe(d,I):2==h&&(c=pe(c,I+": "+s[++y]+";"))}a?i.styles=c:i.stylesWithoutHost=c,a?i.classes=d:i.classesWithoutHost=d}function pu(i,s,a,c,d=!1){for(;null!==a;){const h=s[a.index];if(null!==h&&c.push(Sn(h)),ei(h))for(let I=10;I<h.length;I++){const E=h[I],T=E[1].firstChild;null!==T&&pu(E[1],E,T,c)}const y=a.type;if(8&y)pu(i,s,a.child,c);else if(32&y){const I=Ce(a,s);let E;for(;E=I();)c.push(E)}else if(16&y){const I=Bl(s,a);if(Array.isArray(I))c.push(...I);else{const E=at(s[16]);pu(E[1],E,I,c,!0)}}a=d?a.projectionNext:a.next}return c}class Xh{constructor(s,a){this._lView=s,this._cdRefInjectingView=a,this._appRef=null,this._attachedToViewContainer=!1}get rootNodes(){const s=this._lView,a=s[1];return pu(a,s,a.firstChild,[])}get context(){return this._lView[8]}set context(s){this._lView[8]=s}get destroyed(){return 128==(128&this._lView[2])}destroy(){if(this._appRef)this._appRef.detachView(this);else if(this._attachedToViewContainer){const s=this._lView[3];if(ei(s)){const a=s[8],c=a?a.indexOf(this):-1;c>-1&&(Mh(s,c),oa(a,c))}this._attachedToViewContainer=!1}Rh(this._lView[1],this._lView)}onDestroy(s){L0(this._lView[1],this._lView,null,s)}markForCheck(){Qp(this._cdRefInjectingView||this._lView)}detach(){this._lView[2]&=-65}reattach(){this._lView[2]|=64}detectChanges(){Mc(this._lView[1],this._lView,this.context)}checkNoChanges(){}attachToViewContainerRef(){if(this._appRef)throw new ge(902,!1);this._attachedToViewContainer=!0}detachFromAppRef(){this._appRef=null,function Ah(i,s){$l(i,s,s[11],2,null,null)}(this._lView[1],this._lView)}attachToAppRef(s){if(this._attachedToViewContainer)throw new ge(902,!1);this._appRef=s}}class GD extends Xh{constructor(s){super(s),this._view=s}detectChanges(){const s=this._view;Mc(s[1],s,s[8],!1)}checkNoChanges(){}get context(){return null}}class Jh extends Zl{constructor(s){super(),this.ngModule=s}resolveComponentFactory(s){const a=en(s);return new id(a,this.ngModule)}}function eg(i){const s=[];for(let a in i)i.hasOwnProperty(a)&&s.push({propName:i[a],templateName:a});return s}class q0{constructor(s,a){this.injector=s,this.parentInjector=a}get(s,a,c){c=yt(c);const d=this.injector.get(s,vy,c);return d!==vy||a===vy?d:this.parentInjector.get(s,a,c)}}class id extends jh{constructor(s,a){super(),this.componentDef=s,this.ngModule=a,this.componentType=s.type,this.selector=function Up(i){return i.map(ID).join(",")}(s.selectors),this.ngContentSelectors=s.ngContentSelectors?s.ngContentSelectors:[],this.isBoundToModule=!!a}get inputs(){return eg(this.componentDef.inputs)}get outputs(){return eg(this.componentDef.outputs)}create(s,a,c,d){let h=(d=d||this.ngModule)instanceof Cc?d:d?.injector;h&&null!==this.componentDef.getStandaloneInjector&&(h=this.componentDef.getStandaloneInjector(h)||h);const y=h?new q0(s,h):s,I=y.get(p0,null);if(null===I)throw new ge(407,!1);const E=y.get(g0,null),T=I.createRenderer(null,this.componentDef),M=this.componentDef.selectors[0][0]||"div",F=c?function an(i,s,a){return i.selectRootElement(s,a===Ae.ShadowDom)}(T,c,this.componentDef.encapsulation):pc(T,M,function G0(i){const s=i.toLowerCase();return"svg"===s?"svg":"math"===s?"math":null}(M)),q=this.componentDef.onPush?288:272,te=td(0,null,null,1,0,null,null,null,null,null),ye=du(null,te,null,q,null,null,I,T,E,y,null);let Be,qe;za(ye);try{const st=this.componentDef;let Ct,Oe=null;st.findHostDirectiveDefs?(Ct=[],Oe=new Map,st.findHostDirectiveDefs(st,Ct,Oe),Ct.push(st)):Ct=[st];const Ft=function Vy(i,s){const a=i[1];return i[22]=s,ed(a,22,2,"#host",null)}(ye,F),kn=function By(i,s,a,c,d,h,y,I){const E=d[1];!function $y(i,s,a,c){for(const d of i)s.mergedAttrs=Hi(s.mergedAttrs,d.hostAttrs);null!==s.mergedAttrs&&(Jp(s,s.mergedAttrs,!0),null!==a&&Y_(c,a,s))}(c,i,s,y);const T=h.createRenderer(s,a),M=du(d,Oo(a),null,a.onPush?32:16,d[i.index],i,h,T,I||null,null,null);return E.firstCreatePass&&Wp(E,i,c.length-1),Yp(d,M),d[i.index]=M}(Ft,F,st,Ct,ye,I,T);qe=La(te,22),F&&function Y0(i,s,a,c){if(c)na(i,a,["ng-version",y0.full]);else{const{attrs:d,classes:h}=function wD(i){const s=[],a=[];let c=1,d=2;for(;c<i.length;){let h=i[c];if("string"==typeof h)2===d?""!==h&&s.push(h,i[++c]):8===d&&a.push(h);else{if(!Os(d))break;d=h}c++}return{attrs:s,classes:a}}(s.selectors[0]);d&&na(i,a,d),h&&h.length>0&&qm(i,a,h.join(" "))}}(T,st,F,c),void 0!==a&&function qD(i,s,a){const c=i.projection=[];for(let d=0;d<s.length;d++){const h=a[d];c.push(null!=h?Array.from(h):null)}}(qe,this.ngContentSelectors,a),Be=function K0(i,s,a,c,d,h){const y=Jn(),I=d[1],E=Br(y,d);V0(I,d,y,a,null,c);for(let M=0;M<a.length;M++)jr(Ri(d,I,y.directiveStart+M,y),d);Hr(I,d,y),E&&jr(E,d);const T=Ri(d,I,y.directiveStart+y.componentOffset,y);if(i[8]=d[8]=T,null!==h)for(const M of h)M(T,s);return F0(I,y,i),T}(kn,st,Ct,Oe,ye,[Q0]),Ny(te,ye,null)}finally{dp()}return new tg(this.componentType,Be,Tc(qe,ye),ye,qe)}}class tg extends uD{constructor(s,a,c,d,h){super(),this.location=c,this._rootLView=d,this._tNode=h,this.instance=a,this.hostView=this.changeDetectorRef=new GD(d),this.componentType=s}setInput(s,a){const c=this._tNode.inputs;let d;if(null!==c&&(d=c[s])){const h=this._rootLView;Uy(h[1],h,d,s,a),nd(h,this._tNode.index)}}get injector(){return new ss(this._tNode,this._rootLView)}destroy(){this.hostView.destroy()}onDestroy(s){this.hostView.onDestroy(s)}}function Q0(){const i=Jn();bs(xe()[1],i)}let ef=null;function va(){if(!ef){const i=bt.Symbol;if(i&&i.iterator)ef=i.iterator;else{const s=Object.getOwnPropertyNames(Map.prototype);for(let a=0;a<s.length;++a){const c=s[a];"entries"!==c&&"size"!==c&&Map.prototype[c]===Map.prototype.entries&&(ef=c)}}}return ef}function Rc(i){return!!sd(i)&&(Array.isArray(i)||!(i instanceof Map)&&va()in i)}function sd(i){return null!==i&&("function"==typeof i||"object"==typeof i)}function _i(i,s,a){return!Object.is(i[s],a)&&(i[s]=a,!0)}function ig(i,s,a,c){const d=xe();return _i(d,Mi(),s)&&(Yt(),ro(cn(),d,i,s,a,c)),ig}function fd(i,s,a,c,d,h,y,I){const E=xe(),T=Yt(),M=i+22,F=T.firstCreatePass?function sI(i,s,a,c,d,h,y,I,E){const T=s.consts,M=ed(s,i,4,y||null,di(T,I));Oy(s,a,M,di(T,E)),bs(s,M);const F=M.tViews=td(2,M,c,d,h,s.directiveRegistry,s.pipeRegistry,null,s.schemas,T);return null!==s.queries&&(s.queries.template(s,M),F.queries=s.queries.embeddedTView(M)),M}(M,T,E,s,a,c,d,h,y):T.data[M];Bi(F,!1);const q=E[11].createComment("");Cp(T,E,q,F),jr(q,E),Yp(E,E[M]=Zp(q,E,q,F)),Gu(F)&&Py(T,E,F),null!=y&&ve(E,F,I)}function rf(i,s,a){const c=xe();return _i(c,Mi(),s)&&function mi(i,s,a,c,d,h,y,I){const E=Br(s,a);let M,T=s.inputs;!I&&null!=T&&(M=T[c])?(Uy(i,a,M,c,d),qo(s)&&nd(a,s.index)):3&s.type&&(c=function Hp(i){return"class"===i?"className":"for"===i?"htmlFor":"formaction"===i?"formAction":"innerHtml"===i?"innerHTML":"readonly"===i?"readOnly":"tabindex"===i?"tabIndex":i}(c),d=null!=y?y(d,s.value||"",c):d,h.setProperty(E,c,d))}(Yt(),cn(),c,i,s,c[11],a,!1),rf}function pd(i,s,a,c,d){const y=d?"class":"style";Uy(i,a,s.inputs[y],y,c)}function af(i,s,a,c){const d=xe(),h=Yt(),y=22+i,I=d[11],E=d[y]=pc(I,s,function hp(){return Rt.lFrame.currentNamespace}()),T=h.firstCreatePass?function sf(i,s,a,c,d,h,y){const I=s.consts,T=ed(s,i,2,d,di(I,h));return Oy(s,a,T,di(I,y)),null!==T.attrs&&Jp(T,T.attrs,!1),null!==T.mergedAttrs&&Jp(T,T.mergedAttrs,!0),null!==s.queries&&s.queries.elementStart(s,T),T}(y,h,d,0,s,a,c):h.data[y];return Bi(T,!0),Y_(I,E,T),32!=(32&T.flags)&&Cp(h,d,E,T),0===function ea(){return Rt.lFrame.elementDepthCount}()&&jr(E,d),function rh(){Rt.lFrame.elementDepthCount++}(),Gu(T)&&(Py(h,d,T),F0(h,T,d)),null!==c&&ve(d,T),af}function og(){let i=Jn();wo()?$a():(i=i.parent,Bi(i,!1));const s=i;!function Va(){Rt.lFrame.elementDepthCount--}();const a=Yt();return a.firstCreatePass&&(bs(a,i),es(i)&&a.queries.elementEnd(i)),null!=s.classesWithoutHost&&function tc(i){return 0!=(8&i.flags)}(s)&&pd(a,s,xe(),s.classesWithoutHost,!0),null!=s.stylesWithoutHost&&function Do(i){return 0!=(16&i.flags)}(s)&&pd(a,s,xe(),s.stylesWithoutHost,!1),og}function uf(i,s,a,c){return af(i,s,a,c),og(),uf}function gd(i,s,a){const c=xe(),d=Yt(),h=i+22,y=d.firstCreatePass?function ag(i,s,a,c,d){const h=s.consts,y=di(h,c),I=ed(s,i,8,"ng-container",y);return null!==y&&Jp(I,y,!0),Oy(s,a,I,di(h,d)),null!==s.queries&&s.queries.elementStart(s,I),I}(h,d,c,s,a):d.data[h];Bi(y,!0);const I=c[h]=c[11].createComment("");return Cp(d,c,I,y),jr(I,c),Gu(y)&&(Py(d,c,y),F0(d,y,c)),null!=a&&ve(c,y),gd}function cf(){let i=Jn();const s=Yt();return wo()?$a():(i=i.parent,Bi(i,!1)),s.firstCreatePass&&(bs(s,i),es(i)&&s.queries.elementEnd(i)),cf}function nv(){return xe()}function rv(i){return!!i&&"function"==typeof i.then}function md(i){return!!i&&"function"==typeof i.subscribe}const iv=md;function yd(i,s,a,c){const d=xe(),h=Yt(),y=Jn();return function ug(i,s,a,c,d,h,y){const I=Gu(c),T=i.firstCreatePass&&W0(i),M=s[8],F=z0(s);let q=!0;if(3&c.type||y){const Be=Br(c,s),qe=y?y(Be):Be,st=F.length,Ct=y?Ft=>y(Sn(Ft[c.index])):c.index;let Oe=null;if(!y&&I&&(Oe=function Pc(i,s,a,c){const d=i.cleanup;if(null!=d)for(let h=0;h<d.length-1;h+=2){const y=d[h];if(y===a&&d[h+1]===c){const I=s[7],E=d[h+2];return I.length>E?I[E]:null}"string"==typeof y&&(h+=2)}return null}(i,s,d,c.index)),null!==Oe)(Oe.__ngLastListenerFn__||Oe).__ngNextListenerFn__=h,Oe.__ngLastListenerFn__=h,q=!1;else{h=aI(c,s,M,h,!1);const Ft=a.listen(qe,d,h);F.push(h,Ft),T&&T.push(d,Ct,st,st+1)}}else h=aI(c,s,M,h,!1);const te=c.outputs;let ye;if(q&&null!==te&&(ye=te[d])){const Be=ye.length;if(Be)for(let qe=0;qe<Be;qe+=2){const kn=s[ye[qe]][ye[qe+1]].subscribe(h),Gn=F.length;F.push(h,kn),T&&T.push(d,c.index,Gn,-(Gn+1))}}}(h,d,d[11],y,i,s,c),yd}function oI(i,s,a,c){try{return!1!==a(c)}catch(d){return Ly(i,d),!1}}function aI(i,s,a,c,d){return function h(y){if(y===Function)return c;Qp(i.componentOffset>-1?Xn(i.index,s):s);let E=oI(s,0,c,y),T=h.__ngNextListenerFn__;for(;T;)E=oI(s,0,T,y)&&E,T=T.__ngNextListenerFn__;return d&&!1===E&&(y.preventDefault(),y.returnValue=!1),E}}function sv(i=1){return function Mm(i){return(Rt.lFrame.contextLView=function Xu(i,s){for(;i>0;)s=s[15],i--;return s}(i,Rt.lFrame.contextLView))[8]}(i)}function bd(i,s=""){const a=xe(),c=Yt(),d=i+22,h=c.firstCreatePass?ed(c,d,1,s,null):c.data[d],y=a[d]=function uu(i,s){return i.createText(s)}(a[11],s);Cp(c,a,y,h),Bi(h,!1)}function yg(i){return yf("",i,""),yg}function yf(i,s,a){const c=xe(),d=function ad(i,s,a,c){return _i(i,Mi(),a)?s+we(a)+c:Bt}(c,i,s,a);return d!==Bt&&us(c,ti(),d),yf}const Vc=void 0;var fe=["en",[["a","p"],["AM","PM"],Vc],[["AM","PM"],Vc,Vc],[["S","M","T","W","T","F","S"],["Sun","Mon","Tue","Wed","Thu","Fri","Sat"],["Sunday","Monday","Tuesday","Wednesday","Thursday","Friday","Saturday"],["Su","Mo","Tu","We","Th","Fr","Sa"]],Vc,[["J","F","M","A","M","J","J","A","S","O","N","D"],["Jan","Feb","Mar","Apr","May","Jun","Jul","Aug","Sep","Oct","Nov","Dec"],["January","February","March","April","May","June","July","August","September","October","November","December"]],Vc,[["B","A"],["BC","AD"],["Before Christ","Anno Domini"]],0,[6,0],["M/d/yy","MMM d, y","MMMM d, y","EEEE, MMMM d, y"],["h:mm a","h:mm:ss a","h:mm:ss a z","h:mm:ss a zzzz"],["{1}, {0}",Vc,"{1} 'at' {0}",Vc],[".",",",";","%","+","-","E","\xd7","\u2030","\u221e","NaN",":"],["#,##0.###","#,##0%","\xa4#,##0.00","#E0"],"USD","$","US Dollar",{},"ltr",function Ze(i){const a=Math.floor(Math.abs(i)),c=i.toString().replace(/^[^.]*\.?/,"").length;return 1===a&&0===c?1:5}];let Te={};function bg(i){const s=function RI(i){return i.toLowerCase().replace(/_/g,"-")}(i);let a=MI(s);if(a)return a;const c=s.split("-")[0];if(a=MI(c),a)return a;if("en"===c)return fe;throw new ge(701,!1)}function xI(i){return bg(i)[Dt.PluralCase]}function MI(i){return i in Te||(Te[i]=bt.ng&&bt.ng.common&&bt.ng.common.locales&&bt.ng.common.locales[i]),Te[i]}var Dt=(()=>((Dt=Dt||{})[Dt.LocaleId=0]="LocaleId",Dt[Dt.DayPeriodsFormat=1]="DayPeriodsFormat",Dt[Dt.DayPeriodsStandalone=2]="DayPeriodsStandalone",Dt[Dt.DaysFormat=3]="DaysFormat",Dt[Dt.DaysStandalone=4]="DaysStandalone",Dt[Dt.MonthsFormat=5]="MonthsFormat",Dt[Dt.MonthsStandalone=6]="MonthsStandalone",Dt[Dt.Eras=7]="Eras",Dt[Dt.FirstDayOfWeek=8]="FirstDayOfWeek",Dt[Dt.WeekendRange=9]="WeekendRange",Dt[Dt.DateFormat=10]="DateFormat",Dt[Dt.TimeFormat=11]="TimeFormat",Dt[Dt.DateTimeFormat=12]="DateTimeFormat",Dt[Dt.NumberSymbols=13]="NumberSymbols",Dt[Dt.NumberFormats=14]="NumberFormats",Dt[Dt.CurrencyCode=15]="CurrencyCode",Dt[Dt.CurrencySymbol=16]="CurrencySymbol",Dt[Dt.CurrencyName=17]="CurrencyName",Dt[Dt.Currencies=18]="Currencies",Dt[Dt.Directionality=19]="Directionality",Dt[Dt.PluralCase=20]="PluralCase",Dt[Dt.ExtraData=21]="ExtraData",Dt))();const Td="en-US";let mt=Td;class uo{}class ew{}function nr(i,s){return new Gr(i,s??null)}class Gr extends uo{constructor(s,a){super(),this._parent=a,this._bootstrapComponents=[],this.destroyCbs=[],this.componentFactoryResolver=new Jh(this);const c=Tr(s);this._bootstrapComponents=ma(c.bootstrap),this._r3Injector=xD(s,a,[{provide:uo,useValue:this},{provide:Zl,useValue:this.componentFactoryResolver}],de(s),new Set(["environment"])),this._r3Injector.resolveInjectorInitializers(),this.instance=this._r3Injector.get(s)}get injector(){return this._r3Injector}destroy(){const s=this._r3Injector;!s.destroyed&&s.destroy(),this.destroyCbs.forEach(a=>a()),this.destroyCbs=null}onDestroy(s){this.destroyCbs.push(s)}}class pn extends ew{constructor(s){super(),this.moduleType=s}create(s){return new Gr(this.moduleType,s)}}class tw extends uo{constructor(s,a,c){super(),this.componentFactoryResolver=new Jh(this),this.instance=null;const d=new h0([...s,{provide:uo,useValue:this},{provide:Zl,useValue:this.componentFactoryResolver}],a||Pp(),c,new Set(["environment"]));this.injector=d,d.resolveInjectorInitializers()}destroy(){this.injector.destroy()}onDestroy(s){this.injector.onDestroy(s)}}function Cu(i,s,a=null){return new tw(i,s,a).injector}let ds=(()=>{class i{constructor(a){this._injector=a,this.cachedInjectors=new Map}getOrCreateStandaloneInjector(a){if(!a.standalone)return null;if(!this.cachedInjectors.has(a.id)){const c=c0(0,a.type),d=c.length>0?Cu([c],this._injector,`Standalone[${a.type.name}]`):null;this.cachedInjectors.set(a.id,d)}return this.cachedInjectors.get(a.id)}ngOnDestroy(){try{for(const a of this.cachedInjectors.values())null!==a&&a.destroy()}finally{this.cachedInjectors.clear()}}}return i.\u0275prov=gt({token:i,providedIn:"environment",factory:()=>new i($e(Cc))}),i})();function qr(i){i.getStandaloneInjector=s=>s.get(ds).getOrCreateStandaloneInjector(i)}function Bv(i,s,a,c,d,h){const y=s+a;return _i(i,y,d)?function ks(i,s,a){return i[s]=a}(i,y+1,h?c.call(h,d):c(d)):function Mf(i,s){const a=i[s];return a===Bt?void 0:a}(i,y+1)}function lw(i,s){const a=Yt();let c;const d=i+22;a.firstCreatePass?(c=function dw(i,s){if(s)for(let a=s.length-1;a>=0;a--){const c=s[a];if(i===c.name)return c}}(s,a.pipeRegistry),a.data[d]=c,c.onDestroy&&(a.destroyHooks||(a.destroyHooks=[])).push(d,c.onDestroy)):c=a.data[d];const h=c.factory||(c.factory=zs(c.type)),y=Ln(Xl);try{const I=Js(!1),E=h();return Js(I),function Jy(i,s,a,c){a>=i.data.length&&(i.data[a]=null,i.blueprint[a]=null),s[a]=c}(a,xe(),d,E),E}finally{Ln(y)}}function Au(i,s,a){const c=i+22,d=xe(),h=function Vi(i,s){return i[s]}(d,c);return function Od(i,s){return i[1].data[s].pure}(d,c)?Bv(d,function Pn(){const i=Rt.lFrame;let s=i.bindingRootIndex;return-1===s&&(s=i.bindingRootIndex=i.tView.bindingStartIndex),s}(),s,h.transform,a,h):h.transform(a)}function Kc(i){return s=>{setTimeout(i,void 0,s)}}const Vo=class pw extends p.x{constructor(s=!1){super(),this.__isAsync=s}emit(s){super.next(s)}subscribe(s,a,c){let d=s,h=a||(()=>null),y=c;if(s&&"object"==typeof s){const E=s;d=E.next?.bind(E),h=E.error?.bind(E),y=E.complete?.bind(E)}this.__isAsync&&(h=Kc(h),d&&(d=Kc(d)),y&&(y=Kc(y)));const I=super.subscribe({next:d,error:h,complete:y});return s instanceof B.w0&&s.add(I),I}};function yb(){return this._results[va()]()}class Tn{constructor(s=!1){this._emitDistinctChangesOnly=s,this.dirty=!0,this._results=[],this._changesDetected=!1,this._changes=null,this.length=0,this.first=void 0,this.last=void 0;const a=va(),c=Tn.prototype;c[a]||(c[a]=yb)}get changes(){return this._changes||(this._changes=new Vo)}get(s){return this._results[s]}map(s){return this._results.map(s)}filter(s){return this._results.filter(s)}find(s){return this._results.find(s)}reduce(s,a){return this._results.reduce(s,a)}forEach(s){this._results.forEach(s)}some(s){return this._results.some(s)}toArray(){return this._results.slice()}toString(){return this._results.toString()}reset(s,a){const c=this;c.dirty=!1;const d=function Mr(i){return i.flat(Number.POSITIVE_INFINITY)}(s);(this._changesDetected=!function pp(i,s,a){if(i.length!==s.length)return!1;for(let c=0;c<i.length;c++){let d=i[c],h=s[c];if(a&&(d=a(d),h=a(h)),h!==d)return!1}return!0}(c._results,d,a))&&(c._results=d,c.length=d.length,c.last=d[this.length-1],c.first=d[0])}notifyOnChanges(){this._changes&&(this._changesDetected||!this._emitDistinctChangesOnly)&&this._changes.emit(this)}setDirty(){this.dirty=!0}destroy(){this.changes.complete(),this.changes.unsubscribe()}}let xu=(()=>{class i{}return i.__NG_ELEMENT_ID__=vb,i})();const Vg=xu,gw=class extends Vg{constructor(s,a,c){super(),this._declarationLView=s,this._declarationTContainer=a,this.elementRef=c}createEmbeddedView(s,a){const c=this._declarationTContainer.tViews,d=du(this._declarationLView,c,s,16,null,c.declTNode,null,null,null,null,a||null);d[17]=this._declarationLView[this._declarationTContainer.index];const y=this._declarationLView[19];return null!==y&&(d[19]=y.createEmbeddedView(c)),Ny(c,d,s),new Xh(d)}};function vb(){return Mu(Jn(),xe())}function Mu(i,s){return 4&i.type?new gw(s,i,Tc(i,s)):null}let Bg=(()=>{class i{}return i.__NG_ELEMENT_ID__=mw,i})();function mw(){return zv(Jn(),xe())}const kd=Bg,Bo=class extends kd{constructor(s,a,c){super(),this._lContainer=s,this._hostTNode=a,this._hostLView=c}get element(){return Tc(this._hostTNode,this._hostLView)}get injector(){return new ss(this._hostTNode,this._hostLView)}get parentInjector(){const s=Ya(this._hostTNode,this._hostLView);if(El(s)){const a=is(s,this._hostLView),c=ra(s);return new ss(a[1].data[c+8],a)}return new ss(null,this._hostLView)}clear(){for(;this.length>0;)this.remove(this.length-1)}get(s){const a=Hv(this._lContainer);return null!==a&&a[s]||null}get length(){return this._lContainer.length-10}createEmbeddedView(s,a,c){let d,h;"number"==typeof c?d=c:null!=c&&(d=c.index,h=c.injector);const y=s.createEmbeddedView(a||{},h);return this.insert(y,d),y}createComponent(s,a,c,d,h){const y=s&&!function Mo(i){return"function"==typeof i}(s);let I;if(y)I=a;else{const F=a||{};I=F.index,c=F.injector,d=F.projectableNodes,h=F.environmentInjector||F.ngModuleRef}const E=y?s:new id(en(s)),T=c||this.parentInjector;if(!h&&null==E.ngModule){const q=(y?T:this.parentInjector).get(Cc,null);q&&(h=q)}const M=E.create(T,d,void 0,h);return this.insert(M.hostView,I),M}insert(s,a){const c=s._lView,d=c[1];if(function nh(i){return ei(i[3])}(c)){const M=this.indexOf(s);if(-1!==M)this.detach(M);else{const F=c[3],q=new Bo(F,F[6],F[3]);q.detach(q.indexOf(s))}}const h=this._adjustIndex(a),y=this._lContainer;!function Um(i,s,a,c){const d=10+c,h=a.length;c>0&&(a[d-1][4]=s),c<h-10?(s[4]=a[d],uc(a,10+c,s)):(a.push(s),s[4]=null),s[3]=a;const y=s[17];null!==y&&a!==y&&function xh(i,s){const a=i[9];s[16]!==s[3][3][16]&&(i[2]=!0),null===a?i[9]=[s]:a.push(s)}(y,s);const I=s[19];null!==I&&I.insertView(i),s[2]|=64}(d,c,y,h);const I=zm(h,y),E=c[11],T=Oh(E,y[7]);return null!==T&&function gc(i,s,a,c,d,h){c[0]=d,c[6]=s,$l(i,c,a,1,d,h)}(d,y[6],E,c,T,I),s.attachToViewContainerRef(),uc($g(y),h,s),s}move(s,a){return this.insert(s,a)}indexOf(s){const a=Hv(this._lContainer);return null!==a?a.indexOf(s):-1}remove(s){const a=this._adjustIndex(s,-1),c=Mh(this._lContainer,a);c&&(oa($g(this._lContainer),a),Rh(c[1],c))}detach(s){const a=this._adjustIndex(s,-1),c=Mh(this._lContainer,a);return c&&null!=oa($g(this._lContainer),a)?new Xh(c):null}_adjustIndex(s,a=0){return s??this.length+a}};function Hv(i){return i[8]}function $g(i){return i[8]||(i[8]=[])}function zv(i,s){let a;const c=s[i.index];if(ei(c))a=c;else{let d;if(8&i.type)d=Sn(c);else{const h=s[11];d=h.createComment("");const y=Br(i,s);yc(h,Oh(h,y),d,function q_(i,s){return i.nextSibling(s)}(h,y),!1)}s[i.index]=a=Zp(c,s,d,i),Yp(s,a)}return new Bo(a,i,s)}class Ru{constructor(s){this.queryList=s,this.matches=null}clone(){return new Ru(this.queryList)}setDirty(){this.queryList.setDirty()}}class Pf{constructor(s=[]){this.queries=s}createEmbeddedView(s){const a=s.queries;if(null!==a){const c=null!==s.contentQueries?s.contentQueries[0]:a.length,d=[];for(let h=0;h<c;h++){const y=a.getByIndex(h);d.push(this.queries[y.indexInDeclarationView].clone())}return new Pf(d)}return null}insertView(s){this.dirtyQueriesWithMatches(s)}detachView(s){this.dirtyQueriesWithMatches(s)}dirtyQueriesWithMatches(s){for(let a=0;a<this.queries.length;a++)null!==Dw(s,a).matches&&this.queries[a].setDirty()}}class yw{constructor(s,a,c=null){this.predicate=s,this.flags=a,this.read=c}}class rr{constructor(s=[]){this.queries=s}elementStart(s,a){for(let c=0;c<this.queries.length;c++)this.queries[c].elementStart(s,a)}elementEnd(s){for(let a=0;a<this.queries.length;a++)this.queries[a].elementEnd(s)}embeddedTView(s){let a=null;for(let c=0;c<this.length;c++){const d=null!==a?a.length:0,h=this.getByIndex(c).embeddedTView(s,d);h&&(h.indexInDeclarationView=c,null!==a?a.push(h):a=[h])}return null!==a?new rr(a):null}template(s,a){for(let c=0;c<this.queries.length;c++)this.queries[c].template(s,a)}getByIndex(s){return this.queries[s]}get length(){return this.queries.length}track(s){this.queries.push(s)}}class nn{constructor(s,a=-1){this.metadata=s,this.matches=null,this.indexInDeclarationView=-1,this.crossesNgTemplate=!1,this._appliesToNextNode=!0,this._declarationNodeIndex=a}elementStart(s,a){this.isApplyingToNode(a)&&this.matchTNode(s,a)}elementEnd(s){this._declarationNodeIndex===s.index&&(this._appliesToNextNode=!1)}template(s,a){this.elementStart(s,a)}embeddedTView(s,a){return this.isApplyingToNode(s)?(this.crossesNgTemplate=!0,this.addMatch(-s.index,a),new nn(this.metadata)):null}isApplyingToNode(s){if(this._appliesToNextNode&&1!=(1&this.metadata.flags)){const a=this._declarationNodeIndex;let c=s.parent;for(;null!==c&&8&c.type&&c.index!==a;)c=c.parent;return a===(null!==c?c.index:-1)}return this._appliesToNextNode}matchTNode(s,a){const c=this.metadata.predicate;if(Array.isArray(c))for(let d=0;d<c.length;d++){const h=c[d];this.matchTNodeWithReadOption(s,a,vw(a,h)),this.matchTNodeWithReadOption(s,a,To(a,s,h,!1,!1))}else c===xu?4&a.type&&this.matchTNodeWithReadOption(s,a,-1):this.matchTNodeWithReadOption(s,a,To(a,s,c,!1,!1))}matchTNodeWithReadOption(s,a,c){if(null!==c){const d=this.metadata.read;if(null!==d)if(d===zh||d===Bg||d===xu&&4&a.type)this.addMatch(a.index,-2);else{const h=To(a,s,d,!1,!1);null!==h&&this.addMatch(a.index,h)}else this.addMatch(a.index,c)}}addMatch(s,a){null===this.matches?this.matches=[s,a]:this.matches.push(s,a)}}function vw(i,s){const a=i.localNames;if(null!==a)for(let c=0;c<a.length;c+=2)if(a[c]===s)return a[c+1];return null}function Nu(i,s,a,c){return-1===a?function _w(i,s){return 11&i.type?Tc(i,s):4&i.type?Mu(i,s):null}(s,i):-2===a?function _b(i,s,a){return a===zh?Tc(s,i):a===xu?Mu(s,i):a===Bg?zv(s,i):void 0}(i,s,c):Ri(i,i[1],a,s)}function Oi(i,s,a,c){const d=s[19].queries[c];if(null===d.matches){const h=i.data,y=a.matches,I=[];for(let E=0;E<y.length;E+=2){const T=y[E];I.push(T<0?null:Nu(s,h[T],y[E+1],a.metadata.read))}d.matches=I}return d.matches}function jg(i,s,a,c){const d=i.queries.getByIndex(a),h=d.matches;if(null!==h){const y=Oi(i,s,d,a);for(let I=0;I<h.length;I+=2){const E=h[I];if(E>0)c.push(y[I/2]);else{const T=h[I+1],M=s[-E];for(let F=10;F<M.length;F++){const q=M[F];q[17]===q[3]&&jg(q[1],q,T,c)}if(null!==M[9]){const F=M[9];for(let q=0;q<F.length;q++){const te=F[q];jg(te[1],te,T,c)}}}}}return c}function Fd(i){const s=xe(),a=Yt(),c=oh();Yu(c+1);const d=Dw(a,c);if(i.dirty&&function Ua(i){return 4==(4&i[2])}(s)===(2==(2&d.metadata.flags))){if(null===d.matches)i.reset([]);else{const h=d.crossesNgTemplate?jg(a,s,c,[]):Oi(a,s,d,c);i.reset(h,cD),i.notifyOnChanges()}return!0}return!1}function co(i,s,a,c){const d=Yt();if(d.firstCreatePass){const h=Jn();(function Ew(i,s,a){null===i.queries&&(i.queries=new rr),i.queries.track(new nn(s,a))})(d,new yw(s,a,c),h.index),function qt(i,s){const a=i.contentQueries||(i.contentQueries=[]);s!==(a.length?a[a.length-1]:-1)&&a.push(i.queries.length-1,s)}(d,i),2==(2&a)&&(d.staticContentQueries=!0)}!function ww(i,s,a){const c=new Tn(4==(4&a));L0(i,s,c,c.destroy),null===s[19]&&(s[19]=new Pf),s[19].queries.push(new Ru(c))}(d,xe(),a)}function Wv(){return function Of(i,s){return i[19].queries[s].queryList}(xe(),oh())}function Dw(i,s){return i.queries.getByIndex(s)}function qg(...i){}const Uw=new on("Application Initializer");let Zg=(()=>{class i{constructor(a){this.appInits=a,this.resolve=qg,this.reject=qg,this.initialized=!1,this.done=!1,this.donePromise=new Promise((c,d)=>{this.resolve=c,this.reject=d})}runInitializers(){if(this.initialized)return;const a=[],c=()=>{this.done=!0,this.resolve()};if(this.appInits)for(let d=0;d<this.appInits.length;d++){const h=this.appInits[d]();if(rv(h))a.push(h);else if(iv(h)){const y=new Promise((I,E)=>{h.subscribe({complete:I,error:E})});a.push(y)}}Promise.all(a).then(()=>{c()}).catch(d=>{this.reject(d)}),0===a.length&&c(),this.initialized=!0}}return i.\u0275fac=function(a){return new(a||i)($e(Uw,8))},i.\u0275prov=gt({token:i,factory:i.\u0275fac,providedIn:"root"}),i})();const Vw=new on("AppId",{providedIn:"root",factory:function Bw(){return`${Kg()}${Kg()}${Kg()}`}});function Kg(){return String.fromCharCode(97+Math.floor(25*Math.random()))}const $w=new on("Platform Initializer"),jw=new on("Platform ID",{providedIn:"platform",factory:()=>"unknown"}),o_=new on("appBootstrapListener");let Zr=(()=>{class i{log(a){console.log(a)}warn(a){console.warn(a)}}return i.\u0275fac=function(a){return new(a||i)},i.\u0275prov=gt({token:i,factory:i.\u0275fac,providedIn:"platform"}),i})();const $d=new on("LocaleId",{providedIn:"root",factory:()=>Ke($d,Je.Optional|Je.SkipSelf)||function a_(){return typeof $localize<"u"&&$localize.locale||Td}()}),u_=new on("DefaultCurrencyCode",{providedIn:"root",factory:()=>"USD"});class zw{constructor(s,a){this.ngModuleFactory=s,this.componentFactories=a}}let Yg=(()=>{class i{compileModuleSync(a){return new pn(a)}compileModuleAsync(a){return Promise.resolve(this.compileModuleSync(a))}compileModuleAndAllComponentsSync(a){const c=this.compileModuleSync(a),h=ma(Tr(a).declarations).reduce((y,I)=>{const E=en(I);return E&&y.push(new id(E)),y},[]);return new zw(c,h)}compileModuleAndAllComponentsAsync(a){return Promise.resolve(this.compileModuleAndAllComponentsSync(a))}clearCache(){}clearCacheFor(a){}getModuleId(a){}}return i.\u0275fac=function(a){return new(a||i)},i.\u0275prov=gt({token:i,factory:i.\u0275fac,providedIn:"root"}),i})();const Gw=(()=>Promise.resolve(0))();function Qg(i){typeof Zone>"u"?Gw.then(()=>{i&&i.apply(null,null)}):Zone.current.scheduleMicroTask("scheduleMicrotask",i)}class fs{constructor({enableLongStackTrace:s=!1,shouldCoalesceEventChangeDetection:a=!1,shouldCoalesceRunChangeDetection:c=!1}){if(this.hasPendingMacrotasks=!1,this.hasPendingMicrotasks=!1,this.isStable=!0,this.onUnstable=new Vo(!1),this.onMicrotaskEmpty=new Vo(!1),this.onStable=new Vo(!1),this.onError=new Vo(!1),typeof Zone>"u")throw new ge(908,!1);Zone.assertZonePatched();const d=this;d._nesting=0,d._outer=d._inner=Zone.current,Zone.TaskTrackingZoneSpec&&(d._inner=d._inner.fork(new Zone.TaskTrackingZoneSpec)),s&&Zone.longStackTraceZoneSpec&&(d._inner=d._inner.fork(Zone.longStackTraceZoneSpec)),d.shouldCoalesceEventChangeDetection=!c&&a,d.shouldCoalesceRunChangeDetection=c,d.lastRequestAnimationFrameId=-1,d.nativeRequestAnimationFrame=function Ab(){let i=bt.requestAnimationFrame,s=bt.cancelAnimationFrame;if(typeof Zone<"u"&&i&&s){const a=i[Zone.__symbol__("OriginalDelegate")];a&&(i=a);const c=s[Zone.__symbol__("OriginalDelegate")];c&&(s=c)}return{nativeRequestAnimationFrame:i,nativeCancelAnimationFrame:s}}().nativeRequestAnimationFrame,function Mb(i){const s=()=>{!function tl(i){i.isCheckStableRunning||-1!==i.lastRequestAnimationFrameId||(i.lastRequestAnimationFrameId=i.nativeRequestAnimationFrame.call(bt,()=>{i.fakeTopEventTask||(i.fakeTopEventTask=Zone.root.scheduleEventTask("fakeTopEventTask",()=>{i.lastRequestAnimationFrameId=-1,Jg(i),i.isCheckStableRunning=!0,el(i),i.isCheckStableRunning=!1},void 0,()=>{},()=>{})),i.fakeTopEventTask.invoke()}),Jg(i))}(i)};i._inner=i._inner.fork({name:"angular",properties:{isAngularZone:!0},onInvokeTask:(a,c,d,h,y,I)=>{try{return qw(i),a.invokeTask(d,h,y,I)}finally{(i.shouldCoalesceEventChangeDetection&&"eventTask"===h.type||i.shouldCoalesceRunChangeDetection)&&s(),Zw(i)}},onInvoke:(a,c,d,h,y,I,E)=>{try{return qw(i),a.invoke(d,h,y,I,E)}finally{i.shouldCoalesceRunChangeDetection&&s(),Zw(i)}},onHasTask:(a,c,d,h)=>{a.hasTask(d,h),c===d&&("microTask"==h.change?(i._hasPendingMicrotasks=h.microTask,Jg(i),el(i)):"macroTask"==h.change&&(i.hasPendingMacrotasks=h.macroTask))},onHandleError:(a,c,d,h)=>(a.handleError(d,h),i.runOutsideAngular(()=>i.onError.emit(h)),!1)})}(d)}static isInAngularZone(){return typeof Zone<"u"&&!0===Zone.current.get("isAngularZone")}static assertInAngularZone(){if(!fs.isInAngularZone())throw new ge(909,!1)}static assertNotInAngularZone(){if(fs.isInAngularZone())throw new ge(909,!1)}run(s,a,c){return this._inner.run(s,a,c)}runTask(s,a,c,d){const h=this._inner,y=h.scheduleEventTask("NgZoneEvent: "+d,s,Xg,qg,qg);try{return h.runTask(y,a,c)}finally{h.cancelTask(y)}}runGuarded(s,a,c){return this._inner.runGuarded(s,a,c)}runOutsideAngular(s){return this._outer.run(s)}}const Xg={};function el(i){if(0==i._nesting&&!i.hasPendingMicrotasks&&!i.isStable)try{i._nesting++,i.onMicrotaskEmpty.emit(null)}finally{if(i._nesting--,!i.hasPendingMicrotasks)try{i.runOutsideAngular(()=>i.onStable.emit(null))}finally{i.isStable=!0}}}function Jg(i){i.hasPendingMicrotasks=!!(i._hasPendingMicrotasks||(i.shouldCoalesceEventChangeDetection||i.shouldCoalesceRunChangeDetection)&&-1!==i.lastRequestAnimationFrameId)}function qw(i){i._nesting++,i.isStable&&(i.isStable=!1,i.onUnstable.emit(null))}function Zw(i){i._nesting--,el(i)}class Rb{constructor(){this.hasPendingMicrotasks=!1,this.hasPendingMacrotasks=!1,this.isStable=!0,this.onUnstable=new Vo,this.onMicrotaskEmpty=new Vo,this.onStable=new Vo,this.onError=new Vo}run(s,a,c){return s.apply(a,c)}runGuarded(s,a,c){return s.apply(a,c)}runOutsideAngular(s){return s()}runTask(s,a,c,d){return s.apply(a,c)}}const zd=new on(""),Ou=new on("");let em,ku=(()=>{class i{constructor(a,c,d){this._ngZone=a,this.registry=c,this._pendingCount=0,this._isZoneStable=!0,this._didWork=!1,this._callbacks=[],this.taskTrackingZone=null,em||(function Nb(i){em=i}(d),d.addToWindow(c)),this._watchAngularEvents(),a.run(()=>{this.taskTrackingZone=typeof Zone>"u"?null:Zone.current.get("TaskTrackingZone")})}_watchAngularEvents(){this._ngZone.onUnstable.subscribe({next:()=>{this._didWork=!0,this._isZoneStable=!1}}),this._ngZone.runOutsideAngular(()=>{this._ngZone.onStable.subscribe({next:()=>{fs.assertNotInAngularZone(),Qg(()=>{this._isZoneStable=!0,this._runCallbacksIfReady()})}})})}increasePendingRequestCount(){return this._pendingCount+=1,this._didWork=!0,this._pendingCount}decreasePendingRequestCount(){if(this._pendingCount-=1,this._pendingCount<0)throw new Error("pending async requests below zero");return this._runCallbacksIfReady(),this._pendingCount}isStable(){return this._isZoneStable&&0===this._pendingCount&&!this._ngZone.hasPendingMacrotasks}_runCallbacksIfReady(){if(this.isStable())Qg(()=>{for(;0!==this._callbacks.length;){let a=this._callbacks.pop();clearTimeout(a.timeoutId),a.doneCb(this._didWork)}this._didWork=!1});else{let a=this.getPendingTasks();this._callbacks=this._callbacks.filter(c=>!c.updateCb||!c.updateCb(a)||(clearTimeout(c.timeoutId),!1)),this._didWork=!0}}getPendingTasks(){return this.taskTrackingZone?this.taskTrackingZone.macroTasks.map(a=>({source:a.source,creationLocation:a.creationLocation,data:a.data})):[]}addCallback(a,c,d){let h=-1;c&&c>0&&(h=setTimeout(()=>{this._callbacks=this._callbacks.filter(y=>y.timeoutId!==h),a(this._didWork,this.getPendingTasks())},c)),this._callbacks.push({doneCb:a,timeoutId:h,updateCb:d})}whenStable(a,c,d){if(d&&!this.taskTrackingZone)throw new Error('Task tracking zone is required when passing an update callback to whenStable(). Is "zone.js/plugins/task-tracking" loaded?');this.addCallback(a,c,d),this._runCallbacksIfReady()}getPendingRequestCount(){return this._pendingCount}registerApplication(a){this.registry.registerApplication(a,this)}unregisterApplication(a){this.registry.unregisterApplication(a)}findProviders(a,c,d){return[]}}return i.\u0275fac=function(a){return new(a||i)($e(fs),$e(l_),$e(Ou))},i.\u0275prov=gt({token:i,factory:i.\u0275fac}),i})(),l_=(()=>{class i{constructor(){this._applications=new Map}registerApplication(a,c){this._applications.set(a,c)}unregisterApplication(a){this._applications.delete(a)}unregisterAllApplications(){this._applications.clear()}getTestability(a){return this._applications.get(a)||null}getAllTestabilities(){return Array.from(this._applications.values())}getAllRootElements(){return Array.from(this._applications.keys())}findTestabilityInTree(a,c=!0){return em?.findTestabilityInTree(this,a,c)??null}}return i.\u0275fac=function(a){return new(a||i)},i.\u0275prov=gt({token:i,factory:i.\u0275fac,providedIn:"platform"}),i})(),Fu=null;const tm=new on("AllowMultipleToken"),Ff=new on("PlatformDestroyListeners");class nm{constructor(s,a){this.name=s,this.token=a}}function f_(i,s,a=[]){const c=`Platform: ${s}`,d=new on(c);return(h=[])=>{let y=im();if(!y||y.injector.get(tm,!1)){const I=[...a,...h,{provide:d,useValue:!0}];i?i(I):function Pb(i){if(Fu&&!Fu.get(tm,!1))throw new ge(400,!1);Fu=i;const s=i.get(p_);(function Lf(i){const s=i.get($w,null);s&&s.forEach(a=>a())})(i)}(function Vf(i=[],s){return Sc.create({name:s,providers:[{provide:dy,useValue:"platform"},{provide:Ff,useValue:new Set([()=>Fu=null])},...i]})}(I,c))}return function Uf(i){const s=im();if(!s)throw new ge(401,!1);return s}()}}function im(){return Fu?.get(p_)??null}let p_=(()=>{class i{constructor(a){this._injector=a,this._modules=[],this._destroyListeners=[],this._destroyed=!1}bootstrapModuleFactory(a,c){const d=function g_(i,s){let a;return a="noop"===i?new Rb:("zone.js"===i?void 0:i)||new fs(s),a}(c?.ngZone,function ki(i){return{enableLongStackTrace:!1,shouldCoalesceEventChangeDetection:!(!i||!i.ngZoneEventCoalescing)||!1,shouldCoalesceRunChangeDetection:!(!i||!i.ngZoneRunCoalescing)||!1}}(c)),h=[{provide:fs,useValue:d}];return d.run(()=>{const y=Sc.create({providers:h,parent:this.injector,name:a.moduleType.name}),I=a.create(y),E=I.injector.get(Wh,null);if(!E)throw new ge(402,!1);return d.runOutsideAngular(()=>{const T=d.onError.subscribe({next:M=>{E.handleError(M)}});I.onDestroy(()=>{lo(this._modules,I),T.unsubscribe()})}),function Bf(i,s,a){try{const c=a();return rv(c)?c.catch(d=>{throw s.runOutsideAngular(()=>i.handleError(d)),d}):c}catch(c){throw s.runOutsideAngular(()=>i.handleError(c)),c}}(E,d,()=>{const T=I.injector.get(Zg);return T.runInitializers(),T.donePromise.then(()=>(function Sd(i){Vt(i,"Expected localeId to be defined"),"string"==typeof i&&(mt=i.toLowerCase().replace(/_/g,"-"))}(I.injector.get($d,Td)||Td),this._moduleDoBootstrap(I),I))})})}bootstrapModule(a,c=[]){const d=$f({},c);return function d_(i,s,a){const c=new pn(a);return Promise.resolve(c)}(0,0,a).then(h=>this.bootstrapModuleFactory(h,d))}_moduleDoBootstrap(a){const c=a.injector.get(jf);if(a._bootstrapComponents.length>0)a._bootstrapComponents.forEach(d=>c.bootstrap(d));else{if(!a.instance.ngDoBootstrap)throw new ge(403,!1);a.instance.ngDoBootstrap(c)}this._modules.push(a)}onDestroy(a){this._destroyListeners.push(a)}get injector(){return this._injector}destroy(){if(this._destroyed)throw new ge(404,!1);this._modules.slice().forEach(c=>c.destroy()),this._destroyListeners.forEach(c=>c());const a=this._injector.get(Ff,null);a&&(a.forEach(c=>c()),a.clear()),this._destroyed=!0}get destroyed(){return this._destroyed}}return i.\u0275fac=function(a){return new(a||i)($e(Sc))},i.\u0275prov=gt({token:i,factory:i.\u0275fac,providedIn:"platform"}),i})();function $f(i,s){return Array.isArray(s)?s.reduce($f,i):{...i,...s}}let jf=(()=>{class i{constructor(a,c,d){this._zone=a,this._injector=c,this._exceptionHandler=d,this._bootstrapListeners=[],this._views=[],this._runningTick=!1,this._stable=!0,this._destroyed=!1,this._destroyListeners=[],this.componentTypes=[],this.components=[],this._onMicrotaskEmptySubscription=this._zone.onMicrotaskEmpty.subscribe({next:()=>{this._zone.run(()=>{this.tick()})}});const h=new N.y(I=>{this._stable=this._zone.isStable&&!this._zone.hasPendingMacrotasks&&!this._zone.hasPendingMicrotasks,this._zone.runOutsideAngular(()=>{I.next(this._stable),I.complete()})}),y=new N.y(I=>{let E;this._zone.runOutsideAngular(()=>{E=this._zone.onStable.subscribe(()=>{fs.assertNotInAngularZone(),Qg(()=>{!this._stable&&!this._zone.hasPendingMacrotasks&&!this._zone.hasPendingMicrotasks&&(this._stable=!0,I.next(!0))})})});const T=this._zone.onUnstable.subscribe(()=>{fs.assertInAngularZone(),this._stable&&(this._stable=!1,this._zone.runOutsideAngular(()=>{I.next(!1)}))});return()=>{E.unsubscribe(),T.unsubscribe()}});this.isStable=(0,ne.T)(h,y.pipe((0,ae.B)()))}get destroyed(){return this._destroyed}get injector(){return this._injector}bootstrap(a,c){const d=a instanceof jh;if(!this._injector.get(Zg).done)throw!d&&Rn(a),new ge(405,false);let y;y=d?a:this._injector.get(Zl).resolveComponentFactory(a),this.componentTypes.push(y.componentType);const I=function Yw(i){return i.isBoundToModule}(y)?void 0:this._injector.get(uo),T=y.create(Sc.NULL,[],c||y.selector,I),M=T.location.nativeElement,F=T.injector.get(zd,null);return F?.registerApplication(M),T.onDestroy(()=>{this.detachView(T.hostView),lo(this.components,T),F?.unregisterApplication(M)}),this._loadComponent(T),T}tick(){if(this._runningTick)throw new ge(101,!1);try{this._runningTick=!0;for(let a of this._views)a.detectChanges()}catch(a){this._zone.runOutsideAngular(()=>this._exceptionHandler.handleError(a))}finally{this._runningTick=!1}}attachView(a){const c=a;this._views.push(c),c.attachToAppRef(this)}detachView(a){const c=a;lo(this._views,c),c.detachFromAppRef()}_loadComponent(a){this.attachView(a.hostView),this.tick(),this.components.push(a);const c=this._injector.get(o_,[]);c.push(...this._bootstrapListeners),c.forEach(d=>d(a))}ngOnDestroy(){if(!this._destroyed)try{this._destroyListeners.forEach(a=>a()),this._views.slice().forEach(a=>a.destroy()),this._onMicrotaskEmptySubscription.unsubscribe()}finally{this._destroyed=!0,this._views=[],this._bootstrapListeners=[],this._destroyListeners=[]}}onDestroy(a){return this._destroyListeners.push(a),()=>lo(this._destroyListeners,a)}destroy(){if(this._destroyed)throw new ge(406,!1);const a=this._injector;a.destroy&&!a.destroyed&&a.destroy()}get viewCount(){return this._views.length}warnIfDestroyed(){}}return i.\u0275fac=function(a){return new(a||i)($e(fs),$e(Cc),$e(Wh))},i.\u0275prov=gt({token:i,factory:i.\u0275fac,providedIn:"root"}),i})();function lo(i,s){const a=i.indexOf(s);a>-1&&i.splice(a,1)}function rl(){return!1}let Xw=(()=>{class i{}return i.__NG_ELEMENT_ID__=kb,i})();function kb(i){return function Fb(i,s,a){if(qo(i)&&!a){const c=Xn(i.index,s);return new Xh(c,c)}return 47&i.type?new Xh(s[16],s):null}(Jn(),xe(),16==(16&i))}class I_{constructor(){}supports(s){return Rc(s)}create(s){return new am(s)}}const Vb=(i,s)=>s;class am{constructor(s){this.length=0,this._linkedRecords=null,this._unlinkedRecords=null,this._previousItHead=null,this._itHead=null,this._itTail=null,this._additionsHead=null,this._additionsTail=null,this._movesHead=null,this._movesTail=null,this._removalsHead=null,this._removalsTail=null,this._identityChangesHead=null,this._identityChangesTail=null,this._trackByFn=s||Vb}forEachItem(s){let a;for(a=this._itHead;null!==a;a=a._next)s(a)}forEachOperation(s){let a=this._itHead,c=this._removalsHead,d=0,h=null;for(;a||c;){const y=!c||a&&a.currentIndex<cm(c,d,h)?a:c,I=cm(y,d,h),E=y.currentIndex;if(y===c)d--,c=c._nextRemoved;else if(a=a._next,null==y.previousIndex)d++;else{h||(h=[]);const T=I-d,M=E-d;if(T!=M){for(let q=0;q<T;q++){const te=q<h.length?h[q]:h[q]=0,ye=te+q;M<=ye&&ye<T&&(h[q]=te+1)}h[y.previousIndex]=M-T}}I!==E&&s(y,I,E)}}forEachPreviousItem(s){let a;for(a=this._previousItHead;null!==a;a=a._nextPrevious)s(a)}forEachAddedItem(s){let a;for(a=this._additionsHead;null!==a;a=a._nextAdded)s(a)}forEachMovedItem(s){let a;for(a=this._movesHead;null!==a;a=a._nextMoved)s(a)}forEachRemovedItem(s){let a;for(a=this._removalsHead;null!==a;a=a._nextRemoved)s(a)}forEachIdentityChange(s){let a;for(a=this._identityChangesHead;null!==a;a=a._nextIdentityChange)s(a)}diff(s){if(null==s&&(s=[]),!Rc(s))throw new ge(900,!1);return this.check(s)?this:null}onDestroy(){}check(s){this._reset();let d,h,y,a=this._itHead,c=!1;if(Array.isArray(s)){this.length=s.length;for(let I=0;I<this.length;I++)h=s[I],y=this._trackByFn(I,h),null!==a&&Object.is(a.trackById,y)?(c&&(a=this._verifyReinsertion(a,h,y,I)),Object.is(a.item,h)||this._addIdentityChange(a,h)):(a=this._mismatch(a,h,y,I),c=!0),a=a._next}else d=0,function ZD(i,s){if(Array.isArray(i))for(let a=0;a<i.length;a++)s(i[a]);else{const a=i[va()]();let c;for(;!(c=a.next()).done;)s(c.value)}}(s,I=>{y=this._trackByFn(d,I),null!==a&&Object.is(a.trackById,y)?(c&&(a=this._verifyReinsertion(a,I,y,d)),Object.is(a.item,I)||this._addIdentityChange(a,I)):(a=this._mismatch(a,I,y,d),c=!0),a=a._next,d++}),this.length=d;return this._truncate(a),this.collection=s,this.isDirty}get isDirty(){return null!==this._additionsHead||null!==this._movesHead||null!==this._removalsHead||null!==this._identityChangesHead}_reset(){if(this.isDirty){let s;for(s=this._previousItHead=this._itHead;null!==s;s=s._next)s._nextPrevious=s._next;for(s=this._additionsHead;null!==s;s=s._nextAdded)s.previousIndex=s.currentIndex;for(this._additionsHead=this._additionsTail=null,s=this._movesHead;null!==s;s=s._nextMoved)s.previousIndex=s.currentIndex;this._movesHead=this._movesTail=null,this._removalsHead=this._removalsTail=null,this._identityChangesHead=this._identityChangesTail=null}}_mismatch(s,a,c,d){let h;return null===s?h=this._itTail:(h=s._prev,this._remove(s)),null!==(s=null===this._unlinkedRecords?null:this._unlinkedRecords.get(c,null))?(Object.is(s.item,a)||this._addIdentityChange(s,a),this._reinsertAfter(s,h,d)):null!==(s=null===this._linkedRecords?null:this._linkedRecords.get(c,d))?(Object.is(s.item,a)||this._addIdentityChange(s,a),this._moveAfter(s,h,d)):s=this._addAfter(new Bb(a,c),h,d),s}_verifyReinsertion(s,a,c,d){let h=null===this._unlinkedRecords?null:this._unlinkedRecords.get(c,null);return null!==h?s=this._reinsertAfter(h,s._prev,d):s.currentIndex!=d&&(s.currentIndex=d,this._addToMoves(s,d)),s}_truncate(s){for(;null!==s;){const a=s._next;this._addToRemovals(this._unlink(s)),s=a}null!==this._unlinkedRecords&&this._unlinkedRecords.clear(),null!==this._additionsTail&&(this._additionsTail._nextAdded=null),null!==this._movesTail&&(this._movesTail._nextMoved=null),null!==this._itTail&&(this._itTail._next=null),null!==this._removalsTail&&(this._removalsTail._nextRemoved=null),null!==this._identityChangesTail&&(this._identityChangesTail._nextIdentityChange=null)}_reinsertAfter(s,a,c){null!==this._unlinkedRecords&&this._unlinkedRecords.remove(s);const d=s._prevRemoved,h=s._nextRemoved;return null===d?this._removalsHead=h:d._nextRemoved=h,null===h?this._removalsTail=d:h._prevRemoved=d,this._insertAfter(s,a,c),this._addToMoves(s,c),s}_moveAfter(s,a,c){return this._unlink(s),this._insertAfter(s,a,c),this._addToMoves(s,c),s}_addAfter(s,a,c){return this._insertAfter(s,a,c),this._additionsTail=null===this._additionsTail?this._additionsHead=s:this._additionsTail._nextAdded=s,s}_insertAfter(s,a,c){const d=null===a?this._itHead:a._next;return s._next=d,s._prev=a,null===d?this._itTail=s:d._prev=s,null===a?this._itHead=s:a._next=s,null===this._linkedRecords&&(this._linkedRecords=new um),this._linkedRecords.put(s),s.currentIndex=c,s}_remove(s){return this._addToRemovals(this._unlink(s))}_unlink(s){null!==this._linkedRecords&&this._linkedRecords.remove(s);const a=s._prev,c=s._next;return null===a?this._itHead=c:a._next=c,null===c?this._itTail=a:c._prev=a,s}_addToMoves(s,a){return s.previousIndex===a||(this._movesTail=null===this._movesTail?this._movesHead=s:this._movesTail._nextMoved=s),s}_addToRemovals(s){return null===this._unlinkedRecords&&(this._unlinkedRecords=new um),this._unlinkedRecords.put(s),s.currentIndex=null,s._nextRemoved=null,null===this._removalsTail?(this._removalsTail=this._removalsHead=s,s._prevRemoved=null):(s._prevRemoved=this._removalsTail,this._removalsTail=this._removalsTail._nextRemoved=s),s}_addIdentityChange(s,a){return s.item=a,this._identityChangesTail=null===this._identityChangesTail?this._identityChangesHead=s:this._identityChangesTail._nextIdentityChange=s,s}}class Bb{constructor(s,a){this.item=s,this.trackById=a,this.currentIndex=null,this.previousIndex=null,this._nextPrevious=null,this._prev=null,this._next=null,this._prevDup=null,this._nextDup=null,this._prevRemoved=null,this._nextRemoved=null,this._nextAdded=null,this._nextMoved=null,this._nextIdentityChange=null}}class tE{constructor(){this._head=null,this._tail=null}add(s){null===this._head?(this._head=this._tail=s,s._nextDup=null,s._prevDup=null):(this._tail._nextDup=s,s._prevDup=this._tail,s._nextDup=null,this._tail=s)}get(s,a){let c;for(c=this._head;null!==c;c=c._nextDup)if((null===a||a<=c.currentIndex)&&Object.is(c.trackById,s))return c;return null}remove(s){const a=s._prevDup,c=s._nextDup;return null===a?this._head=c:a._nextDup=c,null===c?this._tail=a:c._prevDup=a,null===this._head}}class um{constructor(){this.map=new Map}put(s){const a=s.trackById;let c=this.map.get(a);c||(c=new tE,this.map.set(a,c)),c.add(s)}get(s,a){const d=this.map.get(s);return d?d.get(s,a):null}remove(s){const a=s.trackById;return this.map.get(a).remove(s)&&this.map.delete(a),s}get isEmpty(){return 0===this.map.size}clear(){this.map.clear()}}function cm(i,s,a){const c=i.previousIndex;if(null===c)return c;let d=0;return a&&c<a.length&&(d=a[c]),c+s+d}class Gd{constructor(){}supports(s){return s instanceof Map||sd(s)}create(){return new lm}}class lm{constructor(){this._records=new Map,this._mapHead=null,this._appendAfter=null,this._previousMapHead=null,this._changesHead=null,this._changesTail=null,this._additionsHead=null,this._additionsTail=null,this._removalsHead=null,this._removalsTail=null}get isDirty(){return null!==this._additionsHead||null!==this._changesHead||null!==this._removalsHead}forEachItem(s){let a;for(a=this._mapHead;null!==a;a=a._next)s(a)}forEachPreviousItem(s){let a;for(a=this._previousMapHead;null!==a;a=a._nextPrevious)s(a)}forEachChangedItem(s){let a;for(a=this._changesHead;null!==a;a=a._nextChanged)s(a)}forEachAddedItem(s){let a;for(a=this._additionsHead;null!==a;a=a._nextAdded)s(a)}forEachRemovedItem(s){let a;for(a=this._removalsHead;null!==a;a=a._nextRemoved)s(a)}diff(s){if(s){if(!(s instanceof Map||sd(s)))throw new ge(900,!1)}else s=new Map;return this.check(s)?this:null}onDestroy(){}check(s){this._reset();let a=this._mapHead;if(this._appendAfter=null,this._forEach(s,(c,d)=>{if(a&&a.key===d)this._maybeAddToChanges(a,c),this._appendAfter=a,a=a._next;else{const h=this._getOrCreateRecordForKey(d,c);a=this._insertBeforeOrAppend(a,h)}}),a){a._prev&&(a._prev._next=null),this._removalsHead=a;for(let c=a;null!==c;c=c._nextRemoved)c===this._mapHead&&(this._mapHead=null),this._records.delete(c.key),c._nextRemoved=c._next,c.previousValue=c.currentValue,c.currentValue=null,c._prev=null,c._next=null}return this._changesTail&&(this._changesTail._nextChanged=null),this._additionsTail&&(this._additionsTail._nextAdded=null),this.isDirty}_insertBeforeOrAppend(s,a){if(s){const c=s._prev;return a._next=s,a._prev=c,s._prev=a,c&&(c._next=a),s===this._mapHead&&(this._mapHead=a),this._appendAfter=s,s}return this._appendAfter?(this._appendAfter._next=a,a._prev=this._appendAfter):this._mapHead=a,this._appendAfter=a,null}_getOrCreateRecordForKey(s,a){if(this._records.has(s)){const d=this._records.get(s);this._maybeAddToChanges(d,a);const h=d._prev,y=d._next;return h&&(h._next=y),y&&(y._prev=h),d._next=null,d._prev=null,d}const c=new w_(s);return this._records.set(s,c),c.currentValue=a,this._addToAdditions(c),c}_reset(){if(this.isDirty){let s;for(this._previousMapHead=this._mapHead,s=this._previousMapHead;null!==s;s=s._next)s._nextPrevious=s._next;for(s=this._changesHead;null!==s;s=s._nextChanged)s.previousValue=s.currentValue;for(s=this._additionsHead;null!=s;s=s._nextAdded)s.previousValue=s.currentValue;this._changesHead=this._changesTail=null,this._additionsHead=this._additionsTail=null,this._removalsHead=null}}_maybeAddToChanges(s,a){Object.is(a,s.currentValue)||(s.previousValue=s.currentValue,s.currentValue=a,this._addToChanges(s))}_addToAdditions(s){null===this._additionsHead?this._additionsHead=this._additionsTail=s:(this._additionsTail._nextAdded=s,this._additionsTail=s)}_addToChanges(s){null===this._changesHead?this._changesHead=this._changesTail=s:(this._changesTail._nextChanged=s,this._changesTail=s)}_forEach(s,a){s instanceof Map?s.forEach(a):Object.keys(s).forEach(c=>a(s[c],c))}}class w_{constructor(s){this.key=s,this.previousValue=null,this.currentValue=null,this._nextPrevious=null,this._next=null,this._prev=null,this._nextAdded=null,this._nextRemoved=null,this._nextChanged=null}}function dm(){return new hm([new I_])}let hm=(()=>{class i{constructor(a){this.factories=a}static create(a,c){if(null!=c){const d=c.factories.slice();a=a.concat(d)}return new i(a)}static extend(a){return{provide:i,useFactory:c=>i.create(a,c||dm()),deps:[[i,new D,new Ni]]}}find(a){const c=this.factories.find(d=>d.supports(a));if(null!=c)return c;throw new ge(901,!1)}}return i.\u0275prov=gt({token:i,providedIn:"root",factory:dm}),i})();function E_(){return new fm([new Gd])}let fm=(()=>{class i{constructor(a){this.factories=a}static create(a,c){if(c){const d=c.factories.slice();a=a.concat(d)}return new i(a)}static extend(a){return{provide:i,useFactory:c=>i.create(a,c||E_()),deps:[[i,new D,new Ni]]}}find(a){const c=this.factories.find(d=>d.supports(a));if(c)return c;throw new ge(901,!1)}}return i.\u0275prov=gt({token:i,providedIn:"root",factory:E_}),i})();const nE=f_(null,"core",[]);let Hb=(()=>{class i{constructor(a){}}return i.\u0275fac=function(a){return new(a||i)($e(jf))},i.\u0275mod=fo({type:i}),i.\u0275inj=Yr({}),i})();function qd(i){return"boolean"==typeof i?i:null!=i&&"false"!==i}},3942:(lt,be,k)=>{k.d(be,{Z:()=>ze});var p=k(2090),B=k(4859),N=k(9681),ne=k(1877);class ae{constructor(ge,Ee){this._delegate=ge,this.firebase=Ee,(0,N._addComponent)(ge,new B.wA("app-compat",()=>this,"PUBLIC")),this.container=ge.container}get automaticDataCollectionEnabled(){return this._delegate.automaticDataCollectionEnabled}set automaticDataCollectionEnabled(ge){this._delegate.automaticDataCollectionEnabled=ge}get name(){return this._delegate.name}get options(){return this._delegate.options}delete(){return new Promise(ge=>{this._delegate.checkDestroyed(),ge()}).then(()=>(this.firebase.INTERNAL.removeApp(this.name),(0,N.deleteApp)(this._delegate)))}_getService(ge,Ee=N._DEFAULT_ENTRY_NAME){var we;this._delegate.checkDestroyed();const Re=this._delegate.container.getProvider(ge);return!Re.isInitialized()&&"EXPLICIT"===(null===(we=Re.getComponent())||void 0===we?void 0:we.instantiationMode)&&Re.initialize(),Re.getImmediate({identifier:Ee})}_removeServiceInstance(ge,Ee=N._DEFAULT_ENTRY_NAME){this._delegate.container.getProvider(ge).clearInstance(Ee)}_addComponent(ge){(0,N._addComponent)(this._delegate,ge)}_addOrOverwriteComponent(ge){(0,N._addOrOverwriteComponent)(this._delegate,ge)}toJSON(){return{name:this.name,automaticDataCollectionEnabled:this.automaticDataCollectionEnabled,options:this.options}}}const me=new p.LL("app-compat","Firebase",{"no-app":"No Firebase App '{$appName}' has been created - call Firebase App.initializeApp()","invalid-app-argument":"firebase.{$appName}() takes either no argument or a Firebase App instance."}),z=function pe(){const nt=function de(nt){const ge={},Ee={__esModule:!0,initializeApp:function Pe(X,ce={}){const _e=N.initializeApp(X,ce);if((0,p.r3)(ge,_e.name))return ge[_e.name];const K=new nt(_e,Ee);return ge[_e.name]=K,K},app:Re,registerVersion:N.registerVersion,setLogLevel:N.setLogLevel,onLog:N.onLog,apps:null,SDK_VERSION:N.SDK_VERSION,INTERNAL:{registerComponent:function De(X){const ce=X.name,_e=ce.replace("-compat","");if(N._registerComponent(X)&&"PUBLIC"===X.type){const K=(Y=Re())=>{if("function"!=typeof Y[_e])throw me.create("invalid-app-argument",{appName:ce});return Y[_e]()};void 0!==X.serviceProps&&(0,p.ZB)(K,X.serviceProps),Ee[_e]=K,nt.prototype[_e]=function(...Y){return this._getService.bind(this,ce).apply(this,X.multipleInstances?Y:[])}}return"PUBLIC"===X.type?Ee[_e]:null},removeApp:function we(X){delete ge[X]},useAsService:function He(X,ce){return"serverAuth"===ce?null:ce},modularAPIs:N}};function Re(X){if(!(0,p.r3)(ge,X=X||N._DEFAULT_ENTRY_NAME))throw me.create("no-app",{appName:X});return ge[X]}return Ee.default=Ee,Object.defineProperty(Ee,"apps",{get:function Ne(){return Object.keys(ge).map(X=>ge[X])}}),Re.App=nt,Ee}(ae);return nt.INTERNAL=Object.assign(Object.assign({},nt.INTERNAL),{createFirebaseNamespace:pe,extendNamespace:function ge(Ee){(0,p.ZB)(nt,Ee)},createSubscribe:p.ne,ErrorFactory:p.LL,deepExtend:p.ZB}),nt}(),H=new ne.Yd("@firebase/app-compat");if((0,p.jU)()&&void 0!==self.firebase){H.warn("\n    Warning: Firebase is already defined in the global scope. Please make sure\n    Firebase library is only loaded once.\n  ");const nt=self.firebase.SDK_VERSION;nt&&nt.indexOf("LITE")>=0&&H.warn("\n    Warning: You are trying to load Firebase while using Firebase Performance standalone script.\n    You should load Firebase Performance with this instance of Firebase to avoid loading duplicate code.\n    ")}const ze=z;!function Se(nt){(0,N.registerVersion)("@firebase/app-compat","0.2.0",nt)}()},9681:(lt,be,k)=>{k.r(be),k.d(be,{FirebaseError:()=>ne.ZR,SDK_VERSION:()=>ys,_DEFAULT_ENTRY_NAME:()=>un,_addComponent:()=>Xt,_addOrOverwriteComponent:()=>ir,_apps:()=>Vt,_clearComponents:()=>Yr,_components:()=>pt,_getProvider:()=>gt,_registerComponent:()=>Wt,_removeServiceInstance:()=>Ei,deleteApp:()=>bi,getApp:()=>Fn,getApps:()=>Qr,initializeApp:()=>Di,onLog:()=>Je,registerVersion:()=>sr,setLogLevel:()=>or});var p=k(5861),B=k(4859),N=k(1877),ne=k(2090),ae=k(8766);class ue{constructor(Ie){this.container=Ie}getPlatformInfoString(){return this.container.getProviders().map(Ke=>{if(function me($e){return"VERSION"===$e.getComponent()?.type}(Ke)){const yt=Ke.getImmediate();return`${yt.library}/${yt.version}`}return null}).filter(Ke=>Ke).join(" ")}}const de="@firebase/app",z=new N.Yd("@firebase/app"),un="[DEFAULT]",It={[de]:"fire-core","@firebase/app-compat":"fire-core-compat","@firebase/analytics":"fire-analytics","@firebase/analytics-compat":"fire-analytics-compat","@firebase/app-check":"fire-app-check","@firebase/app-check-compat":"fire-app-check-compat","@firebase/auth":"fire-auth","@firebase/auth-compat":"fire-auth-compat","@firebase/database":"fire-rtdb","@firebase/database-compat":"fire-rtdb-compat","@firebase/functions":"fire-fn","@firebase/functions-compat":"fire-fn-compat","@firebase/installations":"fire-iid","@firebase/installations-compat":"fire-iid-compat","@firebase/messaging":"fire-fcm","@firebase/messaging-compat":"fire-fcm-compat","@firebase/performance":"fire-perf","@firebase/performance-compat":"fire-perf-compat","@firebase/remote-config":"fire-rc","@firebase/remote-config-compat":"fire-rc-compat","@firebase/storage":"fire-gcs","@firebase/storage-compat":"fire-gcs-compat","@firebase/firestore":"fire-fst","@firebase/firestore-compat":"fire-fst-compat","fire-js":"fire-js",firebase:"fire-js-all"},Vt=new Map,pt=new Map;function Xt($e,Ie){try{$e.container.addComponent(Ie)}catch(Ke){z.debug(`Component ${Ie.name} failed to register with FirebaseApp ${$e.name}`,Ke)}}function ir($e,Ie){$e.container.addOrOverwriteComponent(Ie)}function Wt($e){const Ie=$e.name;if(pt.has(Ie))return z.debug(`There were multiple attempts to register component ${Ie}.`),!1;pt.set(Ie,$e);for(const Ke of Vt.values())Xt(Ke,$e);return!0}function gt($e,Ie){const Ke=$e.container.getProvider("heartbeat").getImmediate({optional:!0});return Ke&&Ke.triggerHeartbeat(),$e.container.getProvider(Ie)}function Ei($e,Ie,Ke=un){gt($e,Ie).clearInstance(Ke)}function Yr(){pt.clear()}const En=new ne.LL("app","Firebase",{"no-app":"No Firebase App '{$appName}' has been created - call Firebase App.initializeApp()","bad-app-name":"Illegal App name: '{$appName}","duplicate-app":"Firebase App named '{$appName}' already exists with different options or config","app-deleted":"Firebase App named '{$appName}' already deleted","no-options":"Need to provide options, when not being deployed to hosting via source.","invalid-app-argument":"firebase.{$appName}() takes either no argument or a Firebase App instance.","invalid-log-argument":"First argument to `onLog` must be null or a function.","idb-open":"Error thrown when opening IndexedDB. Original error: {$originalErrorMessage}.","idb-get":"Error thrown when reading from IndexedDB. Original error: {$originalErrorMessage}.","idb-set":"Error thrown when writing to IndexedDB. Original error: {$originalErrorMessage}.","idb-delete":"Error thrown when deleting from IndexedDB. Original error: {$originalErrorMessage}."});class Ui{constructor(Ie,Ke,yt){this._isDeleted=!1,this._options=Object.assign({},Ie),this._config=Object.assign({},Ke),this._name=Ke.name,this._automaticDataCollectionEnabled=Ke.automaticDataCollectionEnabled,this._container=yt,this.container.addComponent(new B.wA("app",()=>this,"PUBLIC"))}get automaticDataCollectionEnabled(){return this.checkDestroyed(),this._automaticDataCollectionEnabled}set automaticDataCollectionEnabled(Ie){this.checkDestroyed(),this._automaticDataCollectionEnabled=Ie}get name(){return this.checkDestroyed(),this._name}get options(){return this.checkDestroyed(),this._options}get config(){return this.checkDestroyed(),this._config}get container(){return this._container}get isDeleted(){return this._isDeleted}set isDeleted(Ie){this._isDeleted=Ie}checkDestroyed(){if(this.isDeleted)throw En.create("app-deleted",{appName:this._name})}}const ys="9.15.0";function Di($e,Ie={}){let Ke=$e;"object"!=typeof Ie&&(Ie={name:Ie});const yt=Object.assign({name:un,automaticDataCollectionEnabled:!1},Ie),wt=yt.name;if("string"!=typeof wt||!wt)throw En.create("bad-app-name",{appName:String(wt)});if(Ke||(Ke=(0,ne.aH)()),!Ke)throw En.create("no-options");const Kt=Vt.get(wt);if(Kt){if((0,ne.vZ)(Ke,Kt.options)&&(0,ne.vZ)(yt,Kt.config))return Kt;throw En.create("duplicate-app",{appName:wt})}const j=new B.H0(wt);for(const Z of pt.values())j.addComponent(Z);const $=new Ui(Ke,yt,j);return Vt.set(wt,$),$}function Fn($e=un){const Ie=Vt.get($e);if(!Ie&&$e===un)return Di();if(!Ie)throw En.create("no-app",{appName:$e});return Ie}function Qr(){return Array.from(Vt.values())}function bi($e){return ln.apply(this,arguments)}function ln(){return(ln=(0,p.Z)(function*($e){const Ie=$e.name;Vt.has(Ie)&&(Vt.delete(Ie),yield Promise.all($e.container.getProviders().map(Ke=>Ke.delete())),$e.isDeleted=!0)})).apply(this,arguments)}function sr($e,Ie,Ke){var yt;let wt=null!==(yt=It[$e])&&void 0!==yt?yt:$e;Ke&&(wt+=`-${Ke}`);const Kt=wt.match(/\s|\//),j=Ie.match(/\s|\//);if(Kt||j){const $=[`Unable to register library "${wt}" with version "${Ie}":`];return Kt&&$.push(`library name "${wt}" contains illegal characters (whitespace or "/")`),Kt&&j&&$.push("and"),j&&$.push(`version name "${Ie}" contains illegal characters (whitespace or "/")`),void z.warn($.join(" "))}Wt(new B.wA(`${wt}-version`,()=>({library:wt,version:Ie}),"VERSION"))}function Je($e,Ie){if(null!==$e&&"function"!=typeof $e)throw En.create("invalid-log-argument");(0,N.Am)($e,Ie)}function or($e){(0,N.Ub)($e)}const Un="firebase-heartbeat-store";let Lr=null;function bt(){return Lr||(Lr=(0,ae.X3)("firebase-heartbeat-database",1,{upgrade:($e,Ie)=>{0===Ie&&$e.createObjectStore(Un)}}).catch($e=>{throw En.create("idb-open",{originalErrorMessage:$e.message})})),Lr}function Et(){return(Et=(0,p.Z)(function*($e){try{return(yield bt()).transaction(Un).objectStore(Un).get(Dn($e))}catch(Ie){if(Ie instanceof ne.ZR)z.warn(Ie.message);else{const Ke=En.create("idb-get",{originalErrorMessage:Ie?.message});z.warn(Ke.message)}}})).apply(this,arguments)}function hn($e,Ie){return Kn.apply(this,arguments)}function Kn(){return(Kn=(0,p.Z)(function*($e,Ie){try{const yt=(yield bt()).transaction(Un,"readwrite");return yield yt.objectStore(Un).put(Ie,Dn($e)),yt.done}catch(Ke){if(Ke instanceof ne.ZR)z.warn(Ke.message);else{const yt=En.create("idb-set",{originalErrorMessage:Ke?.message});z.warn(yt.message)}}})).apply(this,arguments)}function Dn($e){return`${$e.name}!${$e.options.appId}`}class Ci{constructor(Ie){this.container=Ie,this._heartbeatsCache=null;const Ke=this.container.getProvider("app").getImmediate();this._storage=new jt(Ke),this._heartbeatsCachePromise=this._storage.read().then(yt=>(this._heartbeatsCache=yt,yt))}triggerHeartbeat(){var Ie=this;return(0,p.Z)(function*(){const yt=Ie.container.getProvider("platform-logger").getImmediate().getPlatformInfoString(),wt=Pt();if(null===Ie._heartbeatsCache&&(Ie._heartbeatsCache=yield Ie._heartbeatsCachePromise),Ie._heartbeatsCache.lastSentHeartbeatDate!==wt&&!Ie._heartbeatsCache.heartbeats.some(Kt=>Kt.date===wt))return Ie._heartbeatsCache.heartbeats.push({date:wt,agent:yt}),Ie._heartbeatsCache.heartbeats=Ie._heartbeatsCache.heartbeats.filter(Kt=>{const j=new Date(Kt.date).valueOf();return Date.now()-j<=2592e6}),Ie._storage.overwrite(Ie._heartbeatsCache)})()}getHeartbeatsHeader(){var Ie=this;return(0,p.Z)(function*(){if(null===Ie._heartbeatsCache&&(yield Ie._heartbeatsCachePromise),null===Ie._heartbeatsCache||0===Ie._heartbeatsCache.heartbeats.length)return"";const Ke=Pt(),{heartbeatsToSend:yt,unsentEntries:wt}=function Ti($e,Ie=1024){const Ke=[];let yt=$e.slice();for(const wt of $e){const Kt=Ke.find(j=>j.agent===wt.agent);if(Kt){if(Kt.dates.push(wt.date),br(Ke)>Ie){Kt.dates.pop();break}}else if(Ke.push({agent:wt.agent,dates:[wt.date]}),br(Ke)>Ie){Ke.pop();break}yt=yt.slice(1)}return{heartbeatsToSend:Ke,unsentEntries:yt}}(Ie._heartbeatsCache.heartbeats),Kt=(0,ne.L)(JSON.stringify({version:2,heartbeats:yt}));return Ie._heartbeatsCache.lastSentHeartbeatDate=Ke,wt.length>0?(Ie._heartbeatsCache.heartbeats=wt,yield Ie._storage.overwrite(Ie._heartbeatsCache)):(Ie._heartbeatsCache.heartbeats=[],Ie._storage.overwrite(Ie._heartbeatsCache)),Kt})()}}function Pt(){return(new Date).toISOString().substring(0,10)}class jt{constructor(Ie){this.app=Ie,this._canUseIndexedDBPromise=this.runIndexedDBEnvironmentCheck()}runIndexedDBEnvironmentCheck(){return(0,p.Z)(function*(){return!!(0,ne.hl)()&&(0,ne.eu)().then(()=>!0).catch(()=>!1)})()}read(){var Ie=this;return(0,p.Z)(function*(){return(yield Ie._canUseIndexedDBPromise)&&(yield function ht($e){return Et.apply(this,arguments)}(Ie.app))||{heartbeats:[]}})()}overwrite(Ie){var Ke=this;return(0,p.Z)(function*(){var yt;if(yield Ke._canUseIndexedDBPromise){const Kt=yield Ke.read();return hn(Ke.app,{lastSentHeartbeatDate:null!==(yt=Ie.lastSentHeartbeatDate)&&void 0!==yt?yt:Kt.lastSentHeartbeatDate,heartbeats:Ie.heartbeats})}})()}add(Ie){var Ke=this;return(0,p.Z)(function*(){var yt;if(yield Ke._canUseIndexedDBPromise){const Kt=yield Ke.read();return hn(Ke.app,{lastSentHeartbeatDate:null!==(yt=Ie.lastSentHeartbeatDate)&&void 0!==yt?yt:Kt.lastSentHeartbeatDate,heartbeats:[...Kt.heartbeats,...Ie.heartbeats]})}})()}}function br($e){return(0,ne.L)(JSON.stringify({version:2,heartbeats:$e})).length}!function Mn($e){Wt(new B.wA("platform-logger",Ie=>new ue(Ie),"PRIVATE")),Wt(new B.wA("heartbeat",Ie=>new Ci(Ie),"PRIVATE")),sr(de,"0.9.0",$e),sr(de,"0.9.0","esm2017"),sr("fire-js","")}("")},4859:(lt,be,k)=>{k.d(be,{H0:()=>de,wA:()=>N});var p=k(5861),B=k(2090);class N{constructor(z,H,Q){this.name=z,this.instanceFactory=H,this.type=Q,this.multipleInstances=!1,this.serviceProps={},this.instantiationMode="LAZY",this.onInstanceCreated=null}setInstantiationMode(z){return this.instantiationMode=z,this}setMultipleInstances(z){return this.multipleInstances=z,this}setServiceProps(z){return this.serviceProps=z,this}setInstanceCreatedCallback(z){return this.onInstanceCreated=z,this}}const ne="[DEFAULT]";class ae{constructor(z,H){this.name=z,this.container=H,this.component=null,this.instances=new Map,this.instancesDeferred=new Map,this.instancesOptions=new Map,this.onInitCallbacks=new Map}get(z){const H=this.normalizeInstanceIdentifier(z);if(!this.instancesDeferred.has(H)){const Q=new B.BH;if(this.instancesDeferred.set(H,Q),this.isInitialized(H)||this.shouldAutoInitialize())try{const Ue=this.getOrInitializeService({instanceIdentifier:H});Ue&&Q.resolve(Ue)}catch{}}return this.instancesDeferred.get(H).promise}getImmediate(z){var H;const Q=this.normalizeInstanceIdentifier(z?.identifier),Ue=null!==(H=z?.optional)&&void 0!==H&&H;if(!this.isInitialized(Q)&&!this.shouldAutoInitialize()){if(Ue)return null;throw Error(`Service ${this.name} is not available`)}try{return this.getOrInitializeService({instanceIdentifier:Q})}catch(Se){if(Ue)return null;throw Se}}getComponent(){return this.component}setComponent(z){if(z.name!==this.name)throw Error(`Mismatching Component ${z.name} for Provider ${this.name}.`);if(this.component)throw Error(`Component for ${this.name} has already been provided`);if(this.component=z,this.shouldAutoInitialize()){if(function me(pe){return"EAGER"===pe.instantiationMode}(z))try{this.getOrInitializeService({instanceIdentifier:ne})}catch{}for(const[H,Q]of this.instancesDeferred.entries()){const Ue=this.normalizeInstanceIdentifier(H);try{const Se=this.getOrInitializeService({instanceIdentifier:Ue});Q.resolve(Se)}catch{}}}}clearInstance(z=ne){this.instancesDeferred.delete(z),this.instancesOptions.delete(z),this.instances.delete(z)}delete(){var z=this;return(0,p.Z)(function*(){const H=Array.from(z.instances.values());yield Promise.all([...H.filter(Q=>"INTERNAL"in Q).map(Q=>Q.INTERNAL.delete()),...H.filter(Q=>"_delete"in Q).map(Q=>Q._delete())])})()}isComponentSet(){return null!=this.component}isInitialized(z=ne){return this.instances.has(z)}getOptions(z=ne){return this.instancesOptions.get(z)||{}}initialize(z={}){const{options:H={}}=z,Q=this.normalizeInstanceIdentifier(z.instanceIdentifier);if(this.isInitialized(Q))throw Error(`${this.name}(${Q}) has already been initialized`);if(!this.isComponentSet())throw Error(`Component ${this.name} has not been registered yet`);const Ue=this.getOrInitializeService({instanceIdentifier:Q,options:H});for(const[Se,ze]of this.instancesDeferred.entries())Q===this.normalizeInstanceIdentifier(Se)&&ze.resolve(Ue);return Ue}onInit(z,H){var Q;const Ue=this.normalizeInstanceIdentifier(H),Se=null!==(Q=this.onInitCallbacks.get(Ue))&&void 0!==Q?Q:new Set;Se.add(z),this.onInitCallbacks.set(Ue,Se);const ze=this.instances.get(Ue);return ze&&z(ze,Ue),()=>{Se.delete(z)}}invokeOnInitCallbacks(z,H){const Q=this.onInitCallbacks.get(H);if(Q)for(const Ue of Q)try{Ue(z,H)}catch{}}getOrInitializeService({instanceIdentifier:z,options:H={}}){let Q=this.instances.get(z);if(!Q&&this.component&&(Q=this.component.instanceFactory(this.container,{instanceIdentifier:(pe=z,pe===ne?void 0:pe),options:H}),this.instances.set(z,Q),this.instancesOptions.set(z,H),this.invokeOnInitCallbacks(Q,z),this.component.onInstanceCreated))try{this.component.onInstanceCreated(this.container,z,Q)}catch{}var pe;return Q||null}normalizeInstanceIdentifier(z=ne){return this.component?this.component.multipleInstances?z:ne:z}shouldAutoInitialize(){return!!this.component&&"EXPLICIT"!==this.component.instantiationMode}}class de{constructor(z){this.name=z,this.providers=new Map}addComponent(z){const H=this.getProvider(z.name);if(H.isComponentSet())throw new Error(`Component ${z.name} has already been registered with ${this.name}`);H.setComponent(z)}addOrOverwriteComponent(z){this.getProvider(z.name).isComponentSet()&&this.providers.delete(z.name),this.addComponent(z)}getProvider(z){if(this.providers.has(z))return this.providers.get(z);const H=new ae(z,this);return this.providers.set(z,H),H}getProviders(){return Array.from(this.providers.values())}}},1877:(lt,be,k)=>{k.d(be,{Am:()=>pe,Ub:()=>de,Yd:()=>me,in:()=>B});const p=[];var B=(()=>{return(z=B||(B={}))[z.DEBUG=0]="DEBUG",z[z.VERBOSE=1]="VERBOSE",z[z.INFO=2]="INFO",z[z.WARN=3]="WARN",z[z.ERROR=4]="ERROR",z[z.SILENT=5]="SILENT",B;var z})();const N={debug:B.DEBUG,verbose:B.VERBOSE,info:B.INFO,warn:B.WARN,error:B.ERROR,silent:B.SILENT},ne=B.INFO,ae={[B.DEBUG]:"log",[B.VERBOSE]:"log",[B.INFO]:"info",[B.WARN]:"warn",[B.ERROR]:"error"},ue=(z,H,...Q)=>{if(H<z.logLevel)return;const Ue=(new Date).toISOString(),Se=ae[H];if(!Se)throw new Error(`Attempted to log a message with an invalid logType (value: ${H})`);console[Se](`[${Ue}]  ${z.name}:`,...Q)};class me{constructor(H){this.name=H,this._logLevel=ne,this._logHandler=ue,this._userLogHandler=null,p.push(this)}get logLevel(){return this._logLevel}set logLevel(H){if(!(H in B))throw new TypeError(`Invalid value "${H}" assigned to \`logLevel\``);this._logLevel=H}setLogLevel(H){this._logLevel="string"==typeof H?N[H]:H}get logHandler(){return this._logHandler}set logHandler(H){if("function"!=typeof H)throw new TypeError("Value assigned to `logHandler` must be a function");this._logHandler=H}get userLogHandler(){return this._userLogHandler}set userLogHandler(H){this._userLogHandler=H}debug(...H){this._userLogHandler&&this._userLogHandler(this,B.DEBUG,...H),this._logHandler(this,B.DEBUG,...H)}log(...H){this._userLogHandler&&this._userLogHandler(this,B.VERBOSE,...H),this._logHandler(this,B.VERBOSE,...H)}info(...H){this._userLogHandler&&this._userLogHandler(this,B.INFO,...H),this._logHandler(this,B.INFO,...H)}warn(...H){this._userLogHandler&&this._userLogHandler(this,B.WARN,...H),this._logHandler(this,B.WARN,...H)}error(...H){this._userLogHandler&&this._userLogHandler(this,B.ERROR,...H),this._logHandler(this,B.ERROR,...H)}}function de(z){p.forEach(H=>{H.setLogLevel(z)})}function pe(z,H){for(const Q of p){let Ue=null;H&&H.level&&(Ue=N[H.level]),Q.userLogHandler=null===z?null:(Se,ze,...nt)=>{const ge=nt.map(Ee=>{if(null==Ee)return null;if("string"==typeof Ee)return Ee;if("number"==typeof Ee||"boolean"==typeof Ee)return Ee.toString();if(Ee instanceof Error)return Ee.message;try{return JSON.stringify(Ee)}catch{return null}}).filter(Ee=>Ee).join(" ");ze>=(Ue??Se.logLevel)&&z({level:B[ze].toLowerCase(),message:ge,args:nt,type:Se.name})}}}},259:(lt,be,k)=>{k.d(be,{C6:()=>p.getApps,KN:()=>p.registerVersion,Mq:()=>p.getApp,ZF:()=>p.initializeApp});var p=k(9681);(0,p.registerVersion)("firebase","9.15.0","app")},9260:(lt,be,k)=>{k.d(be,{Z:()=>p.Z});var p=k(3942);p.Z.registerVersion("firebase","9.15.0","app-compat")},9568:(lt,be,k)=>{k.r(be);var p=k(5861),B=k(3942),N=k(552),ne=k(2090),me=(k(9681),k(1877),k(4859));function de(){return window}function H(){return(H=(0,p.Z)(function*(U,R,L){var se;const{BuildInfo:Ae}=de();(0,N.ap)(R.sessionId,"AuthEvent did not contain a session ID");const it=yield Ee(R.sessionId),We={};return(0,N.aq)()?We.ibi=Ae.packageName:(0,N.ar)()?We.apn=Ae.packageName:(0,N.as)(U,"operation-not-supported-in-this-environment"),Ae.displayName&&(We.appDisplayName=Ae.displayName),We.sessionId=it,(0,N.at)(U,L,R.type,void 0,null!==(se=R.eventId)&&void 0!==se?se:void 0,We)})).apply(this,arguments)}function Ue(){return(Ue=(0,p.Z)(function*(U){const{BuildInfo:R}=de(),L={};(0,N.aq)()?L.iosBundleId=R.packageName:(0,N.ar)()?L.androidPackageName=R.packageName:(0,N.as)(U,"operation-not-supported-in-this-environment"),yield(0,N.au)(U,L)})).apply(this,arguments)}function nt(){return(nt=(0,p.Z)(function*(U,R,L){const{cordova:se}=de();let Ae=()=>{};try{yield new Promise((it,We)=>{let xt=null;function ut(){var Tt;it();const Cr=null===(Tt=se.plugins.browsertab)||void 0===Tt?void 0:Tt.close;"function"==typeof Cr&&Cr(),"function"==typeof L?.close&&L.close()}function gn(){xt||(xt=window.setTimeout(()=>{We((0,N.aw)(U,"redirect-cancelled-by-user"))},2e3))}function ar(){"visible"===document?.visibilityState&&gn()}R.addPassiveListener(ut),document.addEventListener("resume",gn,!1),(0,N.ar)()&&document.addEventListener("visibilitychange",ar,!1),Ae=()=>{R.removePassiveListener(ut),document.removeEventListener("resume",gn,!1),document.removeEventListener("visibilitychange",ar,!1),xt&&window.clearTimeout(xt)}})}finally{Ae()}})).apply(this,arguments)}function Ee(U){return we.apply(this,arguments)}function we(){return(we=(0,p.Z)(function*(U){const R=Re(U),L=yield crypto.subtle.digest("SHA-256",R);return Array.from(new Uint8Array(L)).map(Ae=>Ae.toString(16).padStart(2,"0")).join("")})).apply(this,arguments)}function Re(U){if((0,N.ap)(/[0-9a-zA-Z]+/.test(U),"Can only convert alpha-numeric strings"),typeof TextEncoder<"u")return(new TextEncoder).encode(U);const R=new ArrayBuffer(U.length),L=new Uint8Array(R);for(let se=0;se<U.length;se++)L[se]=U.charCodeAt(se);return L}class Ne extends N.ay{constructor(){super(...arguments),this.passiveListeners=new Set,this.initPromise=new Promise(R=>{this.resolveInialized=R})}addPassiveListener(R){this.passiveListeners.add(R)}removePassiveListener(R){this.passiveListeners.delete(R)}resetRedirect(){this.queuedRedirectEvent=null,this.hasHandledPotentialRedirect=!1}onEvent(R){return this.resolveInialized(),this.passiveListeners.forEach(L=>L(R)),super.onEvent(R)}initialized(){var R=this;return(0,p.Z)(function*(){yield R.initPromise})()}}function X(U){return ce.apply(this,arguments)}function ce(){return(ce=(0,p.Z)(function*(U){const R=yield Y()._get(he(U));return R&&(yield Y()._remove(he(U))),R})).apply(this,arguments)}function K(){const U=[],R="1234567890abcdefghijklmnopqrstuvwxyzABCDEFGHIJKLMNOPQRSTUVWXYZ";for(let L=0;L<20;L++){const se=Math.floor(Math.random()*R.length);U.push(R.charAt(se))}return U.join("")}function Y(){return(0,N.az)(N.b)}function he(U){return(0,N.aA)("authEvent",U.config.apiKey,U.name)}function Fe(U){if(!U?.includes("?"))return{};const[R,...L]=U.split("?");return(0,ne.zd)(L.join("?"))}const un=class Jt{constructor(){this._redirectPersistence=N.a,this._shouldInitProactively=!0,this.eventManagers=new Map,this.originValidationPromises={},this._completeRedirectFn=N.aB,this._overrideRedirectResult=N.aC}_initialize(R){var L=this;return(0,p.Z)(function*(){const se=R._key();let Ae=L.eventManagers.get(se);return Ae||(Ae=new Ne(R),L.eventManagers.set(se,Ae),L.attachCallbackListeners(R,Ae)),Ae})()}_openPopup(R){(0,N.as)(R,"operation-not-supported-in-this-environment")}_openRedirect(R,L,se,Ae){var it=this;return(0,p.Z)(function*(){!function ge(U){var R,L,se,Ae,it,We,xt,ut,gn,ar;const Tt=de();(0,N.ax)("function"==typeof(null===(R=Tt?.universalLinks)||void 0===R?void 0:R.subscribe),U,"invalid-cordova-configuration",{missingPlugin:"cordova-universal-links-plugin-fix"}),(0,N.ax)(typeof(null===(L=Tt?.BuildInfo)||void 0===L?void 0:L.packageName)<"u",U,"invalid-cordova-configuration",{missingPlugin:"cordova-plugin-buildInfo"}),(0,N.ax)("function"==typeof(null===(it=null===(Ae=null===(se=Tt?.cordova)||void 0===se?void 0:se.plugins)||void 0===Ae?void 0:Ae.browsertab)||void 0===it?void 0:it.openUrl),U,"invalid-cordova-configuration",{missingPlugin:"cordova-plugin-browsertab"}),(0,N.ax)("function"==typeof(null===(ut=null===(xt=null===(We=Tt?.cordova)||void 0===We?void 0:We.plugins)||void 0===xt?void 0:xt.browsertab)||void 0===ut?void 0:ut.isAvailable),U,"invalid-cordova-configuration",{missingPlugin:"cordova-plugin-browsertab"}),(0,N.ax)("function"==typeof(null===(ar=null===(gn=Tt?.cordova)||void 0===gn?void 0:gn.InAppBrowser)||void 0===ar?void 0:ar.open),U,"invalid-cordova-configuration",{missingPlugin:"cordova-plugin-inappbrowser"})}(R);const We=yield it._initialize(R);yield We.initialized(),We.resetRedirect(),(0,N.aD)(),yield it._originValidation(R);const xt=function De(U,R,L=null){return{type:R,eventId:L,urlResponse:null,sessionId:K(),postBody:null,tenantId:U.tenantId,error:(0,N.aw)(U,"no-auth-event")}}(R,se,Ae);yield function He(U,R){return Y()._set(he(U),R)}(R,xt);const ut=yield function z(U,R,L){return H.apply(this,arguments)}(R,xt,L),gn=yield function Se(U){const{cordova:R}=de();return new Promise(L=>{R.plugins.browsertab.isAvailable(se=>{let Ae=null;se?R.plugins.browsertab.openUrl(U):Ae=R.InAppBrowser.open(U,(0,N.av)()?"_blank":"_system","location=yes"),L(Ae)})})}(ut);return function ze(U,R,L){return nt.apply(this,arguments)}(R,We,gn)})()}_isIframeWebStorageSupported(R,L){throw new Error("Method not implemented.")}_originValidation(R){const L=R._key();return this.originValidationPromises[L]||(this.originValidationPromises[L]=function Q(U){return Ue.apply(this,arguments)}(R)),this.originValidationPromises[L]}attachCallbackListeners(R,L){const{universalLinks:se,handleOpenURL:Ae,BuildInfo:it}=de(),We=setTimeout((0,p.Z)(function*(){yield X(R),L.onEvent(It())}),500),xt=function(){var ar=(0,p.Z)(function*(Tt){clearTimeout(We);const Cr=yield X(R);let Bu=null;Cr&&Tt?.url&&(Bu=function _e(U,R){var L,se;const Ae=function Le(U){const R=Fe(U),L=R.link?decodeURIComponent(R.link):void 0,se=Fe(L).link,Ae=R.deep_link_id?decodeURIComponent(R.deep_link_id):void 0;return Fe(Ae).link||Ae||se||L||U}(R);if(Ae.includes("/__/auth/callback")){const it=Fe(Ae),We=it.firebaseError?function re(U){try{return JSON.parse(U)}catch{return null}}(decodeURIComponent(it.firebaseError)):null,xt=null===(se=null===(L=We?.code)||void 0===L?void 0:L.split("auth/"))||void 0===se?void 0:se[1],ut=xt?(0,N.aw)(xt):null;return ut?{type:U.type,eventId:U.eventId,tenantId:U.tenantId,error:ut,urlResponse:null,sessionId:null,postBody:null}:{type:U.type,eventId:U.eventId,tenantId:U.tenantId,sessionId:U.sessionId,urlResponse:Ae,postBody:null}}return null}(Cr,Tt.url)),L.onEvent(Bu||It())});return function(Cr){return ar.apply(this,arguments)}}();typeof se<"u"&&"function"==typeof se.subscribe&&se.subscribe(null,xt);const ut=Ae,gn=`${it.packageName.toLowerCase()}://`;de().handleOpenURL=function(){var ar=(0,p.Z)(function*(Tt){if(Tt.toLowerCase().startsWith(gn)&&xt({url:Tt}),"function"==typeof ut)try{ut(Tt)}catch(Cr){console.error(Cr)}});return function(Tt){return ar.apply(this,arguments)}}()}};function It(){return{type:"unknown",eventId:null,sessionId:null,urlResponse:null,postBody:null,tenantId:null,error:(0,N.aw)("no-auth-event")}}function Wt(){var U;return(null===(U=self?.location)||void 0===U?void 0:U.protocol)||null}function Ei(U=(0,ne.z$)()){return!("file:"!==Wt()&&"ionic:"!==Wt()&&"capacitor:"!==Wt()||!U.toLowerCase().match(/iphone|ipad|ipod|android/))}function ys(){try{const U=self.localStorage,R=N.aI();if(U)return U.setItem(R,"1"),U.removeItem(R),!function Ui(U=(0,ne.z$)()){return function gr(){return(0,ne.w1)()&&11===document?.documentMode}()||function En(U=(0,ne.z$)()){return/Edge\/\d+/.test(U)}(U)}()||(0,ne.hl)()}catch{return Di()&&(0,ne.hl)()}return!1}function Di(){return typeof global<"u"&&"WorkerGlobalScope"in global&&"importScripts"in global}function Fn(){return(function gt(){return"http:"===Wt()||"https:"===Wt()}()||(0,ne.ru)()||Ei())&&!function Yr(){return(0,ne.b$)()||(0,ne.UG)()}()&&ys()&&!Di()}function Qr(){return Ei()&&typeof document<"u"}function ln(){return(ln=(0,p.Z)(function*(){return!!Qr()&&new Promise(U=>{const R=setTimeout(()=>{U(!1)},1e3);document.addEventListener("deviceready",()=>{clearTimeout(R),U(!0)})})})).apply(this,arguments)}const Je={LOCAL:"local",NONE:"none",SESSION:"session"},or=N.ax,mr="persistence";function Un(U){return Lr.apply(this,arguments)}function Lr(){return(Lr=(0,p.Z)(function*(U){yield U._initializationPromise;const R=ht(),L=N.aA(mr,U.config.apiKey,U.name);R&&R.setItem(L,U._getPersistence())})).apply(this,arguments)}function ht(){var U;try{return(null===(U=function sr(){return typeof window<"u"?window:null}())||void 0===U?void 0:U.sessionStorage)||null}catch{return null}}const Et=N.ax;class hn{constructor(){this.browserResolver=N.az(N.k),this.cordovaResolver=N.az(un),this.underlyingResolver=null,this._redirectPersistence=N.a,this._completeRedirectFn=N.aB,this._overrideRedirectResult=N.aC}_initialize(R){var L=this;return(0,p.Z)(function*(){return yield L.selectUnderlyingResolver(),L.assertedUnderlyingResolver._initialize(R)})()}_openPopup(R,L,se,Ae){var it=this;return(0,p.Z)(function*(){return yield it.selectUnderlyingResolver(),it.assertedUnderlyingResolver._openPopup(R,L,se,Ae)})()}_openRedirect(R,L,se,Ae){var it=this;return(0,p.Z)(function*(){return yield it.selectUnderlyingResolver(),it.assertedUnderlyingResolver._openRedirect(R,L,se,Ae)})()}_isIframeWebStorageSupported(R,L){this.assertedUnderlyingResolver._isIframeWebStorageSupported(R,L)}_originValidation(R){return this.assertedUnderlyingResolver._originValidation(R)}get _shouldInitProactively(){return Qr()||this.browserResolver._shouldInitProactively}get assertedUnderlyingResolver(){return Et(this.underlyingResolver,"internal-error"),this.underlyingResolver}selectUnderlyingResolver(){var R=this;return(0,p.Z)(function*(){if(R.underlyingResolver)return;const L=yield function bi(){return ln.apply(this,arguments)}();R.underlyingResolver=L?R.cordovaResolver:R.browserResolver})()}}function Kn(U){return U.unwrap()}function Xr(U){return Ci(U)}function Ci(U){const{_tokenResponse:R}=U instanceof ne.ZR?U.customData:U;if(!R)return null;if(!(U instanceof ne.ZR)&&"temporaryProof"in R&&"phoneNumber"in R)return N.P.credentialFromResult(U);const L=R.providerId;if(!L||L===N.o.PASSWORD)return null;let se;switch(L){case N.o.GOOGLE:se=N.Q;break;case N.o.FACEBOOK:se=N.N;break;case N.o.GITHUB:se=N.T;break;case N.o.TWITTER:se=N.W;break;default:const{oauthIdToken:Ae,oauthAccessToken:it,oauthTokenSecret:We,pendingToken:xt,nonce:ut}=R;return it||We||Ae||xt?xt?L.startsWith("saml.")?N.aL._create(L,xt):N.J._fromParams({providerId:L,signInMethod:L,pendingToken:xt,idToken:Ae,accessToken:it}):new N.U(L).credential({idToken:Ae,accessToken:it,rawNonce:ut}):null}return U instanceof ne.ZR?se.credentialFromError(U):se.credentialFromResult(U)}function Pt(U,R){return R.catch(L=>{throw L instanceof ne.ZR&&function Yn(U,R){var L;const se=null===(L=R.customData)||void 0===L?void 0:L._tokenResponse;if("auth/multi-factor-auth-required"===R?.code)R.resolver=new br(U,N.an(U,R));else if(se){const Ae=Ci(R),it=R;Ae&&(it.credential=Ae,it.tenantId=se.tenantId||void 0,it.email=se.email||void 0,it.phoneNumber=se.phoneNumber||void 0)}}(U,L),L}).then(L=>{const Ae=L.user;return{operationType:L.operationType,credential:Xr(L),additionalUserInfo:N.al(L),user:Mn.getOrCreate(Ae)}})}function Ti(U,R){return jt.apply(this,arguments)}function jt(){return(jt=(0,p.Z)(function*(U,R){const L=yield R;return{verificationId:L.verificationId,confirm:se=>Pt(U,L.confirm(se))}})).apply(this,arguments)}class br{constructor(R,L){this.resolver=L,this.auth=function Dn(U){return U.wrapped()}(R)}get session(){return this.resolver.session}get hints(){return this.resolver.hints}resolveSignIn(R){return Pt(Kn(this.auth),this.resolver.resolveSignIn(R))}}class Mn{constructor(R){this._delegate=R,this.multiFactor=N.ao(R)}static getOrCreate(R){return Mn.USER_MAP.has(R)||Mn.USER_MAP.set(R,new Mn(R)),Mn.USER_MAP.get(R)}delete(){return this._delegate.delete()}reload(){return this._delegate.reload()}toJSON(){return this._delegate.toJSON()}getIdTokenResult(R){return this._delegate.getIdTokenResult(R)}getIdToken(R){return this._delegate.getIdToken(R)}linkAndRetrieveDataWithCredential(R){return this.linkWithCredential(R)}linkWithCredential(R){var L=this;return(0,p.Z)(function*(){return Pt(L.auth,N.Z(L._delegate,R))})()}linkWithPhoneNumber(R,L){var se=this;return(0,p.Z)(function*(){return Ti(se.auth,N.l(se._delegate,R,L))})()}linkWithPopup(R){var L=this;return(0,p.Z)(function*(){return Pt(L.auth,N.d(L._delegate,R,hn))})()}linkWithRedirect(R){var L=this;return(0,p.Z)(function*(){return yield Un(N.aE(L.auth)),N.g(L._delegate,R,hn)})()}reauthenticateAndRetrieveDataWithCredential(R){return this.reauthenticateWithCredential(R)}reauthenticateWithCredential(R){var L=this;return(0,p.Z)(function*(){return Pt(L.auth,N._(L._delegate,R))})()}reauthenticateWithPhoneNumber(R,L){return Ti(this.auth,N.r(this._delegate,R,L))}reauthenticateWithPopup(R){return Pt(this.auth,N.e(this._delegate,R,hn))}reauthenticateWithRedirect(R){var L=this;return(0,p.Z)(function*(){return yield Un(N.aE(L.auth)),N.h(L._delegate,R,hn)})()}sendEmailVerification(R){return N.ab(this._delegate,R)}unlink(R){var L=this;return(0,p.Z)(function*(){return yield N.ak(L._delegate,R),L})()}updateEmail(R){return N.ag(this._delegate,R)}updatePassword(R){return N.ah(this._delegate,R)}updatePhoneNumber(R){return N.u(this._delegate,R)}updateProfile(R){return N.af(this._delegate,R)}verifyBeforeUpdateEmail(R,L){return N.ac(this._delegate,R,L)}get emailVerified(){return this._delegate.emailVerified}get isAnonymous(){return this._delegate.isAnonymous}get metadata(){return this._delegate.metadata}get phoneNumber(){return this._delegate.phoneNumber}get providerData(){return this._delegate.providerData}get refreshToken(){return this._delegate.refreshToken}get tenantId(){return this._delegate.tenantId}get displayName(){return this._delegate.displayName}get email(){return this._delegate.email}get photoURL(){return this._delegate.photoURL}get providerId(){return this._delegate.providerId}get uid(){return this._delegate.uid}get auth(){return this._delegate.auth}}Mn.USER_MAP=new WeakMap;const $e=N.ax;let Ie=(()=>{class U{constructor(L,se){if(this.app=L,se.isInitialized())return this._delegate=se.getImmediate(),void this.linkUnderlyingAuth();const{apiKey:Ae}=L.options;$e(Ae,"invalid-api-key",{appName:L.name}),$e(Ae,"invalid-api-key",{appName:L.name});const it=typeof window<"u"?hn:void 0;this._delegate=se.initialize({options:{persistence:yt(Ae,L.name),popupRedirectResolver:it}}),this._delegate._updateErrorMap(N.B),this.linkUnderlyingAuth()}get emulatorConfig(){return this._delegate.emulatorConfig}get currentUser(){return this._delegate.currentUser?Mn.getOrCreate(this._delegate.currentUser):null}get languageCode(){return this._delegate.languageCode}set languageCode(L){this._delegate.languageCode=L}get settings(){return this._delegate.settings}get tenantId(){return this._delegate.tenantId}set tenantId(L){this._delegate.tenantId=L}useDeviceLanguage(){this._delegate.useDeviceLanguage()}signOut(){return this._delegate.signOut()}useEmulator(L,se){N.G(this._delegate,L,se)}applyActionCode(L){return N.a2(this._delegate,L)}checkActionCode(L){return N.a3(this._delegate,L)}confirmPasswordReset(L,se){return N.a1(this._delegate,L,se)}createUserWithEmailAndPassword(L,se){var Ae=this;return(0,p.Z)(function*(){return Pt(Ae._delegate,N.a5(Ae._delegate,L,se))})()}fetchProvidersForEmail(L){return this.fetchSignInMethodsForEmail(L)}fetchSignInMethodsForEmail(L){return N.aa(this._delegate,L)}isSignInWithEmailLink(L){return N.a8(this._delegate,L)}getRedirectResult(){var L=this;return(0,p.Z)(function*(){$e(Fn(),L._delegate,"operation-not-supported-in-this-environment");const se=yield N.j(L._delegate,hn);return se?Pt(L._delegate,Promise.resolve(se)):{credential:null,user:null}})()}addFrameworkForLogging(L){!function Vt(U,R){(0,N.aE)(U)._logFramework(R)}(this._delegate,L)}onAuthStateChanged(L,se,Ae){const{next:it,error:We,complete:xt}=Ke(L,se,Ae);return this._delegate.onAuthStateChanged(it,We,xt)}onIdTokenChanged(L,se,Ae){const{next:it,error:We,complete:xt}=Ke(L,se,Ae);return this._delegate.onIdTokenChanged(it,We,xt)}sendSignInLinkToEmail(L,se){return N.a7(this._delegate,L,se)}sendPasswordResetEmail(L,se){return N.a0(this._delegate,L,se||void 0)}setPersistence(L){var se=this;return(0,p.Z)(function*(){let Ae;switch(function Ln(U,R){or(Object.values(Je).includes(R),U,"invalid-persistence-type"),(0,ne.b$)()?or(R!==Je.SESSION,U,"unsupported-persistence-type"):(0,ne.UG)()?or(R===Je.NONE,U,"unsupported-persistence-type"):Di()?or(R===Je.NONE||R===Je.LOCAL&&(0,ne.hl)(),U,"unsupported-persistence-type"):or(R===Je.NONE||ys(),U,"unsupported-persistence-type")}(se._delegate,L),L){case Je.SESSION:Ae=N.a;break;case Je.LOCAL:Ae=(yield N.az(N.i)._isAvailable())?N.i:N.b;break;case Je.NONE:Ae=N.L;break;default:return N.as("argument-error",{appName:se._delegate.name})}return se._delegate.setPersistence(Ae)})()}signInAndRetrieveDataWithCredential(L){return this.signInWithCredential(L)}signInAnonymously(){return Pt(this._delegate,N.X(this._delegate))}signInWithCredential(L){return Pt(this._delegate,N.Y(this._delegate,L))}signInWithCustomToken(L){return Pt(this._delegate,N.$(this._delegate,L))}signInWithEmailAndPassword(L,se){return Pt(this._delegate,N.a6(this._delegate,L,se))}signInWithEmailLink(L,se){return Pt(this._delegate,N.a9(this._delegate,L,se))}signInWithPhoneNumber(L,se){return Ti(this._delegate,N.s(this._delegate,L,se))}signInWithPopup(L){var se=this;return(0,p.Z)(function*(){return $e(Fn(),se._delegate,"operation-not-supported-in-this-environment"),Pt(se._delegate,N.c(se._delegate,L,hn))})()}signInWithRedirect(L){var se=this;return(0,p.Z)(function*(){return $e(Fn(),se._delegate,"operation-not-supported-in-this-environment"),yield Un(se._delegate),N.f(se._delegate,L,hn)})()}updateCurrentUser(L){return this._delegate.updateCurrentUser(L)}verifyPasswordResetCode(L){return N.a4(this._delegate,L)}unwrap(){return this._delegate}_delete(){return this._delegate._delete()}linkUnderlyingAuth(){this._delegate.wrapped=()=>this}}return U.Persistence=Je,U})();function Ke(U,R,L){let se=U;"function"!=typeof U&&({next:se,error:R,complete:L}=U);const Ae=se;return{next:We=>Ae(We&&Mn.getOrCreate(We)),error:R,complete:L}}function yt(U,R){const L=function bt(U,R){const L=ht();if(!L)return[];const se=N.aA(mr,U,R);switch(L.getItem(se)){case Je.NONE:return[N.L];case Je.LOCAL:return[N.i,N.a];case Je.SESSION:return[N.a];default:return[]}}(U,R);if(typeof self<"u"&&!L.includes(N.i)&&L.push(N.i),typeof window<"u")for(const se of[N.b,N.a])L.includes(se)||L.push(se);return L.includes(N.L)||L.push(N.L),L}class wt{constructor(){this.providerId="phone",this._delegate=new N.P(Kn(B.Z.auth()))}static credential(R,L){return N.P.credential(R,L)}verifyPhoneNumber(R,L){return this._delegate.verifyPhoneNumber(R,L)}unwrap(){return this._delegate}}wt.PHONE_SIGN_IN_METHOD=N.P.PHONE_SIGN_IN_METHOD,wt.PROVIDER_ID=N.P.PROVIDER_ID;const Kt=N.ax;class j{constructor(R,L,se=B.Z.app()){var Ae;Kt(null===(Ae=se.options)||void 0===Ae?void 0:Ae.apiKey,"invalid-api-key",{appName:se.name}),this._delegate=new N.R(R,L,se.auth()),this.type=this._delegate.type}clear(){this._delegate.clear()}render(){return this._delegate.render()}verify(){return this._delegate.verify()}}!function Z(U){U.INTERNAL.registerComponent(new me.wA("auth-compat",R=>{const L=R.getProvider("app-compat").getImmediate(),se=R.getProvider("auth");return new Ie(L,se)},"PUBLIC").setServiceProps({ActionCodeInfo:{Operation:{EMAIL_SIGNIN:N.A.EMAIL_SIGNIN,PASSWORD_RESET:N.A.PASSWORD_RESET,RECOVER_EMAIL:N.A.RECOVER_EMAIL,REVERT_SECOND_FACTOR_ADDITION:N.A.REVERT_SECOND_FACTOR_ADDITION,VERIFY_AND_CHANGE_EMAIL:N.A.VERIFY_AND_CHANGE_EMAIL,VERIFY_EMAIL:N.A.VERIFY_EMAIL}},EmailAuthProvider:N.M,FacebookAuthProvider:N.N,GithubAuthProvider:N.T,GoogleAuthProvider:N.Q,OAuthProvider:N.U,SAMLAuthProvider:N.V,PhoneAuthProvider:wt,PhoneMultiFactorGenerator:N.m,RecaptchaVerifier:j,TwitterAuthProvider:N.W,Auth:Ie,AuthCredential:N.H,Error:ne.ZR}).setInstantiationMode("LAZY").setMultipleInstances(!1)),U.registerVersion("@firebase/auth-compat","0.3.0")}(B.Z)},8766:(lt,be,k)=>{k.d(be,{Lj:()=>Pe,X3:()=>Re});var p=k(5861);let N,ne;const me=new WeakMap,de=new WeakMap,pe=new WeakMap,z=new WeakMap,H=new WeakMap;let Se={get(ce,_e,K){if(ce instanceof IDBTransaction){if("done"===_e)return de.get(ce);if("objectStoreNames"===_e)return ce.objectStoreNames||pe.get(ce);if("store"===_e)return K.objectStoreNames[1]?void 0:K.objectStore(K.objectStoreNames[0])}return Ee(ce[_e])},set:(ce,_e,K)=>(ce[_e]=K,!0),has:(ce,_e)=>ce instanceof IDBTransaction&&("done"===_e||"store"===_e)||_e in ce};function ge(ce){return"function"==typeof ce?function nt(ce){return ce!==IDBDatabase.prototype.transaction||"objectStoreNames"in IDBTransaction.prototype?function ue(){return ne||(ne=[IDBCursor.prototype.advance,IDBCursor.prototype.continue,IDBCursor.prototype.continuePrimaryKey])}().includes(ce)?function(..._e){return ce.apply(we(this),_e),Ee(me.get(this))}:function(..._e){return Ee(ce.apply(we(this),_e))}:function(_e,...K){const Y=ce.call(we(this),_e,...K);return pe.set(Y,_e.sort?_e.sort():[_e]),Ee(Y)}}(ce):(ce instanceof IDBTransaction&&function Ue(ce){if(de.has(ce))return;const _e=new Promise((K,Y)=>{const he=()=>{ce.removeEventListener("complete",re),ce.removeEventListener("error",Le),ce.removeEventListener("abort",Le)},re=()=>{K(),he()},Le=()=>{Y(ce.error||new DOMException("AbortError","AbortError")),he()};ce.addEventListener("complete",re),ce.addEventListener("error",Le),ce.addEventListener("abort",Le)});de.set(ce,_e)}(ce),((ce,_e)=>_e.some(K=>ce instanceof K))(ce,function ae(){return N||(N=[IDBDatabase,IDBObjectStore,IDBIndex,IDBCursor,IDBTransaction])}())?new Proxy(ce,Se):ce)}function Ee(ce){if(ce instanceof IDBRequest)return function Q(ce){const _e=new Promise((K,Y)=>{const he=()=>{ce.removeEventListener("success",re),ce.removeEventListener("error",Le)},re=()=>{K(Ee(ce.result)),he()},Le=()=>{Y(ce.error),he()};ce.addEventListener("success",re),ce.addEventListener("error",Le)});return _e.then(K=>{K instanceof IDBCursor&&me.set(K,ce)}).catch(()=>{}),H.set(_e,ce),_e}(ce);if(z.has(ce))return z.get(ce);const _e=ge(ce);return _e!==ce&&(z.set(ce,_e),H.set(_e,ce)),_e}const we=ce=>H.get(ce);function Re(ce,_e,{blocked:K,upgrade:Y,blocking:he,terminated:re}={}){const Le=indexedDB.open(ce,_e),Fe=Ee(Le);return Y&&Le.addEventListener("upgradeneeded",dt=>{Y(Ee(Le.result),dt.oldVersion,dt.newVersion,Ee(Le.transaction))}),K&&Le.addEventListener("blocked",()=>K()),Fe.then(dt=>{re&&dt.addEventListener("close",()=>re()),he&&dt.addEventListener("versionchange",()=>he())}).catch(()=>{}),Fe}function Pe(ce,{blocked:_e}={}){const K=indexedDB.deleteDatabase(ce);return _e&&K.addEventListener("blocked",()=>_e()),Ee(K).then(()=>{})}const Ne=["get","getKey","getAll","getAllKeys","count"],De=["put","add","delete","clear"],He=new Map;function X(ce,_e){if(!(ce instanceof IDBDatabase)||_e in ce||"string"!=typeof _e)return;if(He.get(_e))return He.get(_e);const K=_e.replace(/FromIndex$/,""),Y=_e!==K,he=De.includes(K);if(!(K in(Y?IDBIndex:IDBObjectStore).prototype)||!he&&!Ne.includes(K))return;const re=function(){var Le=(0,p.Z)(function*(Fe,...dt){const Jt=this.transaction(Fe,he?"readwrite":"readonly");let un=Jt.store;return Y&&(un=un.index(dt.shift())),(yield Promise.all([un[K](...dt),he&&Jt.done]))[0]});return function(dt){return Le.apply(this,arguments)}}();return He.set(_e,re),re}!function ze(ce){Se=ce(Se)}(ce=>({...ce,get:(_e,K,Y)=>X(_e,K)||ce.get(_e,K,Y),has:(_e,K)=>!!X(_e,K)||ce.has(_e,K)}))},5861:(lt,be,k)=>{function p(N,ne,ae,ue,me,de,pe){try{var z=N[de](pe),H=z.value}catch(Q){return void ae(Q)}z.done?ne(H):Promise.resolve(H).then(ue,me)}function B(N){return function(){var ne=this,ae=arguments;return new Promise(function(ue,me){var de=N.apply(ne,ae);function pe(H){p(de,ue,me,pe,z,"next",H)}function z(H){p(de,ue,me,pe,z,"throw",H)}pe(void 0)})}}k.d(be,{Z:()=>B})}},lt=>{lt(lt.s=9425)}]);